# 关系数据库 索引操作


# 索引

在`关系数据库`中，如果有上万甚至上亿条记录，在查找记录的时候，想要获得非常快的速度，就需要使用索引。  
`索引`是关系数据库中对某一列或多个列的值进行预排序的数据结构。通过使用索引，可以让数据库系统`不必扫描整个表`，而是直接定位到符合条件的记录，这样就大大`加快`了`查询速度`。  
`students`表:  
|id|class_id|name|gender|score|
|:----|:----|:----|:----|:----|
|1|1|小明|M|90|
|2|1|小红|F|95|
|3|1|小军|M|88|

### 如果要经常根据`score`列进行查询，就可以对`score列`创建索引：

```sql
ALTER TABLE students
ADD INDEX idx_score (score);
```

### 使用`ADD INDEX idx_score (score)`就创建了一个名称为`idx_score`，使用列`score`的索引。索引名称是任意的，索引如果有多列，可以在括号里依次写上，例如：

```sql
ALTER TABLE students
ADD INDEX idx_name_score (name, score);
```

索引的效率取决于索引列的值是否散列，即该列的值如果越互不相同，那么索引效率越高。反过来，如果记录的列存在大量相同的值，例如`gender`列，大约一半的记录值是`M`，另一半是`F`，因此，对该列创建索引就没有意义。

## 唯一索引

在设计关系数据表的时候，看上去唯一的列，例如身份证号、邮箱地址等，因为他们具有业务含义，因此不宜作为主键。  
但是，这些列根据业务要求，又具有唯一性约束：即不能出现两条记录存储了同一个身份证号。这个时候，就可以给该列添加一个唯一索引。例如，我们假设`students`表的`name`不能重复：

```sql
ALTER TABLE students
ADD UNIQUE INDEX uni_name (name);
```

通过`UNIQUE`关键字我们就添加了一个唯一索引。  
也可以只对某一列添加一个唯一约束而不创建唯一索引：

```sql
ALTER TABLE students
ADD CONSTRAINT uni_name UNIQUE (name);
```

这种情况下，`name`列没有索引，但仍然具有唯一性保证。

无论是否创建索引，对于用户和应用程序来说，使用关系数据库不会有任何区别。这里的意思是说，当我们在数据库中查询时，如果有相应的索引可用，数据库系统就会自动使用索引来提高查询效率，如果没有索引，查询也能正常执行，只是速度会变慢。因此，索引可以在使用数据库的过程中逐步优化

> 通过对数据库表创建索引，可以提高查询速度。
> 通过创建唯一索引，可以保证某一列的值具有唯一性。
> 数据库索引对于用户和应用程序来说都是透明的。


# 网络基础知识


# 网络基础知识

## 1、简述ISO/OSI七层模型的分层与作用
|分层|作用|
|:----|:----|
|应用层|应用系统，提供用户服务 例如：HTTP、HTTPS、FTP、Telnet、SSH、SMTP、POP3|
|表示层|把数据转换为能与接收者的系统格式兼容并适合传输的格式，数据表示，加密，压缩|
|会话层|负责在数据传输中设置和维护计算机网络中两台计算机之间的通信连接。确定数据是否需要进行网络传递 分流网络传递还是本地保存|
|传输层|对数据分组，对报文进行分组(发送时)、组装(接收时)提供传输协议的选择：TCP (传输控制协议) :可靠的，面向连接的传输协议 (可靠，准确) (慢)UDP (用户数据报协议) :不可靠的，面向无连接的传输协议 (快) (不可靠)。端口封装，差错校验，滑动窗口，留空|
|网络层|网络层（Network Layer）决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络资料。例如:互联网协议（IP）等。1.IP地址编址2.路由选择3.静态路由4.动态路由
|数据链路层|数据链路层（Data Link Layer）负责网络寻址、错误侦测和改错。1.MAC地址编址2.MAC地址寻址3.差错校验|
|物理层|物理层（Physical Layer）在局域网上发送数据帧（Data Frame）1.数据实际传输2.电气特性定义|

## 2、TCP/IP四层模型与作用？
|分层|协议|
|:----|:----|
|应用层|HTTP、HTTPS、FTP、Telnet、SSH、SMTP、DNS|
|传输层|TCP、UDP|
|网络层|ICMP、IGMP、IP、ARP、RARP|
|数据链路层、物理层|PPP、PPPOE|
## 3、TCP协议与UDP协议工作在哪一层，作用是什么？
传输层，对报文进行分组(发送时)、组装(接收时)提供  
当进程需要传输可靠的数据时应使用TCP，当进程需要高效传输数据，可以忽略可靠性时应使用UDP协议。
## 4、简述TCP三次握手的过程。  

![三次握手](/images/tcp1.gif)  
  
1. 第一次握手：Client将标志位SYN置为1，随机产生一个值seq=J，并将该数据包发送给Server，Client进入SYN_SENT状态，等待Server确认。
2. 第二次握手：Server收到数据包后由标志位SYN=1知道Client请求建立连接，Server将标志位SYN和ACK都置为1，ack=J+1，随机产生一个值seq=K，并将该数据包发送给Client以确认连接请求，Server进入SYN_RCVD状态。
3. 第三次握手：Client收到确认后，检查ack是否为J+1，ACK是否为1，如果正确则将标志位ACK置为1，ack=K+1，并将该数据包发送给Server，Server检查ack是否为K+1，ACK是否为1，如果正确则连接建立成功，Client和Server进入ESTABLISHED状态，完成三次握手，随后Client与Server之间可以开始传输数据了。

## 5、简述TCP包头的内容。
![TCP报文段](/images/tcp.png)  
  
1. 源端口和目的端口：各占 2 个字节，分别写入源端口和目的端口。IP 地址 + 端口号就可以确定一个进程地址
2. 序号/序列号（Sequense Number，SN）：在一个 TCP 连接中传送的字节流中的每一个字节都按顺序编号。该字段表示本报文段所发送的数据的第一个字节的序号。初始序号称为 Init Sequense Number, ISN（序号/序列号这个字段很重要，大家留个印象，下文会详细讲解）
例如，一报文段的序号是 101，共有 100 字节的数据。这就表明：本报文段的数据的第一个字节的序号是 101，最后一个字节的序号是 200。显然，下一个报文段的数据序号应当从 201 开始，即下一个报文段的序号字段值应为 201。

3. 确认号 ack：期望收到对方下一个报文段的第一个数据字节的序号。若确认号为 N，则表明：到序号 N-1 为止的所有数据都已正确收到。
4. 数据偏移（首部长度）：它指出 TCP 报文段的数据起始处距离 TCP 报文段的起始处有多远。这个字段实际上是指出TCP报文段的首部长度。
5. 保留：占 6 位，应置为 0，保留为今后使用。
6. 标志位：
|标志位|作用|
|:----|:----|
|URG|紧急指针（urgent pointer）有效。
|ACK|确认序号有效|
|PSH|接收方应该尽快将这个报文交给应用层。|
|RST|重置连接。|
|SYN|发起一个新连接。|
|FIN|释放一个连接。|
  
不要将确认序号Ack与标志位中的ACK搞混了。  
确认方Ack=发起方Req+1，两端配对。

## 6、简述TCP四次挥手的过程。
![四次挥手](/images/tcp2.gif)  
  
1. 第一次挥手：Client发送一个FIN，用来关闭Client到Server的数据传送，Client进入FIN_WAIT_1状态。
2. 第二次挥手：Server收到FIN后，发送一个ACK给Client，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号），Server进入CLOSE_WAIT状态。
3. 第三次挥手：Server发送一个FIN，用来关闭Server到Client的数据传送，Server进入LAST_ACK状态。
4. 第四次挥手：Client收到FIN后，Client进入TIME_WAIT状态，接着发送一个ACK给Server，确认序号为收到序号+1，Server进入CLOSED状态，完成四次挥手。  

## 7、172.22.141.231/26，该IP位于哪个网段？该网段拥有多少可用IP地址？广播地址是什么？
```sh
A类IP 10.1.1.1    标准子网掩码: 255.0.0.0
子网掩码二进制: 1111111.00000000.00000000.00000000
IP地址前8位是网络地址,后24位是主机地址
10.0.0.0-10.255.255.255
```
```sh
B类IP 172.16.1.1    标准子网掩码: 255.255.0.0
子网掩码二进制: 1111111.11111111.00000000.00000000
IP地址前16位是网络地址,后16位是主机地址
172.16.0.0-172.31.255.255
```
```sh
C类IP 192.168.1.1    标准子网掩码: 255.255.255.0
子网掩码二进制:   11111111.1111111.11111111.00000000
IP地址前24位是网络地址，后8位是主机地址
192.168.0.0-192.168.255.255
```

## 8、简述IP地址的分类。
A类：（1.0.0.0-126.0.0.0）（默认子网掩码：255.0.0.0或 0xFF000000）  
  
第一个字节为网络号，后三个字节为主机号。该类IP地址的最前面为“0”，所以地址的网络号取值于1~126之间。  
  
一般用于大型网络。  
  
B类：（128.1.0.0-191.255.0.0）（默认子网掩码：255.255.0.0或0xFFFF0000）  
  
前两个字节为网络号，后两个字节为主机号。该类IP地址的最前面为“10”，所以地址的网络号取值于128~191之间。  
  
一般用于中等规模网络。  
  
C类：（192.0.1.0-223.255.255.0）（子网掩码：255.255.255.0或 0xFFFFFF00  
  
前三个字节为网络号，最后一个字节为主机号。该类IP地址的最前面为“110”，所以地址的网络号取值于192~223之间。  
  
一般用于小型网络。  
  
D类：是多播地址。该类IP地址的最前面为“1110”，所以地址的网络号取值于224~239之间。一般用于多路广播用户[1] 。  
  
E类：是保留地址。该类IP地址的最前面为“1111”，所以地址的网络号取值于240~255之间。  
## 9、简述私有IP地址的作用。
1. 在全球范围内不具有唯一性，因此不能唯一标识一台联网的计算机。无需担心私有IP地址在全球范围内的冲突问题。
2. 私有IP地址的路由信息不能对外发布，外部的IP数据包无法路由到私有IP地址的计算机上。
3. IP数据包中的源地址和目的地址是私有IP地址的, 不能在Internet上的路由器间进行存储转发的操作。

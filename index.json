[{"categories":["å‘¨æŠ¥"],"content":" æ‘˜è¦ æ‰“å·¥äººå‘¨æŠ¥ï¼šè®°å½•æ¯å‘¨å€¼å¾—åˆ†äº«çš„å†…å®¹,å‘¨å››å‘å¸ƒ,ç¬¬ä¸€æœŸæ¬¢è¿å…³æ³¨ã€‚ ","date":"2023-01-12","objectID":"/2023-01-13/:0:0","tags":["å‘¨æŠ¥"],"title":"æ‰“å·¥äººå‘¨æŠ¥ï¼ˆç¬¬ä¸€æœŸï¼‰","uri":"/2023-01-13/"},{"categories":["å‘¨æŠ¥"],"content":"èµ„è®¯åŠ¨æ€ 1. è‹¹æœå®£å¸ƒé€iPhoneæˆ–iPadæ–°ç”¨æˆ·6ä¸ªæœˆiCloud+ è‹¹æœå…¬å¸å®£å¸ƒï¼Œè¿‘æœŸè´­ä¹°å¹¶æ¿€æ´»æ–°iPhoneæˆ–iPadçš„æ–°è®¢é˜…ç”¨æˆ·ï¼Œå¯å…è´¹è·å–6ä¸ªæœˆiCloud+æœåŠ¡ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä»Šå¹´1æœˆä¹‹åè´­ä¹°æ¿€æ´»iPhoneæˆ–iPadçš„ç”¨æˆ·ã€‚ åœç”¨ iCloud+ æœåŠ¡ä¸‰ä¸ªæœˆä»¥ä¸Šçš„åŸè®¢é˜…ç”¨æˆ·ä¹Ÿå¯äº«å—è¿™ä¸€ä¼˜æƒ â€ï¼Œè€ç”¨æˆ·åœç”¨ä¸€æ®µæ—¶é—´ä¹Ÿå¯ä»¥äº«å—ä¼˜æƒ ã€‚ 2. è‹¹æœæ¨å‡º Apple Business Connect å·¥å…· æ®è‹¹æœå®˜ç½‘æ¶ˆæ¯, Apple ä»Šæ—¥æ¨å‡ºäº† Apple Business Connectã€‚è¿™æ¬¾å…è´¹å·¥å…·è®©å„ç§è§„æ¨¡çš„ä¼ä¸šéƒ½èƒ½è®¤é¢†ç›¸åº”åœ°å€çš„åœ°ç‚¹å¡ï¼Œå¹¶è‡ªä¸»è®¾è®¡å…³é”®ä¿¡æ¯åœ¨ Apple åœ°å›¾ã€ä¿¡æ¯ã€é’±åŒ…ã€Siri ç­‰å„ç§ App ä¸­å‘è¶…è¿‡åäº¿ Apple ç”¨æˆ·å±•ç¤ºçš„æ–¹å¼ã€‚ Apple Business Connect æ˜¯ä¸€æ¬¾å…¨æ–°çš„å…è´¹å·¥å…·ï¼Œè®©ä¼ä¸šå¯ä»¥åœ¨åœ°ç‚¹å¡ä¸­è‡ªå®šä¹‰æ˜¾ç¤ºç²¾ç¾å›¾åƒã€å…³é”®ä¿¡æ¯å’Œç‰¹åˆ«ä¿ƒé”€æ´»åŠ¨ 3. TikTokæ¨å‡ºé™åˆ¶ç»™æˆäººè§‚ä¼—è§‚çœ‹çš„åŠŸèƒ½ TikTokå®£å¸ƒæ‰©å¤§å…¶è§‚ä¼—æ§åˆ¶åŠŸèƒ½ï¼Œä½¿åˆ›ä½œè€…èƒ½å¤Ÿå°†ä»–ä»¬çš„è§†é¢‘é™åˆ¶ç»™æˆäººè§‚ä¼—è§‚çœ‹ã€‚åœ¨è¿™æ¬¡æ‰©å±•ä¹‹å‰ï¼Œä»…é™æˆäººçš„è§‚ä¼—æ§åˆ¶åŠŸèƒ½ä»…é€‚ç”¨äºTikTok Liveã€‚ç°åœ¨ï¼Œè¯¥å…¬å¸ä¹Ÿå°†è¯¥åŠŸèƒ½å¼•å…¥å…¶çŸ­è§†é¢‘ã€‚ 4. iPhone 16 Proæˆ–å–æ¶ˆçµåŠ¨å²› è¿‘æ—¥ï¼Œæ®9to5MacæŠ¥é“ï¼Œæœ‰ä¸¤ä»½æŠ¥å‘Šæ˜¾ç¤ºï¼Œè‹¹æœåœ¨æ˜å¹´æ¨å‡ºçš„iPhone 16ç³»åˆ—ï¼ˆæˆ–ä»…é™iPhone 16 Proæœºå‹ï¼‰å°†é…å¤‡å±ä¸‹Face IDä¼ æ„Ÿå™¨ã€‚è¿™æ„å‘³ç€è‹¹æœå®Œå…¨å¯ä»¥å–æ¶ˆçµåŠ¨å²›ï¼ˆæˆ–åˆ˜æµ·ï¼‰ï¼Œä»…ä¿ç•™1ä¸ªå‰æ‘„åœ†å½¢æ‰“å­”ã€‚ ","date":"2023-01-12","objectID":"/2023-01-13/:1:0","tags":["å‘¨æŠ¥"],"title":"æ‰“å·¥äººå‘¨æŠ¥ï¼ˆç¬¬ä¸€æœŸï¼‰","uri":"/2023-01-13/"},{"categories":["å‘¨æŠ¥"],"content":"äº’è”ç½‘ç¯å¢ƒ 1. é»‘é²¨è¢«çˆ†æ‹–æ¬ å‘˜å·¥ç¦»èŒè¡¥å¿é‡‘ï¼šCEOå¾®åšå˜å¤§å‹è®¨èµ”å¿é‡‘ç°åœº 1æœˆ11æ—¥æ¶ˆæ¯ï¼Œæ¸¸æˆæ‰‹æœºå‚å•†é»‘é²¨ç§‘æŠ€è¢«çˆ†æ‹–æ¬ ç¦»èŒå‘˜å·¥è¡¥å¿é‡‘ï¼Œé»‘é²¨æ‰‹æœºå‘éƒ¨åˆ†è¢«è£å‘˜å·¥å‘å¸ƒçŸ­ä¿¡ï¼Œå‘ŠçŸ¥æš‚æ— æ³•æŒ‰çº¦å®šé‡‘é¢å…¨é¢æ”¯ä»˜ç¦»èŒè¡¥å¿é‡‘ã€‚è¯¥é€šçŸ¥å¼•å‘å‘˜å·¥åå¼¹ï¼Œä¸å°‘å‘˜å·¥å¼€å¯ç»´æƒï¼Œåœ¨é»‘é²¨æ‰‹æœºåŠå…¬åœ°ä»¥åŠé»‘é²¨æ‰‹æœºCEOç½—è¯­å‘¨çš„å¾®åšè´¦å·ä¸‹ç•™è¨€è®¨å€ºï¼Œè¦æ±‚è¡¥å¿é‡‘èµ”å¿åˆ°ä½ã€‚ æ®äº†è§£ï¼Œè‡ªè…¾è®¯æ”¶è´­é»‘é²¨è®¡åˆ’ææµ…åï¼Œé»‘é²¨å†…éƒ¨é£æ³¢ä¸æ–­ã€‚ç»è¿‡å‡ è½®è£å‘˜åï¼Œé»‘é²¨å›¢é˜Ÿå·²ä»2022å¹´8æœˆçš„1000ä½™äººï¼Œå‡å°‘è‡³ç›®å‰çš„100å¤šäººï¼Œä»…ä¿ç•™äº’è”ç½‘ã€èŒèƒ½ç­‰å°‘æ•°éƒ¨é—¨ã€‚è€Œé»‘é²¨ç§‘æŠ€çš„å®˜åšä»å»å¹´10æœˆå¼€å§‹å†æ— æ›´æ–°ï¼Œæˆªè‡³ç›®å‰ï¼Œé»‘é²¨æ–¹é¢å°šæ— å›åº”ã€‚ 2. çˆ±å¥‡è‰ºAppå¼€å§‹é™åˆ¶ç”µè§†æŠ•å±ï¼šé»„é‡‘VIPåªæ”¯æŒ480PæŠ•å± çˆ±å¥‡è‰ºAppå¼€å§‹å¯¹æŠ•å±åŠŸèƒ½ä½œå‡ºé™åˆ¶ï¼Œä¹‹å‰é»„é‡‘VIPä¼šå‘˜æ”¯æŒæœ€é«˜4Kæ¸…æ™°åº¦æŠ•å±ï¼Œç°åœ¨åªèƒ½é€‰æœ€ä½çš„480Pæ¸…æ™°åº¦ï¼Œè¦æƒ³è¿›è¡Œ4KæŠ•å±å¿…é¡»è´­ä¹°ç™½é‡‘VIPä¼šå‘˜ã€‚çˆ±å¥‡è‰ºå®˜ç½‘æ˜¾ç¤ºï¼Œé»„é‡‘VIPä¼šå‘˜è¿ç»­åŒ…å¹´118å…ƒ/å¹´ï¼Œç”µè„‘ã€æ‰‹æœºã€å¹³æ¿å¯ç”¨ï¼Œç™½é‡‘VIPä¼šå‘˜è¿ç»­åŒ…å¹´198å…ƒ/ å¹´ï¼Œæ‹¥æœ‰é»„é‡‘VIPä¼šå‘˜æƒç›Šçš„åŒæ—¶ç”µè§†ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œé™ä½æŠ•å±çš„åˆ†è¾¨ç‡åï¼Œåªèƒ½é€¼ç€æƒ³è¦æŠ•å±ç”µè§†çš„ç”¨æˆ·é€‰æ‹©ç™½é‡‘VIPä¼šå‘˜ã€‚ 3. ç½‘æ˜“ï¼šä¸å¤®è§†ç½‘è¾¾æˆåˆä½œï¼Œæ­å»ºç½‘ç»œæ˜¥æ™šå…ƒå®‡å®™åˆ†ä¼šåœº ç½‘æ˜“å®£å¸ƒï¼Œå…¬å¸ä¸å¤®è§†ç½‘è¾¾æˆåˆä½œï¼Œè°ƒåŠ¨ç½‘æ˜“é›·ç«ã€ç½‘æ˜“ä¼ç¾²ã€ç½‘æ˜“äº’å¨±AI Labã€ç½‘æ˜“åŒºå—é“¾ç­‰å¤šä¸ªéƒ¨é—¨ï¼Œé›†åˆæ•°å­—å­ªç”Ÿã€åŒºå—é“¾ã€AIä½œç”»ã€AIæ­Œå£°åˆæˆç­‰æŠ€æœ¯ï¼Œä¸ºç½‘ç»œæ˜¥æ™šè§‚ä¼—æ­å»ºé¦–ä¸ªå…ƒå®‡å®™ä¼šåœºï¼Œå¯å®ç°ä¸‡äººå®æ—¶äº’åŠ¨ã€‚ 4. å› ç”µæ± è½¯ä»¶é—®é¢˜ï¼Œå®é©¬è®¡åˆ’å¬å›14000å¤šè¾†iXã€i4å’Œi7ç”µåŠ¨æ±½è½¦ å®é©¬å…¬å¸å¯¹è¶…è¿‡1.4ä¸‡è¾†ç”µåŠ¨è½¦å‘å¸ƒäº†å¬å›é€šçŸ¥ï¼ŒåŸå› æ˜¯è½¯ä»¶æ•…éšœå¯èƒ½å¯¼è‡´åŠ¨åŠ›æŸå¤±å’Œå¢åŠ ç¢°æ’çš„é£é™©ã€‚å¬å›èŒƒå›´åŒ…æ‹¬2021å¹´10æœˆ14æ—¥è‡³2022å¹´10æœˆ28æ—¥æœŸé—´ç”Ÿäº§çš„æŸäº›iX SUVä»¥åŠi4å’Œi7è½¿è½¦ã€‚è¯¥è½¯ä»¶é—®é¢˜ä¸é«˜å‹ç”µæ± ç”µå­æ§åˆ¶å•å…ƒæœ‰å…³ï¼Œå®é©¬å…¬å¸é€šè¿‡è‡ªå·±çš„å†…éƒ¨è´¨é‡æ§åˆ¶ç¨‹åºå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œç›®å‰æ²¡æœ‰æŠ¥å‘Šä»»ä½•å› å¬å›è€Œå¯¼è‡´çš„äº‹æ•…ã€æ’è½¦æˆ–å—ä¼¤ã€‚è¿™æ˜¯åœ¨ä¸åˆ°ä¸€å¹´æ—¶é—´é‡Œï¼Œå®é©¬æ–°ç”µåŠ¨è½¦ç³»åˆ—ç¬¬äºŒæ¬¡è¢«å¬å›ã€‚å»å¹´å¤å¤©ï¼Œç”±äºç”µæ± èµ·ç«çš„é£é™©ï¼Œè¯¥æ±½è½¦åˆ¶é€ å•†å¬å›äº† â€œå°‘é‡ â€œçš„2022æ¬¾i4è½¿è½¦å’ŒiX SUVã€‚ 5. ç™¾åº¦æ™ºèƒ½é©¾é©¶äº‹ä¸šç¾¤æ­£å¯åŠ¨å²—ä½è£æ’¤ ACEéƒ¨é—¨å…¨å‘˜æ— å¹´ç»ˆå¥– ç™¾åº¦æ™ºèƒ½é©¾é©¶äº‹ä¸šç¾¤ï¼ˆIDGï¼‰æ­£åœ¨è¿›è¡Œäººå‘˜è£æ’¤ã€‚æ­¤æ¬¡è£å‘˜é›†ä¸­åœ¨æ™ºèƒ½äº¤é€šäº‹ä¸šéƒ¨ï¼ˆACEï¼‰ä¸‹å±çš„è½¦è·¯ååŒã€æ™ºèƒ½ç½‘è”å’Œæ™ºèƒ½äº¤é€šä¸šåŠ¡éƒ¨ï¼Œè£æ’¤æ¯”ä¾‹è¾ƒå¤§ã€‚æ®çŸ¥æƒ…äººå£«é€éœ²ï¼Œæ™ºèƒ½äº¤é€šäº‹ä¸šéƒ¨ï¼ˆACEï¼‰å·²è¢«é€šçŸ¥å…¨å‘˜æ²¡æœ‰å¹´ç»ˆå¥–ã€‚ï¼ˆè´¢è”ç¤¾ï¼‰ ","date":"2023-01-12","objectID":"/2023-01-13/:2:0","tags":["å‘¨æŠ¥"],"title":"æ‰“å·¥äººå‘¨æŠ¥ï¼ˆç¬¬ä¸€æœŸï¼‰","uri":"/2023-01-13/"},{"categories":["å‘¨æŠ¥"],"content":"ç§‘æŠ€åˆ†äº« 1. Epic æ¸¸æˆé™å… æˆªæ­¢ 1 æœˆ 13 æ—¥ å½±å­æˆ˜æœ¯ åå·´æ‹‰å¤ªç©ºè®¡åˆ’ 2. thingsboard: å®Œå…¨å¼€æºçš„ç‰©è”ç½‘ IoT å¹³å° å®ƒä½¿ç”¨è¡Œä¸šçš„æ ‡å‡†ç‰©è”ç½‘åè®® MQTTã€CoAP å’Œ HTTP è¿æ¥è®¾å¤‡ï¼Œæ”¯æŒæ•°æ®æ”¶é›†ã€å¤„ç†ã€å¯è§†åŒ–å’Œè®¾å¤‡ç®¡ç†ç­‰åŠŸèƒ½ã€‚é€šè¿‡è¯¥é¡¹ç›®å¯å¿«é€Ÿå®ç°ç‰©è”ç½‘å¹³å°æ­å»ºï¼Œä»è€Œæˆä¸ºä¼—å¤šå¤§å‹ä¼ä¸šçš„é¦–é€‰ï¼Œè¡Œä¸šè¦†ç›–ç”µä¿¡ã€æ™ºæ…§åŸå¸‚ã€ç¯å¢ƒç›‘æµ‹ç­‰ã€‚ å®˜ç½‘https://thingsboard.io ä»“åº“thingsboard/thingsboard 3. ç§˜å¡”å†™ä½œçŒ«:AIå†™ä½œï¼Œæ–‡ç« è‡ªæˆ æ˜¯ä¸€æ¬¾é›† AI å†™ä½œã€å¤šäººåä½œã€æ–‡æœ¬æ ¡å¯¹ã€æ”¹å†™æ¶¦è‰²ç­‰åŠŸèƒ½ä¸ºä¸€ä½“çš„ AI åŸç”Ÿå†…å®¹åˆ›ä½œå¹³å°ã€‚é€‚åˆå„ç±»å†™ä½œåœºæ™¯åŠäººç¾¤ï¼Œå¦‚ä½œå®¶ã€å†™æ‰‹æˆ–å¾‹å¸ˆã€ç¼–è¾‘ï¼Œä»¥åŠå¤§å­¦ç”Ÿã€èŒåœºäººå£«ç­‰ã€‚ å®˜ç½‘https://xiezuocat.com/ 4. æ”¹å›¾ç¥å™¨ï¼šå›¾ç‰‡æ— æŸæ”¾å¤§ åˆ©ç”¨ AI æ™ºèƒ½åˆ†æï¼Œè¾¾åˆ°å›¾ç‰‡æ”¾å¤§æ•ˆæœï¼Œå¯æ¸…æ™°è§£æè¾¹ç¼˜è½®å»“ï¼Œå‡ ä¹æ²¡ä¼ªå½±ï¼Œéœ€å¾®ä¿¡ç™»å½•ã€‚ å®˜ç½‘https://img.logosc.cn/bigjpg 5. è¸¢è¸¢é›¶ GIF åŠ¨å›¾ï¼šå…è´¹åœ¨çº¿ GIF åŠ¨å›¾åˆ¶ä½œå·¥å…· è¸¢è¸¢é›¶å…è´¹åœ¨çº¿ GIF åŠ¨å›¾åˆ¶ä½œå·¥å…·ï¼Œç®€å•å¥½ç”¨ã€çµæ´»å¿«é€Ÿçš„åŠ¨å›¾åˆ¶ä½œä½“éªŒã€‚è§†é¢‘è½¬ GIFã€å¤šå›¾åˆæˆ GIFã€GIF åŠ¨å›¾ç¼–è¾‘ã€GIF è£å‰ªã€GIF å‹ç¼©ã€GIF è°ƒé€Ÿã€‚ å®˜ç½‘https://tt0.top/?ref=iui å…³æ³¨ æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ www.jobcher.com ","date":"2023-01-12","objectID":"/2023-01-13/:3:0","tags":["å‘¨æŠ¥"],"title":"æ‰“å·¥äººå‘¨æŠ¥ï¼ˆç¬¬ä¸€æœŸï¼‰","uri":"/2023-01-13/"},{"categories":["æ—¥å¸¸"],"content":" è½¬çœ¼é—´æ¥åˆ°äº†2022å¹´çš„å°¾å£°ï¼Œ2022å¹´ä¸ä»…ä»…å¯¹äºä¸–ç•Œæ¥è¯´ï¼Œè¿˜æ˜¯å¯¹äºæˆ‘ä¸ªäººæ¥è¯´éƒ½æ˜¯æ„ä¹‰éå‡¡çš„ä¸€å¹´ã€‚ ","date":"2022-12-30","objectID":"/20221230/:0:0","tags":["daliy"],"title":"é€†å¢ƒå’Œæˆé•¿-2022å¹´ç»ˆæ€»ç»“","uri":"/20221230/"},{"categories":["æ—¥å¸¸"],"content":"é€†å¢ƒå’Œæˆé•¿ 2022å¹´åˆåœ¨ä¸­å›½å¤§é™†ä»ç„¶å®è¡Œç€æœ€ä¸ºä¸¥æ ¼çš„æ¸…é›¶æ”¿ç­–å¹¶æ„ˆæ¼”æ„ˆçƒˆï¼ŒåŸå¸‚å±…æ°‘è¢«é™åˆ¶äººèº«è‡ªç”±ï¼Œå°±è¿å†œæ‘åœ°åŒºä¹Ÿè¢«å¤§é‡è¦æ±‚å±…å®¶éš”ç¦»ï¼Œä¸¥é‡æŸå®³äº†ä¸­å›½ç»æµå’Œç¤¾ä¼šæ´»åŠ›ã€‚ä¸­å›½å¤±ä¸šäººå£å†åˆ›æ–°é«˜ï¼Œå¤§é‡çš„æ¯•ä¸šç”Ÿæ‰¾ä¸åˆ°å·¥ä½œã€‚åœ¨ç¾å›½ï¼Œæœ€ä¸ºä¸¥é‡çš„é€šè´§è†¨èƒ€å¸­å·å…¨å›½ï¼Œé«˜æ˜‚çš„åŠ æ¯æ”¿ç­–ï¼ŒæŸå®³äº†åº•å±‚äººæ°‘å’Œå·¥è–ªé˜¶å±‚ã€‚åœ¨ä¸­ä¸œï¼Œå¡”åˆ©ç­æ­¦è£…é‡æ–°å é¢†é˜¿å¯Œæ±—ï¼Œé‡æ–°å®è¡Œæ”¿æ•™åˆä¸€çš„æš´åŠ›ç»Ÿæ²»ã€‚åœ¨ä¿„ç½—æ–¯ï¼Œçˆ†å‘äº†ä¹Œå…‹å…°æˆ˜äº‰ï¼Œå°†ä¿„ç½—æ–¯çœŸæ­£ä»è‹è”çš„é˜´å½±ä¸­è„±ç¦»å‡ºæ¥ã€‚åœ¨ä¸–ç•Œå„åœ°å‘ç”Ÿäº†å¤ªå¤šçš„å˜åŒ–ï¼Œ2022å¹´æ³¨å®šæ˜¯è¦è¢«è½½å…¥å²å†Œçš„ä¸€å¹´ã€‚ å¯¹äºæˆ‘ä¸ªäººæ¥è¯´ï¼Œ2022å¹´ä¹Ÿæ˜¯æˆé•¿éå¸¸å¤§çš„ä¸€å¹´ï¼Œæˆ‘ç»å†äº†è‡ªå·¥ä½œæ¥æœ€å¤§çš„å˜åŒ–ï¼Œæˆ‘ä»ä¸€å®¶å·¥ä½œäº†å¤šå¹´çš„ä¼ä¸šæ¯•ä¸šï¼Œå†æ¬¡è¿›å…¥äº†ç¤¾ä¼šçš„è¯•ç‚¼åœºä¸­æ±‚èŒï¼Œæ¥è§¦äº†æ›´å¤šçš„äººï¼Œç¢°åˆ°äº†æ›´å¤šçš„äº‹ï¼Œä¹Ÿæœ‰äº†æ›´å¤šçš„æ„Ÿæ‚Ÿã€‚æ›¾ç»çš„æˆ‘ä¼šè®²å·¥ä½œçœ‹çš„æ¯”ä¸€åˆ‡éƒ½é‡è¦ï¼Œé€šè¿‡å‹¤å¥‹å’ŒåŠªåŠ›å¯ä»¥æ”¹å˜ä¸€åˆ‡ï¼Œä½†æ˜¯ï¼Œç¤¾ä¼šçš„è§„åˆ™å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚å†³å®šä½ çš„ä¸ªäººä»·å€¼å¹¶ä¸æ˜¯è¿™äº›å¤–åœ¨çš„ä¸œè¥¿ï¼Œå†³å®šä½ ä¸ªäººä»·å€¼çš„æ˜¯ä½ è‡ªå·±å¯¹è‡ªå·±çš„çœ‹æ³•ã€‚ä½ è®¤ä¸ºè‡ªå·±æœ‰ä»·å€¼ï¼Œä½ å°±æ˜¯ä½ èƒ½å¤Ÿåšåˆ°æœ‰ä»·å€¼ã€‚ä½ è§‰å¾—è‡ªå·±ä¸é‡è¦ï¼Œåˆ«äººè‡ªç„¶è§‰å¾—ä½ ä¸é‡è¦ã€‚ åœ¨ğŸ†•çš„2023å¹´ï¼Œå¸Œæœ›ä¸–ç•Œå’Œå¹³ï¼Œäººäººå¹¸ç¦ï¼Œæ„¿ç”Ÿæ´»åœ¨è‹¦éš¾ä¸­çš„äººä»¬ï¼Œèƒ½å¤Ÿæ—©æ—¥è¿œç¦»è‹¦éš¾ï¼Œè®©å¹¸ç¦æ¥æ•²é—¨â€¦â€¦ å…³æ³¨ æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-12-30","objectID":"/20221230/:1:0","tags":["daliy"],"title":"é€†å¢ƒå’Œæˆé•¿-2022å¹´ç»ˆæ€»ç»“","uri":"/20221230/"},{"categories":["æ—¥å¸¸"],"content":"èƒŒæ™¯ æ‘˜è¦ å¾ˆå¤šæ—¶å€™,é¿å…ä¸äº†åŒæ—¶ä½¿ç”¨python2å’Œpython3çš„ç¯å¢ƒ,ä¹Ÿé¿å…ä¸äº†ä¸åŒçš„å·¥ä½œæ‰€éœ€è¦ä¸åŒç‰ˆæœ¬çš„åº“æ–‡ä»¶,æ¯”å¦‚åœ¨æƒ³ç”¨TensorFlowè¾ƒæ—©ç‰ˆæœ¬çš„åŒæ—¶;è¿˜æƒ³è¿è¡ŒPytorchæœ€æ–°ç‰ˆï¼›è¿˜æƒ³é¡ºä¾¿å­¦ä¹ Naoæœºå™¨äººç¼–ç¨‹,å­¦ä¹ Djangoåå°,è¿™ä¸ªæ—¶å€™,ä¸€æ¬¾éå¸¸å¥½ç”¨çš„åŒ…ç®¡ç†å·¥å…·å°±æ˜¾å¾—ååˆ†é‡è¦äº†,è¿™å°±æ˜¯æˆ‘å†™è¿™ç¯‡åšå®¢çš„åŸå› ,è¿™ç¯‡åšå®¢å°†ä¼šè®²è§£ï¼š å¦‚ä½•å®‰è£…conda; å¦‚ä½•æ›´æ¢condaçš„ä¸‹è½½æº; å¦‚ä½•ä½¿ç”¨canda; ","date":"2022-12-14","objectID":"/conda/:1:0","tags":["daliy"],"title":"ä¼˜é›…çš„ä½¿ç”¨Condaç®¡ç†pythonç¯å¢ƒ","uri":"/conda/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…conda åœ¨å®‰è£…æ—¶è¿™ä¸¤ä¸ªé€‰é¡¹éœ€è¦ç‚¹ä¸Šï¼š ","date":"2022-12-14","objectID":"/conda/:2:0","tags":["daliy"],"title":"ä¼˜é›…çš„ä½¿ç”¨Condaç®¡ç†pythonç¯å¢ƒ","uri":"/conda/"},{"categories":["æ—¥å¸¸"],"content":"æ›´æ¢condaçš„ä¸‹è½½æº Condaå®˜æ–¹çš„ä¸‹è½½æºå¤ªæ…¢äº†,è€Œä¸”ç»å¸¸ä¼šå‡ºç°HTTPERRORä¹‹ç±»çš„é”™è¯¯,å¦‚æœæƒ³è¦ç”¨Condaæ„‰å¿«çš„åˆ›å»ºä¸åŒå·¥ä½œç¯å¢ƒ,æ„‰å¿«çš„ä¸‹è½½å®‰è£…å„ç§åº“,é‚£ä¹ˆæ¢ä¸‹è½½æºæ˜¯å¿…ä¸å¯å°‘çš„ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/ conda config --set show_channel_urls yes # è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€ å…·ä½“æ“ä½œåŒæ—¶æŒ‰Win+Ré”®æ‰“å¼€è¿è¡Œçª—å£,è¾“å…¥cmd,å›è½¦ï¼š å°†ä¸Šé¢çš„å‘½ä»¤å…¨éƒ¨å¤åˆ¶,åˆ°å‘½ä»¤è¡Œé‡Œå•å‡»å³é”®å°±ä¼šè‡ªåŠ¨æ‰§è¡Œå¤åˆ¶çš„å‘½ä»¤,æ·»åŠ æ¸…åæº ","date":"2022-12-14","objectID":"/conda/:2:1","tags":["daliy"],"title":"ä¼˜é›…çš„ä½¿ç”¨Condaç®¡ç†pythonç¯å¢ƒ","uri":"/conda/"},{"categories":["æ—¥å¸¸"],"content":"ä½¿ç”¨conda æŸ¥çœ‹ç¯å¢ƒ conda info -e conda info --envs åˆ›å»ºç¯å¢ƒ conda create -n name python=3.6 # nameå‚æ•°æŒ‡å®šè™šæ‹Ÿç¯å¢ƒçš„åå­—,pythonå‚æ•°æŒ‡å®šè¦å®‰è£…pythonçš„ç‰ˆæœ¬,ä½†æ³¨æ„è‡³å°‘éœ€è¦æŒ‡å®špythonç‰ˆæœ¬æˆ–è€…è¦å®‰è£…çš„åŒ…,åœ¨åä¸€ç§æƒ…å†µä¸‹,è‡ªåŠ¨å®‰è£…æœ€æ–°pythonç‰ˆæœ¬ # ä¾‹å¦‚ conda create -n jobcher pillow numpy python=2.7.14 # åˆ›å»ºåå­—ä¸ºnaoqi,Pythonç‰ˆæœ¬ä¸º2.7.14çš„è™šæ‹Ÿç¯å¢ƒ,åŒæ—¶è¿˜ä¼šå®‰è£…ä¸Špillow numpyè¿™ä¸¤ä¸ªåº“ ç¯å¢ƒåˆ‡æ¢ conda activate jobcher # åˆ‡æ¢åˆ°jobcherç¯å¢ƒä¸‹,åœ¨åˆ‡æ¢ç¯å¢ƒå,æ‰€æ‰§è¡Œçš„Pipå‘½ä»¤,Pythonå‘½ä»¤,éƒ½æ˜¯æ›´æ”¹å½“å‰ç¯å¢ƒä¸‹çš„,ä¸ä¼šå½±å“åˆ°å…¶ä»–çš„ç¯å¢ƒ conda deactivate # é€€å‡ºå½“å‰ç¯å¢ƒ å…³æ³¨ æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-12-14","objectID":"/conda/:3:0","tags":["daliy"],"title":"ä¼˜é›…çš„ä½¿ç”¨Condaç®¡ç†pythonç¯å¢ƒ","uri":"/conda/"},{"categories":["work"],"content":"èƒŒæ™¯ åœ¨å¼€å‘Webé¡¹ç›®å½“ä¸­ï¼Œæµè§ˆå™¨å¿…ä¸å¯å°‘ï¼Œè€Œæµè§ˆå™¨çš„å¯åŠ¨å‚æ•°å¯ä»¥å¸®æˆ‘ä»¬å®ç°å¾ˆå¤šåŠŸèƒ½ã€‚ ","date":"2022-11-29","objectID":"/chrome/:1:0","tags":["work"],"title":"Chromeæµè§ˆå™¨å¯åŠ¨å‚æ•°å¤§å…¨ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰","uri":"/chrome/"},{"categories":["work"],"content":"å¸¸ç”¨å‚æ•° åºå· å‚æ•° è¯´æ˜ 1 â€“allow- ted-plugins 2 â€“allow-running-insecure-content é»˜è®¤æƒ…å†µä¸‹ï¼Œhttps é¡µé¢ä¸å…è®¸ä» http é“¾æ¥å¼•ç”¨ javascript/css/plug-insã€‚æ·»åŠ è¿™ä¸€å‚æ•°ä¼šæ”¾è¡Œè¿™äº›å†…å®¹ã€‚ 3 â€“allow-scripting-gallery å…è®¸æ‹“å±•è„šæœ¬åœ¨å®˜æ–¹åº”ç”¨ä¸­å¿ƒç”Ÿæ•ˆã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡ºäºå®‰å…¨å› ç´ è€ƒè™‘è¿™äº›è„šæœ¬éƒ½ä¼šè¢«é˜»æ­¢ã€‚ 4 â€“disable-desktop-notifications ç¦ç”¨æ¡Œé¢é€šçŸ¥ï¼Œåœ¨ Windows ä¸­æ¡Œé¢é€šçŸ¥é»˜è®¤æ˜¯å¯ç”¨çš„ã€‚ 5 â€“disable-file-system åœç”¨ FileSystem APIã€‚ 6 â€“disable-preconnect åœç”¨ TCP/IP é¢„è¿æ¥ã€‚ 7 â€“disable-remote-fonts å…³é—­è¿œç¨‹å­—ä½“æ”¯æŒã€‚SVG ä¸­å­—ä½“ä¸å—æ­¤å‚æ•°å½±å“ã€‚ 8 â€“disable-web-security ä¸éµå®ˆåŒæºç­–ç•¥ã€‚ 9 â€“disk-cache-dir å°†ç¼“å­˜è®¾ç½®åœ¨ç»™å®šçš„è·¯å¾„ã€‚ 10 â€“disk-cache-size è®¾ç½®ç¼“å­˜å¤§å°ä¸Šé™ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚ 11 â€“dns-prefetch-disable åœç”¨DNSé¢„è¯»ã€‚ 12 â€“enable-print-preview å¯ç”¨æ‰“å°é¢„è§ˆã€‚ 13 â€“extensions-update-frequency è®¾å®šæ‹“å±•è‡ªåŠ¨æ›´æ–°é¢‘ç‡ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚ 14 â€“incognito è®©æµè§ˆå™¨ç›´æ¥ä»¥éšèº«æ¨¡å¼å¯åŠ¨ã€‚ 15 â€“keep-alive-for-test æœ€åä¸€ä¸ªæ ‡ç­¾å…³é—­åä»ä¿æŒæµè§ˆå™¨è¿›ç¨‹ã€‚ï¼ˆæŸç§æ„ä¹‰ä¸Šå¯ä»¥æé«˜çƒ­å¯åŠ¨é€Ÿåº¦ï¼Œä¸è¿‡ä½ æœ€å¥½å¾—æœ‰å……è¶³çš„å†…å­˜ï¼‰ 16 â€“kiosk å¯ç”¨kioskæ¨¡å¼ã€‚ï¼ˆä¸€ç§ç±»ä¼¼äºå…¨å±çš„æµè§ˆæ¨¡å¼ï¼‰ 17 â€“lang ä½¿ç”¨æŒ‡å®šçš„è¯­è¨€ã€‚ 18 â€“no-displaying-insecure-content é»˜è®¤æƒ…å†µä¸‹ï¼Œhttps é¡µé¢å…è®¸ä» http é“¾æ¥å¼•ç”¨å›¾ç‰‡/å­—ä½“/æ¡†æ¶ã€‚æ·»åŠ è¿™ä¸€å‚æ•°ä¼šé˜»æ­¢è¿™äº›å†…å®¹ã€‚ 19 â€“no-referrers ä¸å‘é€ Http-Referer å¤´ã€‚ 20 â€“no-startup-window å¯åŠ¨æ—¶ä¸å»ºç«‹çª—å£ã€‚ 21 â€“proxy-server ä½¿ç”¨ç»™å®šçš„ä»£ç†æœåŠ¡å™¨ï¼Œè¿™ä¸ªå‚æ•°åªå¯¹ http å’Œ https æœ‰æ•ˆã€‚ 22 â€“start-maximized å¯åŠ¨æ—¶æœ€å¤§åŒ–ã€‚ 23 â€“single-process ä»¥å•è¿›ç¨‹æ¨¡å¼è¿è¡Œ Chromiumã€‚ï¼ˆå¯åŠ¨æ—¶æµè§ˆå™¨ä¼šç»™å‡ºä¸å®‰å…¨è­¦å‘Šï¼‰ã€‚ 24 â€“user-agent ä½¿ç”¨ç»™å®šçš„ User-Agent å­—ç¬¦ä¸²ã€‚ 25 â€“process-per-tab æ¯ä¸ªåˆ†é¡µä½¿ç”¨å•ç‹¬è¿›ç¨‹ã€‚ 26 â€“process-per-site æ¯ä¸ªç«™ç‚¹ä½¿ç”¨å•ç‹¬è¿›ç¨‹ã€‚ 27 â€“in-process-plugins æ’ä»¶ä¸å¯ç”¨å•ç‹¬è¿›ç¨‹ã€‚ 28 â€“disable-popup-blocking ç¦ç”¨å¼¹å‡ºæ‹¦æˆªã€‚ 29 â€“disable-javascript ç¦ç”¨JavaScriptã€‚ 30 â€“disable-java ç¦ç”¨Javaã€‚ 31 â€“disable-plugins ç¦ç”¨æ’ä»¶ã€‚ 32 â€“disable-images ç¦ç”¨å›¾åƒã€‚ ","date":"2022-11-29","objectID":"/chrome/:2:0","tags":["work"],"title":"Chromeæµè§ˆå™¨å¯åŠ¨å‚æ•°å¤§å…¨ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰","uri":"/chrome/"},{"categories":["work"],"content":"æ›´å¤šå‚æ•° ç”±äºæ°´å¹³æœ‰é™ï¼Œä¸‹è¡¨ä¸ºç½‘ç»œç¿»è¯‘ï¼Œäº†è§£è·Ÿå¤šå¯æ ¹åŸºå‚æ•°ï¼ŒæŸ¥æ‰¾ç›¸å…³èµ„æ–™ã€‚ åºå· å‚æ•° è¯´æ˜ 1 â€“ æŠ¥å‘Šä¼ªåˆ†é…è·Ÿè¸ªã€‚ä¼ªè·Ÿè¸ªä»å½“å‰æ´»åŠ¨çš„è·Ÿè¸ªäº‹ä»¶æ´¾ç”Ÿã€‚ 2 â€“/prefetch:1 /prefetch:å¯åŠ¨å„ç§æµç¨‹ç±»å‹æ—¶ä½¿ç”¨çš„ï¼ƒargumentsã€‚å·²ç»è§‚å¯Ÿåˆ°ï¼Œå½“æ–‡ä»¶è¯»å–ä¸å…·æœ‰ç›¸åŒ/prefetch:ï¼ƒå‚æ•°çš„3ä¸ªè¿›ç¨‹å¯åŠ¨ä¸€è‡´æ—¶ï¼ŒWindowsé¢„å–å™¨å¼€å§‹åœ¨è¿›ç¨‹å¯åŠ¨æ—¶æ‰¹é‡å‘å‡ºè¯»å–ã€‚å› ä¸ºè¯»å–å–å†³äºè¿›ç¨‹ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰/prefetch:ï¼ƒargumentsä½¿ç”¨äº†é¢„å–å™¨ï¼Œåˆ™é¢„å–å™¨å°†æ— æ³•è§‚å¯Ÿåˆ°ä¸€è‡´çš„è¯»å–ã€‚è¯·æ³¨æ„ï¼Œæµè§ˆå™¨è¿›ç¨‹æ²¡æœ‰/prefetch:ï¼ƒå‚æ•°; å› æ­¤ï¼Œæ‰€æœ‰å…¶ä»–è¿‡ç¨‹å¿…é¡»æœ‰ä¸€ä¸ªï¼Œä»¥é¿å…æ±¡æŸ“å…¶é…ç½®æ–‡ä»¶ã€‚æ³¨æ„:ï¼ƒå¿…é¡»å§‹ç»ˆåœ¨[1,8]; å¦åˆ™Windowsé¢„å–å™¨ä¼šå¿½ç•¥å®ƒã€‚ 3 â€“/prefetch:5 /prefetch:åœ¨åå°æ¨¡å¼å’Œè§‚å¯Ÿç¨‹åºè¿›ç¨‹ä¸­å¯åŠ¨çš„æµè§ˆå™¨è¿›ç¨‹çš„#refactã€‚ 4 â€“/prefetch:8 Windowsé¢„å–ç¨‹åºä½¿ç”¨é¢„å–å‚æ•°æ¥æ¶ˆé™¤ç›¸åŒå¯æ‰§è¡Œæ˜ åƒçš„ä¸åŒæ‰§è¡Œæ¨¡å¼ï¼ˆå³è¿›ç¨‹ç±»å‹ï¼‰çš„æ­§ä¹‰ï¼Œä»¥ä¾¿ä¸åŒç±»å‹çš„è¿›ç¨‹ä¸ä¼šè·µè¸å½¼æ­¤çš„é¢„å–è¡Œä¸ºã€‚åˆæ³•å€¼æ˜¯[1,8]èŒƒå›´å†…çš„æ•´æ•°ã€‚æˆ‘ä»¬ä¿ç•™8è¡¨ç¤ºâ€œæ— è®ºä»€ä¹ˆâ€ï¼Œè¿™å°†æœ€ç»ˆå¯¼è‡´å…·æœ‰/prefetchçš„è¿›ç¨‹:8å…·æœ‰ä¸ä¸€è‡´çš„è¡Œä¸ºï¼Œå› æ­¤åœ¨å®è·µä¸­ç¦ç”¨é¢„å–ã€‚TODOï¼ˆrockotï¼‰:ä½¿åµŒå…¥å™¨èƒ½å¤Ÿåœ¨æ¯ä¸ªæœåŠ¡çš„åŸºç¡€ä¸Šè¦†ç›–æ­¤å‚æ•°ã€‚ 5 â€“accept-resource-provider æŒ‡ç¤ºå¿…é¡»è®¾ç½®èµ„æºæä¾›ç¨‹åºä»¥å‘æŠ•å°„æ¥æ”¶å™¨æä¾›èµ„æºçš„æ ‡å¿—ã€‚åœ¨æä¾›èµ„æºä¹‹å‰ï¼Œåº”ç”¨æ— æ³•å¯åŠ¨ã€‚è¯¥æ ‡å¿—è¡¨ç¤ºâ€“alsa-check-close-timeout=0ã€‚ 6 â€“account-consistency ç”¨äºå¯ç”¨å¸æˆ·ä¸€è‡´æ€§çš„å‘½ä»¤è¡Œæ ‡å¿—ã€‚é»˜è®¤æ¨¡å¼å·²ç¦ç”¨ã€‚é•œåƒæ˜¯ä¸€ç§ä¼ ç»Ÿæ¨¡å¼ï¼Œå…¶ä¸­Googleå¸æˆ·å§‹ç»ˆä¼šæ·»åŠ åˆ°Chromeï¼Œç„¶åChromeä¼šå°†å…¶æ·»åŠ åˆ°Googleèº«ä»½éªŒè¯Cookieä¸­ã€‚éª°å­æ˜¯ä¸€é¡¹æ–°çš„å®éªŒï¼ŒChromeå¯ä»¥è¯†åˆ«Googleèº«ä»½éªŒè¯Cookieä¸­çš„å¸æˆ·ã€‚ 7 â€“agc-startup-min-volume è¦†ç›–ä¸getUserMediaä¸­çš„éŸ³è½¨ä¸€èµ·ä½¿ç”¨çš„WebRTCä¸­çš„è‡ªåŠ¨å¢ç›Šæ§åˆ¶ç®—æ³•çš„é»˜è®¤æœ€å°èµ·å§‹éŸ³é‡ã€‚æœ‰æ•ˆèŒƒå›´æ˜¯12-255ã€‚è¶…å‡ºè¯¥èŒƒå›´çš„å€¼å°†è¢«é™åˆ¶åœ¨WebRTCå†…çš„æœ€ä½æˆ–æœ€é«˜æœ‰æ•ˆå€¼ã€‚ 8 â€“allow-cross-origin-auth-prompt å…è®¸é¡µé¢ä¸­åŒ…å«çš„ç¬¬ä¸‰æ–¹å†…å®¹æç¤ºè¾“å…¥HTTPåŸºæœ¬èº«ä»½éªŒè¯ç”¨æˆ·å/å¯†ç å¯¹ã€‚ 9 â€“allow-external-pages å…è®¸åœ¨å¸ƒå±€æµ‹è¯•æœŸé—´è®¿é—®å¤–éƒ¨é¡µé¢ã€‚ 10 â€“allow-failed-policy-fetch-for-test å¦‚æœä¼ é€’æ­¤æ ‡å¿—ï¼Œåˆ™å¤±è´¥çš„ç­–ç•¥æå–ä¸ä¼šå¯¼è‡´é…ç½®æ–‡ä»¶åˆå§‹åŒ–å¤±è´¥ã€‚è¿™å¯¹æµ‹è¯•å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºè¿™æ„å‘³ç€æµ‹è¯•ä¸å¿…æ¨¡æ‹Ÿç­–ç•¥åŸºç¡€ç»“æ„ã€‚ 11 â€“allow-file-access-from-files é»˜è®¤æƒ…å†µä¸‹ï¼Œfile://URIsæ— æ³•è¯»å–å…¶ä»–file://URIã€‚è¿™æ˜¯å¯¹éœ€è¦æ—§è¡Œä¸ºè¿›è¡Œæµ‹è¯•çš„å¼€å‘äººå‘˜çš„è¦†ç›–ã€‚ 12 â€“allow-hidden-media-playback å…è®¸åª’ä½“æ’­æ”¾éšè—çš„Webå†…å®¹ 13 â€“allow-http-background-page å…è®¸æ‰˜ç®¡åº”ç”¨çš„background_pageçš„éhttpsç½‘å€ã€‚ 14 â€“allow-http-screen-capture å…è®¸éå®‰å…¨æºä½¿ç”¨å±å¹•æ•è·APIå’ŒdesktopCaptureæ‰©å±•APIã€‚ 15 â€“allow-insecure-localhost å…è®¸å¿½ç•¥localhostä¸Šçš„TLS/SSLé”™è¯¯ï¼ˆæ— æ’é¡µå¼ï¼Œä¸é˜»æ­¢è¯·æ±‚ï¼‰ã€‚ 16 â€“allow-legacy-extension-manifests å…è®¸æµè§ˆå™¨åŠ è½½ç¼ºå°‘ç°ä»£æ¸…å•çš„æ‰©å±•ï¼Œå¦åˆ™å°†è¢«ç¦æ­¢ã€‚ 17 â€“allow-loopback-in-peer-connection å…è®¸åœ¨ç½‘ç»œåˆ—è¡¨ä¸­æ·»åŠ ç¯å›æ¥å£ä»¥è¿›è¡Œå¯¹ç­‰è¿æ¥ã€‚ 18 â€“allow-nacl-crxfs-api æŒ‡å®šä»¥é€—å·åˆ†éš”çš„æ‰©å±•IDæˆ–ä¸»æœºåˆ—è¡¨ï¼Œä»¥æˆäºˆå¯¹CRXæ–‡ä»¶ç³»ç»ŸAPIçš„è®¿é—®æƒé™ã€‚ 19 â€“allow-nacl-file-handle-api æŒ‡å®šä»¥é€—å·åˆ†éš”çš„æ‰©å±•IDæˆ–ä¸»æœºåˆ—è¡¨ï¼Œä»¥æˆäºˆå¯¹æ–‡ä»¶å¥æŸ„APIçš„è®¿é—®æƒé™ã€‚ 20 â€“allow-nacl-socket-api æŒ‡å®šä»¥é€—å·åˆ†éš”çš„æ‰©å±•IDæˆ–ä¸»æœºåˆ—è¡¨ï¼Œä»¥æˆäºˆå¯¹TCP/UDPå¥—æ¥å­—APIçš„è®¿é—®æƒé™ã€‚ 21 â€“allow-no-sandbox-job ä½¿æ²™ç®±è¿›ç¨‹èƒ½å¤Ÿåœ¨ä¸åˆ†é…ä½œä¸šå¯¹è±¡çš„æƒ…å†µä¸‹è¿è¡Œã€‚éœ€è¦æ­¤æ ‡å¿—æ‰èƒ½å…è®¸Chromeåœ¨RemoteAppsæˆ–Citrixä¸­è¿è¡Œã€‚æ­¤æ ‡å¿—å¯ä»¥é™ä½æ²™ç›’è¿›ç¨‹çš„å®‰å…¨æ€§ï¼Œå¹¶å…è®¸å®ƒä»¬æ‰§è¡ŒæŸäº›APIè°ƒç”¨ï¼Œå¦‚å…³é—­Windowsæˆ–è®¿é—®å‰ªè´´æ¿ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¤±å»äº†æ€æ­»æŸäº›è¿›ç¨‹çš„æœºä¼šï¼Œç›´åˆ°æ‹¥æœ‰å®ƒä»¬çš„å¤–éƒ¨ä½œä¸šå®Œæˆã€‚ 22 â€“allow- ted-plugins 23 â€“allow-ra-in-dev-mode å…è®¸åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿›è¡Œè¿œç¨‹è¯æ˜ï¼ˆRAï¼‰ä»¥è¿›è¡Œæµ‹è¯•ã€‚é€šå¸¸RAåœ¨å¼€å‘æ¨¡å¼ä¸‹è¢«ç¦ç”¨ï¼Œå› ä¸ºå®ƒæ€»æ˜¯ä¼šå¤±è´¥ã€‚ä½†æ˜¯ï¼Œåœ¨æµ‹è¯•çš„æƒ…å†µä¸‹ï¼Œå³ä½¿åœ¨å¼€å‘æ¨¡å¼ä¸‹æˆ‘ä»¬ä¹Ÿå¸Œæœ›é€šè¿‡æƒé™æµç¨‹ã€‚è¿™ä¸ªæ ‡å¿—å¯ä»¥å¯ç”¨æ­¤åŠŸèƒ½ã€‚ 24 â€“allow-running-insecure-content é»˜è®¤æƒ…å†µä¸‹ï¼Œhttpsé¡µé¢æ— æ³•ä»httpURLè¿è¡ŒJavaScriptï¼ŒCSSæˆ–æ’ä»¶ã€‚è¿™æä¾›äº†ä¸€ä¸ªè¦†ç›–æ¥è·å–æ—§çš„ä¸å®‰å…¨è¡Œä¸ºã€‚ 25 â€“allow-sandbox-debugging å…è®¸è°ƒè¯•æ²™ç›’è¿›ç¨‹ã€‚ 26 â€“allow-silent-push å…è®¸ä¸æ˜¾ç¤ºé€šçŸ¥çš„Webæ¨é€é€šçŸ¥ã€‚ 27 â€“alsa-check-close-timeout å½“æ²¡æœ‰å‰©ä½™æ··é¢‘å™¨è¾“å…¥æ—¶ï¼Œåœ¨å…³é—­PCMæ‰‹æŸ„ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ï¼ˆä»¥msä¸ºå•ä½ï¼‰ã€‚å¦‚æœâ€“accept-resource-providerå­˜åœ¨ï¼Œåˆ™å‡å®šä¸º0ã€‚ 28 â€“alsa-enable-upsampling æ ‡å¿—ï¼Œå¯ä»¥é‡æ–°é‡‡æ ·éŸ³é¢‘ï¼Œé‡‡æ ·ç‡ä½äº32kHzï¼Œæœ€é«˜å¯è¾¾48kHzã€‚å¯¹äºå†…éƒ¨éŸ³é¢‘äº§å“ï¼Œåº”è®¾ç½®ä¸ºtrueã€‚ 29 â€“alsa-fixed-output-sample-rate å¯é€‰æ ‡å¿—ï¼Œç”¨äºä¸ºalsaè®¾å¤‡è®¾ç½®å›ºå®šçš„é‡‡æ ·ç‡ã€‚ 30 â€“alsa-input-device æ‰“å¼€éŸ³é¢‘è¾“å…¥æµæ—¶ä½¿ç”¨çš„Alsaè®¾å¤‡ã€‚ 31 â€“alsa-mute-device-name åº”æ‰“å¼€é™éŸ³æ··éŸ³å™¨çš„è®¾å¤‡åç§°ã€‚å¦‚æœæœªæŒ‡å®šæ­¤æ ‡å¿—ï¼Œåˆ™å®ƒå°†é»˜è®¤ä¸ºä¸kAlsaVolumeDeviceNameç›¸åŒçš„è®¾å¤‡ã€‚ 32 â€“alsa-mute-element-name åŸºäºALSAçš„åª’ä½“åº“ç”¨äºé™éŸ³ç³»ç»Ÿçš„ç®€å•æ··éŸ³å™¨æ§åˆ¶å…ƒç´ çš„åç§°ã€‚ 33 â€“alsa-output-avail-min ç”¨äºå®‰æ’ä¼ è¾“çš„æœ€å°å¯ç”¨å¸§æ•°ã€‚ 34 â€“alsa-output-buffer-size ALSAè¾“å‡ºç¼“å†²åŒºçš„å¤§å°ï¼ˆä»¥å¸§ä¸ºå•ä½ï¼‰ã€‚è¿™ç›´æ¥è®¾ç½®è¾“å‡ºè®¾å¤‡çš„å»¶è¿Ÿã€‚å¯ä»¥é€šè¿‡å°†é‡‡æ ·ç‡ä¹˜ä»¥è¾“å‡ºç¼“å†²åŒºå¤§å°æ¥è®¡ç®—å»¶è¿Ÿã€‚ 35 â€“alsa-output-device æ‰“å¼€éŸ³é¢‘æµæ—¶ä½¿ç”¨çš„Alsaè®¾å¤‡ã€‚ 36 â€“alsa-output-period-size ALSAè¾“å‡ºå‘¨æœŸçš„å¤§å°ï¼ˆä»¥å¸§ä¸ºå•ä½ï¼‰ã€‚ALSAè¾“å‡ºè®¾å¤‡çš„å‘¨æœŸç¡®å®šç¡¬ä»¶ä¸­æ–­ä¹‹é—´ç»è¿‡çš„å¸§æ•°ã€‚ 37 â€“alsa-output-start-threshold è¾“å‡ºå¼€å§‹å‰è¾“å‡ºç¼“å†²åŒºä¸­éœ€è¦å¤šå°‘å¸§ã€‚ 38 â€“alsa-volume-device-name åº”æ‰“å¼€éŸ³é‡æ§åˆ¶æ··éŸ³å™¨çš„è®¾å¤‡åç§°ã€‚å¦‚æœæ²¡æœ‰æä¾›kAlsaOut 39 â€“alsa-volume-element-name åŸºäºALSAçš„åª’ä½“åº“ç”¨äºæ§åˆ¶éŸ³é‡çš„ç®€å•æ··éŸ³å™¨æ§åˆ¶å…ƒç´ çš„åç§°ã€‚ 40 â€“also-emit-success-logs è¿˜ä¼šå‘å‡ºå®Œæ•´äº‹ä»¶è·Ÿè¸ªæ—¥å¿—ä»¥è¿›è¡ŒæˆåŠŸæµ‹è¯• 41 â€“alternative æ•°æ®ç¼©å‡ä»£ç†ä½¿ç”¨Chrome-Proxyâ€œexpâ€æŒ‡ä»¤å€¼æ¥æ¥æ”¶å¤‡ç”¨åç«¯å®ç°ã€‚ 42 â€“always-authorize-plugins é˜²æ­¢Chromeéœ€è¦æˆæƒæ‰èƒ½è¿è¡ŒæŸäº›å¹¿æ³›å®‰è£…ä½†ä¸å¤ªå¸¸ç”¨çš„æ’ä»¶ã€‚ 43 â€“always-use-complex-text å§‹ç»ˆä½¿ç”¨å¤æ‚çš„æ–‡æœ¬è·¯å¾„è¿›è¡Œå¸ƒå±€æµ‹è¯•ã€‚ 44 â€“android-fonts-path åœ¨linuxä¸Šä½¿ç”¨androidSkFontManagerã€‚æŒ‡å®šçš„ç›®å½•åº”åŒ…å«åä¸ºâ€œfonts.xmlâ€çš„é…ç½®xmlæ–‡ä»¶ã€‚è¿™åœ¨blimpä¸­ç”¨äºåœ¨linuxä¸Šæ¨¡æ‹Ÿandroidå­—ä½“ã€‚ 45 â€“android rr-port 46 â€“android n-port 47 â€“android ut-port 48 â€“app æŒ‡å®šåº”åœ¨â€œåº”ç”¨ç¨‹åºâ€æ¨¡å¼ä¸‹å¯åŠ¨å…³è”å€¼ã€‚ 49 â€“app-auto-launched æŒ‡å®šä»¥è‡ªåŠ©æœåŠ¡ç»ˆç«¯æ¨¡å¼å¯åŠ¨çš„åº”ç”¨æ˜¯å¦è‡ªåŠ¨å¯åŠ¨ä¸”é›¶å»¶è¿Ÿã€‚ç”¨äºåœ¨ä¼šè¯è¿˜åŸæµç¨‹æœŸé—´æ­£ç¡®è¿˜åŸè‡ªåŠ¨å¯åŠ¨çŠ¶æ€ã€‚ 50 â€“app-id æŒ‡å®šåº”æ ¹æ®å…¶é…ç½®å¯åŠ¨å…·æœ‰æŒ‡å®šæ ‡è¯†çš„extension-appã€‚ 51 â€“app-mode-auth-code GAIAauthä»£ç å¯¹â€“force-app-modeçš„ä»·å€¼ã€‚ 52 â€“app-mode-oauth-token OAuth2åˆ·æ–°ä»¤ç‰Œå¯¹äºâ€“force-app-modeçš„ä»·å€¼ã€‚ 53 â€“app-mode-oem-manifest appçš„OEMæ¸…å•æ–‡ä»¶çš„è·¯å¾„ã€‚ 54 â€“app-shell-allow-roaming å…è®¸åœ¨èœ‚çªç½‘ç»œä¸­æ¼«æ¸¸ã€‚ 55 â€“app-shell-host-window-size è¦åˆ›å»ºçš„ä¸»æœºçª—å£çš„å¤§å°ï¼ˆå³â€œ800x600â€ï¼‰ã€‚ 56 â€“app-shell-preferred-network é¦–é€‰WiFiç½‘ç»œçš„SSIDã€‚ 57 â€“app-shell-refresh-token åˆ·æ–°å½“å‰ç”¨æˆ·çš„èº«ä»½APIè°ƒç”¨ä»¤ç‰Œã€‚ç”¨äºæµ‹è¯•ã€‚ 5","date":"2022-11-29","objectID":"/chrome/:3:0","tags":["work"],"title":"Chromeæµè§ˆå™¨å¯åŠ¨å‚æ•°å¤§å…¨ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰","uri":"/chrome/"},{"categories":["work"],"content":"èƒŒæ™¯ Jenkins ç¼–è¯‘Android apkï¼Œä¸Šä¼ apkåŒ…ï¼Œç”Ÿæˆä¸‹è½½äºŒç»´ç ï¼Œå¹¶æ¨é€é’‰é’‰ ","date":"2022-11-25","objectID":"/gradle-apk/:1:0","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"å®‰è£…Android ç¯å¢ƒ ","date":"2022-11-25","objectID":"/gradle-apk/:2:0","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"å®‰è£…JDK # è¿™é‡Œä½¿ç”¨çš„æ˜¯openjdk 1.8.0ç‰ˆæœ¬ï¼Œæœ‰éœ€è¦çš„è¯éœ€è¦åˆ°javaå®˜ç½‘ä¸Šè¿›è¡Œä¸‹è½½å¯¹åº”çš„JDKç‰ˆæœ¬ã€‚ $ yum install java -y # å…¶ä»–ç‰ˆæœ¬JDKçš„å®‰è£…æ–¹å¼ $ mv jdk1.8.0_161 /usr/local/ $ ln -s /usr/local/jdk1.8.0_161 /usr/local/jdk $ vim /etc/profile #é…ç½®JDKçš„ç¯å¢ƒå˜é‡ export JAVA_HOME=/usr/local/jdk export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH export CLASSPATH=.$CLASSPATH:$JAVA_HOME/lib:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar $ source /etc/profile #é‡æ–°åŠ è½½ç³»ç»Ÿç¯å¢ƒå˜é‡ $ java -version #æŸ¥çœ‹javaç‰ˆæœ¬ ","date":"2022-11-25","objectID":"/gradle-apk/:2:1","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"Android SDKå®‰è£… # ä¸‹è½½sdkå·¥å…·åŒ… $ wget https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip # åˆ›å»ºsdkå·¥å…·æ–‡ä»¶å¤¹å’Œè§£å‹å·¥å…·åŒ… $ mkdir -p /opt/android/sdk $ unzip sdk-tools-linux-3859397.zip -d /opt/android/sdk # ä½¿ç”¨sdkmanagerå·¥å…·é…ç½®æ„å»ºå·¥å…·å’Œå¹³å°ç‰ˆæœ¬ $ cd /opt/android/sdk/tools/bin/ $ ./sdkmanager \"build-tools;29.0.6\" \"platforms;android-29\" \"platform-tools\" $ ./sdkmanager --list #å¯ä»¥æŸ¥çœ‹æœ‰å“ªäº›ç‰ˆæœ¬ï¼Œè‡ªè¡Œé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ # å¢åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡ $ vim /etc/profile export ANDROID_HOME=/opt/android/sdk PATH=$PATH:$ANDROID_HOME:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools:$ANDROID_HOME/emulator:$ANDROID_HOME/tools/bin $ adb version Android Debug Bridge version 1.0.41 Version 29.0.6-6198805 Installed as /opt/android/sdk/platform-tools/adb ","date":"2022-11-25","objectID":"/gradle-apk/:2:2","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"å®‰è£…gradle $ wget https://downloads.gradle-dn.com/distributions/gradle-6.3-all.zip $ mkdir /opt/gradle $ unzip gradle-6.3-all.zip -d /opt/gradle/ $ vim /etc/profile export PATH=$PATH:/opt/gradle/gradle-6.3/bin $ source /etc/profile $ gradle -v ------------------------------------------------------------ Gradle 6.3 ------------------------------------------------------------ Build time: 2020-03-24 19:52:07 UTC Revision: bacd40b727b0130eeac8855ae3f9fd9a0b207c60 Kotlin: 1.3.70 Groovy: 2.5.10 Ant: Apache Ant(TM) version 1.10.7 compiled on September 1 2019 JVM: 1.8.0_201 (Oracle Corporation 25.201-b09) OS: Linux 3.10.0-693.el7.x86_64 amd64 ","date":"2022-11-25","objectID":"/gradle-apk/:2:3","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"jenkins æµæ°´çº¿é…ç½® ","date":"2022-11-25","objectID":"/gradle-apk/:3:0","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"gradle-jdk.sh æ‰“åŒ…è„šæœ¬ #!/bin/sh source /etc/profile # /home/ç¼–è¯‘ç›®å½• cd /home/ç¼–è¯‘ç›®å½• \u0026\u0026 gradle clean cd /home/ç¼–è¯‘ç›®å½• \u0026\u0026 gradle assembleRelease # æ‰“åŒ…ç¼–è¯‘å®Œæˆï¼Œåœ¨é¡¹ç›®çš„app/build/outputs/apkä¸­å¯ä»¥æ‰¾åˆ°debugç‰ˆæœ¬æˆ–è€…æ˜¯releaseç‰ˆæœ¬ã€‚ ","date":"2022-11-25","objectID":"/gradle-apk/:3:1","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["work"],"content":"JenkinsFile è„šæœ¬ pipeline { //ä½¿ç”¨æ ‡ç­¾ 'master' çš„èŠ‚ç‚¹ agent {label 'master'} //ç¯å¢ƒå˜é‡ environment { //æˆåŠŸè¿è¡Œç‰¹å¾ JEN_FEATURE = '' //æ—¥å¿—è·¯å¾„ JEN_LOG = '' } stages { stage ('ç¼–è¯‘æ‰“åŒ…'){ steps { sh 'cd /home/ç¼–è¯‘ç›®å½• \u0026\u0026 sudo git pull' sh 'sh gradle-apk.sh' } } stage ('ä¸Šä¼ '){ steps { sh 'sshpass -p \"password\" scp /home/ç¼–è¯‘ç›®å½•/app/build/outputs/apk/release/app-release.apk user@www.nginx.com:/home/ä¸Šä¼ ç›®å½•/app-release.apk' } } stage ('ç”Ÿæˆqr'){ steps { echo \"ç”Ÿæˆtest qr\" sh \"pwd \u0026\u0026 myqr 'https://www.nginx.com/app-release.apk' -n qrcode-`date +'%Y-%m-%d-%H%M%S'`.png -d /home/code/image\" sh \"cd /home/code/image \u0026\u0026 git add .\" sh \"cd /home/code/image \u0026\u0026 git commit -m 'new images'\" sh \"cd /home/code/image \u0026\u0026 git push origin main\" echo \"ç»“æŸ end\" } } } post { success { script { env.DATETIME = sh(script:\"date\", returnStdout: true).trim() env.QRCODE = sh(script:\"ls -lhst /home/code/image | awk 'NR==2' | awk '{print \\$10}'\",returnStdout: true).trim() def job_name = \"# ${JOB_NAME} æµæ°´çº¿ æ‰§è¡ŒæˆåŠŸ\" def jenkinsid = \"\"\"æ„å»º: ç¬¬ ${BUILD_ID} æ¬¡æ‰§è¡Œ\"\"\" def JEN_production = \"\u003e éƒ¨ç½²èŠ‚ç‚¹ï¼š jenkins\" def build_url = \"\u003e éƒ¨ç½²è¯¦æƒ…ï¼š [è¯¦æƒ…](${BUILD_URL})\" def jen_date = \"\u003e æ‰§è¡Œæ—¶é—´ï¼š ${env.DATETIME}\" def jen_qrcode = \"![qr](https://gitlab.com/jobcher/image/-/raw/main/${env.QRCODE})\" dingtalk ( robot: 'e3999649-d3f-é’‰é’‰key-4c57333a327b', type: 'MARKDOWN', title: job_name, text: [ job_name, jenkinsid, '', '---', jen_qrcode, JEN_production, '', build_url, '', jen_date ], at: [ 'æ‰‹æœºå·' ] ) } } failure { script { env.DATETIME = sh(script:\"date\", returnStdout: true).trim() def job_name = \"# ${JOB_NAME} æµæ°´çº¿ æ‰§è¡Œå¤±è´¥\" def jenkinsid = \"\"\"æ„å»º: ç¬¬ ${BUILD_ID} æ¬¡æ‰§è¡Œ\"\"\" def JEN_production = \"\u003e éƒ¨ç½²èŠ‚ç‚¹ï¼š jenkins\" def build_url = \"\u003e éƒ¨ç½²è¯¦æƒ…ï¼š [è¯¦æƒ…](${BUILD_URL})\" def jen_date = \"\u003e æ‰§è¡Œæ—¶é—´ï¼š ${env.DATETIME}\" dingtalk ( robot: 'e3999649-d3f-é’‰é’‰key-4c57333a327b', type: 'MARKDOWN', title: job_name, text: [ job_name, jenkinsid, '', '---', JEN_production, '', build_url, '', jen_date ], at: [ 'æ‰‹æœºå·' ] ) } } } } ","date":"2022-11-25","objectID":"/gradle-apk/:3:2","tags":["work"],"title":"Jenkins ç¼–è¯‘Android apk æµæ°´çº¿","uri":"/gradle-apk/"},{"categories":["k8s"],"content":"èƒŒæ™¯ ä½¿ç”¨ kubeadm å®‰è£… kubernetes é›†ç¾¤éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€ä¸ªæ¯”è¾ƒçƒ¦äººçš„é—®é¢˜å°±æ˜¯é»˜è®¤çš„è¯ä¹¦æœ‰æ•ˆæœŸåªæœ‰ä¸€å¹´æ—¶é—´ï¼Œæ‰€ä»¥éœ€è¦è€ƒè™‘è¯ä¹¦å‡çº§çš„é—®é¢˜ ","date":"2022-11-15","objectID":"/k8s16/:1:0","tags":["k8s"],"title":"Kubernetes â€” æ›´æ–°è¯ä¹¦","uri":"/k8s16/"},{"categories":["k8s"],"content":"æ£€æŸ¥è¯ä¹¦ ç”± kubeadm ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦é»˜è®¤åªæœ‰ä¸€å¹´æœ‰æ•ˆæœŸï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ check-expiration å‘½ä»¤æ¥æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¿‡æœŸï¼š kubeadm alpha certs check-expiration è¯¥å‘½ä»¤æ˜¾ç¤º /etc/kubernetes/pki æ–‡ä»¶å¤¹ä¸­çš„å®¢æˆ·ç«¯è¯ä¹¦ä»¥åŠ kubeadm ä½¿ç”¨çš„ KUBECONFIG æ–‡ä»¶ä¸­åµŒå…¥çš„å®¢æˆ·ç«¯è¯ä¹¦çš„åˆ°æœŸæ—¶é—´/å‰©ä½™æ—¶é—´ã€‚ ","date":"2022-11-15","objectID":"/k8s16/:2:0","tags":["k8s"],"title":"Kubernetes â€” æ›´æ–°è¯ä¹¦","uri":"/k8s16/"},{"categories":["k8s"],"content":"æ‰‹åŠ¨æ›´æ–° kubeadm alpha certs renew è¿™ä¸ªå‘½ä»¤ç”¨ CAï¼ˆæˆ–è€… front-proxy-CA ï¼‰è¯ä¹¦å’Œå­˜å‚¨åœ¨ /etc/kubernetes/pki ä¸­çš„å¯†é’¥æ‰§è¡Œæ›´æ–°ã€‚ é«˜å¯ç”¨çš„é›†ç¾¤ï¼Œè¿™ä¸ªå‘½ä»¤éœ€è¦åœ¨æ‰€æœ‰æ§åˆ¶é¢æ¿èŠ‚ç‚¹ä¸Šæ‰§è¡Œ ","date":"2022-11-15","objectID":"/k8s16/:3:0","tags":["k8s"],"title":"Kubernetes â€” æ›´æ–°è¯ä¹¦","uri":"/k8s16/"},{"categories":["k8s"],"content":"å…·ä½“æ‰§è¡Œ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ›´æ–°æˆ‘ä»¬çš„é›†ç¾¤è¯ä¹¦ï¼Œä¸‹é¢çš„æ“ä½œéƒ½æ˜¯åœ¨ master èŠ‚ç‚¹ä¸Šè¿›è¡Œ å¤‡ä»½èŠ‚ç‚¹ $ mkdir /etc/kubernetes.bak $ cp -r /etc/kubernetes/pki/ /etc/kubernetes.bak $ cp /etc/kubernetes/*.conf /etc/kubernetes.bak å¤‡ä»½ etcd æ•°æ®ç›®å½• $ cp -r /var/lib/etcd /var/lib/etcd.bak æ‰§è¡Œæ›´æ–°è¯ä¹¦çš„å‘½ä»¤ kubeadm alpha certs renew all --config=kubeadm.yaml æ£€æŸ¥æ›´æ–° kubeadm alpha certs check-expiration æ›´æ–°ä¸‹ kubeconfig æ–‡ä»¶ kubeadm init phase kubeconfig all --config kubeadm.yaml è¦†ç›–æ‰åŸæœ¬çš„ admin æ–‡ä»¶ $ mv $HOME/.kube/config $HOME/.kube/config.old $ cp -i /etc/kubernetes/admin.conf $HOME/.kube/config $ chown $(id -u):$(id -g) $HOME/.kube/config é‡å¯ kube-apiserverã€kube-controllerã€kube-schedulerã€etcd ,æŸ¥çœ‹ apiserver çš„è¯ä¹¦çš„æœ‰æ•ˆæœŸ echo | openssl s_client -showcerts -connect 127.0.0.1:6443 -servername api 2\u003e/dev/null | openssl x509 -noout -enddate ","date":"2022-11-15","objectID":"/k8s16/:3:1","tags":["k8s"],"title":"Kubernetes â€” æ›´æ–°è¯ä¹¦","uri":"/k8s16/"},{"categories":["k8s"],"content":"æ€»ç»“ å¯ä»¥çœ‹åˆ°ç°åœ¨çš„æœ‰æ•ˆæœŸæ˜¯ä¸€å¹´è¿‡åçš„ï¼Œè¯æ˜å·²ç»æ›´æ–°æˆåŠŸäº†ã€‚ ","date":"2022-11-15","objectID":"/k8s16/:4:0","tags":["k8s"],"title":"Kubernetes â€” æ›´æ–°è¯ä¹¦","uri":"/k8s16/"},{"categories":["æ•°æ®åº“"],"content":"èƒŒæ™¯ å…³äºOracle æ•°æ®åº“ä¸€ç›´æ˜¯è®¸å¤šåˆå­¦è€…æ¯”è¾ƒå¤´ç–¼çš„åœ°æ–¹ï¼Œä¸€æ–¹é¢å—é™äºçº¿ä¸Šæ–‡æ¡£æ¯”è¾ƒå°‘ï¼Œä»¤ä¸€æ–¹é¢åœ¨ä¼ä¸šä¸­ä¸å¾—ä¸æ¥è§¦å’Œä½¿ç”¨Oracleæ•°æ®åº“ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯æ•™å¤§å®¶å¦‚ä½•é€šè¿‡é…ç½®oracle clientæ¥è¿œç¨‹è®¿é—®Oracleæ•°æ®åº“ã€‚æœ¬æ–‡ä¼šé€šè¿‡python3å’Œcx_Oracleæ¥å®ç°å¯¹Oracleçš„è®¿é—®å’Œå¢åˆ æ”¹æŸ¥ ","date":"2022-11-15","objectID":"/oracle-client/:1:0","tags":["oracle"],"title":"Oracle Instant Client å®‰è£…é…ç½®å®ç°è¿œç¨‹è¿æ¥oracle","uri":"/oracle-client/"},{"categories":["æ•°æ®åº“"],"content":"ä¸‹è½½oracleå®¢æˆ·ç«¯ å®˜æ–¹åœ°å€ä¸‹è½½ ","date":"2022-11-15","objectID":"/oracle-client/:2:0","tags":["oracle"],"title":"Oracle Instant Client å®‰è£…é…ç½®å®ç°è¿œç¨‹è¿æ¥oracle","uri":"/oracle-client/"},{"categories":["æ•°æ®åº“"],"content":"å®‰è£… ä¸‹è½½å¹¶å®‰è£…ä½ çš„oracle clientï¼Œå› ä¸ºæˆ‘è¿æ¥çš„11g oracleï¼Œæ‰€ä»¥ä¸‹è½½11.2ç‰ˆæœ¬ # ä¸‹è½½ wget https://download.oracle.com/otn/linux/instantclient/11204/oracle-instantclient11.2-basic-11.2.0.4.0-1.x86_64.rpm # å®‰è£… rpm -ivh oracle-instantclient11.2-basic-11.2.0.4.0-1.x86_64.rpm ","date":"2022-11-15","objectID":"/oracle-client/:2:1","tags":["oracle"],"title":"Oracle Instant Client å®‰è£…é…ç½®å®ç°è¿œç¨‹è¿æ¥oracle","uri":"/oracle-client/"},{"categories":["æ•°æ®åº“"],"content":"é…ç½®ç¯å¢ƒå˜é‡ # ç›´æ¥è¿è¡Œ export ORACLE_HOME=/usr/lib/oracle/11.2/client64 export ORABIN=/usr/lib/oracle/11.2/client64/bin # ç¼–è¾‘ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ vim /etc/profile # åº•éƒ¨å¢åŠ å†…å®¹ export PATH USER LOGNAME MAIL HOSTNAME HISTSIZE HISTCONTROL export ORACLE_HOME=/usr/lib/oracle/11.2/client64 export TNS_ADMIN=/usr/lib/oracle/11.2/client64 export LD_LIBRARY_PATH=/usr/lib/oracle/11.2/client64/lib export ORABIN=/usr/lib/oracle/11.2/client64/bin PATH=$PATH:$ORABIN export PATH export PATH=$ORACLE_HOME:$PATH export PATH=$PATH:$HOME/bin:$ORACLE_HOME/bin # åˆ·æ–°ç¯å¢ƒå˜é‡ source /etc/profile ","date":"2022-11-15","objectID":"/oracle-client/:2:2","tags":["oracle"],"title":"Oracle Instant Client å®‰è£…é…ç½®å®ç°è¿œç¨‹è¿æ¥oracle","uri":"/oracle-client/"},{"categories":["æ•°æ®åº“"],"content":"ä¸‹è½½cx_Oracle pip3 install cx_Oracle åˆ›å»ºOracle.pyæ–‡ä»¶ #!/usr/bin/python3 \"\"\" ä½¿ç”¨python å¯¹oracleæ•°æ®è¿›è¡Œæ“ä½œ æå‰å®‰è£…å¥½ cx_Oracle pip3 install cx_Oracle \"\"\" import cx_Oracle conn = cx_Oracle.connect('ç”¨æˆ·å','å¯†ç ','IP/SN') cursor = conn.cursor() sql = 'SELECT * FROM test_table' cursor.execute(sql) res = cursor.fetchall() print (res) ","date":"2022-11-15","objectID":"/oracle-client/:3:0","tags":["oracle"],"title":"Oracle Instant Client å®‰è£…é…ç½®å®ç°è¿œç¨‹è¿æ¥oracle","uri":"/oracle-client/"},{"categories":["æ•°æ®åº“"],"content":"æ‰§è¡Œæ–‡ä»¶ python3 oracle.py #è¾“å‡ºå†…å®¹ [none,0] ","date":"2022-11-15","objectID":"/oracle-client/:4:0","tags":["oracle"],"title":"Oracle Instant Client å®‰è£…é…ç½®å®ç°è¿œç¨‹è¿æ¥oracle","uri":"/oracle-client/"},{"categories":["æ—¥å¸¸"],"content":"28åˆ1å¤šåŠŸèƒ½è„šæœ¬ è„šæœ¬è¯´æ˜: å¤šåˆä¸€è„šæœ¬ï¼ŒDDç³»ç»Ÿï¼ŒBBRï¼Œxray,TGæ­å»ºç­‰ç­‰Â·å¸¸ç”¨çš„å„ç§è„šæœ¬åŸºæœ¬éƒ½æœ‰ï¼ ç³»ç»Ÿæ”¯æŒ: CentOS6+ / Debian6+ / Ubuntu14+ æ”¯æŒå®‰è£…BBRï¼Œæ­å»ºKCPtunï¼Œssrå¤šç”¨æˆ·ç‰ˆ å®‰è£…V2aryï¼ŒTgä¸“ç”¨ä»£ç†ï¼ˆGoç‰ˆï¼‰ï¼Œå®‰è£…Goflyway å°é¸¡æ€§èƒ½æµ‹è¯•ï¼Œå›ç¨‹çº¿è·¯æµ‹è¯•ï¼Œäº‘ç›‘æ§ å‚»ç“œå¼ä¸€é”®DDåŒ… ä¸€é”®å¼€å¯é»˜è®¤bbr Netflixè§£é”æ£€æµ‹ xrayå®‰è£… å®å¡”é¢æ¿ï¼Œé—²è›‹é¢æ¿ï¼Œx-uié¢æ¿ï¼ŒWARP ä¸€é”®é…ç½® è„šæœ¬ç‰¹ç‚¹: ç›®å‰ç½‘ä¸Šçš„å„ä¸ªä¸€é”®è„šæœ¬åŸºæœ¬éƒ½æ˜¯åªæœ‰ å®‰è£…/å¯åŠ¨/é‡å¯ ç­‰åŸºç¡€åŠŸèƒ½ï¼Œå¯¹äºå°ç™½æ¥è¯´è¿˜æ˜¯ä¸å¤Ÿç®€å•æ–¹ä¾¿ã€‚å¸¸ç”¨çš„å„ç§è„šæœ¬åŸºæœ¬éƒ½æœ‰ï¼ ä¸‹è½½å®‰è£…: bash \u003c(curl -s -L https://git.io/JPj82) ","date":"2022-11-10","objectID":"/shell-test/:1:0","tags":["daliy"],"title":"shellåŠŸèƒ½è„šæœ¬é›†åˆ","uri":"/shell-test/"},{"categories":["æ—¥å¸¸"],"content":"gfw_pushä¸€é”®å®‰è£… è„šæœ¬è¯´æ˜: ç›‘æµ‹æœåŠ¡å™¨IPæ˜¯å¦è¢«å¢™å¹¶æ¨é€è‡³ Telegram ä¸€é”®è„šæœ¬ ç³»ç»Ÿæ”¯æŒ: CentOS6+ / Debian6+ / Ubuntu14+ ä¸‹è½½å®‰è£…: bash \u003c(curl -s -L git.io/JPjzm) ","date":"2022-11-10","objectID":"/shell-test/:2:0","tags":["daliy"],"title":"shellåŠŸèƒ½è„šæœ¬é›†åˆ","uri":"/shell-test/"},{"categories":["æ—¥å¸¸"],"content":"æœåŠ¡å™¨æµ‹é€Ÿ è„šæœ¬è¯´æ˜: æœåŠ¡å™¨ä¸€é”®æµ‹é€Ÿè„šæœ¬ ç³»ç»Ÿæ”¯æŒ: CentOS7 / Debian7+ / Ubuntu14+ ä¸‹è½½å®‰è£…: bash \u003c(curl -s -L git.io/JPjzE) ","date":"2022-11-10","objectID":"/shell-test/:3:0","tags":["daliy"],"title":"shellåŠŸèƒ½è„šæœ¬é›†åˆ","uri":"/shell-test/"},{"categories":["Mac"],"content":"zlibary æ— æ³•ä¸‹è½½ å› ä¸º zlib æœ€è¿‘è¢«å°ï¼Œå¯¼è‡´ç°åœ¨é€šè¿‡æ­£å¸¸æ–¹æ³•ä¸‹è½½ä¸äº†ç”µå­ä¹¦ï¼Œä½†æ˜¯ä¸è¦æ…Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æš—ç½‘è¿›è¡Œä¸‹è½½~ ","date":"2022-11-07","objectID":"/zlibary/:0:0","tags":["brew"],"title":"zlibary æ— æ³•ä¸‹è½½ è§£å†³æ–¹æ¡ˆ","uri":"/zlibary/"},{"categories":["Mac"],"content":"å®‰è£…brave æµè§ˆå™¨ å®˜ç½‘ä¸‹è½½ ä¸‹è½½ä½ éœ€è¦çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªä¸‹è½½æµè§ˆå™¨å¾ˆç®€å•ï¼Œæˆ‘å°±ä¸å¤šè¯´äº† ","date":"2022-11-07","objectID":"/zlibary/:1:0","tags":["brew"],"title":"zlibary æ— æ³•ä¸‹è½½ è§£å†³æ–¹æ¡ˆ","uri":"/zlibary/"},{"categories":["Mac"],"content":"é…ç½®toré…ç½® ç¼–è¾‘toré…ç½® ","date":"2022-11-07","objectID":"/zlibary/:2:0","tags":["brew"],"title":"zlibary æ— æ³•ä¸‹è½½ è§£å†³æ–¹æ¡ˆ","uri":"/zlibary/"},{"categories":["Mac"],"content":"ä½¿ç”¨toræµè§ˆ zlibary tor æš—ç½‘ç‰ˆ ","date":"2022-11-07","objectID":"/zlibary/:3:0","tags":["brew"],"title":"zlibary æ— æ³•ä¸‹è½½ è§£å†³æ–¹æ¡ˆ","uri":"/zlibary/"},{"categories":["ç›‘æ§"],"content":"å·¥ä½œåŸç† æ£€æµ‹åˆ°é…ç½®æ–‡ä»¶å˜åŒ– é€šè¿‡åœæ­¢æ‰€æœ‰è¾“å…¥åœæ­¢å½“å‰pipline ç”¨æ–°çš„é…ç½®åˆ›å»ºä¸€ä¸ªæ–°çš„ç®¡é“ æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡® æ£€æŸ¥æ‰€æœ‰çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯å¦å¯ä»¥åˆå§‹åŒ– æ£€æŸ¥æˆåŠŸä½¿ç”¨æ–°çš„pipelineæ›¿æ¢å½“å‰çš„pipeline æ£€æŸ¥å¤±è´¥,ä½¿ç”¨æ—§çš„ç»§ç»­å·¥ä½œ. åœ¨é‡è½½è¿‡ç¨‹ä¸­,jvmæ²¡æœ‰é‡å¯. ","date":"2022-10-31","objectID":"/logstash1/:1:0","tags":["logstash"],"title":"Logstash è‡ªåŠ¨é‡è½½é…ç½®æ–‡ä»¶","uri":"/logstash1/"},{"categories":["ç›‘æ§"],"content":"Logstash è‡ªåŠ¨é‡æ–°åŠ è½½é…ç½® ä¸ºäº†å¯ä»¥è‡ªåŠ¨æ£€æµ‹é…ç½®æ–‡ä»¶çš„å˜åŠ¨å’Œè‡ªåŠ¨é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶,éœ€è¦åœ¨å¯åŠ¨çš„æ—¶å€™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤: ./bin/lagstash -f configfile.conf --config.reload.automatic å¯åŠ¨Logstashçš„æ—¶å€™ä½¿ç”¨--config.reload.automaticæˆ–-ré€‰é¡¹æ¥å¼€å¯è‡ªåŠ¨é‡è½½é…ç½®ã€‚ ","date":"2022-10-31","objectID":"/logstash1/:2:0","tags":["logstash"],"title":"Logstash è‡ªåŠ¨é‡è½½é…ç½®æ–‡ä»¶","uri":"/logstash1/"},{"categories":["ç›‘æ§"],"content":"ä¿®æ”¹æ£€æµ‹é—´éš”æ—¶é—´ é»˜è®¤æ£€æµ‹é…ç½®æ–‡ä»¶çš„é—´éš”æ—¶é—´æ˜¯3ç§’,å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ”¹å˜ --config.reload.interval \u003csecond\u003e å¦‚æœLogstashå·²ç»è¿è¡Œå¹¶ä¸”æ²¡æœ‰å¼€å¯è‡ªåŠ¨é‡è½½ï¼Œä½ å¯ä»¥å¼ºåˆ¶Logstashé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶å¹¶ä¸”é‡å¯ç®¡é“é€šè¿‡å‘é€ä¸€ä¸ªSIGHUPä¿¡å·ã€‚æ¯”å¦‚ï¼š kill -1 \u003cpid\u003e å…¶ä¸­æ˜¯æ­£åœ¨è¿è¡Œçš„Logstashçš„è¿›ç¨‹å·ã€‚ ","date":"2022-10-31","objectID":"/logstash1/:3:0","tags":["logstash"],"title":"Logstash è‡ªåŠ¨é‡è½½é…ç½®æ–‡ä»¶","uri":"/logstash1/"},{"categories":["ç›‘æ§"],"content":"æ³¨æ„ï¼ï¼ï¼ stdinè¾“å…¥æ’ä»¶ä¸æ”¯æŒè‡ªåŠ¨é‡å¯. syslogä½œä¸ºè¾“å…¥æº,å½“é‡è½½é…ç½®æ–‡ä»¶æ—¶,ä¼šå´©æºƒ. è§£å†³æ–¹æ³• ","date":"2022-10-31","objectID":"/logstash1/:4:0","tags":["logstash"],"title":"Logstash è‡ªåŠ¨é‡è½½é…ç½®æ–‡ä»¶","uri":"/logstash1/"},{"categories":["Mac"],"content":"å…³äºmacOS 13 è½¯ä»¶å¤±æ•ˆ Warning: You are using macOS 13. We do not provide support for this pre-release version. You will encounter build failures with some formulae. Please create pull requests instead of asking for help on Homebrewâ€™s GitHub, Twitter or any other official channels. You are responsible for resolving any issues you experience while you are running this pre-release version. ç®€å•æ¥è¯´å°±æ˜¯macOS13ç‰ˆæœ¬ æš‚æ—¶ä¸æä¾›æŠ€æœ¯æ”¯æŒ ","date":"2022-10-31","objectID":"/macos13/:0:0","tags":["brew"],"title":"macOS 13 å‡çº§ è½¯ä»¶å¤±æ•ˆ","uri":"/macos13/"},{"categories":["Mac"],"content":"è§£å†³æ–¹æ³• å‡çº§å®Œmacos13ä¹‹åå‘ç°äº†æ¯”è¾ƒéº»çƒ¦çš„é—®é¢˜ï¼Œå¾ˆå¤šè½¯ä»¶å‡ºç°äº†ä¸å…¼å®¹ï¼Œè¿™çœŸçš„å¾ˆæ— å¥ˆï¼Œå¯¹äºæˆ‘ä»¬è¿™äº›åšITçš„äººæ¥è¯´ï¼Œè¿™æ˜¯è‡´å‘½çš„ã€‚æˆ‘ä»¥gitè½¯ä»¶ä¸¾ä¾‹ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ã€‚ ","date":"2022-10-31","objectID":"/macos13/:1:0","tags":["brew"],"title":"macOS 13 å‡çº§ è½¯ä»¶å¤±æ•ˆ","uri":"/macos13/"},{"categories":["Mac"],"content":"1. ä½¿ç”¨æ—¶é—´æœºå™¨æ¢å¤å¤‡ä»½ ä½¿ç”¨å‰æï¼šä½ ä¹‹å‰å¤‡ä»½äº†ç³»ç»Ÿï¼Œå¹¶ä¸”ç³»ç»Ÿæ­£å¸¸ è¿™ä¸ªæ–¹æ³•æ›´åŠ ä¸€åŠ³æ°¸é€¸ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸ç¡®å®šè¿˜æœ‰ä»€ä¹ˆè½¯ä»¶ä¸æ”¯æŒmacos13 ","date":"2022-10-31","objectID":"/macos13/:1:1","tags":["brew"],"title":"macOS 13 å‡çº§ è½¯ä»¶å¤±æ•ˆ","uri":"/macos13/"},{"categories":["Mac"],"content":"2. é‡æ–°å®‰è£…xcode-select xcode-select --install ","date":"2022-10-31","objectID":"/macos13/:1:2","tags":["brew"],"title":"macOS 13 å‡çº§ è½¯ä»¶å¤±æ•ˆ","uri":"/macos13/"},{"categories":["work"],"content":"Nexus3 docker-compose å®‰è£… åˆ›å»ºå¤–éƒ¨å­˜å‚¨ mkdir -p /data/nexus chmod +777 -R /data/nexus è¿è¡Œdocker-compose version: '3' services: nexus3: image: sonatype/nexus3:3.42.0 container_name: nexus3 ports: - 8081:8081 - 5000:5000 volumes: - /data/nexus:/nexus-data environment: - INSTALL4J_ADD_VM_PARAMS=-Xms1024m -Xmx1024m -XX:MaxDirectMemorySize=1024m -Djava.util.prefs.userRoot=/some-other-dir restart: always # èµ‹äºˆå¤–éƒ¨rootæƒé™ privileged: true docker-compose up -d è¿è¡Œdocker-compose ","date":"2022-10-31","objectID":"/nexus/:1:0","tags":["work"],"title":"Nexus3 ä½¿ç”¨å’Œéƒ¨ç½²","uri":"/nexus/"},{"categories":["é—®é¢˜åº“"],"content":"githubAction set-outputå¼ƒç”¨é”™è¯¯ The set-output command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/ ","date":"2022-10-21","objectID":"/github-error/:0:0","tags":["error"],"title":"githubAction set-outputå¼ƒç”¨é”™è¯¯","uri":"/github-error/"},{"categories":["é—®é¢˜åº“"],"content":"åŸå›  å¦‚æœæ‚¨æœ‰ä¸€ä¸ªä½¿ç”¨ è®¾ç½®è¾“å‡ºçš„GitHub Actionsecho ::set-output key=valueå·¥ä½œæµç¨‹ï¼Œæ‚¨å·²ç»å¼€å§‹çœ‹åˆ°æ— ç”¨çš„å¼ƒç”¨è­¦å‘Šã€‚è¿™æ˜¯ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚æŸ¥çœ‹å®˜æ–¹é“¾æ¥åŸºæœ¬ä¸Šå¾—ä¸åˆ°ä»€ä¹ˆå¸®åŠ©ï¼ ","date":"2022-10-21","objectID":"/github-error/:1:0","tags":["error"],"title":"githubAction set-outputå¼ƒç”¨é”™è¯¯","uri":"/github-error/"},{"categories":["é—®é¢˜åº“"],"content":"ä¿®å¤æ–¹æ³• æ›´æ–°å…¶å®ƒäººçš„actionæ–¹æ³• å°† @actions/core æå‡åˆ° 1.10.0 ä¿®æ”¹è‡ªå·±çš„acitonæ–¹æ³• run: echo \"::set-output name=KEY::VALUE\" ## æ”¹ä¸º run: echo \"KEY=VALUE\" \u003e\u003e$GITHUB_OUTPUT å»ºè®®ï¼šä½¿ç”¨è‡ªå·±çš„æ–¹æ³• ","date":"2022-10-21","objectID":"/github-error/:2:0","tags":["error"],"title":"githubAction set-outputå¼ƒç”¨é”™è¯¯","uri":"/github-error/"},{"categories":["é—®é¢˜åº“"],"content":"æ€»ç»“ å¹³å°ç»è¥è€…éå¸¸è‚†æ„å¦„ä¸ºçš„ä¿®æ”¹è‡ªå·±çš„ä»£ç å†…å®¹å¼ƒç”¨åŠŸèƒ½ï¼Œæ— é™çš„æƒåŠ›æ»‹ç”Ÿå‚²æ…¢â€¦â€¦æˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ†å¼€å‘è¿™å¹¶æ²¡æœ‰æ³¨æ„åˆ°è¿™ä¸ªå‘Šè­¦ï¼ŒçŸ¥é“æµæ°´çº¿æœåŠ¡æŠ¥é”™ä¹‹åæ‰ä¼šæ³¨æ„åˆ°ï¼Œå¸Œæœ›å¾®è½¯å¯ä»¥å¯¹èƒ½æ›´åŠ åŒ…å®¹ä¸åŒçš„å¼€å‘è€…ï¼Œå°Šé‡å¼€å‘è€…ç¤¾åŒºã€‚ ","date":"2022-10-21","objectID":"/github-error/:3:0","tags":["error"],"title":"githubAction set-outputå¼ƒç”¨é”™è¯¯","uri":"/github-error/"},{"categories":["web3.0"],"content":"èƒŒæ™¯ æœ‰å¾ˆå¤šæœ‹å‹é—®æˆ‘ä»€ä¹ˆæ˜¯web3.0ï¼Œweb3.0ä¼¼ä¹ç¦»æˆ‘ä»¬éå¸¸è¿œã€‚æœ‰äººä¼šè¯´web3.0æ˜¯æœªæ¥ä¸‹ä¸€ä»£çš„æŠ€æœ¯å¾ˆæœ‰å‰æ™¯ï¼ä½†æ˜¯ä¸¾å‡ºä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œä¼¼ä¹åˆéå¸¸å›°éš¾ã€‚ä½¿ç”¨web3.0æ˜¯ä¸€ä»¶éå¸¸é«˜ç§‘æŠ€çš„äº‹æƒ…ã€‚æœ¬æ–‡å°±æ˜¯é€šè¿‡å„IPFSç»™å„ä½åˆå­¦è€…å’Œå¯¹web3.0æ„Ÿå…´è¶£çš„äººä½¿ç”¨ä»‹ç»ï¼Œçœ‹å®Œæœ¬ç¯‡æ–‡ç« ï¼Œä½ å°±èƒ½è¿›å…¥web3.0çš„ä¸–ç•Œäº†~ ","date":"2022-10-21","objectID":"/ipfs/:1:0","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["web3.0"],"content":"IPFS æ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿ(InterPlanetary File System). IPFS æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„web, ç‚¹åˆ°ç‚¹è¶…åª’ä½“åè®®. å¯ä»¥è®©æˆ‘ä»¬çš„äº’è”ç½‘é€Ÿåº¦æ›´å¿«, æ›´åŠ å®‰å…¨, å¹¶ä¸”æ›´åŠ å¼€æ”¾. IPFSåè®®çš„ç›®æ ‡æ˜¯å–ä»£ä¼ ç»Ÿçš„äº’è”ç½‘åè®®HTTP ","date":"2022-10-21","objectID":"/ipfs/:2:0","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["web3.0"],"content":"ä¸‹è½½å®‰è£… æœ¬æ–‡ä¸ä¼šå¯¹æŠ€æœ¯åšæ›´æ·±å…¥æ¢è®¨ï¼Œåªåœ¨åº”ç”¨å±‚é¢ä¸Šä»‹ç» ","date":"2022-10-21","objectID":"/ipfs/:3:0","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["web3.0"],"content":"ä¸‹è½½ å®˜ç½‘ ä¸‹è½½windows ä¸‹è½½MAC ","date":"2022-10-21","objectID":"/ipfs/:3:1","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["web3.0"],"content":"å®‰è£… è¿è¡Œ .exe æ–‡ä»¶å¼€å§‹å®‰è£…ï¼Œé€‰æ‹©æ˜¯è¦ä¸ºæ‚¨è‡ªå·±è¿˜æ˜¯ä¸ºè®¡ç®—æœºä¸Šçš„æ‰€æœ‰ç”¨æˆ·å®‰è£…åº”ç”¨ç¨‹åºã€‚ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š é€‰æ‹©åº”ç”¨ç¨‹åºçš„å®‰è£…ä½ç½®ã€‚é»˜è®¤ä½ç½®é€šå¸¸å¾ˆå¥½ã€‚ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼š ç­‰å¾…å®‰è£…å®Œæˆï¼Œç„¶åå•å‡»å®Œæˆï¼š æ‚¨ç°åœ¨å¯ä»¥åœ¨çŠ¶æ€æ ä¸­æ‰¾åˆ° IPFS å›¾æ ‡ï¼š ","date":"2022-10-21","objectID":"/ipfs/:3:2","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["web3.0"],"content":"ä½¿ç”¨ æ‰“å¼€è½¯ä»¶ å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼æ˜¯ä¸æ˜¯å¾ˆç®€å•æ¥ä¸‹æ¥æµè§ˆå™¨ç›´æ¥æŸ¥çœ‹web3.0ç«™ç‚¹ ","date":"2022-10-21","objectID":"/ipfs/:4:0","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["web3.0"],"content":"ç«™ç‚¹ æˆ‘çš„ web3.0 blogï¼š ipfs.jobcher.com å¯¹æ ‡youdTubeçš„è§†é¢‘ç½‘ç«™: d.tube Orbitï¼ŒQQ åœ¨ IPFSä¸Šçš„æ›¿ä»£è€…: orbit.chat Akashaï¼Œå¯¹æ ‡ facebookï¼Œå¾®ä¿¡ç­‰ç¤¾äº¤å·¥å…·ï¼šakasha.world ","date":"2022-10-21","objectID":"/ipfs/:5:0","tags":["IPFS","web3.0"],"title":"æ‰“å¼€web 3.0çš„å¤§é—¨â€”â€”IPFSä½¿ç”¨","uri":"/ipfs/"},{"categories":["k8s"],"content":"Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½² Rook å°†åˆ†å¸ƒå¼å­˜å‚¨è½¯ä»¶è½¬å˜ä¸ºè‡ªæˆ‘ç®¡ç†ï¼Œè‡ªæˆ‘ç¼©æ”¾å’Œè‡ªæˆ‘ä¿®å¤çš„å­˜å‚¨æœåŠ¡ã€‚å®ƒé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå¼•å¯¼ã€é…ç½®ã€ä¾›åº”ã€æ‰©å±•ã€å‡çº§ã€è¿ç§»ã€ç¾éš¾æ¢å¤ã€ç›‘æ§å’Œèµ„æºç®¡ç†æ¥å®ç°ã€‚ Rook ä½¿ç”¨åŸºç¡€çš„äº‘åŸç”Ÿå®¹å™¨ç®¡ç†ã€è°ƒåº¦å’Œç¼–æ’å¹³å°æä¾›çš„åŠŸèƒ½æ¥å±¥è¡Œå…¶èŒè´£ã€‚ Rook åˆ©ç”¨æ‰©å±•ç‚¹æ·±å…¥èå…¥äº‘åŸç”Ÿç¯å¢ƒï¼Œä¸ºè°ƒåº¦ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€èµ„æºç®¡ç†ã€å®‰å…¨æ€§ã€ç›‘æ§å’Œç”¨æˆ·ä½“éªŒæä¾›æ— ç¼ä½“éªŒã€‚ ","date":"2022-10-11","objectID":"/k8s14/:0:0","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"éƒ¨ç½² ","date":"2022-10-11","objectID":"/k8s14/:1:0","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"ä½¿ç”¨ helm éƒ¨ç½² helm init -i jimmysong/kubernetes-helm-tiller:v2.8.1 helm repo add rook-alpha https://charts.rook.io/alpha helm install rook-alpha/rook --name rook --namespace rook-system ","date":"2022-10-11","objectID":"/k8s14/:1:1","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"ç›´æ¥ä½¿ç”¨ yaml æ–‡ä»¶éƒ¨ç½² kubectl apply -f rook-operator.yaml ä¸è®ºä½¿ç”¨é‚£ç§æ–¹å¼éƒ¨ç½²çš„ rook operatorï¼Œéƒ½ä¼šåœ¨ rook-agent ä¸­çœ‹åˆ° rook-agent ç”¨æˆ·æ— æ³•åˆ—å‡ºé›†ç¾¤ä¸­æŸäº›èµ„æºçš„é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡ä¸º rook-agent çš„åˆ†é… cluster-admin æƒé™ä¸´æ—¶è§£å†³ï¼Œè¯¦è§ Issue 1472ã€‚ ä½¿ç”¨å¦‚ä¸‹ yaml æ–‡ä»¶åˆ›å»ºä¸€ä¸ª ClusterRoleBinding å¹¶åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚ kind: ClusterRoleBinding apiVersion: rbac.authorization.k8s.io/v1beta1 metadata: name: rookagent-clusterrolebinding subjects: - kind: ServiceAccount name: rook-agent namespace: rook-system roleRef: kind: ClusterRole name: cluster-admin apiGroup: \"\" ","date":"2022-10-11","objectID":"/k8s14/:1:2","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"éƒ¨ç½² rook cluster åˆ›å»ºå®Œ rook operator åï¼Œæˆ‘ä»¬å†éƒ¨ç½² rook clusterã€‚ apiVersion: v1 kind: Namespace metadata: name: rook --- apiVersion: rook.io/v1alpha1 kind: Cluster metadata: name: rook namespace: rook spec: versionTag: v0.6.2 dataDirHostPath: /var/lib/rook storage: useAllNodes: true useAllDevices: false storeConfig: storeType: bluestore databaseSizeMB: 1024 journalSizeMB: 1024 æ³¨æ„ï¼šéœ€è¦æ‰‹åŠ¨æŒ‡å®š versionTagï¼Œå› ä¸ºè¯¥é•œåƒ repo ä¸­æ²¡æœ‰ latest æ ‡ç­¾ï¼Œå¦‚ä¸æŒ‡å®šçš„è¯ Pod å°†å‡ºç°é•œåƒæ‹‰å–é”™è¯¯ã€‚ kubectl apply -f rook-cluster.yaml rook é›†ç¾¤è¿è¡Œåœ¨rook namespace ä¸‹ï¼ŒæŸ¥çœ‹ rook é›†ç¾¤ä¸­çš„ podï¼š $ kubectl -n rook get pod NAME READY STATUS RESTARTS AGE rook-api-848df956bf-q6zf2 1/1 Running 0 4m rook-ceph-mgr0-cfccfd6b8-cpk5p 1/1 Running 0 4m rook-ceph-mon0-t496l 1/1 Running 0 6m rook-ceph-mon1-zcn7v 1/1 Running 0 5m rook-ceph-mon3-h97qx 1/1 Running 0 3m rook-ceph-osd-557tn 1/1 Running 0 4m rook-ceph-osd-74frb 1/1 Running 0 4m rook-ceph-osd-zf7rg 1/1 Running 1 4m rook-tools 1/1 Running 0 2m ","date":"2022-10-11","objectID":"/k8s14/:1:3","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"éƒ¨ç½² StorageClass StorageClass rook-block çš„ yaml æ–‡ä»¶ï¼ˆrook-storage.yamlï¼‰å¦‚ä¸‹ï¼š apiVersion: rook.io/v1alpha1 kind: Pool metadata: name: replicapool namespace: rook spec: replicated: size: 1 # For an erasure-coded pool, comment out the replication size above and uncomment the following settings. # Make sure you have enough OSDs to support the replica size or erasure code chunks. #erasureCoded: # dataChunks: 2 # codingChunks: 1 --- apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: rook-block provisioner: rook.io/block parameters: pool: replicapool # Specify the Rook cluster from which to create volumes. # If not specified, it will use `rook` as the name of the cluster. # This is also the namespace where the cluster will be clusterName: rook # Specify the filesystem type of the volume. If not specified, it will use `ext4`. # fstype: ext4 ","date":"2022-10-11","objectID":"/k8s14/:1:4","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"å·¥å…· éƒ¨ç½² Rook æ“ä½œå·¥å…· podï¼Œè¯¥å·¥å…· pod çš„ yaml æ–‡ä»¶ï¼ˆrook-tools.yamlï¼‰å¦‚ä¸‹ï¼š apiVersion: v1 kind: Pod metadata: name: rook-tools namespace: rook-system spec: dnsPolicy: ClusterFirstWithHostNet serviceAccountName: rook-operator containers: - name: rook-tools image: rook/toolbox:master imagePullPolicy: IfNotPresent env: - name: ROOK_ADMIN_SECRET valueFrom: secretKeyRef: name: rook-ceph-mon key: admin-secret securityContext: privileged: true volumeMounts: - mountPath: /dev name: dev - mountPath: /sys/bus name: sysbus - mountPath: /lib/modules name: libmodules - name: mon-endpoint-volume mountPath: /etc/rook hostNetwork: false volumes: - name: dev hostPath: path: /dev - name: sysbus hostPath: path: /sys/bus - name: libmodules hostPath: path: /lib/modules - name: mon-endpoint-volume configMap: name: rook-ceph-mon-endpoints items: - key: endpoint path: mon-endpoints ConfigMap å’Œ Secret ä¸­çš„é…ç½®é¡¹å†…å®¹æ˜¯è‡ªå®šä¹‰çš„ã€‚ ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤éƒ¨ç½²å·¥å…· podï¼š kubectl apply -f rook-tools.yaml è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ podï¼Œæ²¡æœ‰ä½¿ç”¨å…¶ä»–é«˜çº§çš„ controller æ¥ç®¡ç†ï¼Œæˆ‘ä»¬å°†å®ƒéƒ¨ç½²åœ¨ rook-system çš„ namespace ä¸‹ã€‚ kubectl -n rook exec -it rook-tools bash ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ rook é›†ç¾¤çŠ¶æ€ã€‚ $ rookctl status OVERALL STATUS: OK USAGE: TOTAL USED DATA AVAILABLE 37.95 GiB 1.50 GiB 0 B 36.45 GiB MONITORS: NAME ADDRESS IN QUORUM STATUS rook-ceph-mon0 10.254.162.99:6790/0 true UNKNOWN MGRs: NAME STATUS rook-ceph-mgr0 Active OSDs: TOTAL UP IN FULL NEAR FULL 1 1 1 false false PLACEMENT GROUPS (0 total): STATE COUNT none $ ceph df GLOBAL: SIZE AVAIL RAW USED %RAW USED 38861M 37323M 1537M 3.96 POOLS: NAME ID USED %USED MAX AVAIL OBJECTS ","date":"2022-10-11","objectID":"/k8s14/:2:0","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"ç¤ºä¾‹ å®˜æ–¹æä¾›äº†ä½¿ç”¨ Rook ä½œä¸ºå…¸å‹çš„ LAMPï¼ˆLinux + Apache + MySQL + PHPï¼‰åº”ç”¨ Wordpress çš„å­˜å‚¨åç«¯çš„ç¤ºä¾‹çš„ yaml æ–‡ä»¶ mysql.yaml å’Œ wordpress.yamlï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºã€‚ kubectl apply -f mysql.yaml kubectl apply -f wordpress.yaml ","date":"2022-10-11","objectID":"/k8s14/:3:0","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"æ¸…ç† å¦‚æœä½¿ç”¨ helm éƒ¨ç½²ï¼Œåˆ™æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š helm delete --purge rook helm delete daemonset rook-agent å¦‚æœä½¿ç”¨ yaml æ–‡ä»¶ç›´æ¥éƒ¨ç½²ï¼Œåˆ™ä½¿ç”¨ kubectl delete -f åŠ å½“åˆä½¿ç”¨çš„ yaml æ–‡ä»¶å³å¯åˆ é™¤é›†ç¾¤ã€‚ ","date":"2022-10-11","objectID":"/k8s14/:4:0","tags":["k8s"],"title":"Kubernetes â€” Rookäº‘å­˜å‚¨ä»‹ç»å’Œéƒ¨ç½²","uri":"/k8s14/"},{"categories":["k8s"],"content":"åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨ ","date":"2022-10-11","objectID":"/k8s15/:0:0","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"å‰æ æ­£å¸¸è¿è¡Œçš„å¤šèŠ‚ç‚¹K8Sé›†ç¾¤ï¼Œå¯ä»¥æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯æ›´å¤šã€‚ æ¯ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ä¸€ä¸ªæ²¡æœ‰è¢«åˆ†åŒºçš„ç¡¬ç›˜ï¼Œæœ€å¥½å¤§å°ä¸€è‡´ä¸ç„¶ä¼šæµªè´¹ã€‚ æ²¡é”™å…¶å®å°±æ˜¯ä¸€ä¸ªè¦æ±‚ï¼Œå¿…é¡»æœ‰é›†ç¾¤æ‰èƒ½è¿›è¡Œå®¹å™¨ç®¡ç†ï¼Œå¿…é¡»æœ‰ç¡¬ç›˜æ‰èƒ½åšå­˜å‚¨è¿™äº›éƒ½æ˜¯åŸºç¡€ã€‚ ","date":"2022-10-11","objectID":"/k8s15/:1:0","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"æ·»åŠ ç¡¬ç›˜ ä¸»æœº IP ç£ç›˜ master01 10.12.12.51 SATA 20G master02 10.12.12.52 SATA 20G master03 10.12.12.53 SATA 20G worker01 10.12.12.54 SATA 20G worker02 10.12.12.55 SATA 20G åœ¨5ä¸ªèŠ‚ç‚¹éƒ½åŠ 20gå­˜å‚¨ ","date":"2022-10-11","objectID":"/k8s15/:2:0","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"é‡å¯k8sèŠ‚ç‚¹ kubectl cordon \u003cèŠ‚ç‚¹\u003e kubectl drain \u003cèŠ‚ç‚¹\u003e --ignore-daemonsets --delete-emptydir-data # è™šæ‹Ÿæœºé‡å¯å kubectl uncordon \u003cèŠ‚ç‚¹\u003e ","date":"2022-10-11","objectID":"/k8s15/:2:1","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"æŸ¥çœ‹æ–°å¢å­˜å‚¨ fdisk -l çœ‹åˆ°æ–°å¢20gå­˜å‚¨,ä¸è¦æ ¼å¼åŒ–åˆ†åŒºç¡¬ç›˜ï¼ï¼ï¼ Disk /dev/sdb: 20 GiB, 21474836480 bytes, 41943040 sectors Disk model: QEMU HARDDISK Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes ","date":"2022-10-11","objectID":"/k8s15/:2:2","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"ROOK è‡ªåŠ¨åˆ›å»º Rook æ˜¯ä¸€ä¸ªå¼€æºçš„cloud-native storageç¼–æ’, æä¾›å¹³å°å’Œæ¡†æ¶ï¼›ä¸ºå„ç§å­˜å‚¨è§£å†³æ–¹æ¡ˆæä¾›å¹³å°ã€æ¡†æ¶å’Œæ”¯æŒï¼Œä»¥ä¾¿ä¸äº‘åŸç”Ÿç¯å¢ƒæœ¬åœ°é›†æˆã€‚ Rook å°†å­˜å‚¨è½¯ä»¶è½¬å˜ä¸ºè‡ªæˆ‘ç®¡ç†ã€è‡ªæˆ‘æ‰©å±•å’Œè‡ªæˆ‘ä¿®å¤çš„å­˜å‚¨æœåŠ¡ï¼Œå®ƒé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²ã€å¼•å¯¼ã€é…ç½®ã€ç½®å¤‡ã€æ‰©å±•ã€å‡çº§ã€è¿ç§»ã€ç¾éš¾æ¢å¤ã€ç›‘æ§å’Œèµ„æºç®¡ç†æ¥å®ç°æ­¤ç›®çš„ã€‚ Rook ä½¿ç”¨åº•å±‚äº‘æœ¬æœºå®¹å™¨ç®¡ç†ã€è°ƒåº¦å’Œç¼–æ’å¹³å°æä¾›çš„å·¥å…·æ¥å®ç°å®ƒè‡ªèº«çš„åŠŸèƒ½ã€‚ Rook ç›®å‰æ”¯æŒCephã€NFSã€Minio Object Storeå’ŒCockroachDBã€‚ Rookä½¿ç”¨KubernetesåŸè¯­ä½¿Cephå­˜å‚¨ç³»ç»Ÿèƒ½å¤Ÿåœ¨Kubernetesä¸Šè¿è¡Œã€‚ ","date":"2022-10-11","objectID":"/k8s15/:3:0","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"ä¸‹è½½ git clone https://github.com/rook/rook.git ","date":"2022-10-11","objectID":"/k8s15/:3:1","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"å®‰è£… ","date":"2022-10-11","objectID":"/k8s15/:3:2","tags":["k8s"],"title":"Kubernetes â€” åŸºäºK8Sæ­å»ºCephåˆ†å¸ƒå¼å­˜å‚¨","uri":"/k8s15/"},{"categories":["k8s"],"content":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ ç”¨äºåˆ¤æ–­å®¹å™¨å†…åº”ç”¨ç¨‹åºæ˜¯å¦å·²ç»å¯åŠ¨ã€‚ å­˜æ´»ï¼ˆLivenessï¼‰æ¢é’ˆ ç”¨äºæ¢æµ‹å®¹å™¨æ˜¯å¦è¿è¡Œï¼Œå¦‚æœæ¢æµ‹å¤±è´¥ï¼Œkubeletä¼šæ ¹æ®é…ç½®çš„é‡å¯ç­–ç•¥è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œè‹¥æ²¡æœ‰é…ç½®æ¢é’ˆè¯¥è¿”å›å€¼é»˜è®¤ä¸ºsuccess å°±ç»ªï¼ˆReadinessï¼‰æ¢é’ˆ ç”¨äºæ¢æµ‹å®¹å™¨å†…çš„ç¨‹åºæ˜¯å¦å¥åº·ï¼Œå¦‚æœè¿”å›å€¼ä¸ºsuccessï¼Œé‚£ä¹ˆä»£è¡¨è¿™ä¸ªå®¹å™¨å·²ç»å®Œå…¨å¯åŠ¨ï¼Œå¹¶ä¸”ç¨‹åºå·²ç»æ˜¯å¯ä»¥æ¥å—æµé‡çš„çŠ¶æ€ å¯åŠ¨ï¼ˆStartupï¼‰æ¢é’ˆ ç”¨äºæ¢æµ‹å®¹å™¨æ˜¯å¦å¯åŠ¨ï¼Œå¦‚æœé…ç½®äº†startup å°±ä¼šå…ˆç¦æ­¢å…¶ä»–æ¢æµ‹ï¼Œç›´åˆ°å®ƒæˆåŠŸï¼ŒæˆåŠŸåå°†ä¸åœ¨è¿è¡Œæ¢æµ‹ ","date":"2022-10-08","objectID":"/k8s13/:0:0","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"Podæ£€æµ‹æ–¹å¼ ExecActionï¼šåœ¨å®¹å™¨æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œè¿”å›å€¼ä¸º0ï¼Œåˆ™è®¤ä¸ºå®¹å™¨å¥åº· TCPSocketActionï¼šé€šè¿‡TCPè¿æ¥æ£€æŸ¥å®¹å™¨æ˜¯å¦è”é€šï¼Œé€šçš„è¯ï¼Œåˆ™è®¤ä¸ºå®¹å™¨æ­£å¸¸ HTTPGetActionï¼šé€šè¿‡åº”ç”¨ç¨‹åºæš´éœ²çš„APIåœ°å€æ¥æ£€æŸ¥ç¨‹åºæ˜¯å¦æ­£å¸¸çš„ï¼Œå¦‚æœçŠ¶æ€ç ä¸º200-400ä¹‹é—´ï¼Œåˆ™è®¤ä¸ºå®¹å™¨å¥åº· gRPCActionï¼šé€šè¿‡ gRPC çš„æ£€æŸ¥æœºåˆ¶ï¼Œåˆ¤æ–­å®¹å™¨æ˜¯ä¸æ˜¯æ­£å¸¸ ","date":"2022-10-08","objectID":"/k8s13/:1:0","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"StartupProbe å¯åŠ¨æ¢é’ˆ æœ‰æ—¶å€™ï¼Œä¼šæœ‰ä¸€äº›ç°æœ‰çš„åº”ç”¨åœ¨å¯åŠ¨æ—¶éœ€è¦è¾ƒé•¿çš„åˆå§‹åŒ–æ—¶é—´ã€‚ è¦è¿™ç§æƒ…å†µä¸‹ï¼Œè‹¥è¦ä¸å½±å“å¯¹æ­»é”ä½œå‡ºå¿«é€Ÿå“åº”çš„æ¢æµ‹ï¼Œè®¾ç½®å­˜æ´»æ¢æµ‹å‚æ•°æ˜¯è¦æŠ€å·§çš„ã€‚ æŠ€å·§å°±æ˜¯ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤æ¥è®¾ç½®å¯åŠ¨æ¢æµ‹ï¼Œé’ˆå¯¹ HTTP æˆ– TCP æ£€æµ‹ï¼Œå¯ä»¥é€šè¿‡å°† failureThreshold * periodSeconds å‚æ•°è®¾ç½®ä¸ºè¶³å¤Ÿé•¿çš„æ—¶é—´æ¥åº”å¯¹ç³Ÿç³•æƒ…å†µä¸‹çš„å¯åŠ¨æ—¶é—´ã€‚ ports: - name: liveness-port containerPort: 8080 hostPort: 8080 livenessProbe: httpGet: path: /healthz port: liveness-port failureThreshold: 1 periodSeconds: 10 startupProbe: httpGet: path: /healthz port: liveness-port failureThreshold: 30 periodSeconds: 10 å¹¸äºæœ‰å¯åŠ¨æ¢æµ‹ï¼Œåº”ç”¨ç¨‹åºå°†ä¼šæœ‰æœ€å¤š 5 åˆ†é’Ÿï¼ˆ30 * 10 = 300sï¼‰çš„æ—¶é—´æ¥å®Œæˆå…¶å¯åŠ¨è¿‡ç¨‹ã€‚ ä¸€æ—¦å¯åŠ¨æ¢æµ‹æˆåŠŸä¸€æ¬¡ï¼Œå­˜æ´»æ¢æµ‹ä»»åŠ¡å°±ä¼šæ¥ç®¡å¯¹å®¹å™¨çš„æ¢æµ‹ï¼Œå¯¹å®¹å™¨æ­»é”ä½œå‡ºå¿«é€Ÿå“åº”ã€‚ å¦‚æœå¯åŠ¨æ¢æµ‹ä¸€ç›´æ²¡æœ‰æˆåŠŸï¼Œå®¹å™¨ä¼šåœ¨ 300 ç§’åè¢«æ€æ­»ï¼Œå¹¶ä¸”æ ¹æ®restartPolicyæ¥æ‰§è¡Œè¿›ä¸€æ­¥å¤„ç½®ã€‚ ","date":"2022-10-08","objectID":"/k8s13/:2:0","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"LivenessProbe å­˜æ´»æ¢é’ˆ ","date":"2022-10-08","objectID":"/k8s13/:3:0","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"ExecAction è®¸å¤šé•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨æœ€ç»ˆä¼šè¿›å…¥æŸåçŠ¶æ€ï¼Œé™¤éé‡æ–°å¯åŠ¨ï¼Œå¦åˆ™æ— æ³•è¢«æ¢å¤ã€‚ Kubernetes æä¾›äº†å­˜æ´»æ¢é’ˆæ¥å‘ç°å¹¶å¤„ç†è¿™ç§æƒ…å†µã€‚ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ª Podï¼Œå…¶ä¸­è¿è¡Œä¸€ä¸ªåŸºäº registry.k8s.io/busybox é•œåƒçš„å®¹å™¨ã€‚ ä¸‹é¢æ˜¯è¿™ä¸ª Pod çš„é…ç½®æ–‡ä»¶ã€‚ apiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness-exec spec: containers: - name: liveness image: registry.k8s.io/busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -f /tmp/healthy; sleep 600 livenessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 5 periodSeconds: 5 åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ° Pod ä¸­åªæœ‰ä¸€ä¸ª Containerã€‚ periodSeconds å­—æ®µæŒ‡å®šäº† kubelet åº”è¯¥æ¯ 5 ç§’æ‰§è¡Œä¸€æ¬¡å­˜æ´»æ¢æµ‹ã€‚ initialDelaySeconds å­—æ®µå‘Šè¯‰ kubelet åœ¨æ‰§è¡Œç¬¬ä¸€æ¬¡æ¢æµ‹å‰åº”è¯¥ç­‰å¾… 5 ç§’ã€‚ kubelet åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ cat /tmp/healthy æ¥è¿›è¡Œæ¢æµ‹ã€‚ å¦‚æœå‘½ä»¤æ‰§è¡ŒæˆåŠŸå¹¶ä¸”è¿”å›å€¼ä¸º 0ï¼Œkubelet å°±ä¼šè®¤ä¸ºè¿™ä¸ªå®¹å™¨æ˜¯å¥åº·å­˜æ´»çš„ã€‚ å¦‚æœè¿™ä¸ªå‘½ä»¤è¿”å›é 0 å€¼ï¼Œkubelet ä¼šæ€æ­»è¿™ä¸ªå®¹å™¨å¹¶é‡æ–°å¯åŠ¨å®ƒã€‚ å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œæ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼š /bin/sh -c â€œtouch /tmp/healthy; sleep 30; rm -f /tmp/healthy; sleep 600â€ è¿™ä¸ªå®¹å™¨ç”Ÿå‘½çš„å‰ 30 ç§’ï¼Œ/tmp/healthy æ–‡ä»¶æ˜¯å­˜åœ¨çš„ã€‚ æ‰€ä»¥åœ¨è¿™æœ€å¼€å§‹çš„ 30 ç§’å†…ï¼Œæ‰§è¡Œå‘½ä»¤ cat /tmp/healthy ä¼šè¿”å›æˆåŠŸä»£ç ã€‚ 30 ç§’ä¹‹åï¼Œæ‰§è¡Œå‘½ä»¤ cat /tmp/healthy å°±ä¼šè¿”å›å¤±è´¥ä»£ç ã€‚ åœ¨ 30 ç§’å†…ï¼ŒæŸ¥çœ‹ Pod çš„äº‹ä»¶ï¼š kubectl describe pod liveness-exec ","date":"2022-10-08","objectID":"/k8s13/:3:1","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"HTTPGetAction å¦å¤–ä¸€ç§ç±»å‹çš„å­˜æ´»æ¢æµ‹æ–¹å¼æ˜¯ä½¿ç”¨ HTTP GET è¯·æ±‚ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ª Pod çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­è¿è¡Œä¸€ä¸ªåŸºäº registry.k8s.io/liveness é•œåƒçš„å®¹å™¨ã€‚ apiVersion: v1 kind: Pod metadata: labels: test: liveness name: liveness-http spec: containers: - name: liveness image: registry.k8s.io/liveness args: - /server livenessProbe: httpGet: path: /healthz port: 8080 httpHeaders: - name: Custom-Header value: Awesome initialDelaySeconds: 3 periodSeconds: 3 åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° Pod ä¹Ÿåªæœ‰ä¸€ä¸ªå®¹å™¨ã€‚ periodSeconds å­—æ®µæŒ‡å®šäº† kubelet æ¯éš” 3 ç§’æ‰§è¡Œä¸€æ¬¡å­˜æ´»æ¢æµ‹ã€‚ initialDelaySeconds å­—æ®µå‘Šè¯‰ kubelet åœ¨æ‰§è¡Œç¬¬ä¸€æ¬¡æ¢æµ‹å‰åº”è¯¥ç­‰å¾… 3 ç§’ã€‚ kubelet ä¼šå‘å®¹å™¨å†…è¿è¡Œçš„æœåŠ¡ï¼ˆæœåŠ¡åœ¨ç›‘å¬ 8080 ç«¯å£ï¼‰å‘é€ä¸€ä¸ª HTTP GET è¯·æ±‚æ¥æ‰§è¡Œæ¢æµ‹ã€‚ å¦‚æœæœåŠ¡å™¨ä¸Š /healthz è·¯å¾„ä¸‹çš„å¤„ç†ç¨‹åºè¿”å›æˆåŠŸä»£ç ï¼Œåˆ™ kubelet è®¤ä¸ºå®¹å™¨æ˜¯å¥åº·å­˜æ´»çš„ã€‚ å¦‚æœå¤„ç†ç¨‹åºè¿”å›å¤±è´¥ä»£ç ï¼Œåˆ™ kubelet ä¼šæ€æ­»è¿™ä¸ªå®¹å™¨å¹¶å°†å…¶é‡å¯ã€‚ è¿”å›å¤§äºæˆ–ç­‰äº 200 å¹¶ä¸”å°äº 400 çš„ä»»ä½•ä»£ç éƒ½æ ‡ç¤ºæˆåŠŸï¼Œå…¶å®ƒè¿”å›ä»£ç éƒ½æ ‡ç¤ºå¤±è´¥ã€‚ ä½ å¯ä»¥è®¿é—® server.goã€‚ é˜…è¯»æœåŠ¡çš„æºç ã€‚ å®¹å™¨å­˜æ´»æœŸé—´çš„æœ€å¼€å§‹ 10 ç§’ä¸­ï¼Œ/healthz å¤„ç†ç¨‹åºè¿”å› 200 çš„çŠ¶æ€ç ã€‚ ä¹‹åå¤„ç†ç¨‹åºè¿”å› 500 çš„çŠ¶æ€ç ã€‚ ","date":"2022-10-08","objectID":"/k8s13/:3:2","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"TCPSocketAction ç¬¬ä¸‰ç§ç±»å‹çš„å­˜æ´»æ¢æµ‹æ˜¯ä½¿ç”¨ TCP å¥—æ¥å­—ã€‚ ä½¿ç”¨è¿™ç§é…ç½®æ—¶ï¼Œkubelet ä¼šå°è¯•åœ¨æŒ‡å®šç«¯å£å’Œå®¹å™¨å»ºç«‹å¥—æ¥å­—é“¾æ¥ã€‚ å¦‚æœèƒ½å»ºç«‹è¿æ¥ï¼Œè¿™ä¸ªå®¹å™¨å°±è¢«çœ‹ä½œæ˜¯å¥åº·çš„ï¼Œå¦‚æœä¸èƒ½åˆ™è¿™ä¸ªå®¹å™¨å°±è¢«çœ‹ä½œæ˜¯æœ‰é—®é¢˜çš„ã€‚ apiVersion: v1 kind: Pod metadata: name: goproxy labels: app: goproxy spec: containers: - name: goproxy image: registry.k8s.io/goproxy:0.1 ports: - containerPort: 8080 readinessProbe: tcpSocket: port: 8080 initialDelaySeconds: 5 periodSeconds: 10 livenessProbe: tcpSocket: port: 8080 initialDelaySeconds: 15 periodSeconds: 20 å¦‚æ˜¯æ±é—»ï¼ŒTCP æ£€æµ‹çš„é…ç½®å’Œ HTTP æ£€æµ‹éå¸¸ç›¸ä¼¼ã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­åŒæ—¶ä½¿ç”¨å°±ç»ªå’Œå­˜æ´»æ¢é’ˆã€‚kubelet ä¼šåœ¨å®¹å™¨å¯åŠ¨ 5 ç§’åå‘é€ç¬¬ä¸€ä¸ªå°±ç»ªæ¢é’ˆã€‚ æ¢é’ˆä¼šå°è¯•è¿æ¥ goproxy å®¹å™¨çš„ 8080 ç«¯å£ã€‚ å¦‚æœæ¢æµ‹æˆåŠŸï¼Œè¿™ä¸ª Pod ä¼šè¢«æ ‡è®°ä¸ºå°±ç»ªçŠ¶æ€ï¼Œkubelet å°†ç»§ç»­æ¯éš” 10 ç§’è¿è¡Œä¸€æ¬¡æ¢æµ‹ã€‚ é™¤äº†å°±ç»ªæ¢é’ˆï¼Œè¿™ä¸ªé…ç½®åŒ…æ‹¬äº†ä¸€ä¸ªå­˜æ´»æ¢é’ˆã€‚ kubelet ä¼šåœ¨å®¹å™¨å¯åŠ¨ 15 ç§’åè¿›è¡Œç¬¬ä¸€æ¬¡å­˜æ´»æ¢æµ‹ã€‚ ä¸å°±ç»ªæ¢é’ˆç±»ä¼¼ï¼Œå­˜æ´»æ¢é’ˆä¼šå°è¯•è¿æ¥ goproxy å®¹å™¨çš„ 8080 ç«¯å£ã€‚ å¦‚æœå­˜æ´»æ¢æµ‹å¤±è´¥ï¼Œå®¹å™¨ä¼šè¢«é‡æ–°å¯åŠ¨ã€‚ ","date":"2022-10-08","objectID":"/k8s13/:3:3","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"gRPCAction å¦‚æœä½ çš„åº”ç”¨å®ç°äº† gRPC å¥åº·æ£€æŸ¥åè®®ï¼Œ kubelet å¯ä»¥é…ç½®ä¸ºä½¿ç”¨è¯¥åè®®æ¥æ‰§è¡Œåº”ç”¨å­˜æ´»æ€§æ£€æŸ¥ã€‚ ä½ å¿…é¡»å¯ç”¨ GRPCContainerProbe ç‰¹æ€§é—¨æ§ æ‰èƒ½é…ç½®ä¾èµ–äº gRPC çš„æ£€æŸ¥æœºåˆ¶ã€‚ apiVersion: v1 kind: Pod metadata: name: etcd-with-grpc spec: containers: - name: etcd image: registry.k8s.io/etcd:3.5.1-0 command: [ \"/usr/local/bin/etcd\", \"--data-dir\", \"/var/lib/etcd\", \"--listen-client-urls\", \"http://0.0.0.0:2379\", \"--advertise-client-urls\", \"http://127.0.0.1:2379\", \"--log-level\", \"debug\"] ports: - containerPort: 2379 livenessProbe: grpc: port: 2379 initialDelaySeconds: 10 è¦ä½¿ç”¨ gRPC æ¢é’ˆï¼Œå¿…é¡»é…ç½® port å±æ€§ã€‚å¦‚æœå¥åº·çŠ¶æ€ç«¯ç‚¹é…ç½®åœ¨éé»˜è®¤æœåŠ¡ä¹‹ä¸Šï¼Œ ä½ è¿˜å¿…é¡»è®¾ç½® service å±æ€§ã€‚ åœ¨ Kubernetes 1.23 ä¹‹å‰ï¼ŒgRPC å¥åº·æ¢æµ‹é€šå¸¸ä½¿ç”¨ grpc-health-probe æ¥å®ç°ï¼Œå¦‚åšå®¢ Health checking gRPC servers on Kubernetesï¼ˆå¯¹ Kubernetes ä¸Šçš„ gRPC æœåŠ¡å™¨æ‰§è¡Œå¥åº·æ£€æŸ¥ï¼‰æ‰€æè¿°ã€‚ å†…ç½®çš„ gRPC æ¢é’ˆè¡Œä¸ºä¸ grpc-health-probe æ‰€å®ç°çš„è¡Œä¸ºç±»ä¼¼ã€‚ ä» grpc-health-probe è¿ç§»åˆ°å†…ç½®æ¢é’ˆæ—¶ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å·®å¼‚ï¼š å†…ç½®æ¢é’ˆè¿è¡Œæ—¶é’ˆå¯¹çš„æ˜¯ Pod çš„ IP åœ°å€ï¼Œä¸åƒ grpc-health-probe é‚£æ ·é€šå¸¸é’ˆå¯¹ 127.0.0.1 æ‰§è¡Œæ¢æµ‹ï¼› è¯·ä¸€å®šé…ç½®ä½ çš„ gRPC ç«¯ç‚¹ä½¿ä¹‹ç›‘å¬äº Pod çš„ IP åœ°å€ä¹‹ä¸Šã€‚ å†…ç½®æ¢é’ˆä¸æ”¯æŒä»»ä½•èº«ä»½è®¤è¯å‚æ•°ï¼ˆä¾‹å¦‚ -tlsï¼‰ã€‚ å¯¹äºå†…ç½®çš„æ¢é’ˆè€Œè¨€ï¼Œä¸å­˜åœ¨é”™è¯¯ä»£ç ã€‚æ‰€æœ‰é”™è¯¯éƒ½è¢«è§†ä½œæ¢æµ‹å¤±è´¥ã€‚ å¦‚æœ ExecProbeTimeout ç‰¹æ€§é—¨æ§è¢«è®¾ç½®ä¸º falseï¼Œåˆ™ grpc-health-probe ä¸ä¼šè€ƒè™‘ timeoutSeconds è®¾ç½®çŠ¶æ€ï¼ˆé»˜è®¤å€¼ä¸º 1sï¼‰ï¼Œ è€Œå†…ç½®æ¢é’ˆåˆ™ä¼šåœ¨è¶…æ—¶æ—¶è¿”å›å¤±è´¥ã€‚ ","date":"2022-10-08","objectID":"/k8s13/:3:4","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["k8s"],"content":"ReadinessProbe å°±ç»ªæ¢é’ˆ æœ‰æ—¶å€™ï¼Œåº”ç”¨ä¼šæš‚æ—¶æ€§åœ°æ— æ³•ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚ ä¾‹å¦‚ï¼Œåº”ç”¨åœ¨å¯åŠ¨æ—¶å¯èƒ½éœ€è¦åŠ è½½å¤§é‡çš„æ•°æ®æˆ–é…ç½®æ–‡ä»¶ï¼Œæˆ–æ˜¯å¯åŠ¨åè¦ä¾èµ–ç­‰å¾…å¤–éƒ¨æœåŠ¡ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ—¢ä¸æƒ³æ€æ­»åº”ç”¨ï¼Œä¹Ÿä¸æƒ³ç»™å®ƒå‘é€è¯·æ±‚ã€‚ Kubernetes æä¾›äº†å°±ç»ªæ¢é’ˆæ¥å‘ç°å¹¶ç¼“è§£è¿™äº›æƒ…å†µã€‚ å®¹å™¨æ‰€åœ¨ Pod ä¸ŠæŠ¥è¿˜æœªå°±ç»ªçš„ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸æ¥å—é€šè¿‡ Kubernetes Service çš„æµé‡ã€‚ readinessProbe: exec: command: - cat - /tmp/healthy initialDelaySeconds: 5 periodSeconds: 5 ","date":"2022-10-08","objectID":"/k8s13/:4:0","tags":["k8s"],"title":"Kubernetes â€” æ¢é’ˆå’Œç”Ÿå‘½å‘¨æœŸ","uri":"/k8s13/"},{"categories":["ç›‘æ§"],"content":"windows-exporter ç›‘æ§å®‰è£… ","date":"2022-10-08","objectID":"/windows-exporter/:0:0","tags":["skywalking"],"title":"windows-exporter ç›‘æ§","uri":"/windows-exporter/"},{"categories":["ç›‘æ§"],"content":"windows_exporter ","date":"2022-10-08","objectID":"/windows-exporter/:0:1","tags":["skywalking"],"title":"windows-exporter ç›‘æ§","uri":"/windows-exporter/"},{"categories":["ç›‘æ§"],"content":"ä¸‹è½½å®‰è£… ","date":"2022-10-08","objectID":"/windows-exporter/:0:2","tags":["skywalking"],"title":"windows-exporter ç›‘æ§","uri":"/windows-exporter/"},{"categories":["ç›‘æ§"],"content":"å¯åŠ¨ ä¸‹è½½msiç‰ˆæœ¬ï¼Œè¾“å…¥ä¸€ä¸‹å‘½ä»¤å¯åŠ¨ msiexec /i C:\\Users\\Administrator\\Downloads\\windows_exporter.msi ENABLED_COLLECTORS=\"ad,iis,logon,memory,process,tcp,scheduled_task\" TEXTFILE_DIR=\"C:\\custom_metrics\\\" å¸è½½ msiexec /uninstall C:\\Users\\Administrator\\Downloads\\windows_exporter.msi ","date":"2022-10-08","objectID":"/windows-exporter/:1:0","tags":["skywalking"],"title":"windows-exporter ç›‘æ§","uri":"/windows-exporter/"},{"categories":["ç›‘æ§"],"content":"æ·»åŠ prometheus ç›‘æ§ prometheus.yaml # æ–°å¢ windows-exporter - job_name: 'windows-exporter' file_sd_configs: - files: - \"./file_sd/windows-exporter.yaml\" ./file_sd/windows-exporter.yaml # æ–°å¢ windows-exporter - targets: ['192.168.0.6:9182'] labels: instance: windows-task ","date":"2022-10-08","objectID":"/windows-exporter/:2:0","tags":["skywalking"],"title":"windows-exporter ç›‘æ§","uri":"/windows-exporter/"},{"categories":["ç›‘æ§"],"content":"æ·»åŠ alertmanager å‘Šè­¦ # å‘Šè­¦ä¿¡æ¯ groups: - name: sanjiang windows ä»»åŠ¡è®¡åˆ’ç¨‹åºå‘Šè­¦ rules: - alert: windowså®ä¾‹ä»»åŠ¡å‘Šè­¦ expr: windows_scheduled_task_state{state=\"disabled\",task=~\"/ETL_kettle_tasks/.*\"}==1 for: 30s labels: severity: critical target: \"{{$labels.job}}\" annotations: summary: \"sanjiang: {{$labels.job}} windows ä»»åŠ¡å¼‚å¸¸\" description: \"{{$labels.task}} of job {{$labels.job}} è¯¥ä»»åŠ¡æ–­è”å·²è¶…è¿‡1åˆ†é’Ÿ\" ","date":"2022-10-08","objectID":"/windows-exporter/:3:0","tags":["skywalking"],"title":"windows-exporter ç›‘æ§","uri":"/windows-exporter/"},{"categories":["k8s"],"content":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿° ä»€ä¹ˆæ˜¯ Kubernetes å¼€æ”¾æ ‡å‡†ï¼Ÿâ€” K8s å¼€æ”¾æ ‡å‡†ç®€ä»‹ å¼€æ”¾æ ‡å‡†æœ‰åŠ©äºå’Œè¡¥å……åƒ Kubernetes è¿™æ ·çš„ç³»ç»Ÿï¼ŒKubernetes æ˜¯ç”¨äºç¼–æ’å®¹å™¨çš„äº‹å®ä¸Šçš„æ ‡å‡†å¹³å°ã€‚å¼€æ”¾æ ‡å‡†å®šä¹‰äº†å®æ–½ Kubernetes çš„æœ€ä½³å®è·µï¼Œå¹¶åœ¨æ”¯æŒæ­¤å®æ–½æ–¹é¢å‘æŒ¥ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å¼€æ”¾æ ‡å‡†ç”±å¼€æº Kubernetes ç¤¾åŒºè€ŒéæŸä¸ªç‰¹å®šä¾›åº”å•†åˆ¶å®šï¼Œä»¥ç¡®ä¿æ›´é«˜çš„æ•ˆç‡ã€é¿å…ä¾›åº”å•†é”å®šä»¥åŠæ›´è½»æ¾åœ°å°†å…¶ä»–è½¯ä»¶é›†æˆåˆ°æŠ€æœ¯å †æ ˆä¸­ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:0:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"OCI å®¹å™¨å¼€æ”¾æ¥å£è§„èŒƒï¼Œç”±å¤šå®¶å…¬å¸å…±åŒç»„æˆäº2015å¹´6æœˆæˆç«‹çš„é¡¹ç›®ï¼ˆDocker,Â Google,Â CoreOSç­‰å…¬å¸ï¼‰ï¼Œå¹¶ç”±LinuxåŸºé‡‘ä¼šè¿è¡Œç®¡ç†ï¼Œæ—¨åœ¨å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶åˆ¶å®šä¸€ä¸ªå¼€æ”¾çš„å·¥ä¸šåŒ–æ ‡å‡†ï¼Œç›®å‰ä¸»è¦æœ‰ä¸¤ä¸ªæ ‡å‡†æ–‡æ¡£ï¼šå®¹å™¨è¿è¡Œæ—¶æ ‡å‡† ï¼ˆruntime specï¼‰å’Œ å®¹å™¨é•œåƒæ ‡å‡†ï¼ˆimage specï¼‰ OCI æ˜¯ä¸€ä¸ªå¼€æ”¾çš„æ²»ç†ç»“æ„ï¼Œå…¶æ˜ç¡®ç›®çš„æ˜¯å›´ç»•å®¹å™¨æ ¼å¼å’Œè¿è¡Œæ—¶åˆ›å»ºå¼€æ”¾çš„è¡Œä¸šæ ‡å‡†ã€‚ å®ƒæä¾›äº†å¿…é¡»ç”±å®¹å™¨è¿è¡Œæ—¶å¼•æ“å®ç°çš„è§„èŒƒã€‚ä¸¤ä¸ªé‡è¦çš„è§„æ ¼æ˜¯ï¼š runCï¼šç§å­å®¹å™¨è¿è¡Œæ—¶å¼•æ“ã€‚å¤§å¤šæ•°ç°ä»£å®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒéƒ½ä½¿ç”¨ runC å¹¶å›´ç»•è¿™ä¸ªç§å­å¼•æ“å¼€å‘é™„åŠ åŠŸèƒ½ã€‚ è¿™ç§ä½çº§è¿è¡Œæ—¶ç”¨äºå¯åŠ¨å®¹å™¨çš„å„ç§å·¥å…·ï¼ŒåŒ…æ‹¬ Docker æœ¬èº«ã€‚ OCI è§„èŒƒï¼šå…³äºå¦‚ä½•è¿è¡Œã€æ„å»ºå’Œåˆ†å‘å®¹å™¨çš„æ˜ åƒã€è¿è¡Œæ—¶å’Œåˆ†å‘è§„èŒƒã€‚ è™½ç„¶ Docker ç»å¸¸ä¸å®¹å™¨æŠ€æœ¯åŒæ­¥ä½¿ç”¨ï¼Œä½†ç¤¾åŒºä¸€ç›´è‡´åŠ›äº OCI çš„å¼€æ”¾è¡Œä¸šæ ‡å‡†ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:1:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Image-Spec image-spec å®šä¹‰äº†å¦‚ä½•æ„å»ºå’Œæ‰“åŒ…å®¹å™¨é•œåƒã€‚ æœ¬è§„èŒƒçš„ç›®æ ‡æ˜¯åˆ›å»ºå¯äº’æ“ä½œçš„å·¥å…·ï¼Œç”¨äºæ„å»ºã€ä¼ è¾“å’Œå‡†å¤‡è¦è¿è¡Œçš„å®¹å™¨æ˜ åƒã€‚ ","date":"2022-10-07","objectID":"/k8s12/:1:1","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Runtime-Spec runtime-spec æŒ‡å®šå®¹å™¨çš„é…ç½®ã€æ‰§è¡Œç¯å¢ƒå’Œç”Ÿå‘½å‘¨æœŸã€‚ è¿™æ¦‚è¿°äº†å¦‚ä½•è¿è¡Œåœ¨ç£ç›˜ä¸Šè§£å‹çš„â€œæ–‡ä»¶ç³»ç»ŸåŒ…(filesystem bundle)â€ã€‚æ¦‚æ‹¬åœ°è¯´ï¼ŒOCI å®ç°ä¼šä¸‹è½½ä¸€ä¸ª OCI æ˜ åƒï¼Œç„¶åå°†è¯¥æ˜ åƒè§£å‹ç¼©åˆ°ä¸€ä¸ª OCI è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»ŸåŒ…ä¸­ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:1:2","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Distribution-Spec Distribution-Spec æä¾›äº†ä¸€ä¸ªæ ‡å‡†ï¼Œç”¨äºä¸€èˆ¬å†…å®¹çš„åˆ†å‘ï¼Œç‰¹åˆ«æ˜¯å®¹å™¨å›¾åƒçš„åˆ†å‘ã€‚å®ƒæ˜¯ OCI é¡¹ç›®çš„æœ€æ–°è¡¥å……ã€‚ å®ç°åˆ†å‘è§„èŒƒçš„å®¹å™¨æ³¨å†Œè¡¨ä¸ºå®¹å™¨æ˜ åƒæä¾›å¯é ã€é«˜åº¦å¯æ‰©å±•ã€å®‰å…¨çš„å­˜å‚¨æœåŠ¡ã€‚ å®¢æˆ·è¦ä¹ˆä½¿ç”¨äº‘æä¾›å•†å®æ–½ã€ä¾›åº”å•†å®æ–½ï¼Œè¦ä¹ˆä½¿ç”¨åˆ†å‘çš„å¼€æºå®æ–½ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:1:3","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"CRI CRIï¼ˆContainer Runtime Interfaceï¼‰ï¼šå®¹å™¨è¿è¡Œæ—¶æ¥å£ï¼Œæä¾›è®¡ç®—èµ„æºã€‚â€‹Â â€‹kubernetes1.5â€‹â€‹ç‰ˆæœ¬ä¹‹åï¼Œkubernetesé¡¹ç›®æ¨å‡ºäº†è‡ªå·±çš„è¿è¡Œæ—¶æ¥å£apiâ€“CRI(container runtime interface)ã€‚ CRI æ˜¯å…³äºå¦‚ä½•åœ¨å®¹å™¨ç¼–æ’ç³»ç»Ÿä¸­å®ç°å®¹å™¨è¿è¡Œæ—¶çš„è§„èŒƒã€‚å®ƒåœ¨å®¹å™¨è¿è¡Œæ—¶çš„é›†æˆä¹‹ä¸Šæä¾›äº†ä¸€ä¸ªæŠ½è±¡å±‚ã€‚ å®ƒæ˜¯ä¸€ä¸ªæ’ä»¶æ¥å£ï¼Œä½¿ kubelet èƒ½å¤Ÿä½¿ç”¨å„ç§å®¹å™¨è¿è¡Œæ—¶ã€‚ CRI çš„æ ¸å¿ƒæœºåˆ¶æ˜¯æ¯ä¸ªå®¹å™¨é¡¹ç›®éƒ½å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª CRI shim å¹¶è‡ªå·±å¤„ç† CRI è¯·æ±‚ã€‚ ä¸ºäº†å…è®¸ä½¿ç”¨ Docker ä»¥å¤–çš„å…¶ä»–å®¹å™¨è¿è¡Œæ—¶ï¼ŒKubernetes åœ¨ 2016 å¹´å¼•å…¥äº† CRIã€‚ ","date":"2022-10-07","objectID":"/k8s12/:2:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Docker Docker é•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯æ ‡å‡†ï¼Œä½†ä»æœªçœŸæ­£ä¸ºå®¹å™¨ç¼–æ’è€Œç”Ÿã€‚ å®ƒæ˜¯æ•°ç™¾ä¸‡æ­£åœ¨æ„å»ºå®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„å¼€å‘äººå‘˜çš„é¦–é€‰ã€‚ ä½¿ç”¨ Docker ä½œä¸º Kubernetes çš„è¿è¡Œæ—¶å·²è¢«å¼ƒç”¨ï¼Œå¹¶å°†åœ¨ Kubernetes 1.23 ä¸­åˆ é™¤ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:2:1","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"containerd containerd æ˜¯è¿è¡Œå®¹å™¨çš„è½»é‡çº§å’Œé«˜æ€§èƒ½å®ç°ã€‚ å®ƒè¢«æ‰€æœ‰ä¸»è¦çš„äº‘æä¾›å•†ç”¨äº Kubernetes å³æœåŠ¡äº§å“ã€‚ ä½¿ç”¨ containerd åˆ›å»ºå®¹å™¨æ¯”ä½¿ç”¨ Docker ç®€å•å¾—å¤šã€‚å®ƒæœ€è¿‘è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:2:2","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"CRI-O CRI-O æ˜¯ Kubernetes CRI çš„ä¸€ç§å®ç°ï¼Œå¯ä»¥ä½¿ç”¨ OCI å…¼å®¹çš„è¿è¡Œæ—¶ã€‚å®ƒæ˜¯ä½¿ç”¨ Docker ä½œä¸º Kubernetes è¿è¡Œæ—¶çš„è½»é‡çº§æ›¿ä»£æ–¹æ¡ˆã€‚ å®ƒç”± Red Hat åˆ›å»ºï¼Œå¹¶å…·æœ‰ä¸ podman å’Œ buildah å¯†åˆ‡ç›¸å…³çš„ç±»ä¼¼ä»£ç åº“ã€‚ containerd å’Œ CRI-O çš„æƒ³æ³•éå¸¸ç®€å•ï¼šæä¾›ä¸€ä¸ªåªåŒ…å«è¿è¡Œå®¹å™¨çš„ç»å¯¹å¿…éœ€å“çš„è¿è¡Œæ—¶ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:2:3","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"CNI CNIï¼ˆContainer Network Interfaceï¼‰ï¼šå®¹å™¨ç½‘ç»œæ¥å£ï¼Œæä¾›ç½‘ç»œèµ„æºã€‚æ˜¯å’Œ CoreOS ä¸»å¯¼åˆ¶å®šçš„å®¹å™¨ç½‘ç»œæ ‡å‡†ï¼Œå®ƒæœ¬èº«å¹¶ä¸æ˜¯å®ç°æˆ–è€…ä»£ç ï¼Œå¯ä»¥ç†è§£æˆä¸€ä¸ªåè®®ã€‚CNIæ—¨åœ¨ä¸ºå®¹å™¨å¹³å°æä¾›ç½‘ç»œçš„æ ‡å‡†åŒ–ã€‚å®¹å™¨å¹³å°å¯ä»¥ä»CNIè·å–åˆ°æ»¡è¶³ç½‘ç»œäº’é€šæ¡ä»¶çš„ç½‘ç»œå‚æ•°(å¦‚IPåœ°å€ã€ç½‘å…³ã€è·¯ç”±ã€DNSç­‰)ã€‚ CNI æ˜¯å…³äºå¦‚ä½•ä¸ºå®¹å™¨å®ç°ç½‘ç»œçš„æ ‡å‡†ï¼Œå¯ç”¨äºç¼–å†™æˆ–é…ç½®ç½‘ç»œæ’ä»¶ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨å„ç§å®¹å™¨ç¼–æ’å¹³å°ä¸­äº¤æ¢ä¸åŒçš„æ’ä»¶ã€‚ æ¯ä¸ª CNI æ’ä»¶éƒ½å¿…é¡»å®ç°ä¸ºç”±å®¹å™¨ç®¡ç†ç³»ç»Ÿè°ƒç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ CNI æ’ä»¶è´Ÿè´£å°†ç½‘ç»œæ¥å£æ’å…¥å®¹å™¨ç½‘ç»œå‘½åç©ºé—´å¹¶åœ¨ä¸»æœºä¸Šè¿›è¡Œä»»ä½•å¿…è¦çš„æ›´æ”¹ã€‚ç„¶åå®ƒåº”è¯¥å°† IP åˆ†é…ç»™æ¥å£ï¼Œå¹¶é€šè¿‡è°ƒç”¨é€‚å½“çš„ IPAM æ’ä»¶æ¥è®¾ç½®ä¸ IP åœ°å€ç®¡ç†éƒ¨åˆ†ä¸€è‡´çš„è·¯ç”±ã€‚ Kubernetes æ”¯æŒå„ç§ä¸åŒçš„ç½‘ç»œè§£å†³æ–¹æ¡ˆå’Œæ’ä»¶ï¼Œå¯ä»¥åœ¨å„ç§ä¸åŒçš„ç¯å¢ƒä¸­å®ç° Kubernetes ç½‘ç»œã€‚è¯·å‚é˜…ä¸‹é¢çš„ä¸€äº› CNI å®ç°ï¼š ","date":"2022-10-07","objectID":"/k8s12/:3:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Calico Calico æ˜¯å¦ä¸€ä¸ªå¯ç”¨äº Kubernetes ç”Ÿæ€ç³»ç»Ÿçš„æµè¡Œå¼€æº CNI æ’ä»¶ã€‚ Calico ç”± Tigera ç»´æŠ¤ï¼Œå®šä½äºç½‘ç»œæ€§èƒ½ã€çµæ´»æ€§å’ŒåŠŸç‡ç­‰å› ç´ è‡³å…³é‡è¦çš„ç¯å¢ƒã€‚ ä¸ Flannel ä¸åŒï¼ŒCalico æä¾›é«˜çº§ç½‘ç»œç®¡ç†å®‰å…¨åŠŸèƒ½ï¼ŒåŒæ—¶æä¾›ä¸»æœºå’Œ Pod ä¹‹é—´è¿æ¥çš„æ•´ä½“æ¦‚è§ˆã€‚ åœ¨æ ‡å‡†çš„ Kubernetes é›†ç¾¤ä¸Šï¼ŒCalico å¯ä»¥å¾ˆå®¹æ˜“åœ°éƒ¨ç½²ä¸ºæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ DaemonSetã€‚é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å°†å®‰è£…ä¸‰ä¸ª Calico ç»„ä»¶ï¼šFelixã€BIRD å’Œ confdï¼Œç”¨äºç®¡ç†å¤šä¸ªç½‘ç»œä»»åŠ¡ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:3:1","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Flannel Flannel æ˜¯ä¸€ç§ä¸ºå®¹å™¨é…ç½®ç¬¬ 3 å±‚ç½‘ç»œç»“æ„çš„ç®€å•æ–¹æ³•ï¼Œä¸“ä¸º Kubernetes è®¾è®¡ã€‚ Flannel ç”± CoreOS å¼€å‘ï¼Œæ˜¯å¯ç”¨äº Kubernetes çš„æœ€æˆç†Ÿçš„å¼€æº CNI é¡¹ç›®ä¹‹ä¸€ã€‚ å®ƒåœ¨æ¯å°ä¸»æœºä¸Šè¿è¡Œä¸€ä¸ªåä¸º flanneld çš„å°å‹å•ä¸€äºŒè¿›åˆ¶ä»£ç†ï¼Œå¹¶è´Ÿè´£ä»æ›´å¤§çš„é¢„é…ç½®åœ°å€ç©ºé—´ä¸­ä¸ºæ¯å°ä¸»æœºåˆ†é…å­ç½‘ç§Ÿçº¦ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:3:2","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Cilium Cilium æ˜¯ç”± Linux å†…æ ¸å¼€å‘äººå‘˜å¼€å‘çš„å¼€æºã€é«˜åº¦å¯æ‰©å±•çš„ Kubernetes CNI è§£å†³æ–¹æ¡ˆã€‚ å®ƒä½œä¸ºå®ˆæŠ¤è¿›ç¨‹ cilium-agent éƒ¨ç½²åœ¨ Kubernetes é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä»¥ç®¡ç†æ“ä½œå¹¶å°†ç½‘ç»œå®šä¹‰è½¬æ¢ä¸º eBPF ç¨‹åºã€‚ Pod ä¹‹é—´çš„é€šä¿¡é€šè¿‡è¦†ç›–ç½‘ç»œæˆ–ä½¿ç”¨è·¯ç”±åè®®è¿›è¡Œã€‚æ¡ˆä¾‹æ”¯æŒ IPv4 å’Œ IPv6 åœ°å€ã€‚å®ƒè¿˜é€šè¿‡ HTTP è¯·æ±‚è¿‡æ»¤å™¨æ”¯æŒ Kubernetes ç½‘ç»œç­–ç•¥ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:3:3","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"WeaveNet Weavescope å¼€å‘çš„ Weave Net æ˜¯ä¸€ä¸ªæ”¯æŒ CNI çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆï¼Œå…è®¸åœ¨ Kubernetes é›†ç¾¤ä¸­è¿›è¡Œçµæ´»çš„ç½‘ç»œè¿æ¥ã€‚ å®ƒå¯ä»¥åœ¨ Kubernetes é›†ç¾¤ä¸Šè½»æ¾å®‰è£…å’Œé…ç½®ä¸ºå®ˆæŠ¤ç¨‹åºé›†ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šå®‰è£…å¿…è¦çš„ç½‘ç»œç»„ä»¶ã€‚ å®ƒåˆ©ç”¨å†…æ ¸ç³»ç»Ÿåœ¨èŠ‚ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®åŒ…ã€‚å†…æ ¸åˆ©ç”¨çš„åè®®è¢«ç§°ä¸ºå¿«é€Ÿæ•°æ®è·¯å¾„ï¼Œå®ƒå°†æ•°æ®åŒ…ç›´æ¥ä¼ è¾“åˆ°ç›®æ ‡ podï¼Œè€Œæ— éœ€å¤šæ¬¡è¿›å‡ºç”¨æˆ·ç©ºé—´ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:3:4","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"CSI CSIï¼ˆContainer Storage Interfaceï¼‰ï¼šå®¹å™¨å­˜å‚¨æ¥å£ï¼Œæä¾›å­˜å‚¨èµ„æºã€‚ç”± kubernetesã€Mesosã€Docker ç­‰ç¤¾åŒºæˆå‘˜è”åˆåˆ¶å®šçš„ä¸€ä¸ªè¡Œä¸šæ ‡å‡†æ¥å£è§„èŒƒï¼Œæ—¨åœ¨å°†ä»»æ„å­˜å‚¨ç³»ç»Ÿæš´éœ²ç»™å®¹å™¨åŒ–åº”ç”¨ç¨‹åºã€‚ CSI æ˜¯å…³äºå¦‚ä½•åœ¨å®¹å™¨ç¼–æ’ç³»ç»Ÿä¸­å®ç°å­˜å‚¨çš„è§„èŒƒã€‚ å®ƒæ˜¯ä¸€ç§æ ‡å‡†ï¼Œç”¨äºå°†ä»»æ„å—å’Œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿæš´éœ²ç»™ Kubernetes ç­‰å®¹å™¨ç¼–æ’ç³»ç»Ÿä¸Šçš„å®¹å™¨åŒ–å·¥ä½œè´Ÿè½½ã€‚ ç¬¬ä¸‰æ–¹å­˜å‚¨æä¾›å•†ä½¿ç”¨ CSI å…¬å¼€ä»–ä»¬çš„æ–°å­˜å‚¨ç³»ç»Ÿå˜å¾—éå¸¸å¯æ‰©å±•ï¼Œè€Œæ— éœ€å®é™…æ¥è§¦ Kubernetes ä»£ç ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:4:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"è¯·å‚é˜…ä¸‹é¢çš„ä¸€äº› CSI å®ç°ï¼š Rook Ceph OpenEBS ","date":"2022-10-07","objectID":"/k8s12/:4:1","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"SMI SMI(Service Mesh Interface) : æ˜¯å…³äºå¦‚ä½•åœ¨å®¹å™¨ç¼–æ’ç³»ç»Ÿä¸­å®ç° Service Mesh çš„åº”ç”¨è§„èŒƒï¼Œé‡ç‚¹å…³æ³¨ Kubernetes å’Œæœ€å¸¸è§çš„æœåŠ¡ç½‘æ ¼ç”¨ä¾‹çš„åŸºæœ¬åŠŸèƒ½é›†ï¼Œè€Œæ— éœ€æ‹…å¿ƒé”å®šã€‚å®ƒæ¶µç›–äº†æœ€å¸¸è§çš„æœåŠ¡ç½‘æ ¼åŠŸèƒ½ï¼š æµé‡ç­–ç•¥â€”â€”è·¨æœåŠ¡åº”ç”¨èº«ä»½å’Œä¼ è¾“åŠ å¯†ç­‰ç­–ç•¥ æµé‡é¥æµ‹â€”â€”æ•è·å…³é”®æŒ‡æ ‡ï¼Œå¦‚é”™è¯¯ç‡å’ŒæœåŠ¡ä¹‹é—´çš„å»¶è¿Ÿ æµé‡ç®¡ç†â€”â€”åœ¨ä¸åŒæœåŠ¡ä¹‹é—´è½¬ç§»æµé‡ ","date":"2022-10-07","objectID":"/k8s12/:5:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Istio Istio æ˜¯ä¸€ä¸ªå¼€æºæœåŠ¡ç½‘æ ¼ï¼Œå®ƒé€æ˜åœ°åˆ†å±‚åˆ°ç°æœ‰çš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä¸Šã€‚å®ƒæä¾›äº†ä¸€ç§ç»Ÿä¸€ä¸”æ›´æœ‰æ•ˆçš„æ–¹å¼æ¥ä¿æŠ¤ã€è¿æ¥å’Œç›‘æ§æœåŠ¡ã€‚ å®ƒæ˜¯è´Ÿè½½å¹³è¡¡ã€æœåŠ¡åˆ°æœåŠ¡èº«ä»½éªŒè¯å’Œç›‘æ§çš„é€”å¾„â€”â€”å‡ ä¹ä¸éœ€è¦æ›´æ”¹æœåŠ¡ä»£ç ã€‚ Istio é€šè¿‡åˆ†å¸ƒå¼æˆ–å¾®æœåŠ¡æ¶æ„è§£å†³äº†å¼€å‘äººå‘˜å’Œè¿è¥å•†é¢ä¸´çš„æŒ‘æˆ˜ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:5:1","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"Linkerd Linkerd æ˜¯ Kubernetesçš„æœåŠ¡ç½‘æ ¼ï¼Œå®ƒé€šè¿‡ä¸ºæ‚¨æä¾›è¿è¡Œæ—¶è°ƒè¯•ã€å¯è§‚å¯Ÿæ€§ã€å¯é æ€§å’Œå®‰å…¨æ€§ï¼Œä½¿è¿è¡ŒæœåŠ¡æ›´å®¹æ˜“ã€æ›´å®‰å…¨â€”â€”æ‰€æœ‰è¿™äº›éƒ½ä¸éœ€è¦å¯¹ä»£ç è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚ å®ƒé€šè¿‡åœ¨æ¯ä¸ªæœåŠ¡å®ä¾‹æ—è¾¹å®‰è£…ä¸€ç»„è¶…è½»ã€é€æ˜çš„ä»£ç†æ¥å·¥ä½œã€‚è¿™äº›ä»£ç†ä¼šè‡ªåŠ¨å¤„ç†è¿›å‡ºæœåŠ¡çš„æ‰€æœ‰æµé‡ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:5:2","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"CPI CPI (Cloud Provider Interface) :æ˜¯å…³äºå¦‚ä½•å®ç° Kubernetes é›†ç¾¤çš„è§„èŒƒã€‚å®ƒå°†åº•å±‚äº‘åŸºç¡€è®¾æ–½åŠŸèƒ½çš„æ™ºèƒ½ä¸æ ¸å¿ƒ Kubernetes åˆ†ç¦»ã€‚ ","date":"2022-10-07","objectID":"/k8s12/:6:0","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"è¯·å‚é˜…ä¸‹é¢çš„ä¸€äº› CPI å®ç°ï¼š AWS Azure GCP ","date":"2022-10-07","objectID":"/k8s12/:6:1","tags":["k8s"],"title":"Kubernetes â€” å¼€æ”¾æ ‡å‡†ï¼ˆOCIã€CRIã€CNIã€CSIã€SMIã€CPIï¼‰æ¦‚è¿°","uri":"/k8s12/"},{"categories":["k8s"],"content":"k8séƒ¨ç½²æ’ä»¶ Kubernetes æ˜¯é«˜åº¦å¯é…ç½®ä¸”å¯æ‰©å±•çš„ã€‚å› æ­¤ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ ä½ ä¸éœ€è¦æ´¾ç”Ÿè‡ªå·±çš„ Kubernetes å‰¯æœ¬æˆ–è€…å‘é¡¹ç›®ä»£ç æäº¤è¡¥ä¸ï¼Œæœ¬æ–‡ä¼šä»‹ç»å‡ ç§å¸¸ç”¨çš„k8sæ’ä»¶ï¼Œå¦‚æœå¤§å®¶å–œæ¬¢çš„è¯ï¼Œå¸Œæœ›å¤§å®¶ç‚¹èµæ”¯æŒã€‚ ","date":"2022-10-07","objectID":"/k8s11/:0:0","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"1. Flannel ç½‘ç»œæ’ä»¶ Flannelæ˜¯ç”±goè¯­è¨€å¼€å‘ï¼Œæ˜¯ä¸€ç§åŸºäºOverlay ç½‘ç»œçš„è·¨ä¸»æœºå®¹å™¨ç½‘ç»œè§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯å°†TCPæ•°æ®åŒ…å°è£…åœ¨å¦ä¸€ç§ç½‘ç»œåŒ…é‡Œé¢è¿›è¡Œè·¯ç”±è½¬å‘å’Œé€šä¿¡ï¼ŒFlannel æ˜¯CoreOS å¼€å‘ï¼Œä¸“é—¨ç”¨äºdockerå¤šä¸»æœºäº’è”çš„ä¸€ä¸ªå·¥å…·ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯è®©é›†ç¾¤ä¸­çš„ä¸åŒèŠ‚ç‚¹ä¸»æœºåˆ›å»ºçš„å®¹å™¨éƒ½å…·æœ‰å…¨å±€å”¯ä¸€çš„è™šæ‹ŸIPåœ°å€ ä¸»è¦åŠŸèƒ½ï¼š ä¸ºæ¯ä¸ª node åˆ†é… subnetï¼Œå®¹å™¨å°†è‡ªåŠ¨ä»è¯¥å­ç½‘ä¸­è·å– IP åœ°å€ å½“æœ‰ node åŠ å…¥åˆ°ç½‘ç»œä¸­æ—¶ï¼Œä¸ºæ¯ä¸ª node å¢åŠ è·¯ç”±é…ç½® ","date":"2022-10-07","objectID":"/k8s11/:1:0","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"ä¸‹è½½å¹¶å®‰è£… wget https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml kubectl apply -f kube-flannel.yml å¦‚æœymlä¸­çš„\"Network\": 10.244.0.0/16å’Œkubeadm init xxx --pod-network-cidrä¸ä¸€æ ·ï¼Œå°±éœ€è¦ä¿®æ”¹æˆä¸€æ ·çš„ã€‚ä¸ç„¶å¯èƒ½ä¼šä½¿å¾—Nodeé—´Cluster IPä¸é€šã€‚ ","date":"2022-10-07","objectID":"/k8s11/:1:1","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"2. Ingress Controller Ingress æ˜¯å¯¹é›†ç¾¤ä¸­æœåŠ¡çš„å¤–éƒ¨è®¿é—®è¿›è¡Œç®¡ç†çš„ API å¯¹è±¡ï¼Œå…¸å‹çš„è®¿é—®æ–¹å¼æ˜¯ HTTPã€‚ Ingress å¯ä»¥æä¾›è´Ÿè½½å‡è¡¡ã€SSL ç»ˆç»“å’ŒåŸºäºåç§°çš„è™šæ‹Ÿæ‰˜ç®¡ ä¸‹é¢æ˜¯ä¸€ä¸ªå°†æ‰€æœ‰æµé‡éƒ½å‘é€åˆ°åŒä¸€ Service çš„ç®€å• Ingress ç¤ºä¾‹ï¼š Ingress å¯ä¸º Service æä¾›å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡æµé‡ã€ç»ˆæ­¢ SSL/TLSï¼Œä»¥åŠåŸºäºåç§°çš„è™šæ‹Ÿæ‰˜ç®¡ã€‚ Ingress æ§åˆ¶å™¨ é€šå¸¸è´Ÿè´£é€šè¿‡è´Ÿè½½å‡è¡¡å™¨æ¥å®ç° Ingressï¼Œå°½ç®¡å®ƒä¹Ÿå¯ä»¥é…ç½®è¾¹ç¼˜è·¯ç”±å™¨æˆ–å…¶ä»–å‰ç«¯æ¥å¸®åŠ©å¤„ç†æµé‡ã€‚ Ingress ä¸ä¼šå…¬å¼€ä»»æ„ç«¯å£æˆ–åè®®ã€‚ å°† HTTP å’Œ HTTPS ä»¥å¤–çš„æœåŠ¡å…¬å¼€åˆ° Internet æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ Service.Type=NodePort æˆ– Service.Type=LoadBalancer ç±»å‹çš„ Service ","date":"2022-10-07","objectID":"/k8s11/:2:0","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"å…¶ä»– ä¸ºäº†è®© Ingress èµ„æºå·¥ä½œï¼Œé›†ç¾¤å¿…é¡»æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Ingress æ§åˆ¶å™¨ã€‚ ä¸ä½œä¸º kube-controller-manager å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†è¿è¡Œçš„å…¶ä»–ç±»å‹çš„æ§åˆ¶å™¨ä¸åŒï¼Œ Ingress æ§åˆ¶å™¨ä¸æ˜¯éšé›†ç¾¤è‡ªåŠ¨å¯åŠ¨çš„ã€‚ åŸºäºæ­¤é¡µé¢ï¼Œä½ å¯é€‰æ‹©æœ€é€‚åˆä½ çš„é›†ç¾¤çš„ ingress æ§åˆ¶å™¨å®ç°ã€‚ ","date":"2022-10-07","objectID":"/k8s11/:2:1","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"3. CoreDNS CoreDNS æ˜¯ä¸€ä¸ªçµæ´»å¯æ‰©å±•çš„ DNS æœåŠ¡å™¨ï¼Œå¯ä»¥ä½œä¸º Kubernetes é›†ç¾¤ DNSã€‚ ä¸ Kubernetes ä¸€æ ·ï¼ŒCoreDNS é¡¹ç›®ç”± CNCF æ‰˜ç®¡ã€‚ åœ¨ Kubernetes 1.21 ç‰ˆæœ¬ä¸­ï¼Œkubeadm ç§»é™¤äº†å¯¹å°† kube-dns ä½œä¸º DNS åº”ç”¨çš„æ”¯æŒã€‚ å¯¹äº kubeadm v1.25ï¼Œæ‰€æ”¯æŒçš„å”¯ä¸€çš„é›†ç¾¤ DNS åº”ç”¨æ˜¯ CoreDNSã€‚ å½“ä½ ä½¿ç”¨ kubeadm å‡çº§ä½¿ç”¨ kube-dns çš„é›†ç¾¤æ—¶ï¼Œä½ è¿˜å¯ä»¥æ‰§è¡Œåˆ° CoreDNS çš„è¿ç§»ã€‚ åœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œkubeadm å°†åŸºäº kube-dns ConfigMap ç”Ÿæˆ CoreDNS é…ç½®ï¼ˆ\"Corefile\"ï¼‰ï¼Œ ä¿å­˜å­˜æ ¹åŸŸå’Œä¸Šæ¸¸åç§°æœåŠ¡å™¨çš„é…ç½®ã€‚ é€šè¿‡æ›¿æ¢ç°æœ‰é›†ç¾¤éƒ¨ç½²ä¸­çš„ kube-dnsï¼Œæˆ–è€…ä½¿ç”¨ kubeadm ç­‰å·¥å…·æ¥ä¸ºä½ éƒ¨ç½²å’Œå‡çº§é›†ç¾¤ï¼Œ å¯ä»¥åœ¨ä½ çš„é›†ç¾¤ä¸­ä½¿ç”¨ CoreDNS è€Œé kube-dns ä½ å¿…é¡»æ‹¥æœ‰ä¸€ä¸ª Kubernetes çš„é›†ç¾¤ï¼ŒåŒæ—¶ä½ çš„ Kubernetes é›†ç¾¤å¿…é¡»å¸¦æœ‰ kubectl å‘½ä»¤è¡Œå·¥å…·ã€‚ å»ºè®®åœ¨è‡³å°‘æœ‰ä¸¤ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ä¸Šè¿è¡Œæœ¬æ•™ç¨‹ï¼Œä¸”è¿™äº›èŠ‚ç‚¹ä¸ä½œä¸ºæ§åˆ¶å¹³é¢ä¸»æœºã€‚ ","date":"2022-10-07","objectID":"/k8s11/:3:0","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"4. Web UI Dashboard æ˜¯åŸºäºç½‘é¡µçš„ Kubernetes ç”¨æˆ·ç•Œé¢ã€‚ ä½ å¯ä»¥ä½¿ç”¨ Dashboard å°†å®¹å™¨åº”ç”¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹å®¹å™¨åº”ç”¨æ’é”™ï¼Œè¿˜èƒ½ç®¡ç†é›†ç¾¤èµ„æºã€‚ ä½ å¯ä»¥ä½¿ç”¨ Dashboard è·å–è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„åº”ç”¨çš„æ¦‚è§ˆä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæˆ–è€…ä¿®æ”¹ Kubernetes èµ„æº ï¼ˆå¦‚ Deploymentï¼ŒJobï¼ŒDaemonSet ç­‰ç­‰ï¼‰ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥å¯¹ Deployment å®ç°å¼¹æ€§ä¼¸ç¼©ã€å‘èµ·æ»šåŠ¨å‡çº§ã€é‡å¯ Pod æˆ–è€…ä½¿ç”¨å‘å¯¼åˆ›å»ºæ–°çš„åº”ç”¨ ","date":"2022-10-07","objectID":"/k8s11/:4:0","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"å®‰è£… é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šéƒ¨ç½² Dashboard #https æ–¹å¼ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.6.1/aio/deploy/recommended.yaml # æˆ–è€… httpæ–¹å¼ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.6.1/aio/deploy/alternative.yaml ","date":"2022-10-07","objectID":"/k8s11/:4:1","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"æš´éœ²å¤–éƒ¨è¿æ¥ åˆ›å»º webUIservice.yaml vim webUIservice.yaml ä½¿ç”¨loadBalancer kind: Service apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard annotations: lb.kubesphere.io/v1alpha1: openelb protocol.openelb.kubesphere.io/v1alpha1: layer2 eip.openelb.kubesphere.io/v1alpha2: layer2-eip spec: ports: - protocol: TCP port: 80 targetPort: 9090 selector: k8s-app: kubernetes-dashboard type: LoadBalancer kubectl apply -f webUIservice.yaml ","date":"2022-10-07","objectID":"/k8s11/:4:2","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["k8s"],"content":"åˆ›å»ºå¹¶è·å–token åˆ›å»ºç®¡ç†å‘˜ kubectl create serviceaccount dashboard-admin -n kube-system kubectl create clusterrolebinding dashboard-admin --clusterrole=cluster-admin --serviceaccount=kube-system:dashboard-admin è·å–token kubectl describe secrets -n kube-system $(kubectl -n kube-system get secret | grep dashboard-admin | awk '{print $1}') ","date":"2022-10-07","objectID":"/k8s11/:4:3","tags":["k8s"],"title":"kubernetes éƒ¨ç½²æ’ä»¶ (Flannelã€Web UIã€CoreDNSã€Ingress Controller)","uri":"/k8s11/"},{"categories":["ç¾é£Ÿ"],"content":"è èæ²¹æ¡è™¾ \u003c!DOCTYPE HTML\u003e ","date":"2022-10-07","objectID":"/youtiaoxia/:0:0","tags":["ç¾é£Ÿ"],"title":"è èæ²¹æ¡è™¾","uri":"/youtiaoxia/"},{"categories":["æ—¥å¸¸"],"content":"Cloudflare Zero Trust å†…ç½‘ç©¿é€ æœ€å¿«çš„ Zero Trust åº”ç”¨è®¿é—®å’Œäº’è”ç½‘æµè§ˆå¹³å° å¢åŠ å¯è§æ€§ï¼Œæ¶ˆé™¤å¤æ‚æ€§ï¼Œé™ä½è¿œç¨‹å’ŒåŠå…¬å®¤ç”¨æˆ·çš„é£é™©ã€‚æœç»æ•°æ®ä¸¢å¤±ã€æ¶æ„è½¯ä»¶å’Œç½‘ç»œé’“é±¼ï¼Œä¿æŠ¤ç”¨æˆ·ã€åº”ç”¨ç¨‹åºå’Œè®¾å¤‡å®‰å…¨ã€‚ ä½¿ç”¨ Tunneléš§é“æ¥å®ç°å†…ç½‘ä¼ ç»Ÿï¼Œå®ç°å†…ç½‘è®¿é—®å„ç±»åº”ç”¨ ","date":"2022-09-30","objectID":"/cloudflaretrust/:0:0","tags":["å†…ç½‘ç©¿é€","nps"],"title":"Cloudflare Zero Trust å†…ç½‘ç©¿é€","uri":"/cloudflaretrust/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…éƒ¨ç½² https://dash.teams.cloudflare.com/ ","date":"2022-09-30","objectID":"/cloudflaretrust/:1:0","tags":["å†…ç½‘ç©¿é€","nps"],"title":"Cloudflare Zero Trust å†…ç½‘ç©¿é€","uri":"/cloudflaretrust/"},{"categories":["æ—¥å¸¸"],"content":"Docker éƒ¨ç½² åœ¨dockerç¯å¢ƒè¿è¡Œ \u003ctoken\u003e æ˜¯ä½ ä¸ªäººä»¤ç‰Œ docker run -d --name cloudflared cloudflare/cloudflared:latest tunnel --no-autoupdate run --token \u003ctoken\u003e ","date":"2022-09-30","objectID":"/cloudflaretrust/:1:1","tags":["å†…ç½‘ç©¿é€","nps"],"title":"Cloudflare Zero Trust å†…ç½‘ç©¿é€","uri":"/cloudflaretrust/"},{"categories":["æ—¥å¸¸"],"content":"Linuxéƒ¨ç½² X86-64ä½ curl -L --output cloudflared.rpm https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-x86_64.rpm \u0026\u0026 \\ sudo yum localinstall -y cloudflared.rpm \u0026\u0026 \\ sudo cloudflared service install \u003ctoken\u003e X86-32ä½ curl -L --output cloudflared.rpm https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-386.rpm \u0026\u0026 sudo yum localinstall -y cloudflared.rpm \u0026\u0026 sudo cloudflared service install \u003ctoken\u003e arm64 curl -L --output cloudflared.rpm https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-aarch64.rpm \u0026\u0026 sudo yum localinstall -y cloudflared.rpm \u0026\u0026 sudo cloudflared service install \u003ctoken\u003e arm32 curl -L --output cloudflared.rpm https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm.rpm \u0026\u0026 sudo yum localinstall -y cloudflared.rpm \u0026\u0026 sudo cloudflared service install \u003ctoken\u003e ","date":"2022-09-30","objectID":"/cloudflaretrust/:1:2","tags":["å†…ç½‘ç©¿é€","nps"],"title":"Cloudflare Zero Trust å†…ç½‘ç©¿é€","uri":"/cloudflaretrust/"},{"categories":["æ—¥å¸¸"],"content":"windowséƒ¨ç½² ä¸‹è½½ https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-windows-amd64.msi è¿è¡Œå®‰è£…ç¨‹åº ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ è¿è¡Œä»¥ä¸‹å‘½ä»¤ cloudflared.exe service install \u003ctoken\u003e ","date":"2022-09-30","objectID":"/cloudflaretrust/:1:3","tags":["å†…ç½‘ç©¿é€","nps"],"title":"Cloudflare Zero Trust å†…ç½‘ç©¿é€","uri":"/cloudflaretrust/"},{"categories":["æ—¥å¸¸"],"content":"åœ¨cloudflareé‡Œé…ç½®å†…ç½‘ç©¿é€ æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-09-30","objectID":"/cloudflaretrust/:2:0","tags":["å†…ç½‘ç©¿é€","nps"],"title":"Cloudflare Zero Trust å†…ç½‘ç©¿é€","uri":"/cloudflaretrust/"},{"categories":["æ—…è¡Œ"],"content":"è‹å·æ—…è¡Œ æ–°å† è‚ºç‚ COVID-19 è­¦å‘Š è‹å·ï¼Œå¤ç§°å´ï¼Œç°ç®€ç§°è‹ï¼Œæ˜¯ä¸­åäººæ°‘å…±å’Œå›½æ±Ÿè‹çœä¸œå—éƒ¨çš„ä¸€ä¸ªåœ°çº§å¸‚ï¼Œä½äºé•¿æ±Ÿä¸‰è§’æ´²å’Œå¤ªæ¹–å¹³åŸçš„ä¸­å¿ƒåœ°å¸¦ï¼Œè‘—åçš„é±¼ç±³ä¹‹ä¹¡ã€çŠ¶å…ƒä¹‹ä¹¡ã€é™¢å£«ä¹‹ä¹¡ã€ç»æµé‡é•‡ã€å†å²æ–‡åŒ–ååŸï¼Œè‡ªå¤ä¸æ­å·å…±äº«æœ‰â€œä¸Šæœ‰å¤©å ‚ã€ä¸‹æœ‰è‹æ­â€ç¾èª‰ã€‚ ","date":"2022-09-27","objectID":"/suzhou/:0:0","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"è‹å·æ™¯ç‚¹ ","date":"2022-09-27","objectID":"/suzhou/:1:0","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"day1 é‡‘é¸¡æ¹– è‹å·é‡‘é¸¡æ¹–ï¼Œæ˜¯å›½å®¶5Açº§æ™¯åŒºï¼Œä½†å´æ˜¯å…è´¹å¼€æ”¾çš„ã€‚æ¹–ä¸œä¸æ¹–è¥¿é«˜æ¥¼æ—ç«‹ï¼Œå±•ç°äº†è‹å·ç°ä»£çš„ä¸€é¢ã€‚å¤œæ™šï¼Œç¯å…‰ç’€ç’¨ï¼Œå¦‚ç¾¤æ˜Ÿèˆ¬å¤ºç›®ï¼›éœ“è™¹é—ªçƒï¼Œå¦‚é“¶æ²³èˆ¬ç»šçƒ‚~ é‡‘é¸¡æ¹–åæ™¯ è‹å·ä¸­å¿ƒ ä¸œæ–¹ä¹‹é—¨ éŸ³ä¹å–·æ³‰ é‡‘é¸¡æ¹–å¤§æ¡¥ æ–‡åŒ–è‰ºæœ¯ä¸­å¿ƒ æœˆå…‰ç å¤´ è¯šå“ä¹¦åº— å›½é‡‘ä¸­å¿ƒ æœ›æ¹–è§’ æå…¬å ¤ ","date":"2022-09-27","objectID":"/suzhou/:1:1","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"day2 è‹å·åšç‰©é¦† åœ°å€ï¼šå§‘è‹åŒºä¸œåŒ—è¡—204å· äº¤é€šï¼šä¹˜åæ¸¸1ã€æ¸¸2ã€æ¸¸5ã€55ã€178ã€202ã€309ã€313ã€518ã€529è·¯ç­‰åˆ°è‹å·åšç‰©é¦† é—¨ç¥¨ï¼šå…è´¹(å¯åœ¨å®˜ç½‘æå‰é¢„çº¦) å¼€æ”¾æ—¶é—´ï¼šæ¯æ˜ŸæœŸäºŒè‡³æ˜ŸæœŸæ—¥- 9:00~17:00ï¼ˆ16:00åœæ­¢å…¥é¦†ï¼‰ â—†å»ºè®®ç”¨æ—¶ï¼š2-3å°æ—¶ æ‹™æ”¿å›­ æ‹™æ”¿å›­å’Œè‹å·åšç‰©é¦†ç´§ä¸´ï¼Œä¸¤è€…ä¹‹é—´æ­¥è¡Œä¸ä¼šè¶…è¿‡3åˆ†é’Ÿï¼Œè€Œå¹³æ±Ÿè·¯æ˜¯åœ¨æ‹™æ”¿å›­çš„å—é—¨æ²¿ç€é—¨å‰çš„ä¸œåŒ—è¡—å¾€ä¸œèµ°ï¼Œå¤§çº¦åœ¨150ç±³å¤„å³è½¬è¿‡æ¡¥å°±æ˜¯äº†ï¼Œå› æ­¤å¯ä»¥æŠŠè¿™ä¸‰å¤„å®‰æ’åœ¨åŒä¸€å¤©ï¼Œå»ºè®®æ¸¸è§ˆé¡ºåºæ˜¯æ‹™æ”¿å›­â€”è‹å·åšç‰©é¦†â€”å¹³æ±Ÿè·¯ã€‚ æ·¡å­£ï¼ˆ1ã€2ã€3ã€6ã€11ã€12æœˆï¼‰ï¼š70å…ƒ æ—ºå­£ï¼ˆ4ã€5ã€7ã€8ã€9ã€10æœˆï¼‰ï¼š90å…ƒ ","date":"2022-09-27","objectID":"/suzhou/:1:2","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"day3 è™ä¸˜ åœ°å€ï¼šå§‘è‹åŒºå±±å¡˜è¡—è™ä¸˜å±±é—¨å†…8å· äº¤é€šï¼šå—é—¨å…¥å£ï¼š146ã€æ¸¸1ã€æ¸¸2è·¯è™ä¸˜é¦–æœ«ç«™ï¼›åŒ—é—¨å…¥å£ï¼š32ã€å¿«çº¿3å·è™ä¸˜åŒ—é—¨ç«™ é—¨ç¥¨ï¼šæ·¡å­£ï¼š60.00å…ƒ æ—ºå­£ï¼š80.00å…ƒ å¼€æ”¾æ—¶é—´ï¼š 7:30-17:30/17ï¼š00 å»ºè®®ç”¨æ—¶ï¼š2-3å°æ—¶ ","date":"2022-09-27","objectID":"/suzhou/:1:3","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"è‹å·ç¾é£Ÿ ","date":"2022-09-27","objectID":"/suzhou/:2:0","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"é¥­åº— è‹å¸®èœâ€”â€”æµ“æ²¹èµ¤é…±é‡Œçš„å§‘è‹é£æƒ… é²ƒè‚ºæ±¤æ˜¯å–ç”Ÿé•¿äºå¤ªæ¹–ä¸€å¸¦çš„é²ƒé±¼ï¼Œå°†å…¶è‚‰ä¸è‚åŠ å…¥ç«è…¿ã€é¦™è‡ã€ç¬‹ç‰‡ç­‰è¾…æ–™ï¼Œåœ¨é¸¡æ±¤ä¸­å…±åŒç†¬ç…®ï¼Œæ±¤é²œå‘³ç¾ï¼Œæ˜¯ä¸€é“ä¸å¯å¤šå¾—çš„æ±¤å“ã€‚ é…±æ–¹æ˜¯é‡‡ç”¨ä¸Šä¹˜çŒªäº”èŠ±ä¸ºåŸæ–™ï¼Œç»24å°æ—¶è…Œåˆ¶åï¼ŒåŠ å…¥å¤æ±ç‚–ç…®3å°æ—¶è€Œæˆã€‚è‚‰çš„è‰²æ³½é²œäº®è¯±äººï¼Œå…¥å£å¤–çš®Qå¼¹ã€è‚‰è´¨ç´§å®ã€‚ å“æ²¹é³ç³Šæ˜¯ä»¥å°†æ–°é²œé³é±¼åˆ‡æˆæ®µï¼ŒåŠ é…±æ²¹ç­‰ä½æ–™çˆ†ç‚’ã€‚å› é³ç³Šä¸Šæ¡Œæ—¶æ²¹æ»‹æ»‹ä½œå“ï¼Œè€Œå¾—åâ€œå“æ²¹é³ç³Šâ€ã€‚èœè‰²æ·±çº¢ï¼Œå£å‘³é²œç”œï¼Œæ²¹è€Œä¸è…»ã€‚ æ¨±æ¡ƒè‚‰å› è‚‰å½¢çŠ¶åŠè‰²æ³½æä¼¼æ¨±æ¡ƒè€Œå¾—åï¼Œæ˜¯å°†ä¼˜è´¨çš„äº”èŠ±è‚‰åˆ‡æˆå°å—ï¼Œä»¥æ–‡ç«ç‚–ç…®ä¸ƒå…«å°æ—¶è€Œæˆã€‚è‚¥è€Œä¸è…»ï¼Œæ»¡å£ç²¾åã€‚ æ¾é¼ é³œé±¼æ˜¯å°†é³œé±¼åœ¨æ²¹é”…å†…ç‚¸è‡³é‡‘é»„ï¼Œå†æ·‹ä¸Šç”±ç•ªèŒ„é…±ç­‰ç†¬åˆ¶çš„é…±æ±è€Œæˆã€‚å› ç‚¸å¼€çš„é±¼è‚‰å½¢ä¼¼æ¾é¼ è€Œå¾—åï¼Œå…¥å£é…¥è„†é…¸ç”œã€‚ ç¢§èºè™¾ä»æ˜¯å°†æ–°é²œè™¾ä»é…ä»¥ç¢§èºæ˜¥ä¸ºä½æ–™çƒ¹åˆ¶è€Œæˆï¼Œè‰²æ³½æ¸…æ·¡é›…è‡´ï¼Œè™¾è‚‰é¥±æ»¡Qå¼¹ï¼Œé²œç”œä¸­å¤¹æ‚äº†èŒ¶å¶çš„é¦™å‘³ã€‚ æ¨èé¤å…ï¼š çç é¥­åº—ï¼šèšŒè‚‰é‡‘èŠ±èœ å´é—¨äººå®¶ï¼šå´é—¨äººå®¶6:30-9:00ä¾›åº”æ—©èŒ¶ï¼Œæä¾›ç³–ç²¥ã€è±†è…èŠ±ã€è‹å¼é¢ã€é¦„é¥¨ç­‰å„ç±»è‹å¼ç‚¹å¿ƒï¼Œä»·æ ¼ä¸º20å…ƒ/äºº å¾—æœˆæ¥¼ï¼šæ¾é¼ æ¡‚é±¼ã€å“æ²¹é³ç³Šã€æ¸…ç‚’è™¾ä»ã€æ²¹çˆ†è™¾ã€èŸ¹ç²‰è±†è…ã€ç‹®å­å¤´ç­‰ æ¾é¹¤æ¥¼ï¼šåº—å†…ä¾›åº”çš„èœå“ä¸å¾—æœˆæ¥¼ä¹Ÿæ˜¯å¤§åŒå°å¼‚ ","date":"2022-09-27","objectID":"/suzhou/:2:1","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"å°åƒ è‹å¼æ±¤é¢â€”â€”è€è‹å·çš„æ—©é¤ æ¨èé¤å…ï¼š åŒå¾—å…´ï¼šæ«é•‡å¤§è‚‰é¢ å­™ç››å…´å¥¥ç¶é¢é¦†: å¥¥ç¶é¸­å’Œçˆ†é±¼çš„æµ‡å¤´ éŸ¦å¤å…´: é˜³æ˜¥é¢ è‹å¼ç‚¹å¿ƒâ€”â€”å´ä¾¬è½¯è¯­èˆ¬çš„ç”œç³¯æ»‹å‘³ æ¨èé¤å…ï¼š éšæŸ³å±…:ç³–ç²¥ã€æ³¡æ³¡å°é¦„é¥¨ æ–°æ¢…åÂ·èŒ¶ç‚¹é¤å…ï¼šç³–èŠ‹è‰¿ è€è‹å·å¤§å®¢å ‚Â·ç‰¹è‰²å°åƒï¼šå“æ²¹é³ç³Šã€ç”Ÿç…ã€é”…è´´ ç”Ÿç…â€”â€”ä¸€å£çˆ†æ±çš„è‹å·äººæ°”ç¾é£Ÿ æ¨èé¤å…ï¼š å“‘å·´ç”Ÿç…ï¼šæ³¡æ³¡å°é¦„é¥¨ã€ç‰›è‚‰ç²‰ä¸æ±¤ å¤§é˜¿äºŒç”Ÿç…ï¼šä¸¤é¢é»„ã€ç”Ÿç… é¦„é¥¨â€”â€”åˆ«å…·é£å‘³çš„å¹³å‡¡ç¾é£Ÿ æ¨èé¤å…ï¼š ç»¿æ¨é¦„é¥¨:é²œè‚‰ã€ä¸‰é²œã€é¸¡ä¸ã€é¸¡æ±è™¾è‚‰ã€è èœã€é¦™è‡é¦„é¥¨ ç†™ç››æº:æ— é”¡å°ç¬¼ã€çº¢æ±¤é¦„é¥¨ã€å¼€æ´‹é¦„é¥¨ã€èŸ¹ç²‰å°ç¬¼ çƒ§é¥¼è±†æµ†â€”â€”å¯»å¸¸ç¾é£Ÿä¸­çš„è‹å·å‘³é“ æ¨èé¤å…ï¼š ç‹æ°æ—è®°çƒ§é¥¼(åŒå¡”èœåœºåº—)ï¼šå¤§é¥¼æ²¹æ¡ã€è±†æµ† é˜Šé—¨å§šè®°è±†æµ†ï¼š24å°æ—¶é€šå®µè¥ä¸šï¼Œå’¸è±†æµ†ã€è·å¶åŒ…ç¾äºº ç³•å›¢â€”â€”è‹å·é£ä¿—å¿…å¤‡ç¾é£Ÿ æ¨èé¤å…ï¼š é»„å¤©æºï¼šå®šèƒœç³•ã€çŒªæ²¹ç³•ã€è–„è·ç³• æ˜æœˆæ¥¼(ç³•å›¢åº—)ï¼šæ¡‚èŠ±ç³•ã€ç‚’è‚‰å›¢å­ é•¿å‘è¥¿é¥¼ï¼šé²œè‚‰æœˆé¥¼ èƒ¥åŸé²œè‚‰æœˆé¥¼ï¼šé²œè‚‰æœˆé¥¼ ","date":"2022-09-27","objectID":"/suzhou/:2:2","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["æ—…è¡Œ"],"content":"vlogç³»åˆ— \u003c!DOCTYPE HTML\u003e ","date":"2022-09-27","objectID":"/suzhou/:3:0","tags":["logstash"],"title":"è‹å·æ—…è¡Œ","uri":"/suzhou/"},{"categories":["ç¾é£Ÿ"],"content":"ã€ä¸»æ–™ã€‘ ç²¾æ’éª¨ï¼ˆ500å…‹ï¼‰ ","date":"2022-09-26","objectID":"/paigu/:0:1","tags":["ç¾é£Ÿ"],"title":"æ‡’äººçƒ§æ’éª¨","uri":"/paigu/"},{"categories":["ç¾é£Ÿ"],"content":"ã€è¾…æ–™ã€‘ é£Ÿç”¨é¢ç¢±ï¼ˆçº¦2å…‹ï¼‰ æŸ æª¬ï¼ˆåŠä¸ªï¼‰ ç”Ÿå§œï¼ˆ1å°å—ï¼‰ å°è‘±ï¼ˆ2æ ¹ï¼‰ å…«è§’ï¼ˆ1é¢—ï¼‰ æ¡‚çš®ï¼ˆ1å°å—ï¼‰ é¦™å¶ï¼ˆåŠç‰‡ï¼‰ å†°ç³–ï¼ˆçº¦50å…‹ï¼‰ å¯ä¹ï¼ˆ1000å…‹ï¼‰ ","date":"2022-09-26","objectID":"/paigu/:0:2","tags":["ç¾é£Ÿ"],"title":"æ‡’äººçƒ§æ’éª¨","uri":"/paigu/"},{"categories":["ç¾é£Ÿ"],"content":"ã€è°ƒå‘³æ–™ã€‘ é£Ÿç”¨ç›ï¼ˆé€‚é‡ï¼‰ æ–™é…’ï¼ˆé€‚é‡ï¼‰ ç”ŸæŠ½é…±æ²¹ï¼ˆ20å…‹ï¼‰ ","date":"2022-09-26","objectID":"/paigu/:0:3","tags":["ç¾é£Ÿ"],"title":"æ‡’äººçƒ§æ’éª¨","uri":"/paigu/"},{"categories":["ç¾é£Ÿ"],"content":"æ•™å­¦è§†é¢‘ \u003c!DOCTYPE HTML\u003e ","date":"2022-09-26","objectID":"/paigu/:1:0","tags":["ç¾é£Ÿ"],"title":"æ‡’äººçƒ§æ’éª¨","uri":"/paigu/"},{"categories":["é—®é¢˜åº“"],"content":"k8s CNI é—®é¢˜ è¿æ¥è®¤è¯å¤±æ•ˆ åˆ é™¤ calico æ¢æˆ flannel åï¼Œå®¹å™¨æ²¡æœ‰æ­£å¸¸å¯åŠ¨ network: error getting ClusterInformation: connection is unauthorized: Unauthorized] ","date":"2022-09-23","objectID":"/k8s-error2/:0:0","tags":["error"],"title":"k8s CNI é—®é¢˜ è¿æ¥è®¤è¯å¤±æ•ˆ","uri":"/k8s-error2/"},{"categories":["é—®é¢˜åº“"],"content":"è§£å†³é—®é¢˜ åˆ é™¤æ‰ /etc/cni/net.d/ ç›®å½•ä¸‹çš„ calico é…ç½®æ–‡ä»¶å³å¯ã€‚ è¦åˆ é™¤æ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ sudo rm -rf /etc/cni/net.d/*calico* ","date":"2022-09-23","objectID":"/k8s-error2/:1:0","tags":["error"],"title":"k8s CNI é—®é¢˜ è¿æ¥è®¤è¯å¤±æ•ˆ","uri":"/k8s-error2/"},{"categories":["é—®é¢˜åº“"],"content":"ä¸è¦é‡å¤ç½‘ç»œæ’ä»¶ ","date":"2022-09-23","objectID":"/k8s-error2/:2:0","tags":["error"],"title":"k8s CNI é—®é¢˜ è¿æ¥è®¤è¯å¤±æ•ˆ","uri":"/k8s-error2/"},{"categories":["é—®é¢˜åº“"],"content":"k8s.gcr.ioå›½å†…æ— æ³•è¿æ¥è§£å†³æ–¹æ³• Get https://k8s.gcr.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) è¿™ä¸ªä¸€çœ‹çŸ¥é“ä»€ä¹ˆåŸå› äº†ï¼Œåº”è¯¥GFWï¼é‚£å¥½å§ï¼Œåªèƒ½ç»™dockeråŠ ä¸ªä»£ç†äº†ã€‚ ","date":"2022-09-22","objectID":"/k8s-error3/:0:0","tags":["error"],"title":"k8s.gcr.ioå›½å†…æ— æ³•è¿æ¥è§£å†³æ–¹æ³•","uri":"/k8s-error3/"},{"categories":["é—®é¢˜åº“"],"content":"è§£å†³é—®é¢˜ æ·»åŠ mirrorç«™ç‚¹ registry.cn-hangzhou.aliyuncs.com/google_containers ","date":"2022-09-22","objectID":"/k8s-error3/:1:0","tags":["error"],"title":"k8s.gcr.ioå›½å†…æ— æ³•è¿æ¥è§£å†³æ–¹æ³•","uri":"/k8s-error3/"},{"categories":["go"],"content":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰ ","date":"2022-09-21","objectID":"/golang/:0:0","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"Go å¯¼å­¦ goè¯­è¨€ç”±googleå…¬å¸æ¨å‡ºã€‚ è¿è¡Œé€Ÿåº¦å¿«ï¼Œç®€å•æ˜“å­¦ é€‚åˆåŒºå—é“¾å¼€å‘ æ‹¥æœ‰ä¸°å¯ŒæŒ‡ä»¤ å¯ä»¥ç›´æ¥åŒ…å«Cè¯­è¨€ è¯­è¨€å±‚é¢æ”¯æŒå¹¶å‘ ","date":"2022-09-21","objectID":"/golang/:1:0","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"Go æ–¹å‘ ç½‘ç»œç¼–ç¨‹ æœåŠ¡å™¨ç¼–ç¨‹ åŒºå—é“¾å¼€å‘ ","date":"2022-09-21","objectID":"/golang/:1:1","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"ç¯å¢ƒå®‰è£… ","date":"2022-09-21","objectID":"/golang/:2:0","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"å®‰è£…ç¯å¢ƒ å®‰è£…åŒ…ä¸‹è½½ https://golang.google.cn/dl/ ","date":"2022-09-21","objectID":"/golang/:2:1","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"windows éƒ¨ç½² wget https://golang.google.cn/dl/go1.19.1.windows-amd64.msi # ç›´æ¥å®‰è£… ","date":"2022-09-21","objectID":"/golang/:2:2","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"GOPATH è®¾ç½® åœ¨ç¯å¢ƒå˜é‡ PATH ä¸Šç›´æ¥é…ç½®å®‰è£…åœ°å€ ","date":"2022-09-21","objectID":"/golang/:2:3","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["go"],"content":"ç¼–å†™ç¬¬ä¸€ä¸ªç¨‹åº package main import \"fmt\" func main() { fmt.Println(\"Hello World!\") } ","date":"2022-09-21","objectID":"/golang/:3:0","tags":["golang"],"title":"Golang åˆè¯†ï¼ˆå®‰è£…ã€ä½¿ç”¨ï¼‰","uri":"/golang/"},{"categories":["æ—¥å¸¸"],"content":"Headscale Tailscale çš„æ§åˆ¶æœåŠ¡å™¨æ˜¯ä¸å¼€æºçš„ï¼Œè€Œä¸”å¯¹å…è´¹ç”¨æˆ·æœ‰è¯¸å¤šé™åˆ¶ï¼Œè¿™æ˜¯äººå®¶çš„æ‘‡é’±æ ‘ï¼Œå¯ä»¥ç†è§£ã€‚å¥½åœ¨ç›®å‰æœ‰ä¸€æ¬¾å¼€æºçš„å®ç°å« Headscaleï¼Œè¿™ä¹Ÿæ˜¯å”¯ä¸€çš„ä¸€æ¬¾ï¼Œå¸Œæœ›èƒ½å‘å±•å£®å¤§ã€‚ Headscale ç”±æ¬§æ´²èˆªå¤©å±€çš„ Juan Font ä½¿ç”¨ Go è¯­è¨€å¼€å‘ï¼Œåœ¨ BSD è®¸å¯ä¸‹å‘å¸ƒï¼Œå®ç°äº† Tailscale æ§åˆ¶æœåŠ¡å™¨çš„æ‰€æœ‰ä¸»è¦åŠŸèƒ½ï¼Œå¯ä»¥éƒ¨ç½²åœ¨ä¼ä¸šå†…éƒ¨ï¼Œæ²¡æœ‰ä»»ä½•è®¾å¤‡æ•°é‡çš„é™åˆ¶ï¼Œä¸”æ‰€æœ‰çš„ç½‘ç»œæµé‡éƒ½ç”±è‡ªå·±æ§åˆ¶ã€‚ Headscale éƒ¨ç½² æˆ‘å†³å®šä½¿ç”¨docker-composeè¿›è¡Œéƒ¨ç½² ","date":"2022-09-21","objectID":"/headscale/:0:0","tags":["daliy"],"title":"headscale éƒ¨ç½²ä½¿ç”¨","uri":"/headscale/"},{"categories":["æ—¥å¸¸"],"content":"åˆ›å»ºå­˜å‚¨ #!/bin/bash mkdir -p /opt/headscale mkdir -p ./config touch ./config/db.sqlite curl https://raw.githubusercontent.com/juanfont/headscale/main/config-example.yaml -o ./config/config.yaml ","date":"2022-09-21","objectID":"/headscale/:1:0","tags":["daliy"],"title":"headscale éƒ¨ç½²ä½¿ç”¨","uri":"/headscale/"},{"categories":["æ—¥å¸¸"],"content":"è¿è¡Œdocker-composeæ–‡ä»¶ åˆ›å»ºdocker-compose.yaml version: '3' services: headscale: image: headscale/headscale:latest volumes: - ./config:/etc/headscale/ - ./data:/var/lib/headscale ports: - 8080:8080 - 9090:9090 - 50443:50443 command: headscale serve restart: unless-stopped è¿è¡Œ docker-compose up -d Headscale ä½¿ç”¨ ","date":"2022-09-21","objectID":"/headscale/:2:0","tags":["daliy"],"title":"headscale éƒ¨ç½²ä½¿ç”¨","uri":"/headscale/"},{"categories":["æ—¥å¸¸"],"content":"Linuxä½¿ç”¨ wget https://pkgs.tailscale.com/stable/tailscale_1.22.2_amd64.tgz è§£å‹ tar zxvf tailscale_1.22.2_amd64.tgz å°†äºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°å®˜æ–¹è½¯ä»¶åŒ…é»˜è®¤çš„è·¯å¾„ä¸‹ï¼š cp tailscale_1.22.2_amd64/tailscaled /usr/sbin/tailscaled cp tailscale_1.22.2_amd64/tailscale /usr/bin/tailscale å°† systemD service é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»Ÿè·¯å¾„ä¸‹ï¼š cp tailscale_1.22.2_amd64/systemd/tailscaled.service /lib/systemd/system/tailscaled.service å¯åŠ¨ tailscaled.service å¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼š systemctl enable --now tailscaled æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š systemctl status tailscaled ","date":"2022-09-21","objectID":"/headscale/:3:0","tags":["daliy"],"title":"headscale éƒ¨ç½²ä½¿ç”¨","uri":"/headscale/"},{"categories":["docker"],"content":"æ¸…ç†Dockerå®¹å™¨æ—¥å¿— å¦‚æœdockerå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œé‚£ä¹ˆä½¿ç”¨rm -rfæ–¹å¼åˆ é™¤æ—¥å¿—åï¼Œé€šè¿‡df -hä¼šå‘ç°ç£ç›˜ç©ºé—´å¹¶æ²¡æœ‰é‡Šæ”¾ã€‚åŸå› æ˜¯åœ¨Linuxæˆ–è€…Unixç³»ç»Ÿä¸­ï¼Œé€šè¿‡rm -rfæˆ–è€…æ–‡ä»¶ç®¡ç†å™¨åˆ é™¤æ–‡ä»¶ï¼Œå°†ä¼šä»æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„ä¸Šè§£é™¤é“¾æ¥ï¼ˆunlinkï¼‰ã€‚å¦‚æœæ–‡ä»¶æ˜¯è¢«æ‰“å¼€çš„ï¼ˆæœ‰ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ä½¿ç”¨ï¼‰ï¼Œé‚£ä¹ˆè¿›ç¨‹å°†ä»ç„¶å¯ä»¥è¯»å–è¯¥æ–‡ä»¶ï¼Œç£ç›˜ç©ºé—´ä¹Ÿä¸€ç›´è¢«å ç”¨ã€‚æ­£ç¡®å§¿åŠ¿æ˜¯cat /dev/null \u003e *-json.logï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡rm -rfåˆ é™¤åé‡å¯dockerã€‚ ","date":"2022-09-19","objectID":"/cleandocker/:0:0","tags":["docker"],"title":"æ¸…ç†Dockerå®¹å™¨æ—¥å¿—","uri":"/cleandocker/"},{"categories":["docker"],"content":"æ—¥å¿—æ¸…ç†è„šæœ¬clean_docker_log.sh #!/bin/sh echo \"======== start clean docker containers logs ========\" logs=$(find /var/lib/docker/containers/ -name *-json.log) for log in $logs do echo \"clean logs : $log\" cat /dev/null \u003e $log done echo \"======== end clean docker containers logs ========\" chmod +x clean_docker_log.sh \u0026\u0026 ./clean_docker_log.sh ","date":"2022-09-19","objectID":"/cleandocker/:1:0","tags":["docker"],"title":"æ¸…ç†Dockerå®¹å™¨æ—¥å¿—","uri":"/cleandocker/"},{"categories":["docker"],"content":"è®¾ç½®Dockerå®¹å™¨æ—¥å¿—å¤§å° è®¾ç½®ä¸€ä¸ªå®¹å™¨æœåŠ¡çš„æ—¥å¿—å¤§å°ä¸Šé™ ä¸Šè¿°æ–¹æ³•ï¼Œæ—¥å¿—æ–‡ä»¶è¿Ÿæ—©åˆä¼šæ¶¨å›æ¥ã€‚è¦ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ï¼Œéœ€è¦é™åˆ¶å®¹å™¨æœåŠ¡çš„æ—¥å¿—å¤§å°ä¸Šé™ã€‚è¿™ä¸ªé€šè¿‡é…ç½®å®¹å™¨docker-composeçš„max-sizeé€‰é¡¹æ¥å®ç° nginx: image: nginx:1.12.1 restart: always logging: driver: â€œjson-fileâ€ options: max-size: â€œ5gâ€ ","date":"2022-09-19","objectID":"/cleandocker/:2:0","tags":["docker"],"title":"æ¸…ç†Dockerå®¹å™¨æ—¥å¿—","uri":"/cleandocker/"},{"categories":["docker"],"content":"å…¨å±€è®¾ç½® æ–°å»º/etc/docker/daemon.jsonï¼Œè‹¥æœ‰å°±ä¸ç”¨æ–°å»ºäº†ã€‚æ·»åŠ log-dirverå’Œlog-optså‚æ•° # vim /etc/docker/daemon.json { \"log-driver\":\"json-file\", \"log-opts\": {\"max-size\":\"500m\", \"max-file\":\"3\"} } max-size=500mï¼Œæ„å‘³ç€ä¸€ä¸ªå®¹å™¨æ—¥å¿—å¤§å°ä¸Šé™æ˜¯500M max-file=3ï¼Œæ„å‘³ç€ä¸€ä¸ªå®¹å™¨æœ‰ä¸‰ä¸ªæ—¥å¿—ï¼Œåˆ†åˆ«æ˜¯id+.jsonã€id+1.jsonã€id+2.jsonã€‚ æ³¨æ„ï¼šè®¾ç½®çš„æ—¥å¿—å¤§å°ï¼Œåªå¯¹æ–°å»ºçš„å®¹å™¨æœ‰æ•ˆã€‚ ","date":"2022-09-19","objectID":"/cleandocker/:2:1","tags":["docker"],"title":"æ¸…ç†Dockerå®¹å™¨æ—¥å¿—","uri":"/cleandocker/"},{"categories":["æ—¥å¸¸"],"content":"æ³¨æ„æ­¤æ•™ç¨‹éœ€è¦é€šè¿‡ç”µè„‘ç«¯å®Œæˆ æ“ä½œæ­¥éª¤ ","date":"2022-09-16","objectID":"/ylgy/:0:0","tags":["daliy"],"title":"ç¾Šäº†ä¸ªç¾Šå°ç¨‹åº ç ´è§£é€šå…³","uri":"/ylgy/"},{"categories":["æ—¥å¸¸"],"content":"1ã€å¾®ä¿¡æ‰“å¼€ç¾Šäº†ä¸ªç¾Šå°ç¨‹åºï¼Œç©ç¬¬ä¸€å…³ ","date":"2022-09-16","objectID":"/ylgy/:1:0","tags":["daliy"],"title":"ç¾Šäº†ä¸ªç¾Šå°ç¨‹åº ç ´è§£é€šå…³","uri":"/ylgy/"},{"categories":["æ—¥å¸¸"],"content":"2ã€è¿›å…¥å½“å‰ç™»å½•çš„å¾®ä¿¡æ•°æ®æ–‡ä»¶å¤¹ å¾®ä¿¡å·¦ä¸‹è§’ -\u003e è®¾ç½® -\u003e æ–‡ä»¶ç®¡ç† -\u003e æ‰“å¼€æ–‡ä»¶å¤¹ æ‰“å¼€åè¿›å…¥å½“å‰ç™»å½•çš„å¾®ä¿¡æ•°æ®æ–‡ä»¶å¤¹ ","date":"2022-09-16","objectID":"/ylgy/:2:0","tags":["daliy"],"title":"ç¾Šäº†ä¸ªç¾Šå°ç¨‹åº ç ´è§£é€šå…³","uri":"/ylgy/"},{"categories":["æ—¥å¸¸"],"content":"3ã€è¿›å…¥å½“å‰ç™»å½•å¾®ä¿¡æ•°æ®æ–‡ä»¶å¤¹åï¼Œä¾æ¬¡è¿›å…¥ \\Applet\\wx141bfb9b73c970a9\\usr\\gamecaches\\resources æ³¨æ„wx141bfb9b73c970a9æ–‡ä»¶åå¯èƒ½ä¸åŒï¼Œä½†ä»¥a9ç»“å°¾ ","date":"2022-09-16","objectID":"/ylgy/:3:0","tags":["daliy"],"title":"ç¾Šäº†ä¸ªç¾Šå°ç¨‹åº ç ´è§£é€šå…³","uri":"/ylgy/"},{"categories":["æ—¥å¸¸"],"content":"4ã€ä¿®æ”¹æ¸¸æˆé…ç½®æ–‡ä»¶ åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ï¼Œæœ‰å¾ˆå¤šjsonæ–‡ä»¶ï¼Œæ‰¾åˆ°é»˜è®¤æ’åºçš„ç¬¬ä¸‰ä¸ªï¼Œå¤§å°2kçš„æ–‡ä»¶ æˆ‘çš„ç”µè„‘æ˜¯16632884479734.jsonæ–‡ä»¶ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ï¼Œæ¸…ç©ºé‡Œé¢å†…å®¹ï¼Œå°†new.txtæ–‡ä»¶ä¸­çš„ä»£ç å¤åˆ¶è¿›æ­¤jsonæ–‡ä»¶ï¼Œä¿å­˜å…³é—­ [1,0,0,[[\"cc.JsonAsset\",[\"_name\",\"json\"],1]],[[0,0,1,3]],[[0,\"levelConfigData\",{\"dailyLevel\":[[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001],[80001,80001]],\"topicLevel\":[[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017],[10017,10017]]}]],0,0,[],[],[]] ä¹‹åæ‰“å¼€æ¸¸æˆï¼Œä»…éœ€è¦å®Œæˆ4æ¬¡ç¬¬ä¸€å…³ä¹å®«æ ¼æ ·å¼å³å¯åŠ å…¥ç¾Šç¾¤ï¼ ","date":"2022-09-16","objectID":"/ylgy/:4:0","tags":["daliy"],"title":"ç¾Šäº†ä¸ªç¾Šå°ç¨‹åº ç ´è§£é€šå…³","uri":"/ylgy/"},{"categories":["é—®é¢˜åº“"],"content":"K8S é—®é¢˜æ’æŸ¥ï¼šcgroup å†…å­˜æ³„éœ²é—®é¢˜ unable to ensure pod container exists: failed to create container for [kubepods besteffort pod5f26dae8-0421-4eab-a3f7-aa51c6848e2b] : mkdir /sys/fs/cgroup/memory/kubepods/besteffort/pod5f26dae8-0421-4eab-a3f7-aa51c6848e2b: cannot allocate memory ","date":"2022-08-30","objectID":"/k8s-error/:0:0","tags":["error"],"title":"K8S é—®é¢˜æ’æŸ¥ï¼šcgroup å†…å­˜æ³„éœ²é—®é¢˜","uri":"/k8s-error/"},{"categories":["é—®é¢˜åº“"],"content":"æŸ¥çœ‹linuxå†…æ ¸ cat /proc/version uname -a å¯ä»¥å‘ç° linuxç‰ˆæœ¬æ˜¯3.0ç‰ˆæœ¬ ","date":"2022-08-30","objectID":"/k8s-error/:1:0","tags":["error"],"title":"K8S é—®é¢˜æ’æŸ¥ï¼šcgroup å†…å­˜æ³„éœ²é—®é¢˜","uri":"/k8s-error/"},{"categories":["é—®é¢˜åº“"],"content":"åŸå›  cgroup çš„ kmem account ç‰¹æ€§åœ¨ Linux 3.x å†…æ ¸ä¸Šæœ‰å†…å­˜æ³„éœ²é—®é¢˜ï¼Œç„¶åk8sç”¨äº†è¿™ä¸ªç‰¹æ€§ï¼Œå¯¼è‡´åé¢åˆ›å»ºä¸å‡ºæ–°çš„podæ¥äº† ","date":"2022-08-30","objectID":"/k8s-error/:2:0","tags":["error"],"title":"K8S é—®é¢˜æ’æŸ¥ï¼šcgroup å†…å­˜æ³„éœ²é—®é¢˜","uri":"/k8s-error/"},{"categories":["é—®é¢˜åº“"],"content":"è§£å†³æ–¹æ³• # ä¿®æ”¹/etc/default/grub ä¸º GRUB_CMDLINE_LINUX=\"crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet cgroup.memory=nokmem\" #åŠ ä¸Šäº† cgroup.memory=nokmem # ç”Ÿæˆé…ç½® /usr/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg # é‡å¯æœºå™¨ reboot ","date":"2022-08-30","objectID":"/k8s-error/:3:0","tags":["error"],"title":"K8S é—®é¢˜æ’æŸ¥ï¼šcgroup å†…å­˜æ³„éœ²é—®é¢˜","uri":"/k8s-error/"},{"categories":["é—®é¢˜åº“"],"content":"éªŒè¯ cat /sys/fs/cgroup/memory/kubepods/burstable/pod*/*/memory.kmem.slabinfo è¾“å‡ºä¿¡æ¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod0fe273ca-42e0-4223-9fe8-16d8dd1774e9/0fdd5d9c16929fd600dbdf313b5c3ebabad912dc0cb076ed6e7799e028b31481/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod0fe273ca-42e0-4223-9fe8-16d8dd1774e9/aa30198d0c5413b70bf488c9daa350a85c7fc6b677235c5adaf2dde6caf95ec4/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod5be86c5d-d012-4cc2-b693-4882a15eda90/059b26b00f4f286b0f52e759b83dad79c7676e1705ee0f3f175a277fd1e5ea5a/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod5be86c5d-d012-4cc2-b693-4882a15eda90/bfa9db0c23fd056a0c05ee5b2b377dd551451cc0f18ddd5db82f9693674a4677/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod8f588e3d-fe89-4716-ab36-3ef606c70367/6fab9f4f7a83bf4c79a68277b214807bd566a8f13212a0fdb5742e4eee4d75d5/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod8f588e3d-fe89-4716-ab36-3ef606c70367/b04594732f7e38a47500ffe1150705110cfa683b585aa7eaf0965cc48ba2a46d/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod9c449bdf-492b-4adc-a623-4ced323ac6d4/c9e73e56ddae0c6c301e43852a51165419eb293b05fa65407f8cb3fe449daf5d/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/pod9c449bdf-492b-4adc-a623-4ced323ac6d4/d7392b1e4be1728fd739dc7117e6efc723a4727f143b91a1b386ad35dc1d3a2e/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/podd316acd7-69fe-4ad5-963a-6e19174b7cb0/0ec18ac0509e6ab454ebe637bde002330afc9eb70eff6f23fe8caa12880e82f6/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ cat: /sys/fs/cgroup/memory/kubepods/burstable/podd316acd7-69fe-4ad5-963a-6e19174b7cb0/dc5be82c01802c349c9505375c37dc054898b9b84e57cb4e671044e8a6459aac/memory.kmem.slabinfo: è¾“å…¥/è¾“å‡ºé”™è¯¯ ","date":"2022-08-30","objectID":"/k8s-error/:4:0","tags":["error"],"title":"K8S é—®é¢˜æ’æŸ¥ï¼šcgroup å†…å­˜æ³„éœ²é—®é¢˜","uri":"/k8s-error/"},{"categories":["æ—¥å¸¸"],"content":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤ ","date":"2022-08-29","objectID":"/rocketmq3/:0:0","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"ä½¿ç”¨NFSé…ç½®StatefulSetçš„åŠ¨æ€æŒä¹…åŒ–å­˜å‚¨ ","date":"2022-08-29","objectID":"/rocketmq3/:1:0","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…NFSæœåŠ¡ç«¯ sudo apt update sudo apt install nfs-kernel-server nfs-common ","date":"2022-08-29","objectID":"/rocketmq3/:1:1","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…NFSå®¢æˆ·ç«¯ æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å¾—æ‰§è¡Œ sudo apt install nfs-common -y ","date":"2022-08-29","objectID":"/rocketmq3/:1:2","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"åˆ›å»ºç›®å½• mkdir -p /data/storage/k8s/rocketmq ä½¿ç”¨NFSä½œä¸ºStatefulSetæŒä¹…åŒ–å­˜å‚¨çš„æ“ä½œè®°å½•ï¼Œåˆ†åˆ«éœ€è¦åˆ›å»ºnfs-provisionerçš„rbacã€storageclassã€nfs-client-provisionerå’Œstatefulsetçš„pod ","date":"2022-08-29","objectID":"/rocketmq3/:1:3","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"åˆ›å»ºnfsçš„rbac --- apiVersion: v1 kind: ServiceAccount metadata: name: nfs-provisioner namespace: sanjiang --- kind: ClusterRole apiVersion: rbac.authorization.k8s.io/v1 metadata: name: nfs-provisioner-runner namespace: sanjiang rules: - apiGroups: [\"\"] resources: [\"persistentvolumes\"] verbs: [\"get\", \"list\", \"watch\", \"create\", \"delete\"] - apiGroups: [\"\"] resources: [\"persistentvolumeclaims\"] verbs: [\"get\", \"list\", \"watch\", \"update\"] - apiGroups: [\"storage.k8s.io\"] resources: [\"storageclasses\"] verbs: [\"get\", \"list\", \"watch\"] - apiGroups: [\"\"] resources: [\"events\"] verbs: [\"list\",\"watch\", \"create\", \"update\", \"patch\"] - apiGroups: [\"\"] resources: [\"services\", \"endpoints\"] verbs: [\"get\",\"create\",\"list\", \"watch\",\"update\"] - apiGroups: [\"extensions\"] resources: [\"podsecuritypolicies\"] resourceNames: [\"nfs-provisioner\"] verbs: [\"use\"] - apiGroups: [\"\"] resources: [\"endpoints\"] verbs: [\"create\", \"delete\", \"get\", \"list\", \"watch\", \"patch\", \"update\"] --- kind: ClusterRoleBinding apiVersion: rbac.authorization.k8s.io/v1 metadata: name: run-nfs-provisioner subjects: - kind: ServiceAccount name: nfs-provisioner namespace: sanjiang roleRef: kind: ClusterRole name: nfs-provisioner-runner apiGroup: rbac.authorization.k8s.io kubectl apply -f nfs-rbac.yaml ","date":"2022-08-29","objectID":"/rocketmq3/:1:4","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"åˆ›å»ºrocketmqé›†ç¾¤çš„storageclass apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: rocketmq-nfs-storage namespace: sanjiang provisioner: rocketmq/nfs reclaimPolicy: Retain kubectl apply -f rocketmq-nfs-class.yaml æŸ¥çœ‹åˆ›å»ºæƒ…å†µ kubectl get sc -n sanjiang ","date":"2022-08-29","objectID":"/rocketmq3/:1:5","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"åˆ›å»ºrocketmqé›†ç¾¤çš„nfs-client-provisioner PROVISIONER_NAMEçš„å€¼ä¸€å®šè¦å’ŒStorageClassä¸­çš„provisionerç›¸ç­‰ apiVersion: apps/v1 kind: Deployment metadata: name: rocketmq-nfs-client-provisioner namespace: sanjiang spec: replicas: 1 selector: matchLabels: app: rocketmq-nfs-client-provisioner strategy: type: Recreate template: metadata: labels: app: rocketmq-nfs-client-provisioner spec: serviceAccount: nfs-provisioner containers: - name: rocketmq-nfs-client-provisioner image: registry.cn-hangzhou.aliyuncs.com/open-ali/nfs-client-provisioner imagePullPolicy: IfNotPresent volumeMounts: - name: nfs-client-root mountPath: /persistentvolumes env: - name: PROVISIONER_NAME value: rocketmq/nfs - name: NFS_SERVER value: 193.0.40.171 #nfs ip - name: NFS_PATH value: /data/storage/k8s/rocketmq volumes: - name: nfs-client-root nfs: server: 193.0.40.171 #nfs ip path: /data/storage/k8s/rocketmq kubectl apply -f rocketmq-nfs.yml ","date":"2022-08-29","objectID":"/rocketmq3/:1:6","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"k8s éƒ¨ç½² ","date":"2022-08-29","objectID":"/rocketmq3/:2:0","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"ç”Ÿæˆæ–‡ä»¶ broker-a-s.properties brokerClusterName=rocketmq-cluster brokerName=broker-a brokerId=1 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=SLAVE flushDiskType=SYNC_FLUSH broker-a.properties brokerClusterName=rocketmq-cluster brokerName=broker-a brokerId=0 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=MASTER broker-b-s.properties brokerClusterName=rocketmq-cluster brokerName=broker-b brokerId=1 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=SLAVE flushDiskType=SYNC_FLUSH broker-b.properties brokerClusterName=rocketmq-cluster brokerName=broker-b brokerId=0 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=MASTER flushDiskType=SYNC_FLUSH broker-c-s.properties brokerClusterName=rocketmq-cluster brokerName=broker-c brokerId=1 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=SLAVE flushDiskType=SYNC_FLUSH broker-c.properties brokerClusterName=rocketmq-cluster brokerName=broker-c brokerId=0 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=MASTER flushDiskType=SYNC_FLUSH broker-d-s.properties brokerClusterName=rocketmq-cluster brokerName=broker-d brokerId=1 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=SLAVE flushDiskType=SYNC_FLUSH broker-d.properties brokerClusterName=rocketmq-cluster brokerName=broker-d brokerId=0 namesrvAddr=rocketmq-0.rocketmq:9876 defaultTopicQueueNums=4 autoCreateTopicEnable=true autoCreateSubscriptionGroup=true listenPort=20911 deleteWhen=04 fileReservedTime=120 mapedFileSizeCommitLog=1073741824 mapedFileSizeConsumeQueue=300000 diskMaxUsedSpaceRatio=88 storePathRootDir=/data/rocketmq/store maxMessageSize=65536 brokerRole=MASTER flushDiskType=SYNC_FLUSH è¿è¡Œå‘½ä»¤ kubectl create cm rocketmq-config --from-file=broker-a.properties --from-file=broker-a-s.properties --from-file=broker-b.properties --from-file=broker-b-s.properties --from-file=broker-c.properties --from-file=broker-c-s.properties --from-file=broker-d.properties --from-file=broker-d-s.properties -n sanjiang kubectl get cm -n sanjiang|grep rocketmq ","date":"2022-08-29","objectID":"/rocketmq3/:2:1","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"åˆ›å»ºé…ç½®æ–‡ä»¶ broker-a-s.yaml apiVersion: v1 kind: Service metadata: labels: app: broker-a-s name: broker-a-s namespace: sanjiang spec: ports: - port: 20911 targetPort: 20911 name: broker-port selector: app: broker-a-s --- apiVersion: apps/v1 kind: StatefulSet metadata: name: broker-a-s namespace: sanjiang spec: serviceName: broker-a-s replicas: 1 selector: matchLabels: app: broker-a-s template: metadata: labels: app: broker-a-s spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: \"app\" operator: In values: - broker-a-s topologyKey: \"kubernetes.io/hostname\" containers: - name: broker-a-s image: liuyi71sinacom/rocketmq-4.8.0 imagePullPolicy: IfNotPresent command: [\"sh\",\"-c\",\"mqbroker -c /usr/local/rocketmq-4.8.0/conf/broker-a-s.properties\"] env: - name: JAVA_OPT value: \"-server -XX:ParallelGCThreads=1 -Xms1g -Xmx1g -Xmn512m\" #value: \"-XX:MaxRAMPercentage=80.0\" volumeMounts: - mountPath: /root/logs name: rocketmq-data subPath: mq-brokeroptlogs - mountPath: /data/rocketmq name: rocketmq-data subPath: mq-brokeroptstore - name: broker-config mountPath: /usr/local/rocketmq-4.8.0/conf/broker-a-s.properties subPath: broker-a-s.properties lifecycle: postStart: exec: command: [\"/bin/sh\",\"-c\",\"touch /tmp/health\"] livenessProbe: exec: command: [\"test\",\"-e\",\"/tmp/health\"] initialDelaySeconds: 5 timeoutSeconds: 5 periodSeconds: 10 readinessProbe: tcpSocket: port: 20911 initialDelaySeconds: 15 timeoutSeconds: 5 periodSeconds: 20 volumes: - name: broker-config configMap: name: rocketmq-config items: - key: broker-a-s.properties path: broker-a-s.properties volumeClaimTemplates: - metadata: name: rocketmq-data namespace: sanjiang annotations: volume.beta.kubernetes.io/storage-class: \"rocketmq-nfs-storage\" spec: accessModes: - ReadWriteMany resources: requests: storage: 2Gi --- apiVersion: v1 kind: PersistentVolume metadata: name: broker-a-s-pv namespace: sanjiang spec: accessModes: - ReadWriteMany capacity: storage: 2Gi persistentVolumeReclaimPolicy: Retain storageClassName: rocketmq-nfs-storage nfs: path: /data/storage/k8s/rocketmq/broker-a-s server: 193.0.40.171 broker-a.yaml apiVersion: v1 kind: Service metadata: labels: app: broker-a name: broker-a namespace: sanjiang spec: ports: - port: 20911 targetPort: 20911 name: broker-port selector: app: broker-a --- apiVersion: apps/v1 kind: StatefulSet metadata: name: broker-a namespace: sanjiang spec: serviceName: broker-a replicas: 1 selector: matchLabels: app: broker-a template: metadata: labels: app: broker-a spec: affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - labelSelector: matchExpressions: - key: \"app\" operator: In values: - broker-a topologyKey: \"kubernetes.io/hostname\" containers: - name: broker-a image: liuyi71sinacom/rocketmq-4.8.0 imagePullPolicy: IfNotPresent command: [\"sh\",\"-c\",\"mqbroker -c /usr/local/rocketmq-4.8.0/conf/broker-a.properties\"] env: - name: JAVA_OPT value: \"-server -XX:ParallelGCThreads=1 -Xms1g -Xmx1g -Xmn512m\" #value: \"-XX:MaxRAMPercentage=80.0\" volumeMounts: - mountPath: /root/logs name: rocketmq-data subPath: mq-brokeroptlogs - mountPath: /data/rocketmq name: rocketmq-data subPath: mq-brokeroptstore - name: broker-config mountPath: /usr/local/rocketmq-4.8.0/conf/broker-a.properties subPath: broker-a.properties lifecycle: postStart: exec: command: [\"/bin/sh\",\"-c\",\"touch /tmp/health\"] livenessProbe: exec: command: [\"test\",\"-e\",\"/tmp/health\"] initialDelaySeconds: 5 timeoutSeconds: 5 periodSeconds: 10 readinessProbe: tcpSocket: port: 20911 initialDelaySeconds: 15 timeoutSeconds: 5 periodSeconds: 20 volumes: - name: broker-config configMap: name: rocketmq-config volumeClaimTemplates: - metadata: name: rocketmq-data namespace: sanjiang annotations: volume.beta.kubernetes.io/storage-class: \"rocketmq-nfs-storage\" spec: accessModes: - ReadWriteMany resources: requests: storage: 2Gi --- apiVersion: v1 kind: PersistentVolume metadata: name: broker-a-pv namespace: sanjiang spec: access","date":"2022-08-29","objectID":"/rocketmq3/:2:2","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["æ—¥å¸¸"],"content":"éƒ¨ç½²æœåŠ¡ kubectl apply -f . ","date":"2022-08-29","objectID":"/rocketmq3/:2:3","tags":["RocketMQ"],"title":"RocketMQ k8séƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq3/"},{"categories":["docker"],"content":"contained å®‰è£…åŠä½¿ç”¨ containerd æ˜¯ä¸€ä¸ªè¡Œä¸šæ ‡å‡†çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œå¼ºè°ƒç®€å•æ€§ã€å¥å£®æ€§å’Œå¯ç§»æ¤æ€§ã€‚å®ƒå¯ä½œä¸º Linux å’Œ Windows çš„å®ˆæŠ¤è¿›ç¨‹ä½¿ç”¨ï¼Œå¯ä»¥ç®¡ç†å…¶ä¸»æœºç³»ç»Ÿçš„å®Œæ•´å®¹å™¨ç”Ÿå‘½å‘¨æœŸï¼šå›¾åƒä¼ è¾“å’Œå­˜å‚¨ã€å®¹å™¨æ‰§è¡Œå’Œç›‘ç£ã€ä½çº§å­˜å‚¨å’Œç½‘ç»œé™„ä»¶ç­‰ã€‚ containerd is a member of CNCF with graduated status. æ—©åœ¨2016å¹´3æœˆï¼ŒDocker 1.11çš„Docker Engineé‡Œå°±åŒ…å«äº†containerdï¼Œè€Œç°åœ¨åˆ™æ˜¯æŠŠcontainerdä»Docker Engineé‡Œå½»åº•å‰¥ç¦»å‡ºæ¥ï¼Œä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å¼€æºé¡¹ç›®ç‹¬ç«‹å‘å±•ï¼Œç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ›´åŠ å¼€æ”¾ã€ç¨³å®šçš„å®¹å™¨è¿è¡ŒåŸºç¡€è®¾æ–½ã€‚å’ŒåŸå…ˆåŒ…å«åœ¨Docker Engineé‡Œcontainerdç›¸æ¯”ï¼Œç‹¬ç«‹çš„containerdå°†å…·æœ‰æ›´å¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥æ¶µç›–æ•´ä¸ªå®¹å™¨è¿è¡Œæ—¶ç®¡ç†çš„æ‰€æœ‰éœ€æ±‚ã€‚ containerdå¹¶ä¸æ˜¯ç›´æ¥é¢å‘æœ€ç»ˆç”¨æˆ·çš„ï¼Œè€Œæ˜¯ä¸»è¦ç”¨äºé›†æˆåˆ°æ›´ä¸Šå±‚çš„ç³»ç»Ÿé‡Œï¼Œæ¯”å¦‚Swarm, Kubernetes, Mesosç­‰å®¹å™¨ç¼–æ’ç³»ç»Ÿã€‚ containerdä»¥Daemonçš„å½¢å¼è¿è¡Œåœ¨ç³»ç»Ÿä¸Šï¼Œé€šè¿‡æš´éœ²åº•å±‚çš„gRPC APIï¼Œä¸Šå±‚ç³»ç»Ÿå¯ä»¥é€šè¿‡è¿™äº›APIç®¡ç†æœºå™¨ä¸Šçš„å®¹å™¨ã€‚ æ¯ä¸ªcontainerdåªè´Ÿè´£ä¸€å°æœºå™¨ï¼ŒPullé•œåƒï¼Œå¯¹å®¹å™¨çš„æ“ä½œï¼ˆå¯åŠ¨ã€åœæ­¢ç­‰ï¼‰ï¼Œç½‘ç»œï¼Œå­˜å‚¨éƒ½æ˜¯ç”±containerdå®Œæˆã€‚å…·ä½“è¿è¡Œå®¹å™¨ç”±runCè´Ÿè´£ï¼Œå®é™…ä¸Šåªè¦æ˜¯ç¬¦åˆOCIè§„èŒƒçš„å®¹å™¨éƒ½å¯ä»¥æ”¯æŒã€‚ å¯¹äºå®¹å™¨ç¼–æ’æœåŠ¡æ¥è¯´ï¼Œè¿è¡Œæ—¶åªéœ€è¦ä½¿ç”¨containerd+runCï¼Œæ›´åŠ è½»é‡ï¼Œå®¹æ˜“ç®¡ç†ã€‚ 5.ç‹¬ç«‹ä¹‹åcontainerdçš„ç‰¹æ€§æ¼”è¿›å¯ä»¥å’ŒDocker Engineåˆ†å¼€ï¼Œä¸“æ³¨å®¹å™¨è¿è¡Œæ—¶ç®¡ç†ï¼Œå¯ä»¥æ›´ç¨³å®šã€‚ ","date":"2022-08-17","objectID":"/contained/:0:0","tags":["docker"],"title":"contained å®‰è£…åŠä½¿ç”¨","uri":"/contained/"},{"categories":["docker"],"content":"å®‰è£… centos yum install -y containerd.io ubuntu apt install -y containerd.io è®¾ç½®å¼€æœºè‡ªå¯ systemctl enable containerd systemctl start containerd systemctl status containerd éªŒè¯ ctr version ","date":"2022-08-17","objectID":"/contained/:1:0","tags":["docker"],"title":"contained å®‰è£…åŠä½¿ç”¨","uri":"/contained/"},{"categories":["docker"],"content":"ctr å‘½ä»¤ å‘½ä»¤ ä½œç”¨ plugins, plugin æä¾›æœ‰å…³å®¹å™¨æ’ä»¶çš„ä¿¡æ¯ version æ‰“å°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç‰ˆæœ¬ containers, c, container ç®¡ç†å®¹å™¨ content ç®¡ç†å†…å®¹ events, event æ˜¾ç¤ºå®¹å™¨äº‹ä»¶ images, image, i ç®¡ç†å›¾åƒ leases ç®¡ç†ç§Ÿçº¦ namespaces, namespace, ns ç®¡ç†ç§Ÿå‘½åç©ºé—´ pprof ä¸º containerd æä¾› golang pprof è¾“å‡º run è¿è¡Œä¸€ä¸ªå®¹å™¨ snapshots, snapshot ç®¡ç†å¿«ç…§ tasks, t, task ç®¡ç†ä»»åŠ¡ install å®‰è£…ä¸€ä¸ªæ–°åŒ… oci OCI å·¥å…· shim ç›´æ¥ä¸shimäº¤äº’ help, h æ˜¾ç¤ºå‘½ä»¤åˆ—è¡¨æˆ–ä¸€ä¸ªå‘½ä»¤çš„å¸®åŠ© ","date":"2022-08-17","objectID":"/contained/:2:0","tags":["docker"],"title":"contained å®‰è£…åŠä½¿ç”¨","uri":"/contained/"},{"categories":["web3.0"],"content":"Planet ä¸‹è½½åŠå®‰è£… ","date":"2022-08-17","objectID":"/planet/:0:0","tags":["Planet","web3.0"],"title":"Planet ä¸‹è½½åŠå®‰è£…","uri":"/planet/"},{"categories":["web3.0"],"content":"å®˜ç½‘ä¸‹è½½ Planet æ˜¯ä¸€æ¬¾ç”¨äºå‘å¸ƒå’Œå…³æ³¨ Web å†…å®¹çš„å…è´¹å¼€æºè½¯ä»¶ï¼Œå®ƒä¸éœ€è¦é›†ä¸­å¼æœåŠ¡å™¨æˆ–æœåŠ¡ã€‚å®ƒä½¿ç”¨ IPFS æ¥å®ç°ç‚¹å¯¹ç‚¹çš„å†…å®¹åˆ†å‘ã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥å°†æ‚¨çš„å†…å®¹é“¾æ¥åˆ°ä»¥å¤ªåŠåç§° (.eth)ï¼Œä»¥ä¾¿å…¶ä»–äººå¯ä»¥é€šè¿‡ Planet ä»¥ .eth åç§°å…³æ³¨æ‚¨ã€‚ç”±äº IPFS å’Œ ENS éƒ½æ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œå› æ­¤æ‚¨å¯ä»¥ä»¥å»ä¸­å¿ƒåŒ–çš„æ–¹å¼æ„å»ºæ‚¨çš„ç½‘ç«™æˆ–å…³æ³¨å…¶ä»–ç½‘ç«™ã€‚ ","date":"2022-08-17","objectID":"/planet/:1:0","tags":["Planet","web3.0"],"title":"Planet ä¸‹è½½åŠå®‰è£…","uri":"/planet/"},{"categories":["web3.0"],"content":"å¦‚ä½•ä½¿ç”¨ æ ‡å‡†æ˜¯ EIP-1577ï¼Œè¿™ä¸ª Content Hash å­—æ®µå¯ä»¥æ¥å—ä¸€äº›å¯èƒ½çš„å€¼ã€‚ä¾‹å¦‚ï¼ŒIPFSâ€”â€”å¦ä¸€ç§å»ä¸­å¿ƒåŒ–çš„å†…å®¹åˆ†å‘æŠ€æœ¯ã€‚è€Œvitalik.eth ç½‘ç«™å·²ç»åœ¨IPFS ä¸Šè¿è¡Œã€‚ é€šè¿‡ Planet å…³æ³¨æ¥è‡ªvitalik.eth çš„æ›´æ–° ä½¿ç”¨ Planet åˆ›å»ºç½‘ç«™åï¼Œå³é”®å•å‡»ä¾§æ ä¸­çš„é¡¹ç›®ï¼Œç„¶åé€‰æ‹©Copy IPNSï¼Œç„¶åæ‚¨å°†åœ¨ç²˜è´´æ¿ä¸­çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å†…å®¹ï¼š k51qzi5uqu5dgv8kzl1anc0m74n6t9ffdjnypdh846ct5wgpljc7rulynxa74a ","date":"2022-08-17","objectID":"/planet/:2:0","tags":["Planet","web3.0"],"title":"Planet ä¸‹è½½åŠå®‰è£…","uri":"/planet/"},{"categories":["web3.0"],"content":"å…¬å¼€ENS ç„¶åæ‚¨å¯ä»¥åƒè¿™æ ·å°†è¯¥ IPNS æ”¾å…¥æ‚¨çš„ ENS ContentHash ä¸­ï¼š ç¡®ä¿åœ¨è¯¥å­—ç¬¦ä¸²ä¹‹å‰æ·»åŠ äº† ipns://ã€‚ ","date":"2022-08-17","objectID":"/planet/:3:0","tags":["Planet","web3.0"],"title":"Planet ä¸‹è½½åŠå®‰è£…","uri":"/planet/"},{"categories":["web3.0"],"content":"å®Œæˆï¼ ç„¶åæ‚¨çš„ç½‘ç«™å°†é“¾æ¥åˆ°æ‚¨çš„ ENSã€‚æ­å–œï¼ç°åœ¨ä½ æœ‰ä¸€ä¸ªåœ¨ ENS + IPFS ä¸Šè¿è¡Œçš„å»ä¸­å¿ƒåŒ–ç½‘ç«™ï¼ ","date":"2022-08-17","objectID":"/planet/:4:0","tags":["Planet","web3.0"],"title":"Planet ä¸‹è½½åŠå®‰è£…","uri":"/planet/"},{"categories":["æ•°æ®åº“"],"content":"ç´¢å¼• åœ¨å…³ç³»æ•°æ®åº“ä¸­ï¼Œå¦‚æœæœ‰ä¸Šä¸‡ç”šè‡³ä¸Šäº¿æ¡è®°å½•ï¼Œåœ¨æŸ¥æ‰¾è®°å½•çš„æ—¶å€™ï¼Œæƒ³è¦è·å¾—éå¸¸å¿«çš„é€Ÿåº¦ï¼Œå°±éœ€è¦ä½¿ç”¨ç´¢å¼•ã€‚ ç´¢å¼•æ˜¯å…³ç³»æ•°æ®åº“ä¸­å¯¹æŸä¸€åˆ—æˆ–å¤šä¸ªåˆ—çš„å€¼è¿›è¡Œé¢„æ’åºçš„æ•°æ®ç»“æ„ã€‚é€šè¿‡ä½¿ç”¨ç´¢å¼•ï¼Œå¯ä»¥è®©æ•°æ®åº“ç³»ç»Ÿä¸å¿…æ‰«ææ•´ä¸ªè¡¨ï¼Œè€Œæ˜¯ç›´æ¥å®šä½åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•ï¼Œè¿™æ ·å°±å¤§å¤§åŠ å¿«äº†æŸ¥è¯¢é€Ÿåº¦ã€‚ studentsè¡¨: id class_id name gender score 1 1 å°æ˜ M 90 2 1 å°çº¢ F 95 3 1 å°å†› M 88 ","date":"2022-08-16","objectID":"/sql-index/:0:0","tags":["mysql"],"title":"å…³ç³»æ•°æ®åº“ ç´¢å¼•æ“ä½œ","uri":"/sql-index/"},{"categories":["æ•°æ®åº“"],"content":"å¦‚æœè¦ç»å¸¸æ ¹æ®scoreåˆ—è¿›è¡ŒæŸ¥è¯¢ï¼Œå°±å¯ä»¥å¯¹scoreåˆ—åˆ›å»ºç´¢å¼•ï¼š ALTER TABLE students ADD INDEX idx_score (score); ","date":"2022-08-16","objectID":"/sql-index/:0:1","tags":["mysql"],"title":"å…³ç³»æ•°æ®åº“ ç´¢å¼•æ“ä½œ","uri":"/sql-index/"},{"categories":["æ•°æ®åº“"],"content":"ä½¿ç”¨ADD INDEX idx_score (score)å°±åˆ›å»ºäº†ä¸€ä¸ªåç§°ä¸ºidx_scoreï¼Œä½¿ç”¨åˆ—scoreçš„ç´¢å¼•ã€‚ç´¢å¼•åç§°æ˜¯ä»»æ„çš„ï¼Œç´¢å¼•å¦‚æœæœ‰å¤šåˆ—ï¼Œå¯ä»¥åœ¨æ‹¬å·é‡Œä¾æ¬¡å†™ä¸Šï¼Œä¾‹å¦‚ï¼š ALTER TABLE students ADD INDEX idx_name_score (name, score); ç´¢å¼•çš„æ•ˆç‡å–å†³äºç´¢å¼•åˆ—çš„å€¼æ˜¯å¦æ•£åˆ—ï¼Œå³è¯¥åˆ—çš„å€¼å¦‚æœè¶Šäº’ä¸ç›¸åŒï¼Œé‚£ä¹ˆç´¢å¼•æ•ˆç‡è¶Šé«˜ã€‚åè¿‡æ¥ï¼Œå¦‚æœè®°å½•çš„åˆ—å­˜åœ¨å¤§é‡ç›¸åŒçš„å€¼ï¼Œä¾‹å¦‚genderåˆ—ï¼Œå¤§çº¦ä¸€åŠçš„è®°å½•å€¼æ˜¯Mï¼Œå¦ä¸€åŠæ˜¯Fï¼Œå› æ­¤ï¼Œå¯¹è¯¥åˆ—åˆ›å»ºç´¢å¼•å°±æ²¡æœ‰æ„ä¹‰ã€‚ ","date":"2022-08-16","objectID":"/sql-index/:0:2","tags":["mysql"],"title":"å…³ç³»æ•°æ®åº“ ç´¢å¼•æ“ä½œ","uri":"/sql-index/"},{"categories":["æ•°æ®åº“"],"content":"å”¯ä¸€ç´¢å¼• åœ¨è®¾è®¡å…³ç³»æ•°æ®è¡¨çš„æ—¶å€™ï¼Œçœ‹ä¸Šå»å”¯ä¸€çš„åˆ—ï¼Œä¾‹å¦‚èº«ä»½è¯å·ã€é‚®ç®±åœ°å€ç­‰ï¼Œå› ä¸ºä»–ä»¬å…·æœ‰ä¸šåŠ¡å«ä¹‰ï¼Œå› æ­¤ä¸å®œä½œä¸ºä¸»é”®ã€‚ ä½†æ˜¯ï¼Œè¿™äº›åˆ—æ ¹æ®ä¸šåŠ¡è¦æ±‚ï¼Œåˆå…·æœ‰å”¯ä¸€æ€§çº¦æŸï¼šå³ä¸èƒ½å‡ºç°ä¸¤æ¡è®°å½•å­˜å‚¨äº†åŒä¸€ä¸ªèº«ä»½è¯å·ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ç»™è¯¥åˆ—æ·»åŠ ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å‡è®¾studentsè¡¨çš„nameä¸èƒ½é‡å¤ï¼š ALTER TABLE students ADD UNIQUE INDEX uni_name (name); é€šè¿‡UNIQUEå…³é”®å­—æˆ‘ä»¬å°±æ·»åŠ äº†ä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚ ä¹Ÿå¯ä»¥åªå¯¹æŸä¸€åˆ—æ·»åŠ ä¸€ä¸ªå”¯ä¸€çº¦æŸè€Œä¸åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼š ALTER TABLE students ADD CONSTRAINT uni_name UNIQUE (name); è¿™ç§æƒ…å†µä¸‹ï¼Œnameåˆ—æ²¡æœ‰ç´¢å¼•ï¼Œä½†ä»ç„¶å…·æœ‰å”¯ä¸€æ€§ä¿è¯ã€‚ æ— è®ºæ˜¯å¦åˆ›å»ºç´¢å¼•ï¼Œå¯¹äºç”¨æˆ·å’Œåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œä½¿ç”¨å…³ç³»æ•°æ®åº“ä¸ä¼šæœ‰ä»»ä½•åŒºåˆ«ã€‚è¿™é‡Œçš„æ„æ€æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢æ—¶ï¼Œå¦‚æœæœ‰ç›¸åº”çš„ç´¢å¼•å¯ç”¨ï¼Œæ•°æ®åº“ç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ä½¿ç”¨ç´¢å¼•æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå¦‚æœæ²¡æœ‰ç´¢å¼•ï¼ŒæŸ¥è¯¢ä¹Ÿèƒ½æ­£å¸¸æ‰§è¡Œï¼Œåªæ˜¯é€Ÿåº¦ä¼šå˜æ…¢ã€‚å› æ­¤ï¼Œç´¢å¼•å¯ä»¥åœ¨ä½¿ç”¨æ•°æ®åº“çš„è¿‡ç¨‹ä¸­é€æ­¥ä¼˜åŒ– é€šè¿‡å¯¹æ•°æ®åº“è¡¨åˆ›å»ºç´¢å¼•ï¼Œå¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚ é€šè¿‡åˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼Œå¯ä»¥ä¿è¯æŸä¸€åˆ—çš„å€¼å…·æœ‰å”¯ä¸€æ€§ã€‚ æ•°æ®åº“ç´¢å¼•å¯¹äºç”¨æˆ·å’Œåº”ç”¨ç¨‹åºæ¥è¯´éƒ½æ˜¯é€æ˜çš„ã€‚ ","date":"2022-08-16","objectID":"/sql-index/:1:0","tags":["mysql"],"title":"å…³ç³»æ•°æ®åº“ ç´¢å¼•æ“ä½œ","uri":"/sql-index/"},{"categories":["æ—¥å¸¸"],"content":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤ V 4.8.0 é‡‡ç”¨4ä¸»4ä»ï¼ŒåŒæ­¥æ¨¡å¼ã€‚HAå®ç°ä¸Šé‡‡ç”¨Master/Slave+Failoverç»„ä»¶æ–¹å¼ æ¯å°ä¸»æœºè¿è¡Œä¸‰ä¸ªå®¹å™¨ï¼Œåˆ†åˆ«ä¸ºNameServerã€BrokerMasterã€SlaveMasterï¼Œæ¯ä¸ªMasterå’ŒSlaveåˆ†åˆ«å­˜æ”¾åœ¨ä¸åŒçš„æœºå™¨ä¸Š ","date":"2022-08-15","objectID":"/rocketmq2/:0:0","tags":["RocketMQ"],"title":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq2/"},{"categories":["æ—¥å¸¸"],"content":"æ¶æ„ IP è§’è‰² æœåŠ¡ 193.0.40.172 NameServer - 193.0.40.172 BrokerMaster broker-a 193.0.40.172 SlaveMaster broker-d-s 193.0.40.172 BrokerMaster broker-b 193.0.40.172 SlaveMaster broker-a-s 193.0.40.172 BrokerMaster broker-c 193.0.40.172 SlaveMaster broker-b-s 193.0.40.172 BrokerMaster broker-d 193.0.40.172 SlaveMaster broker-c-s ","date":"2022-08-15","objectID":"/rocketmq2/:1:0","tags":["RocketMQ"],"title":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq2/"},{"categories":["æ—¥å¸¸"],"content":"éƒ¨ç½² ","date":"2022-08-15","objectID":"/rocketmq2/:2:0","tags":["RocketMQ"],"title":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq2/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…docker-compose #!/bin/bash # ä¸‹è½½å®‰è£… v2.4.1 docker-compose curl -L https://get.daocloud.io/docker/compose/releases/download/v2.4.1/docker-compose-`uname -s`-`uname -m` \u003e /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose docker-compose --version æ‰§è¡Œ docker-compose --version æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ ","date":"2022-08-15","objectID":"/rocketmq2/:2:1","tags":["RocketMQ"],"title":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq2/"},{"categories":["æ—¥å¸¸"],"content":"ç”Ÿæˆé…ç½®æ–‡ä»¶ #!/bin/bash #docker-compose ç”Ÿæˆé…ç½®æ–‡ä»¶ mkdir -p /rocketmq/data/namesv1 mkdir -p /rocketmq/logs/namesv1 mkdir -p /rocketmq/data/namesv2 mkdir -p /rocketmq/logs/namesv2 mkdir -p /rocketmq/config/broker-a mkdir -p /rocketmq/data/broker-a mkdir -p /rocketmq/logs/broker-a mkdir -p /rocketmq/config/broker-a-s mkdir -p /rocketmq/data/broker-a-s mkdir -p /rocketmq/logs/broker-a-s mkdir -p /rocketmq/config/broker-b mkdir -p /rocketmq/data/broker-b mkdir -p /rocketmq/logs/broker-b mkdir -p /rocketmq/config/broker-b-s mkdir -p /rocketmq/data/broker-b-s mkdir -p /rocketmq/logs/broker-b-s mkdir -p /rocketmq/config/broker-c mkdir -p /rocketmq/data/broker-c mkdir -p /rocketmq/logs/broker-c mkdir -p /rocketmq/config/broker-c-s mkdir -p /rocketmq/data/broker-c-s mkdir -p /rocketmq/logs/broker-c-s mkdir -p /rocketmq/config/broker-d mkdir -p /rocketmq/data/broker-d mkdir -p /rocketmq/logs/broker-d mkdir -p /rocketmq/config/broker-d-s mkdir -p /rocketmq/data/broker-d-s mkdir -p /rocketmq/logs/broker-d-s cd /rocketmq/config/broker-a cat \u003e broker-a.conf \u003c\u003cEOF #é›†ç¾¤åç§° brokerClusterName=DefaultCluster #brokeråç§° brokerName=broker-a #brokerId masterç”¨0 slaveç”¨å…¶ä»– brokerId=0 #æ¸…ç†æ—¶æœº deleteWhen=4 #æ–‡ä»¶ä¿ç•™æ—¶é•¿ 48å°æ—¶ fileReservedTime=48 #brokerè§’è‰² -ASYNC_MASTERå¼‚æ­¥å¤åˆ¶ -SYNC_MASTERåŒæ­¥åŒå†™ -SLAVE brokerRole=SYNC_MASTER #åˆ·ç›˜ç­–ç•¥ - ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜ - SYNC_FLUSH åŒæ­¥åˆ·ç›˜ flushDiskType=SYNC_FLUSH #ä¸»æœºip brokerIP1=193.0.40.172 #å¯¹å¤–æœåŠ¡çš„ç›‘å¬æ¥å£ï¼ŒåŒä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¤šä¸ªbroker,ç«¯å£å·è¦ä¸ç›¸åŒ listenPort=10911 #namesvr namesrvAddr=193.0.40.172:9876;193.0.40.172:9877 #æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨åˆ›å»ºtopic autoCreateTopicEnable=true EOF # ç”Ÿæˆé…ç½®æ–‡ä»¶ cd /rocketmq/config/broker-a-s cat \u003e broker-a-s.conf \u003c\u003cEOF #é›†ç¾¤åç§° brokerClusterName=DefaultCluster #brokeråç§° brokerName=broker-a #brokerId masterç”¨0 slaveç”¨å…¶ä»– brokerId=1 #æ¸…ç†æ—¶æœº deleteWhen=4 #æ–‡ä»¶ä¿ç•™æ—¶é•¿ 48å°æ—¶ fileReservedTime=48 #brokerè§’è‰² -ASYNC_MASTERå¼‚æ­¥å¤åˆ¶ -SYNC_MASTERåŒæ­¥åŒå†™ -SLAVE brokerRole=SLAVE #åˆ·ç›˜ç­–ç•¥ - ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜ - SYNC_FLUSH åŒæ­¥åˆ·ç›˜ flushDiskType=SYNC_FLUSH #ä¸»æœºip brokerIP1=193.0.40.172 #å¯¹å¤–æœåŠ¡çš„ç›‘å¬æ¥å£ï¼ŒåŒä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¤šä¸ªbroker,ç«¯å£å·è¦ä¸ç›¸åŒ listenPort=11911 #namesrv namesrvAddr=193.0.40.172:9876;193.0.40.172:9877 #æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨åˆ›å»ºtopic autoCreateTopicEnable=true EOF cd /rocketmq/config/broker-b cat \u003e broker-b.conf \u003c\u003cEOF #é›†ç¾¤åç§° brokerClusterName=DefaultCluster #brokeråç§° brokerName=broker-b #brokerId masterç”¨0 slaveç”¨å…¶ä»– brokerId=0 #æ¸…ç†æ—¶æœº deleteWhen=4 #æ–‡ä»¶ä¿ç•™æ—¶é•¿ 48å°æ—¶ fileReservedTime=48 #brokerè§’è‰² -ASYNC_MASTERå¼‚æ­¥å¤åˆ¶ -SYNC_MASTERåŒæ­¥åŒå†™ -SLAVE brokerRole=SYNC_MASTER #åˆ·ç›˜ç­–ç•¥ - ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜ - SYNC_FLUSH åŒæ­¥åˆ·ç›˜ flushDiskType=SYNC_FLUSH #ä¸»æœºip brokerIP1=193.0.40.172 #å¯¹å¤–æœåŠ¡çš„ç›‘å¬æ¥å£ï¼ŒåŒä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¤šä¸ªbroker,ç«¯å£å·è¦ä¸ç›¸åŒ listenPort=12911 #namesrv namesrvAddr=193.0.40.172:9876;193.0.40.172:9877 #æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨åˆ›å»ºtopic autoCreateTopicEnable=true EOF cd /rocketmq/config/broker-b-s cat \u003e broker-b-s.conf \u003c\u003cEOF #é›†ç¾¤åç§° brokerClusterName=DefaultCluster #brokeråç§° brokerName=broker-b #brokerId masterç”¨0 slaveç”¨å…¶ä»– brokerId=1 #æ¸…ç†æ—¶æœº deleteWhen=4 #æ–‡ä»¶ä¿ç•™æ—¶é•¿ 48å°æ—¶ fileReservedTime=48 #brokerè§’è‰² -ASYNC_MASTERå¼‚æ­¥å¤åˆ¶ -SYNC_MASTERåŒæ­¥åŒå†™ -SLAVE brokerRole=SLAVE #åˆ·ç›˜ç­–ç•¥ - ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜ - SYNC_FLUSH åŒæ­¥åˆ·ç›˜ flushDiskType=SYNC_FLUSH #ä¸»æœºip brokerIP1=193.0.40.172 #å¯¹å¤–æœåŠ¡çš„ç›‘å¬æ¥å£ï¼ŒåŒä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¤šä¸ªbroker,ç«¯å£å·è¦ä¸ç›¸åŒ listenPort=13911 #namesrv namesrvAddr=193.0.40.172:9876;193.0.40.172:9877 #æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨åˆ›å»ºtopic autoCreateTopicEnable=true EOF cd /rocketmq/config/broker-c cat \u003e broker-c.conf \u003c\u003cEOF #é›†ç¾¤åç§° brokerClusterName=DefaultCluster #brokeråç§° brokerName=broker-c #brokerId masterç”¨0 slaveç”¨å…¶ä»– brokerId=0 #æ¸…ç†æ—¶æœº deleteWhen=4 #æ–‡ä»¶ä¿ç•™æ—¶é•¿ 48å°æ—¶ fileReservedTime=48 #brokerè§’è‰² -ASYNC_MASTERå¼‚æ­¥å¤åˆ¶ -SYNC_MASTERåŒæ­¥åŒå†™ -SLAVE brokerRole=SYNC_MASTER #åˆ·ç›˜ç­–ç•¥ - ASYNC_FLUSH å¼‚æ­¥åˆ·ç›˜ - SYNC_FLUSH åŒæ­¥åˆ·ç›˜ flushDiskType=SYNC_FLUSH #ä¸»æœºip brokerIP1=193.0.40.172 #å¯¹å¤–æœåŠ¡çš„ç›‘å¬æ¥å£ï¼ŒåŒä¸€å°æœºå™¨ä¸Šéƒ¨ç½²å¤šä¸ªbroker,ç«¯å£å·è¦ä¸ç›¸åŒ listenPort=14911 #namesrv namesrvAddr=193.0.40.172:9876;193.0.40.172:9877 #æ˜¯å¦èƒ½å¤Ÿè‡ªåŠ¨åˆ›å»ºtopic autoCreateTopicEnable=true EOF cd /rocketmq/config/broker-c-s cat \u003e broker-c-s.conf \u003c\u003cEOF #é›†ç¾¤åç§° brokerClusterName=DefaultCluster #brokeråç§° brokerName=broker-c #brokerId masterç”¨0 slaveç”¨å…¶ä»– brokerId=1 #æ¸…ç†æ—¶æœº deleteWhen=4 #æ–‡ä»¶ä¿ç•™æ—¶é•¿ 48å°æ—¶ fileReservedTime=48 #brokerè§’è‰² -ASYNC_MASTERå¼‚æ­¥å¤åˆ¶ -SYNC_MASTERåŒæ­¥åŒå†™ -SLAVE brokerR","date":"2022-08-15","objectID":"/rocketmq2/:2:2","tags":["RocketMQ"],"title":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq2/"},{"categories":["æ—¥å¸¸"],"content":"æ‰§è¡Œdocker-compose.yaml æ–‡ä»¶ version: '3' services: rocketmq-namesv1: image: apache/rocketmq:4.8.0 container_name: rocketmq-namesv1 restart: always ports: - 9876:9876 volumes: - /rocketmq/logs/namesv1:/home/rocketmq/logs environment: JAVA_OPT_EXT: -server -Xms256M -Xmx256M -Xmn128m command: sh mqnamesrv networks: rocketmq: aliases: - rocketmq-namesv1 rocketmq-namesv2: image: apache/rocketmq:4.8.0 container_name: rocketmq-namesv2 restart: always ports: - 9877:9876 volumes: - /rocketmq/logs/namesv2:/home/rocketmq/logs environment: JAVA_OPT_EXT: -server -Xms256M -Xmx256M -Xmn128m command: sh mqnamesrv networks: rocketmq: aliases: - rocketmq-namesv2 broker-a: image: apache/rocketmq:4.8.0 container_name: broker-a links: - rocketmq-namesv1:rocketmq-namesv1 - rocketmq-namesv2:rocketmq-namesv2 ports: - 10909:10909 - 10911:10911 - 10912:10912 environment: TZ: Asia/Shanghai NAMESRV_ADDR: \"rocketmq-namesv1:9876\" JAVA_OPT_EXT: \"-server -Xms256M -Xmx256M -Xmn128m\" volumes: - /rocketmq/logs/broker-a:/home/rocketmq/logs - /rocketmq/config/broker-a/broker-a.conf:/home/rocketmq/rocketmq-4.8.0/conf/broker.conf command: sh mqbroker -c /home/rocketmq/rocketmq-4.8.0/conf/broker.conf autoCreateTopicEnable=true \u0026 networks: rocketmq: aliases: - broker-a broker-a-s: image: apache/rocketmq:4.8.0 container_name: broker-a-s links: - rocketmq-namesv1:rocketmq-namesv1 - rocketmq-namesv2:rocketmq-namesv2 ports: - 11909:10909 - 11911:11911 - 11912:10912 environment: TZ: Asia/Shanghai NAMESRV_ADDR: \"rocketmq-namesv1:9876\" JAVA_OPT_EXT: \"-server -Xms256M -Xmx256M -Xmn128m\" volumes: - /rocketmq/logs/broker-a-s:/home/rocketmq/logs - /rocketmq/config/broker-a-s/broker-a-s.conf:/home/rocketmq/rocketmq-4.8.0/conf/broker.conf command: sh mqbroker -c /home/rocketmq/rocketmq-4.8.0/conf/broker.conf autoCreateTopicEnable=true \u0026 networks: rocketmq: aliases: - broker-a-s broker-b: image: apache/rocketmq:4.8.0 container_name: broker-b links: - rocketmq-namesv1:rocketmq-namesv1 - rocketmq-namesv2:rocketmq-namesv2 ports: - 12909:10909 - 12911:12911 - 12912:10912 environment: TZ: Asia/Shanghai NAMESRV_ADDR: \"rocketmq-namesv1:9876\" JAVA_OPT_EXT: \"-server -Xms256M -Xmx256M -Xmn128m\" volumes: - /rocketmq/logs/broker-b:/home/rocketmq/logs - /rocketmq/config/broker-b/broker-b.conf:/home/rocketmq/rocketmq-4.8.0/conf/broker.conf command: sh mqbroker -c /home/rocketmq/rocketmq-4.8.0/conf/broker.conf autoCreateTopicEnable=true \u0026 networks: rocketmq: aliases: - broker-b broker-b-s: image: apache/rocketmq:4.8.0 container_name: broker-b-s links: - rocketmq-namesv1:rocketmq-namesv1 - rocketmq-namesv2:rocketmq-namesv2 ports: - 13909:10909 - 13911:13911 - 13912:10912 environment: TZ: Asia/Shanghai NAMESRV_ADDR: \"rocketmq-namesv1:9876\" JAVA_OPT_EXT: \"-server -Xms256M -Xmx256M -Xmn128m\" volumes: - /rocketmq/logs/broker-b-s:/home/rocketmq/logs - /rocketmq/config/broker-b-s/broker-b-s.conf:/home/rocketmq/rocketmq-4.8.0/conf/broker.conf command: sh mqbroker -c /home/rocketmq/rocketmq-4.8.0/conf/broker.conf autoCreateTopicEnable=true \u0026 networks: rocketmq: aliases: - broker-b-s broker-c: image: apache/rocketmq:4.8.0 container_name: broker-c links: - rocketmq-namesv1:rocketmq-namesv1 - rocketmq-namesv2:rocketmq-namesv2 ports: - 14909:10909 - 14911:14911 - 14912:10912 environment: TZ: Asia/Shanghai NAMESRV_ADDR: \"rocketmq-namesv1:9876\" JAVA_OPT_EXT: \"-server -Xms256M -Xmx256M -Xmn128m\" volumes: - /rocketmq/logs/broker-c:/home/rocketmq/logs - /rocketmq/config/broker-c/broker-c.conf:/home/rocketmq/rocketmq-4.8.0/conf/broker.conf command: sh mqbroker -c /home/rocketmq/rocketmq-4.8.0/conf/broker.conf autoCreateTopicEnable=true \u0026 networks: rocketmq: aliases: - broker-c broker-c-s: image: apache/rocketmq:4.8.0 container_name: broker-c-s links: - rocketmq-namesv1:rocketmq-namesv1 - rocketmq-namesv2:rocketmq-namesv2 ports: - 15909:10909 - 15911:15911 - 15912:10912 environment: TZ: Asia/Shanghai NAMESRV_ADDR: \"rocketmq-namesv1:9876\" JAVA_OPT_EXT: \"-server -Xms256M -Xmx256M -Xmn128m\" volumes: - /rocketmq/logs/brok","date":"2022-08-15","objectID":"/rocketmq2/:2:3","tags":["RocketMQ"],"title":"RocketMQ docker-composeéƒ¨ç½² 4ä¸»4ä»é›†ç¾¤","uri":"/rocketmq2/"},{"categories":["gitlab"],"content":"Argo cd å®‰è£…å’Œéƒ¨ç½² Argo CD æ˜¯ä¸€ä¸ªä¸º Kubernetes è€Œç”Ÿçš„ï¼Œéµå¾ªå£°æ˜å¼ GitOps ç†å¿µçš„æŒç»­éƒ¨ç½²ï¼ˆCDï¼‰å·¥å…·ã€‚Argo CD å¯åœ¨ Git å­˜å‚¨åº“æ›´æ”¹æ—¶è‡ªåŠ¨åŒæ­¥å’Œéƒ¨ç½²åº”ç”¨ç¨‹åº ","date":"2022-08-10","objectID":"/argocd/:0:0","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"å®‰è£… k8så¿«é€Ÿå®‰è£… k3s kubectl create namespace argocd k3s kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml ","date":"2022-08-10","objectID":"/argocd/:1:0","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"å®‰è£… Argo CD CLI Argo CD CLI æ˜¯ç”¨äºç®¡ç† Argo CD çš„å‘½ä»¤è¡Œå·¥å…·,Mac ç³»ç»Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ brew install è¿›è¡Œå®‰è£… brew install argocd ","date":"2022-08-10","objectID":"/argocd/:1:1","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"å‘å¸ƒ Argo CD æœåŠ¡ é»˜è®¤æƒ…å†µä¸‹ï¼Œ Argo CD æœåŠ¡ä¸å¯¹å¤–æš´éœ²æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡ LoadBalancer æˆ–è€… NodePort ç±»å‹çš„ Serviceã€Ingressã€Kubectl ç«¯å£è½¬å‘ç­‰æ–¹å¼å°† Argo CD æœåŠ¡å‘å¸ƒåˆ° Kubernetes é›†ç¾¤å¤–éƒ¨ã€‚ é€šè¿‡ NodePort æœåŠ¡çš„æ–¹å¼æš´éœ² Argo CD åˆ°é›†ç¾¤å¤–éƒ¨ kubectl patch svc argocd-server -n argocd -p '{\"spec\": {\"type\": \"NodePort\"}}' ","date":"2022-08-10","objectID":"/argocd/:1:2","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹ç«¯å£ kubectl get svc -n argocd ","date":"2022-08-10","objectID":"/argocd/:1:3","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"ä½¿ç”¨ ","date":"2022-08-10","objectID":"/argocd/:2:0","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"è·å– Argo CD å¯†ç  é»˜è®¤æƒ…å†µä¸‹ admin å¸å·çš„åˆå§‹å¯†ç æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¼šä»¥æ˜æ–‡çš„å½¢å¼å­˜å‚¨åœ¨ Argo CD å®‰è£…çš„å‘½åç©ºé—´ä¸­argocd-initial-admin-secret çš„ Secret å¯¹è±¡ä¸‹çš„ password kubectl -n argocd get secret \\ argocd-initial-admin-secret \\ -o jsonpath=\"{.data.password}\" | base64 -d ","date":"2022-08-10","objectID":"/argocd/:2:1","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["gitlab"],"content":"å‘½ä»¤è¡Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ç™»å½• argocd login \u003cèŠ‚ç‚¹ IP\u003e:\u003cç«¯å£\u003e ","date":"2022-08-10","objectID":"/argocd/:2:2","tags":["gitlab"],"title":"Argo cd å®‰è£…å’Œéƒ¨ç½²","uri":"/argocd/"},{"categories":["ç›‘æ§"],"content":"skywalking åŸºäºOpenTracingè§„èŒƒï¼Œä¸“é—¨ä¸ºå¾®æœåŠ¡æ¶æ„ä»¥åŠäº‘åŸç”ŸæœåŠ¡ã€‚ ","date":"2022-08-10","objectID":"/skywalking/:0:0","tags":["skywalking"],"title":"skywalking APM ç›‘æ§","uri":"/skywalking/"},{"categories":["ç›‘æ§"],"content":"APM ç›‘æ§ ä¸€ä¸ªåŸºäºå¾®æœåŠ¡æ¶æ„çš„ç”µå•†ç³»ç»Ÿ APM (Application Performance Management) å³åº”ç”¨æ€§èƒ½ç®¡ç†ï¼Œå±äºITè¿ç»´ç®¡ç†ï¼ˆITOM)èŒƒç•´. åˆ†ä¸ºä¸€ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š Logging æœåŠ¡åœ¨å¤„ç†æŸä¸ªè¯·æ±‚æ—¶æ‰“å°çš„é”™è¯¯æ—¥å¿—ï¼Œå¯ä»¥å°†è¿™äº›æ—¥å¿—ä¿¡æ¯è®°å½•åˆ°Elasticsearchæˆ–æ˜¯å…¶ä»–å­˜å‚¨ä¸­ã€‚é€šè¿‡Kibanaæˆ–æ˜¯å…¶ä»–å·¥å…·æ¥åˆ†æè¿™äº›æ—¥å¿—äº†è§£æœåŠ¡çš„è¡Œä¸ºå’ŒçŠ¶æ€ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ã€‚æ—¥å¿—è®°å½•çš„æ•°æ®å¾ˆåˆ†æ•£ï¼Œå¹¶ä¸”ç›¸äº’ç‹¬ç«‹ã€‚ä¾‹å¦‚é”™è¯¯æ—¥å¿—ï¼Œè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­å…³é”®æ­¥éª¤çš„æ—¥å¿—ç­‰ç­‰ã€‚ Metrics Metricæ˜¯å¯ä»¥èšåˆçš„ï¼Œä¾‹å¦‚ä¸ºç”µå•†ç³»ç»Ÿä¸­æ¯ä¸ªHTTPæ¥å£æ·»åŠ ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè®¡ç®—æ¯ä¸ªæ¥å£çš„QPSï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„åŠ å’Œè®¡ç®—å¾—åˆ°ç³»ç»Ÿçš„æ€»è´Ÿè½½æƒ…å†µã€‚ Tracing åœ¨å¾®æœåŠ¡æ¶æ„ç³»ç»Ÿä¸­ä¸€è¯·æ±‚ä¼šç»è¿‡å¾ˆå¤šæœåŠ¡å¤„ç†ï¼Œè°ƒç”¨é“¾è·¯ä¼šéå¸¸é•¿ï¼Œè¦ç¡®å®šä¸­é—´å“ªä¸ªæœåŠ¡å‡ºç°å¼‚å¸¸æ˜¯éå¸¸éº»çƒ¦çš„äº‹æƒ…ï¼Œé€šè¿‡åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼Œè¿ç»´äººå‘˜å°±å¯ä»¥æ„å»ºä¸€ä¸ªè¯·æ±‚çš„è§†å›¾ã€‚è§†å›¾ä¸Šæˆ˜æœ¯äº†ä¸€ä¸ªè¯·æ±‚ä»è¿›å…¥ç³»ç»Ÿå¼€å§‹åˆ°è¿”å›å“åº”çš„æ•´ä¸ªæµç¨‹ã€‚ ç³»ç»Ÿäº¤äº’å›¾ ç³»ç»ŸåŠ è½½å›¾ ","date":"2022-08-10","objectID":"/skywalking/:1:0","tags":["skywalking"],"title":"skywalking APM ç›‘æ§","uri":"/skywalking/"},{"categories":["ç›‘æ§"],"content":"ç›®å‰æµè¡Œçš„APMç›‘æ§ Zipkin å¯¹web.xml è¿›è¡Œä¿®æ”¹ï¼Œä»£ç ä¾µå…¥ twitterå¼€æº Cat æ”¯æŒJavaã€C/C++ã€Node.Jsã€Pythonã€go ä»£ç ä¾µå…¥ï¼ŒåŸ‹ç‚¹ ç¾å›¢å¼€æº Pinpoint åŸºäºå­—èŠ‚ç æ³¨å…¥æŠ€æœ¯ï¼Œä»£ç æ— ä¾µå…¥ éŸ©å›½å…¬å¸å¼€å‘ï¼Œç¤¾åŒºäº¤æµæ»å åªæ”¯æŒhbase é¢—ç²’åº¦æ›´ç»† Skywalking è§‚æµ‹æ€§åˆ†æå¹³å° åŸºäºå­—èŠ‚ç æ³¨å…¥æŠ€æœ¯ï¼Œä»£ç æ— ä¾µå…¥ æœåŠ¡ã€æœåŠ¡å®ä¾‹ã€ç«¯ç‚¹æŒ‡æ ‡åˆ†æ æœåŠ¡æ‹“æ‰‘å›¾åˆ†æ æœåŠ¡ã€æœåŠ¡å®ä¾‹å’Œç«¯ç‚¹ï¼ˆEndpontï¼‰SLAåˆ†æ æ”¯æŒesï¼Œh2,mysql,TiDb,sharding-sphere skywalking æ•´ä½“æ¡†æ¶ ä¸Šéƒ¨åˆ† Agent ï¼šè´Ÿè´£ä»åº”ç”¨ä¸­ï¼Œæ”¶é›†é“¾è·¯ä¿¡æ¯ï¼Œå‘é€ç»™ SkyWalking OAP æœåŠ¡å™¨ã€‚ç›®å‰æ”¯æŒ SkyWalkingã€Zikpinã€Jaeger ç­‰æä¾›çš„ Tracing æ•°æ®ä¿¡æ¯ã€‚è€Œæˆ‘ä»¬ç›®å‰é‡‡ç”¨çš„æ˜¯ï¼ŒSkyWalking Agent æ”¶é›† SkyWalking Tracing æ•°æ®ï¼Œä¼ é€’ç»™æœåŠ¡å™¨ã€‚ ä¸‹éƒ¨åˆ† SkyWalking OAP ï¼šè´Ÿè´£æ¥æ”¶ Agent å‘é€çš„ Tracing æ•°æ®ä¿¡æ¯ï¼Œç„¶åè¿›è¡Œåˆ†æ(Analysis Core) ï¼Œå­˜å‚¨åˆ°å¤–éƒ¨å­˜å‚¨å™¨( Storage )ï¼Œæœ€ç»ˆæä¾›æŸ¥è¯¢( Query )åŠŸèƒ½ã€‚ å³éƒ¨åˆ† Storage ï¼šTracing æ•°æ®å­˜å‚¨ã€‚ç›®å‰æ”¯æŒ ESã€MySQLã€Sharding Sphereã€TiDBã€H2 å¤šç§å­˜å‚¨å™¨ã€‚è€Œæˆ‘ä»¬ç›®å‰é‡‡ç”¨çš„æ˜¯ ES ï¼Œä¸»è¦è€ƒè™‘æ˜¯ SkyWalking å¼€å‘å›¢é˜Ÿè‡ªå·±çš„ç”Ÿäº§ç¯å¢ƒé‡‡ç”¨ ES ä¸ºä¸»ã€‚ å·¦éƒ¨åˆ† SkyWalking UI ï¼šè´Ÿè´£æä¾›æ§å°ï¼ŒæŸ¥çœ‹é“¾è·¯ç­‰ç­‰ã€‚ ","date":"2022-08-10","objectID":"/skywalking/:2:0","tags":["skywalking"],"title":"skywalking APM ç›‘æ§","uri":"/skywalking/"},{"categories":["ç›‘æ§"],"content":"skywalking é…ç½® ","date":"2022-08-10","objectID":"/skywalking/:3:0","tags":["skywalking"],"title":"skywalking APM ç›‘æ§","uri":"/skywalking/"},{"categories":["ç›‘æ§"],"content":"ä½¿ç”¨docker-composeå®‰è£… ä½¿ç”¨mysqlä½œä¸ºå­˜å‚¨ ä¸‹è½½ mysql-connector-java-8.0.30.jar mkdir ./libs/ mv mysql-connector-java-8.0.30.jar ./libs/ åˆ›å»ºå¸¦mysqlé©±åŠ¨çš„åŸºç¡€é•œåƒ FROM apache/skywalking-oap-server:9.1.0 LABEL maintainer=\"nb@nbtyfood.com\" COPY ./libs/* /skywalking/oap-libs ä¸Šä¼ dockerhubæˆ–è€…è‡ªå·±çš„é•œåƒä»“åº“ï¼Œè¿™é‡Œæˆ‘æ˜¯ä¸Šä¼ åˆ°è‡ªå·±çš„ä»“åº“ åˆ›å»ºé•œåƒ docker build -t skywalking-mysql-server:v1.0 . æ‰“tagï¼Œé€‰æ‹©ä¸Šä¼ ä½ç½® docker tag skywalking-mysql-server:v1.0 \u003cä»“åº“åœ°å€\u003e/blog/skywalking-mysql-server:v1.0 ä¸Šä¼ é•œåƒ docker push \u003cä»“åº“åœ°å€\u003e/blog/skywalking-mysql-server:v1.0 version: \"3\" services: skywalking-oap-server: image: \"hub.docker.com/jobcher/skywalking-mysql-server:v1.0\" #docker iamge åœ°å€ container_name: \"oap-server\" restart: \"always\" environment: - SW_STORAGE=mysql - SW_JDBC_URL=\"jdbc:mysql://10.12.12.4:3306/sk\" - SW_DATA_SOURCE_USER=user # mysqlç”¨æˆ·å - SW_DATA_SOURCE_PASSWORD=password # mysqlå¯†ç  ports: - \"10.12.12.16:12800:12800\" - \"10.12.12.16:1234:1234\" - \"10.12.12.16:11800:11800\" skywalking-oap-ui: #UIç•Œé¢ image: \"apache/skywalking-ui:9.1.0\" container_name: \"oap-ui\" restart: \"always\" environment: - SW_OAP_ADDRESS=http://10.12.12.16:12800 ports: - \"8180:8080\" ","date":"2022-08-10","objectID":"/skywalking/:4:0","tags":["skywalking"],"title":"skywalking APM ç›‘æ§","uri":"/skywalking/"},{"categories":["åŸºç¡€"],"content":"ä»‹ç» systemd æ˜¯linuxä¸­ç”¨æ¥å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ï¼ŒLinuxæœ€æ—©ä¸€ç›´é‡‡ç”¨initè¿›ç¨‹ (systemd æ¶æ„å›¾) ","date":"2022-08-08","objectID":"/systemd/:1:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"systemd å‘½ä»¤ systemd ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å‘½ä»¤ï¼Œè€Œæ˜¯ä¸€ç»„å‘½ä»¤ï¼Œç”¨äºç³»ç»Ÿç®¡ç†çš„å„ä¸ªæ–¹é¢ ","date":"2022-08-08","objectID":"/systemd/:2:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"1.systemctl systemctlæ˜¯ Systemd çš„ä¸»å‘½ä»¤ï¼Œç”¨äºç®¡ç†ç³»ç»Ÿã€‚ # é‡å¯ç³»ç»Ÿ $ sudo systemctl reboot # å…³é—­ç³»ç»Ÿï¼Œåˆ‡æ–­ç”µæº $ sudo systemctl poweroff # CPUåœæ­¢å·¥ä½œ $ sudo systemctl halt # æš‚åœç³»ç»Ÿ $ sudo systemctl suspend # è®©ç³»ç»Ÿè¿›å…¥å†¬çœ çŠ¶æ€ $ sudo systemctl hibernate # è®©ç³»ç»Ÿè¿›å…¥äº¤äº’å¼ä¼‘çœ çŠ¶æ€ $ sudo systemctl hybrid-sleep # å¯åŠ¨è¿›å…¥æ•‘æ´çŠ¶æ€ï¼ˆå•ç”¨æˆ·çŠ¶æ€ï¼‰ $ sudo systemctl rescue ","date":"2022-08-08","objectID":"/systemd/:2:1","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"2.systemd-analyze systemd-analyzeå‘½ä»¤ç”¨äºæŸ¥çœ‹å¯åŠ¨è€—æ—¶ # æŸ¥çœ‹å¯åŠ¨è€—æ—¶ systemd-analyze # æŸ¥çœ‹æ¯ä¸ªæœåŠ¡çš„å¯åŠ¨è€—æ—¶ $ systemd-analyze blame # æ˜¾ç¤ºç€‘å¸ƒçŠ¶çš„å¯åŠ¨è¿‡ç¨‹æµ $ systemd-analyze critical-chain # æ˜¾ç¤ºæŒ‡å®šæœåŠ¡çš„å¯åŠ¨æµ $ systemd-analyze critical-chain atd.service ","date":"2022-08-08","objectID":"/systemd/:2:2","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"3.hostnamectl hostnamectlå‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ä¸»æœºçš„ä¿¡æ¯ã€‚ # æ˜¾ç¤ºå½“å‰ä¸»æœºçš„ä¿¡æ¯ $ hostnamectl # è®¾ç½®ä¸»æœºåã€‚ $ sudo hostnamectl set-hostname jobcher ","date":"2022-08-08","objectID":"/systemd/:2:3","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"4.localectl localectlå‘½ä»¤ç”¨äºæŸ¥çœ‹æœ¬åœ°åŒ–è®¾ç½® # æŸ¥çœ‹æœ¬åœ°åŒ–è®¾ç½® $ localectl # è®¾ç½®æœ¬åœ°åŒ–å‚æ•°ã€‚ $ sudo localectl set-locale LANG=en_GB.utf8 $ sudo localectl set-keymap en_GB ","date":"2022-08-08","objectID":"/systemd/:2:4","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"5.timedatectl timedatectlå‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰æ—¶åŒºè®¾ç½® # æŸ¥çœ‹å½“å‰æ—¶åŒºè®¾ç½® $ timedatectl # æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æ—¶åŒº $ timedatectl list-timezones # è®¾ç½®å½“å‰æ—¶åŒº $ sudo timedatectl set-timezone America/New_York $ sudo timedatectl set-time YYYY-MM-DD $ sudo timedatectl set-time HH:MM:SS ","date":"2022-08-08","objectID":"/systemd/:2:5","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"6.loginctl loginctlå‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ· # åˆ—å‡ºå½“å‰session $ loginctl list-sessions # åˆ—å‡ºå½“å‰ç™»å½•ç”¨æˆ· $ loginctl list-users # åˆ—å‡ºæ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ $ loginctl show-user ruanyf ","date":"2022-08-08","objectID":"/systemd/:2:6","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"Unit Systemd å¯ä»¥ç®¡ç†æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ä¸åŒçš„èµ„æºç»Ÿç§°ä¸º Unitï¼ˆå•ä½ï¼‰ã€‚ åˆ†ç±» èµ„æº Service unit ç³»ç»ŸæœåŠ¡ Target unit å¤šä¸ª Unit æ„æˆçš„ä¸€ä¸ªç»„ Device Unit ç¡¬ä»¶è®¾å¤‡ Mount Unit æ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹ Automount Unit è‡ªåŠ¨æŒ‚è½½ç‚¹ Path Unit æ–‡ä»¶æˆ–è·¯å¾„ Scope Unit ä¸æ˜¯ç”± Systemd å¯åŠ¨çš„å¤–éƒ¨è¿›ç¨‹ Slice Unit è¿›ç¨‹ç»„ Snapshot Unit Systemd å¿«ç…§ï¼Œå¯ä»¥åˆ‡å›æŸä¸ªå¿«ç…§ Socket Unit è¿›ç¨‹é—´é€šä¿¡çš„ socket Swap Unit swap æ–‡ä»¶ Timer Unit å®šæ—¶å™¨ ","date":"2022-08-08","objectID":"/systemd/:3:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"1.systemctl list-units systemctl list-unitså‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Unit # åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ Unit $ systemctl list-units # åˆ—å‡ºæ‰€æœ‰Unitï¼ŒåŒ…æ‹¬æ²¡æœ‰æ‰¾åˆ°é…ç½®æ–‡ä»¶çš„æˆ–è€…å¯åŠ¨å¤±è´¥çš„ $ systemctl list-units --all # åˆ—å‡ºæ‰€æœ‰æ²¡æœ‰è¿è¡Œçš„ Unit $ systemctl list-units --all --state=inactive # åˆ—å‡ºæ‰€æœ‰åŠ è½½å¤±è´¥çš„ Unit $ systemctl list-units --failed # åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ã€ç±»å‹ä¸º service çš„ Unit $ systemctl list-units --type=service ","date":"2022-08-08","objectID":"/systemd/:3:1","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"2.Unit çš„çŠ¶æ€ systemctl statuså‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œå•ä¸ª Unit çš„çŠ¶æ€ã€‚ # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€ $ systemctl status # æ˜¾ç¤ºå•ä¸ª Unit çš„çŠ¶æ€ $ sysystemctl status bluetooth.service # æ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„æŸä¸ª Unit çš„çŠ¶æ€ $ systemctl -H root@rhel7.example.com status httpd.service é™¤äº†statuså‘½ä»¤ï¼Œsystemctlè¿˜æä¾›äº†ä¸‰ä¸ªæŸ¥è¯¢çŠ¶æ€çš„ç®€å•æ–¹æ³•ï¼Œä¸»è¦ä¾›è„šæœ¬å†…éƒ¨çš„åˆ¤æ–­è¯­å¥ä½¿ç”¨ã€‚ # æ˜¾ç¤ºæŸä¸ª Unit æ˜¯å¦æ­£åœ¨è¿è¡Œ $ systemctl is-active application.service # æ˜¾ç¤ºæŸä¸ª Unit æ˜¯å¦å¤„äºå¯åŠ¨å¤±è´¥çŠ¶æ€ $ systemctl is-failed application.service # æ˜¾ç¤ºæŸä¸ª Unit æœåŠ¡æ˜¯å¦å»ºç«‹äº†å¯åŠ¨é“¾æ¥ $ systemctl is-enabled application.service ","date":"2022-08-08","objectID":"/systemd/:3:2","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"3.Unit ç®¡ç† å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ä¸‹é¢è¿™äº›å‘½ä»¤ï¼Œç”¨äºå¯åŠ¨å’Œåœæ­¢ Unitï¼ˆä¸»è¦æ˜¯ serviceï¼‰ã€‚ # ç«‹å³å¯åŠ¨ä¸€ä¸ªæœåŠ¡ $ sudo systemctl start apache.service # ç«‹å³åœæ­¢ä¸€ä¸ªæœåŠ¡ $ sudo systemctl stop apache.service # é‡å¯ä¸€ä¸ªæœåŠ¡ $ sudo systemctl restart apache.service # æ€æ­»ä¸€ä¸ªæœåŠ¡çš„æ‰€æœ‰å­è¿›ç¨‹ $ sudo systemctl kill apache.service # é‡æ–°åŠ è½½ä¸€ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶ $ sudo systemctl reload apache.service # é‡è½½æ‰€æœ‰ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶ $ sudo systemctl daemon-reload # æ˜¾ç¤ºæŸä¸ª Unit çš„æ‰€æœ‰åº•å±‚å‚æ•° $ systemctl show httpd.service # æ˜¾ç¤ºæŸä¸ª Unit çš„æŒ‡å®šå±æ€§çš„å€¼ $ systemctl show -p CPUShares httpd.service # è®¾ç½®æŸä¸ª Unit çš„æŒ‡å®šå±æ€§ $ sudo systemctl set-property httpd.service CPUShares=500 ","date":"2022-08-08","objectID":"/systemd/:3:3","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"4.ä¾èµ–å…³ç³» Unit ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼šA ä¾èµ–äº Bï¼Œå°±æ„å‘³ç€ Systemd åœ¨å¯åŠ¨ A çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šå»å¯åŠ¨ Bã€‚ systemctl list-dependencieså‘½ä»¤åˆ—å‡ºä¸€ä¸ª Unit çš„æ‰€æœ‰ä¾èµ–ã€‚ systemctl list-dependencies nginx.service ä¸Šé¢å‘½ä»¤çš„è¾“å‡ºç»“æœä¹‹ä¸­ï¼Œæœ‰äº›ä¾èµ–æ˜¯ Target ç±»å‹ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œé»˜è®¤ä¸ä¼šå±•å¼€æ˜¾ç¤ºã€‚å¦‚æœè¦å±•å¼€ Targetï¼Œå°±éœ€è¦ä½¿ç”¨â€“allå‚æ•°ã€‚ systemctl list-dependencies --all nginx.service ","date":"2022-08-08","objectID":"/systemd/:3:4","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"Unit çš„é…ç½®æ–‡ä»¶ æ¯ä¸€ä¸ª Unit éƒ½æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ Systemd æ€ä¹ˆå¯åŠ¨è¿™ä¸ª Unit Systemd é»˜è®¤ä»ç›®å½•/etc/systemd/system/è¯»å–é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œé‡Œé¢å­˜æ”¾çš„å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘ç›®å½•/usr/lib/systemd/system/ï¼ŒçœŸæ­£çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨é‚£ä¸ªç›®å½•ã€‚ systemctl enableå‘½ä»¤ç”¨äºåœ¨ä¸Šé¢ä¸¤ä¸ªç›®å½•ä¹‹é—´ï¼Œå»ºç«‹ç¬¦å·é“¾æ¥å…³ç³»ã€‚ $ sudo systemctl enable jobcher.service # ç­‰åŒäº $ sudo ln -s '/usr/lib/systemd/system/jobcher.service' '/etc/systemd/system/multi-user.target.wants/jobcher.service' å¦‚æœé…ç½®æ–‡ä»¶é‡Œé¢è®¾ç½®äº†å¼€æœºå¯åŠ¨ï¼Œsystemctl enableå‘½ä»¤ç›¸å½“äºæ¿€æ´»å¼€æœºå¯åŠ¨ã€‚ ä¸ä¹‹å¯¹åº”çš„ï¼Œsystemctl disableå‘½ä»¤ç”¨äºåœ¨ä¸¤ä¸ªç›®å½•ä¹‹é—´ï¼Œæ’¤é”€ç¬¦å·é“¾æ¥å…³ç³»ï¼Œç›¸å½“äºæ’¤é”€å¼€æœºå¯åŠ¨ã€‚ é…ç½®æ–‡ä»¶çš„åç¼€åï¼Œå°±æ˜¯è¯¥ Unit çš„ç§ç±»ï¼Œæ¯”å¦‚sshd.socketã€‚å¦‚æœçœç•¥ï¼ŒSystemd é»˜è®¤åç¼€åä¸º.serviceï¼Œæ‰€ä»¥sshdä¼šè¢«ç†è§£æˆsshd.service ","date":"2022-08-08","objectID":"/systemd/:4:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"1.é…ç½®æ–‡ä»¶çš„çŠ¶æ€ systemctl list-unit-fileså‘½ä»¤ç”¨äºåˆ—å‡ºæ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚ # åˆ—å‡ºæ‰€æœ‰é…ç½®æ–‡ä»¶ $ systemctl list-unit-files # åˆ—å‡ºæŒ‡å®šç±»å‹çš„é…ç½®æ–‡ä»¶ $ systemctl list-unit-files --type=service è¿™ä¸ªåˆ—è¡¨æ˜¾ç¤ºæ¯ä¸ªé…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼Œä¸€å…±æœ‰å››ç§ã€‚ çŠ¶æ€ è¿æ¥ enabled å·²å»ºç«‹å¯åŠ¨é“¾æ¥ disabled æ²¡å»ºç«‹å¯åŠ¨é“¾æ¥ static è¯¥é…ç½®æ–‡ä»¶æ²¡æœ‰[Install]éƒ¨åˆ†ï¼ˆæ— æ³•æ‰§è¡Œï¼‰ï¼Œåªèƒ½ä½œä¸ºå…¶ä»–é…ç½®æ–‡ä»¶çš„ä¾èµ– masked è¯¥é…ç½®æ–‡ä»¶è¢«ç¦æ­¢å»ºç«‹å¯åŠ¨é“¾æ¥ ä¸€æ—¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±è¦è®© SystemD é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦åˆ™ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆã€‚ $ sudo systemctl daemon-reload $ sudo systemctl restart httpd.service ","date":"2022-08-08","objectID":"/systemd/:4:1","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"2.é…ç½®æ–‡ä»¶çš„æ ¼å¼ é…ç½®æ–‡ä»¶å°±æ˜¯æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€‚ systemctl catå‘½ä»¤å¯ä»¥æŸ¥çœ‹é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚ $ systemctl cat atd.service [Unit] Description=ATD daemon [Service] Type=forking ExecStart=/usr/bin/atd [Install] WantedBy=multi-user.target ä»ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œé…ç½®æ–‡ä»¶åˆ†æˆå‡ ä¸ªåŒºå—ã€‚æ¯ä¸ªåŒºå—çš„ç¬¬ä¸€è¡Œï¼Œæ˜¯ç”¨æ–¹æ‹¬å·è¡¨ç¤ºçš„åŒºåˆ«åï¼Œæ¯”å¦‚[Unit]ã€‚æ³¨æ„ï¼Œé…ç½®æ–‡ä»¶çš„åŒºå—åå’Œå­—æ®µåï¼Œéƒ½æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚ æ¯ä¸ªåŒºå—å†…éƒ¨æ˜¯ä¸€äº›ç­‰å·è¿æ¥çš„é”®å€¼å¯¹ã€‚æ³¨æ„ï¼Œé”®å€¼å¯¹çš„ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ [Section] Directive1=value Directive2=value ","date":"2022-08-08","objectID":"/systemd/:5:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"3.é…ç½®æ–‡ä»¶çš„åŒºå— [Unit]åŒºå—é€šå¸¸æ˜¯é…ç½®æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰ Unit çš„å…ƒæ•°æ®ï¼Œä»¥åŠé…ç½®ä¸å…¶ä»– Unit çš„å…³ç³»ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚ åŒºå— ç®€ä»‹ Description ç®€çŸ­æè¿° Documentation æ–‡æ¡£åœ°å€ Requires å½“å‰ Unit ä¾èµ–çš„å…¶ä»– Unitï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¼šå¯åŠ¨å¤±è´¥ Wants ä¸å½“å‰ Unit é…åˆçš„å…¶ä»– Unitï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¸ä¼šå¯åŠ¨å¤±è´¥ BindsTo ä¸Requiresç±»ä¼¼ï¼Œå®ƒæŒ‡å®šçš„ Unit å¦‚æœé€€å‡ºï¼Œä¼šå¯¼è‡´å½“å‰ Unit åœæ­¢è¿è¡Œ Before å¦‚æœè¯¥å­—æ®µæŒ‡å®šçš„ Unit ä¹Ÿè¦å¯åŠ¨ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨å½“å‰ Unit ä¹‹åå¯åŠ¨ After å¦‚æœè¯¥å­—æ®µæŒ‡å®šçš„ Unit ä¹Ÿè¦å¯åŠ¨ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨å½“å‰ Unit ä¹‹å‰å¯åŠ¨ Conflicts è¿™é‡ŒæŒ‡å®šçš„ Unit ä¸èƒ½ä¸å½“å‰ Unit åŒæ—¶è¿è¡Œ Conditionâ€¦ å½“å‰ Unit è¿è¡Œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼Œå¦åˆ™ä¸ä¼šè¿è¡Œ Assertâ€¦ å½“å‰ Unit è¿è¡Œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥å¯åŠ¨å¤±è´¥ [Install]é€šå¸¸æ˜¯é…ç½®æ–‡ä»¶çš„æœ€åä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰å¦‚ä½•å¯åŠ¨ï¼Œä»¥åŠæ˜¯å¦å¼€æœºå¯åŠ¨ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚ åŒºå— ç®€ä»‹ WantedBy å®ƒçš„å€¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª Targetï¼Œå½“å‰ Unit æ¿€æ´»æ—¶ï¼ˆenableï¼‰ç¬¦å·é“¾æ¥ä¼šæ”¾å…¥/etc/systemd/systemç›®å½•ä¸‹é¢ä»¥ Target å + .wantsåç¼€æ„æˆçš„å­ç›®å½•ä¸­ RequiredBy å®ƒçš„å€¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª Targetï¼Œå½“å‰ Unit æ¿€æ´»æ—¶ï¼Œç¬¦å·é“¾æ¥ä¼šæ”¾å…¥/etc/systemd/systemç›®å½•ä¸‹é¢ä»¥ Target å + .requiredåç¼€æ„æˆçš„å­ç›®å½•ä¸­ Alias å½“å‰ Unit å¯ç”¨äºå¯åŠ¨çš„åˆ«å Also å½“å‰ Unit æ¿€æ´»ï¼ˆenableï¼‰æ—¶ï¼Œä¼šè¢«åŒæ—¶æ¿€æ´»çš„å…¶ä»– Unit [Service]åŒºå—ç”¨æ¥ Service çš„é…ç½®ï¼Œåªæœ‰ Service ç±»å‹çš„ Unit æ‰æœ‰è¿™ä¸ªåŒºå—ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚ åŒºå— ç®€ä»‹ Type å®šä¹‰å¯åŠ¨æ—¶çš„è¿›ç¨‹è¡Œä¸ºã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§å€¼ã€‚ Type=simple é»˜è®¤å€¼ï¼Œæ‰§è¡ŒExecStartæŒ‡å®šçš„å‘½ä»¤ï¼Œå¯åŠ¨ä¸»è¿›ç¨‹ Type=forking ä»¥ fork æ–¹å¼ä»çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ï¼Œåˆ›å»ºåçˆ¶è¿›ç¨‹ä¼šç«‹å³é€€å‡º Type=oneshot ä¸€æ¬¡æ€§è¿›ç¨‹ï¼ŒSystemd ä¼šç­‰å½“å‰æœåŠ¡é€€å‡ºï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ Type=dbus å½“å‰æœåŠ¡é€šè¿‡D-Buså¯åŠ¨ Type=notify å½“å‰æœåŠ¡å¯åŠ¨å®Œæ¯•ï¼Œä¼šé€šçŸ¥Systemdï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ Type=idle è‹¥æœ‰å…¶ä»–ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå½“å‰æœåŠ¡æ‰ä¼šè¿è¡Œ ExecStart å¯åŠ¨å½“å‰æœåŠ¡çš„å‘½ä»¤ ExecStartPre å¯åŠ¨å½“å‰æœåŠ¡ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤ ExecStartPost å¯åŠ¨å½“å‰æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤ ExecReload é‡å¯å½“å‰æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ ExecStop åœæ­¢å½“å‰æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤ ExecStopPost åœæ­¢å½“å…¶æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤ RestartSec è‡ªåŠ¨é‡å¯å½“å‰æœåŠ¡é—´éš”çš„ç§’æ•° Restart å®šä¹‰ä½•ç§æƒ…å†µ Systemd ä¼šè‡ªåŠ¨é‡å¯å½“å‰æœåŠ¡ï¼Œå¯èƒ½çš„å€¼åŒ…æ‹¬alwaysï¼ˆæ€»æ˜¯é‡å¯ï¼‰ã€on-successã€on-failureã€on-abnormalã€on-abortã€on-watchdog TimeoutSec å®šä¹‰ Systemd åœæ­¢å½“å‰æœåŠ¡ä¹‹å‰ç­‰å¾…çš„ç§’æ•° Environment æŒ‡å®šç¯å¢ƒå˜é‡ ","date":"2022-08-08","objectID":"/systemd/:6:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"Target å¯åŠ¨è®¡ç®—æœºçš„æ—¶å€™ï¼Œéœ€è¦å¯åŠ¨å¤§é‡çš„ Unitã€‚å¦‚æœæ¯ä¸€æ¬¡å¯åŠ¨ï¼Œéƒ½è¦ä¸€ä¸€å†™æ˜æœ¬æ¬¡å¯åŠ¨éœ€è¦å“ªäº› Unitï¼Œæ˜¾ç„¶éå¸¸ä¸æ–¹ä¾¿ã€‚Systemd çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ Targetã€‚ ç®€å•è¯´ï¼ŒTarget å°±æ˜¯ä¸€ä¸ª Unit ç»„ï¼ŒåŒ…å«è®¸å¤šç›¸å…³çš„ Unit ã€‚å¯åŠ¨æŸä¸ª Target çš„æ—¶å€™ï¼ŒSystemd å°±ä¼šå¯åŠ¨é‡Œé¢æ‰€æœ‰çš„ Unitã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒTarget è¿™ä¸ªæ¦‚å¿µç±»ä¼¼äº\"çŠ¶æ€ç‚¹\"ï¼Œå¯åŠ¨æŸä¸ª Target å°±å¥½æ¯”å¯åŠ¨åˆ°æŸç§çŠ¶æ€ã€‚ ä¼ ç»Ÿçš„initå¯åŠ¨æ¨¡å¼é‡Œé¢ï¼Œæœ‰ RunLevel çš„æ¦‚å¿µï¼Œè·Ÿ Target çš„ä½œç”¨å¾ˆç±»ä¼¼ã€‚ä¸åŒçš„æ˜¯ï¼ŒRunLevel æ˜¯äº’æ–¥çš„ï¼Œä¸å¯èƒ½å¤šä¸ª RunLevel åŒæ—¶å¯åŠ¨ï¼Œä½†æ˜¯å¤šä¸ª Target å¯ä»¥åŒæ—¶å¯åŠ¨ã€‚ # æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Target $ systemctl list-unit-files --type=target # æŸ¥çœ‹ä¸€ä¸ª Target åŒ…å«çš„æ‰€æœ‰ Unit $ systemctl list-dependencies multi-user.target # æŸ¥çœ‹å¯åŠ¨æ—¶çš„é»˜è®¤ Target $ systemctl get-default # è®¾ç½®å¯åŠ¨æ—¶çš„é»˜è®¤ Target $ sudo systemctl set-default multi-user.target # åˆ‡æ¢ Target æ—¶ï¼Œé»˜è®¤ä¸å…³é—­å‰ä¸€ä¸ª Target å¯åŠ¨çš„è¿›ç¨‹ï¼Œ # systemctl isolate å‘½ä»¤æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œ # å…³é—­å‰ä¸€ä¸ª Target é‡Œé¢æ‰€æœ‰ä¸å±äºåä¸€ä¸ª Target çš„è¿›ç¨‹ $ sudo systemctl isolate multi-user.target å®ƒä¸initè¿›ç¨‹çš„ä¸»è¦å·®åˆ«å¦‚ä¸‹ï¼š é»˜è®¤çš„ RunLevelï¼ˆåœ¨/etc/inittabæ–‡ä»¶è®¾ç½®ï¼‰ç°åœ¨è¢«é»˜è®¤çš„ Target å–ä»£ï¼Œä½ç½®æ˜¯/etc/systemd/system/default.targetï¼Œé€šå¸¸ç¬¦å·é“¾æ¥åˆ°graphical.targetï¼ˆå›¾å½¢ç•Œé¢ï¼‰æˆ–è€…multi-user.targetï¼ˆå¤šç”¨æˆ·å‘½ä»¤è¡Œï¼‰ã€‚ å¯åŠ¨è„šæœ¬çš„ä½ç½®ï¼Œä»¥å‰æ˜¯/etc/init.dç›®å½•ï¼Œç¬¦å·é“¾æ¥åˆ°ä¸åŒçš„ RunLevel ç›®å½• ï¼ˆæ¯”å¦‚/etc/rc3.dã€/etc/rc5.dç­‰ï¼‰ï¼Œç°åœ¨åˆ™å­˜æ”¾åœ¨/lib/systemd/systemå’Œ/etc/systemd/systemç›®å½•ã€‚ é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œä»¥å‰initè¿›ç¨‹çš„é…ç½®æ–‡ä»¶æ˜¯/etc/inittabï¼Œå„ç§æœåŠ¡çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨/etc/sysconfigç›®å½•ã€‚ç°åœ¨çš„é…ç½®æ–‡ä»¶ä¸»è¦å­˜æ”¾åœ¨/lib/systemdç›®å½•ï¼Œåœ¨/etc/systemdç›®å½•é‡Œé¢çš„ä¿®æ”¹å¯ä»¥è¦†ç›–åŸå§‹è®¾ç½®ã€‚ ","date":"2022-08-08","objectID":"/systemd/:7:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["åŸºç¡€"],"content":"æ—¥å¿—ç®¡ç† Systemd ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ Unit çš„å¯åŠ¨æ—¥å¿—ã€‚å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œå¯ä»¥åªç”¨journalctlä¸€ä¸ªå‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆå†…æ ¸æ—¥å¿—å’Œåº”ç”¨æ—¥å¿—ï¼‰ã€‚æ—¥å¿—çš„é…ç½®æ–‡ä»¶æ˜¯/etc/systemd/journald.confã€‚ journalctlåŠŸèƒ½å¼ºå¤§ï¼Œç”¨æ³•éå¸¸å¤šã€‚ # æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆé»˜è®¤æƒ…å†µä¸‹ ï¼Œåªä¿å­˜æœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼‰ $ sudo journalctl # æŸ¥çœ‹å†…æ ¸æ—¥å¿—ï¼ˆä¸æ˜¾ç¤ºåº”ç”¨æ—¥å¿—ï¼‰ $ sudo journalctl -k # æŸ¥çœ‹ç³»ç»Ÿæœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿— $ sudo journalctl -b $ sudo journalctl -b -0 # æŸ¥çœ‹ä¸Šä¸€æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼ˆéœ€æ›´æ”¹è®¾ç½®ï¼‰ $ sudo journalctl -b -1 # æŸ¥çœ‹æŒ‡å®šæ—¶é—´çš„æ—¥å¿— $ sudo journalctl --since=\"2012-10-30 18:17:16\" $ sudo journalctl --since \"20 min ago\" $ sudo journalctl --since yesterday $ sudo journalctl --since \"2015-01-10\" --until \"2015-01-11 03:00\" $ sudo journalctl --since 09:00 --until \"1 hour ago\" # æ˜¾ç¤ºå°¾éƒ¨çš„æœ€æ–°10è¡Œæ—¥å¿— $ sudo journalctl -n # æ˜¾ç¤ºå°¾éƒ¨æŒ‡å®šè¡Œæ•°çš„æ—¥å¿— $ sudo journalctl -n 20 # å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæœ€æ–°æ—¥å¿— $ sudo journalctl -f # æŸ¥çœ‹æŒ‡å®šæœåŠ¡çš„æ—¥å¿— $ sudo journalctl /usr/lib/systemd/systemd # æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„æ—¥å¿— $ sudo journalctl _PID=1 # æŸ¥çœ‹æŸä¸ªè·¯å¾„çš„è„šæœ¬çš„æ—¥å¿— $ sudo journalctl /usr/bin/bash # æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æ—¥å¿— $ sudo journalctl _UID=33 --since today # æŸ¥çœ‹æŸä¸ª Unit çš„æ—¥å¿— $ sudo journalctl -u nginx.service $ sudo journalctl -u nginx.service --since today # å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæŸä¸ª Unit çš„æœ€æ–°æ—¥å¿— $ sudo journalctl -u nginx.service -f # åˆå¹¶æ˜¾ç¤ºå¤šä¸ª Unit çš„æ—¥å¿— $ journalctl -u nginx.service -u php-fpm.service --since today # æŸ¥çœ‹æŒ‡å®šä¼˜å…ˆçº§ï¼ˆåŠå…¶ä»¥ä¸Šçº§åˆ«ï¼‰çš„æ—¥å¿—ï¼Œå…±æœ‰8çº§ # 0: emerg # 1: alert # 2: crit # 3: err # 4: warning # 5: notice # 6: info # 7: debug $ sudo journalctl -p err -b # æ—¥å¿—é»˜è®¤åˆ†é¡µè¾“å‡ºï¼Œ--no-pager æ”¹ä¸ºæ­£å¸¸çš„æ ‡å‡†è¾“å‡º $ sudo journalctl --no-pager # ä»¥ JSON æ ¼å¼ï¼ˆå•è¡Œï¼‰è¾“å‡º $ sudo journalctl -b -u nginx.service -o json # ä»¥ JSON æ ¼å¼ï¼ˆå¤šè¡Œï¼‰è¾“å‡ºï¼Œå¯è¯»æ€§æ›´å¥½ $ sudo journalctl -b -u nginx.serviceqq -o json-pretty # æ˜¾ç¤ºæ—¥å¿—å æ®çš„ç¡¬ç›˜ç©ºé—´ $ sudo journalctl --disk-usage # æŒ‡å®šæ—¥å¿—æ–‡ä»¶å æ®çš„æœ€å¤§ç©ºé—´ $ sudo journalctl --vacuum-size=1G # æŒ‡å®šæ—¥å¿—æ–‡ä»¶ä¿å­˜å¤šä¹… $ sudo journalctl --vacuum-time=1years ","date":"2022-08-08","objectID":"/systemd/:8:0","tags":["è¿ç»´"],"title":"systemd å®ˆæŠ¤å‘½ä»¤","uri":"/systemd/"},{"categories":["é—®é¢˜åº“"],"content":"docker æ— æ³•å¯åŠ¨ æ‰“å¼€æœåŠ¡å™¨è¾“å…¥docker ps,è¾“å‡ºé”™è¯¯ Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? æ€€ç–‘æ˜¯ä¸æ˜¯docker.services éƒ¨ç½²æ²¡æˆåŠŸï¼Œsystemctl start docker å¯åŠ¨dockerï¼Œç»“æœæœåŠ¡å™¨è¿˜æ˜¯æŠ¥é”™ Job for docker.service failed because the control process exited with error code. See â€œsystemctl status docker.serviceâ€ and â€œjournalctl -xeâ€ for details. systemctl status docker.service è¾“å‡ºæ—¥å¿—ï¼š â— docker.service - Docker Application Container Engine Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled) Active: failed (Result: exit-code) since Thu 2022-08-04 11:43:05 CST; 2min 57s ago TriggeredBy: â— docker.socket Docs: https://docs.docker.com Process: 30432 ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock (code=exited, status=1/FAILURE) Main PID: 30432 (code=exited, status=1/FAILURE) Aug 04 11:43:05 master01 systemd[1]: docker.service: Scheduled restart job, restart counter is at 3. Aug 04 11:43:05 master01 systemd[1]: Stopped Docker Application Container Engine. Aug 04 11:43:05 master01 systemd[1]: docker.service: Start request repeated too quickly. Aug 04 11:43:05 master01 systemd[1]: docker.service: Failed with result 'exit-code'. Aug 04 11:43:05 master01 systemd[1]: Failed to start Docker Application Container Engine. journalctl -xe è¾“å‡ºæ—¥å¿—ï¼š Aug 04 11:46:49 master01 systemd[1]: Starting Docker Socket for the API. -- Subject: A start job for unit docker.socket has begun execution -- Defined-By: systemd -- Support: http://www.ubuntu.com/support -- -- A start job for unit docker.socket has begun execution. -- -- The job identifier is 58900. Aug 04 11:46:49 master01 systemd[1]: Listening on Docker Socket for the API. -- Subject: A start job for unit docker.socket has finished successfully -- Defined-By: systemd -- Support: http://www.ubuntu.com/support -- -- A start job for unit docker.socket has finished successfully. -- -- The job identifier is 58900. Aug 04 11:46:49 master01 systemd[1]: Starting Docker Application Container Engine... -- Subject: A start job for unit docker.service has begun execution -- Defined-By: systemd -- Support: http://www.ubuntu.com/support -- -- A start job for unit docker.service has begun execution. -- -- The job identifier is 58830. Aug 04 11:46:49 master01 dockerd[30544]: unable to configure the Docker daemon with file /etc/docker/daemon.json: EOF Aug 04 11:46:49 master01 systemd[1]: docker.service: Main process exited, code=exited, status=1/FAILURE -- Subject: Unit process exited -- Defined-By: systemd -- Support: http://www.ubuntu.com/support -- -- An ExecStart= process belonging to unit docker.service has exited. -- -- The process' exit code is 'exited' and its exit status is 1. Aug 04 11:46:49 master01 systemd[1]: docker.service: Failed with result 'exit-code'. -- Subject: Unit failed -- Defined-By: systemd -- Support: http://www.ubuntu.com/support -- -- The unit docker.service has entered the 'failed' state with result 'exit-code'. Aug 04 11:46:49 master01 systemd[1]: Failed to start Docker Application Container Engine. -- Subject: A start job for unit docker.service has failed -- Defined-By: systemd -- Support: http://www.ubuntu.com/support -- -- A start job for unit docker.service has finished with a failure. -- -- The job identifier is 58830 and the job result is failed. Aug 04 11:46:49 master01 sudo[30535]: pam_unix(sudo:session): session closed for user root æˆ‘è¿è¡Œäº†: sudo dockerd â€“debug è¾“å‡ºæ—¥å¿—ï¼š unable to configure the Docker daemon with file /etc/docker/daemon.json: EOF è§£å†³æ–¹æ³•ï¼š #å¦‚æœ /etc/docker/daemon.json ä¸ºç©º vim /etc/docker/daemon.json # æ·»åŠ  { } #ä¿å­˜é€€å‡º :wq é‡å¯docker systemctl restart docker ","date":"2022-08-04","objectID":"/docker-error/:0:1","tags":["error"],"title":"docker é—®é¢˜å¤„ç†","uri":"/docker-error/"},{"categories":["k8s"],"content":"kubernetes å­˜å‚¨ k8sæ”¯æŒå¤šç§é€”å¾„çš„å¤šç§ç±»å‹çš„å­˜å‚¨ã€‚ä¾‹å¦‚iSCSI,SMB,NFSï¼Œä»¥åŠå¯¹è±¡å­˜å‚¨ã€‚éƒ½æ˜¯ä¸åŒç±»å‹çš„éƒ¨ç½²åœ¨äº‘ä¸Šæˆ–è€…è‡ªå»ºæ•°æ®ä¸­å¿ƒçš„å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿã€‚k8sä¸Šçš„æ‰€æœ‰å­˜å‚¨éƒ½è¢«ç§°ä½œå· ","date":"2022-08-01","objectID":"/k8s10/:0:0","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["k8s"],"content":"CSI å®¹å™¨å­˜å‚¨æ¥å£ CSIæ˜¯k8så­˜å‚¨ä½“ç³»ä¸­ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®šä¹‰äº†ä¸€å¥—åŸºäºæ ‡å‡†çš„æ¥å£ï¼Œä»è€Œä½¿å®¹å™¨èƒ½å¤Ÿä»¥ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼è¢«ä¸åŒçš„å®¹å™¨ç¼–æ’çš„å·¥å…·ä½¿ç”¨ã€‚å¯ä»¥å°†æ’ä»¶ç§°ä¸ºprovisioner ","date":"2022-08-01","objectID":"/k8s10/:1:0","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["k8s"],"content":"æŒä¹…åŒ– æŒä¹…åŒ–å· ï¼ˆpvï¼‰ æŒä¹…åŒ–å·ç”³è¯· ï¼ˆpvcï¼‰ å­˜å‚¨ç±» ï¼ˆsvï¼‰ PV ä»£è¡¨k8sçš„å­˜å‚¨ï¼Œpvcä»£è¡¨çš„æ˜¯è®¸å¯è¯ï¼Œèµ‹äºˆpodè®¿é—®pvçš„æƒé™ã€‚csä½¿åˆ†é…è¿‡ç¨‹æ˜¯åŠ¨æ€çš„ã€‚ ","date":"2022-08-01","objectID":"/k8s10/:2:0","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["k8s"],"content":"ä½¿ç”¨iSCSIæ“ä½œå­˜å‚¨ iscsi å·èƒ½å°† iSCSI (åŸºäº IP çš„ SCSI) å·æŒ‚è½½åˆ°ä½ çš„ Pod ä¸­ã€‚ ä¸åƒ emptyDir é‚£æ ·ä¼šåœ¨åˆ é™¤ Pod çš„åŒæ—¶ä¹Ÿä¼šè¢«åˆ é™¤ï¼Œiscsi å·çš„å†…å®¹åœ¨åˆ é™¤ Pod æ—¶ä¼šè¢«ä¿ç•™ï¼Œå·åªæ˜¯è¢«å¸è½½ã€‚ è¿™æ„å‘³ç€ iscsi å·å¯ä»¥è¢«é¢„å…ˆå¡«å……æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®å¯ä»¥åœ¨ Pod ä¹‹é—´å…±äº«ã€‚ iSCSI çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒå¯ä»¥åŒæ—¶è¢«å¤šä¸ªç”¨æˆ·ä»¥åªè¯»æ–¹å¼æŒ‚è½½ã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨æ•°æ®é›†é¢„å…ˆå¡«å……å·ï¼Œç„¶åæ ¹æ®éœ€è¦åœ¨å°½å¯èƒ½å¤šçš„ Pod ä¸Šä½¿ç”¨å®ƒã€‚ ä¸å¹¸çš„æ˜¯ï¼ŒiSCSI å·åªèƒ½ç”±å•ä¸ªä½¿ç”¨è€…ä»¥è¯»å†™æ¨¡å¼æŒ‚è½½ã€‚ä¸å…è®¸åŒæ—¶å†™å…¥ã€‚ ","date":"2022-08-01","objectID":"/k8s10/:3:0","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["k8s"],"content":"åˆ›å»º iscsi-pv.yaml iscsi-pvc.yaml iscsi-pv.yaml apiVersion: v1 kind: PersistentVolume metadata: name: iscsi-pv spec: capacity: storage: 500Gi accessModes: - ReadWriteOnce iscsi: targetPortal: 10.12.12.xxx:3260 # ä¿®æ”¹ iqn: iqn.2000-01.com.synology:xxx.Target-1.21xxxxx344 # ä¿®æ”¹ lun: 1 iscsi-pvc.yaml apiVersion: v1 kind: PersistentVolume metadata: name: iscsi-pv spec: capacity: storage: 500Gi accessModes: - ReadWriteOnce iscsi: targetPortal: 10.12.12.xxx:3260 # ä¿®æ”¹ iqn: iqn.2000-01.com.synology:xxx.Target-1.21xxxxx344 # ä¿®æ”¹ lun: 1 ","date":"2022-08-01","objectID":"/k8s10/:3:1","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["k8s"],"content":"hostPath hostPath å·èƒ½å°†ä¸»æœºèŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•æŒ‚è½½åˆ°ä½ çš„ Pod ä¸­ã€‚ è™½ç„¶è¿™ä¸æ˜¯å¤§å¤šæ•° Pod éœ€è¦çš„ï¼Œä½†æ˜¯å®ƒä¸ºä¸€äº›åº”ç”¨ç¨‹åºæä¾›äº†å¼ºå¤§çš„é€ƒç”Ÿèˆ±ã€‚ è¿è¡Œä¸€ä¸ªéœ€è¦è®¿é—® Docker å†…éƒ¨æœºåˆ¶çš„å®¹å™¨ï¼›å¯ä½¿ç”¨ hostPath æŒ‚è½½ /var/lib/docker è·¯å¾„ã€‚ åœ¨å®¹å™¨ä¸­è¿è¡Œ cAdvisor æ—¶ï¼Œä»¥ hostPath æ–¹å¼æŒ‚è½½ /sysã€‚ å…è®¸ Pod æŒ‡å®šç»™å®šçš„ hostPath åœ¨è¿è¡Œ Pod ä¹‹å‰æ˜¯å¦åº”è¯¥å­˜åœ¨ï¼Œæ˜¯å¦åº”è¯¥åˆ›å»ºä»¥åŠåº”è¯¥ä»¥ï§½ä¹ˆæ–¹å¼å­˜åœ¨ã€‚ apiVersion: v1 kind: Pod metadata: name: test-pd spec: containers: - image: registry.k8s.io/test-webserver name: test-container volumeMounts: - mountPath: /test-pd name: test-volume volumes: - name: test-volume hostPath: # å®¿ä¸»ä¸Šç›®å½•ä½ç½® path: /data # æ­¤å­—æ®µä¸ºå¯é€‰ type: Directory æ³¨æ„ï¼š FileOrCreate æ¨¡å¼ä¸ä¼šè´Ÿè´£åˆ›å»ºæ–‡ä»¶çš„çˆ¶ç›®å½•ã€‚ å¦‚æœæ¬²æŒ‚è½½çš„æ–‡ä»¶çš„çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼ŒPod å¯åŠ¨ä¼šå¤±è´¥ã€‚ ä¸ºäº†ç¡®ä¿è¿™ç§æ¨¡å¼èƒ½å¤Ÿå·¥ä½œï¼Œå¯ä»¥å°è¯•æŠŠæ–‡ä»¶å’Œå®ƒå¯¹åº”çš„ç›®å½•åˆ†å¼€æŒ‚è½½ï¼Œå¦‚ FileOrCreate é…ç½® æ‰€ç¤ºã€‚ ","date":"2022-08-01","objectID":"/k8s10/:4:0","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["k8s"],"content":"hostPath FileOrCreate é…ç½®ç¤ºä¾‹ apiVersion: v1 kind: Pod metadata: name: test-webserver spec: containers: - name: test-webserver image: registry.k8s.io/test-webserver:latest volumeMounts: - mountPath: /var/local/aaa name: mydir - mountPath: /var/local/aaa/1.txt name: myfile volumes: - name: mydir hostPath: # ç¡®ä¿æ–‡ä»¶æ‰€åœ¨ç›®å½•æˆåŠŸåˆ›å»ºã€‚ path: /var/local/aaa type: DirectoryOrCreate - name: myfile hostPath: path: /var/local/aaa/1.txt type: FileOrCreate ","date":"2022-08-01","objectID":"/k8s10/:4:1","tags":["k8s"],"title":"kubernetes å­˜å‚¨","uri":"/k8s10/"},{"categories":["æ—¥å¸¸"],"content":"linuxæœåŠ¡å™¨ åˆ é™¤ç©ºé—´å´æœªé‡Šæ”¾ åœ¨Linuxæˆ–è€…Unixç³»ç»Ÿä¸­ï¼Œé€šè¿‡rmæˆ–è€…æ–‡ä»¶ç®¡ç†å™¨åˆ é™¤æ–‡ä»¶å°†ä¼šä»æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„ä¸Šè§£é™¤é“¾æ¥(unlink)ï¼Œç„¶è€Œå¦‚æœæ–‡ä»¶æ˜¯è¢«æ‰“å¼€çš„ï¼ˆæœ‰ä¸€ä¸ªè¿›ç¨‹æ­£åœ¨ä½¿ç”¨ï¼‰ï¼Œé‚£ä¹ˆè¿›ç¨‹å°†ä»ç„¶å¯ä»¥è¯»å–è¯¥æ–‡ä»¶ï¼Œç£ç›˜ç©ºé—´ä¹Ÿä¸€ç›´è¢«å ç”¨ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æˆ‘ä»¬æ˜æ˜åˆ é™¤äº†æ–‡ä»¶ï¼Œä½†æ˜¯ç£ç›˜ç©ºé—´å´æœªè¢«é‡Šæ”¾ ","date":"2022-07-20","objectID":"/linux-disk/:0:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"linuxæœåŠ¡å™¨ åˆ é™¤ç©ºé—´å´æœªé‡Šæ”¾","uri":"/linux-disk/"},{"categories":["æ—¥å¸¸"],"content":"è·å–å ç”¨åˆ—è¡¨çŠ¶æ€ lsof | grep deleted å¯ä»¥çœ‹åˆ°å“ªäº›æ–‡ä»¶è¿˜è¢«ä½¿ç”¨ï¼Œæœªè¢«é‡Šæ”¾ç©ºé—´ã€‚ ","date":"2022-07-20","objectID":"/linux-disk/:1:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"linuxæœåŠ¡å™¨ åˆ é™¤ç©ºé—´å´æœªé‡Šæ”¾","uri":"/linux-disk/"},{"categories":["æ—¥å¸¸"],"content":"é‡Šæ”¾ç£ç›˜ç©ºé—´ ä¸€ç§æ–¹æ³•æ˜¯killæ‰ç›¸åº”çš„è¿›ç¨‹ï¼Œæˆ–è€…åœæ‰ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶çš„åº”ç”¨ï¼Œè®©osè‡ªåŠ¨å›æ”¶ç£ç›˜ç©ºé—´ï¼Œå½“linuxæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™,Linuxå†…æ ¸ä¼šä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹åœ¨/proc/, /proc/nnnn/fd/ç›®å½•ï¼ˆnnnnä¸ºpidï¼‰å»ºç«‹ä¸€ä¸ªä»¥å…¶pidä¸ºåçš„ç›®å½•ç”¨æ¥ä¿å­˜è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯ï¼Œè€Œå…¶å­ç›®å½•fdä¿å­˜çš„æ˜¯è¯¥è¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶çš„fdï¼ˆfdï¼šfile descriptorï¼‰ï¼› killè¿›ç¨‹æ˜¯é€šè¿‡æˆªæ–­procæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶å¯ä»¥å¼ºåˆ¶è¦æ±‚ç³»ç»Ÿå›æ”¶åˆ†é…ç»™æ­£åœ¨ä½¿ç”¨çš„çš„æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€é¡¹é«˜çº§æŠ€æœ¯ï¼Œä»…å½“ç®¡ç†å‘˜ç¡®å®šä¸ä¼šå¯¹è¿è¡Œä¸­çš„è¿›ç¨‹é€ æˆå½±å“æ—¶ä½¿ç”¨ã€‚ kill -9 12345 # PID é‡å¯æœåŠ¡ ","date":"2022-07-20","objectID":"/linux-disk/:2:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"linuxæœåŠ¡å™¨ åˆ é™¤ç©ºé—´å´æœªé‡Šæ”¾","uri":"/linux-disk/"},{"categories":["æ—¥å¸¸"],"content":"lsofå‘½ä»¤ lsofå…¨ålist opened filesï¼Œä¹Ÿå°±æ˜¯åˆ—ä¸¾ç³»ç»Ÿä¸­å·²ç»è¢«æ‰“å¼€çš„æ–‡ä»¶ã€‚æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œlinuxç¯å¢ƒä¸­ï¼Œä»»ä½•äº‹ç‰©éƒ½æ˜¯æ–‡ä»¶ï¼Œè®¾å¤‡æ˜¯æ–‡ä»¶ï¼Œç›®å½•æ˜¯æ–‡ä»¶ï¼Œç”šè‡³socketsä¹Ÿæ˜¯æ–‡ä»¶ã€‚ ","date":"2022-07-20","objectID":"/linux-disk/:3:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"linuxæœåŠ¡å™¨ åˆ é™¤ç©ºé—´å´æœªé‡Šæ”¾","uri":"/linux-disk/"},{"categories":["ç›‘æ§"],"content":"logstash å¤šç®¡é“éƒ¨ç½² æ‰¾åˆ°logstash ç›®å½•ä½ç½®ï¼Œä¸€èˆ¬æ¥è¯´åœ¨ /etc/logstash è·¯å¾„ä¸‹,ä¿®æ”¹ logstash.yml #å¢åŠ  æ—¥å¿—è®°å½• path.logs: /var/log/logstash ","date":"2022-07-19","objectID":"/logstash/:0:0","tags":["logstash"],"title":"logstash å¤šç®¡é“éƒ¨ç½²","uri":"/logstash/"},{"categories":["ç›‘æ§"],"content":"å¢åŠ ç®¡é“ å¢åŠ  conf.dç›®å½•ä¸‹ test.conf input { beats { host =\u003e \"0.0.0.0\" port =\u003e 23000 # ä¿®æ”¹ç«¯å£IP } } filter { mutate{ add_field =\u003e { \"cluster\" =\u003e \"test\" # ä¿®æ”¹æ ‡ç­¾ \"job\" =\u003e \"logstash\" } } } output { file { path =\u003e \"/data/è·¯å¾„åç§°\" # è·¯å¾„åç§° gzip =\u003e false #åŒ¹é…ä»¥ç©ºæ ¼å¼€å¤´çš„è¡Œ } } ä¿®æ”¹ pipelines.yml - pipeline.id: åç§° path.config: \"/etc/logstash/conf.d/é…ç½®æ–‡ä»¶.conf\" queue.type: persisted ","date":"2022-07-19","objectID":"/logstash/:1:0","tags":["logstash"],"title":"logstash å¤šç®¡é“éƒ¨ç½²","uri":"/logstash/"},{"categories":["ç›‘æ§"],"content":"å¯åŠ¨logstashæ–‡ä»¶ /usr/share/logstash/bin/logstash \u0026 ","date":"2022-07-19","objectID":"/logstash/:2:0","tags":["logstash"],"title":"logstash å¤šç®¡é“éƒ¨ç½²","uri":"/logstash/"},{"categories":["k8s"],"content":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x k8s åœ¨1.24.xä¹‹åçš„ç‰ˆæœ¬æ”¾å¼ƒäº†å’Œdockerçš„å…¼å®¹ï¼Œä½¿ç”¨containerd ä½œä¸ºåº•å±‚çš„å®¹å™¨ï¼Œç›´æ¥å‚ç…§å®˜æ–¹æ–‡æ¡£çš„èµ„æ–™è¿›è¡Œæ›´æ–°å°±ä¼šæŠ¥é”™ã€‚å› ä¸ºä½ æ²¡æœ‰å®‰è£…containerdï¼Œæ‰€ä»¥è¦å®‰è£…containerdå¹¶é…ç½®æ‰èƒ½æ­£ç¡®çš„å‡çº§k8s æˆ‘ç”¨çš„æ˜¯CentOS7.9çš„ç‰ˆæœ¬ï¼Œå› æ­¤ä»¥ä¸‹æ“ä½œéƒ½æ˜¯åœ¨CentOSä¸‹æ“ä½œã€‚ ","date":"2022-06-29","objectID":"/k8s9/:0:0","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"Master èŠ‚ç‚¹æ“ä½œ ","date":"2022-06-29","objectID":"/k8s9/:1:0","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"1.å‡çº§kubeadm yum install -y kubeadm-1.24.2-0 --disableexcludes=kubernetes kubeadm version kubeadm upgrade plan sudo kubeadm upgrade apply v1.24.2 ","date":"2022-06-29","objectID":"/k8s9/:1:1","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"2.å®‰è£…containerd yum install containerd.io -y containerd config default \u003e /etc/containerd/config.toml vim /var/lib/kubelet/kubeadm-flags.env ä¿®æ”¹kubeadm-flags.env å˜é‡ï¼š KUBELET_KUBEADM_ARGS=\"--pod-infra-container-image=k8s.gcr.io/pause:3.6 --container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock\" ","date":"2022-06-29","objectID":"/k8s9/:1:2","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"3.å‡çº§kubelet yum install -y kubelet-1.24.2-0 kubectl-1.24.2-0 --disableexcludes=kubernetes systemctl daemon-reload \u0026\u0026 systemctl restart containerd \u0026\u0026 systemctl restart kubelet æŸ¥çœ‹çŠ¶æ€ï¼š kubectl get nodes systemctl status kubelet ","date":"2022-06-29","objectID":"/k8s9/:1:3","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"Worker èŠ‚ç‚¹æ“ä½œ ","date":"2022-06-29","objectID":"/k8s9/:2:0","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"1.å‡çº§kubeadm yum install -y kubeadm-1.24.2-0 --disableexcludes=kubernetes kubeadm version kubeadm upgrade plan sudo kubeadm upgrade node ","date":"2022-06-29","objectID":"/k8s9/:2:1","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"2.å®‰è£…containerd yum install containerd.io -y containerd config default \u003e /etc/containerd/config.toml vim /var/lib/kubelet/kubeadm-flags.env ä¿®æ”¹kubeadm-flags.env å˜é‡ï¼š KUBELET_KUBEADM_ARGS=\"--pod-infra-container-image=k8s.gcr.io/pause:3.6 --container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock\" ","date":"2022-06-29","objectID":"/k8s9/:2:2","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"3.å‡çº§kubelet yum install -y kubelet-1.24.2-0 kubectl-1.24.2-0 --disableexcludes=kubernetes systemctl daemon-reload \u0026\u0026 systemctl restart containerd \u0026\u0026 systemctl restart kubelet æŸ¥çœ‹çŠ¶æ€ï¼š systemctl status kubelet ","date":"2022-06-29","objectID":"/k8s9/:2:3","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"4.ä¼˜åŒ–çš„ç»´æŠ¤èŠ‚ç‚¹ # è®¾ç½®ä¸ºä¸å¯è°ƒåº¦ kubectl cordon \u003cnodename\u003e # ä¼˜é›…æ’å‡ºå®¹å™¨ kubectl drain \u003cnodename\u003e --ignore-daemonsets --delete-emptydir-data # ç¡®è®¤ç»´æŠ¤å®Œæˆä¹‹åï¼Œæ¢å¤æ­£å¸¸ kubectl uncordon \u003cnodename\u003e ","date":"2022-06-29","objectID":"/k8s9/:2:4","tags":["k8s"],"title":"kubernetes ä»1.23.x å‡çº§åˆ° 1.24.x","uri":"/k8s9/"},{"categories":["k8s"],"content":"ç¼–å†™ kubernetes èµ„æºæè¿°æ–‡ä»¶ ","date":"2022-06-27","objectID":"/k8s8/:0:0","tags":["k8s"],"title":"ç¼–å†™ kubernetes èµ„æºæè¿°æ–‡ä»¶","uri":"/k8s8/"},{"categories":["k8s"],"content":"1. éƒ¨ç½²ä¸€ä¸ªåº”ç”¨ apiVersion: apps/v1 #ä¸k8sé›†ç¾¤ç‰ˆæœ¬æœ‰å…³ï¼Œä½¿ç”¨ kubectl api-versions å³å¯æŸ¥çœ‹å½“å‰é›†ç¾¤æ”¯æŒçš„ç‰ˆæœ¬ kind: Deployment #è¯¥é…ç½®çš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ Deployment metadata: #è¯‘åä¸ºå…ƒæ•°æ®ï¼Œå³ Deployment çš„ä¸€äº›åŸºæœ¬å±æ€§å’Œä¿¡æ¯ name: nginx-deployment #Deployment çš„åç§° labels: #æ ‡ç­¾ï¼Œå¯ä»¥çµæ´»å®šä½ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºï¼Œå…¶ä¸­keyå’Œvalueå‡å¯è‡ªå®šä¹‰ï¼Œå¯ä»¥å®šä¹‰å¤šç»„ï¼Œç›®å‰ä¸éœ€è¦ç†è§£ app: nginx #ä¸ºè¯¥Deploymentè®¾ç½®keyä¸ºappï¼Œvalueä¸ºnginxçš„æ ‡ç­¾ spec: #è¿™æ˜¯å…³äºè¯¥Deploymentçš„æè¿°ï¼Œå¯ä»¥ç†è§£ä¸ºä½ æœŸå¾…è¯¥Deploymentåœ¨k8sä¸­å¦‚ä½•ä½¿ç”¨ replicas: 1 #ä½¿ç”¨è¯¥Deploymentåˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºå®ä¾‹ selector: #æ ‡ç­¾é€‰æ‹©å™¨ï¼Œä¸ä¸Šé¢çš„æ ‡ç­¾å…±åŒä½œç”¨ï¼Œç›®å‰ä¸éœ€è¦ç†è§£ matchLabels: #é€‰æ‹©åŒ…å«æ ‡ç­¾app:nginxçš„èµ„æº app: nginx template: #è¿™æ˜¯é€‰æ‹©æˆ–åˆ›å»ºçš„Podçš„æ¨¡æ¿ metadata: #Podçš„å…ƒæ•°æ® labels: #Podçš„æ ‡ç­¾ï¼Œä¸Šé¢çš„selectorå³é€‰æ‹©åŒ…å«æ ‡ç­¾app:nginxçš„Pod app: nginx spec: #æœŸæœ›Podå®ç°çš„åŠŸèƒ½ï¼ˆå³åœ¨podä¸­éƒ¨ç½²ï¼‰ containers: #ç”Ÿæˆcontainerï¼Œä¸dockerä¸­çš„containeræ˜¯åŒä¸€ç§ - name: nginx #containerçš„åç§° image: nginx:1.7.9 #ä½¿ç”¨é•œåƒnginx:1.7.9åˆ›å»ºcontainerï¼Œè¯¥containeré»˜è®¤80ç«¯å£å¯è®¿é—® kubectl apply -f xxx.yaml ","date":"2022-06-27","objectID":"/k8s8/:0:1","tags":["k8s"],"title":"ç¼–å†™ kubernetes èµ„æºæè¿°æ–‡ä»¶","uri":"/k8s8/"},{"categories":["k8s"],"content":"2ã€æš´éœ²åº”ç”¨ apiVersion: v1 kind: Service metadata: name: nginx-service #Service çš„åç§° labels: #Service è‡ªå·±çš„æ ‡ç­¾ app: nginx #ä¸ºè¯¥ Service è®¾ç½® key ä¸º appï¼Œvalue ä¸º nginx çš„æ ‡ç­¾ spec: #è¿™æ˜¯å…³äºè¯¥ Service çš„å®šä¹‰ï¼Œæè¿°äº† Service å¦‚ä½•é€‰æ‹© Podï¼Œå¦‚ä½•è¢«è®¿é—® selector: #æ ‡ç­¾é€‰æ‹©å™¨ app: nginx #é€‰æ‹©åŒ…å«æ ‡ç­¾ app:nginx çš„ Pod ports: - name: nginx-port #ç«¯å£çš„åå­— protocol: TCP #åè®®ç±»å‹ TCP/UDP port: 80 #é›†ç¾¤å†…çš„å…¶ä»–å®¹å™¨ç»„å¯é€šè¿‡ 80 ç«¯å£è®¿é—® Service nodePort: 32600 #é€šè¿‡ä»»æ„èŠ‚ç‚¹çš„ 32600 ç«¯å£è®¿é—® Service targetPort: 80 #å°†è¯·æ±‚è½¬å‘åˆ°åŒ¹é… Pod çš„ 80 ç«¯å£ type: NodePort #Seriveçš„ç±»å‹ï¼ŒClusterIP/NodePort/LoaderBalancer ","date":"2022-06-27","objectID":"/k8s8/:0:2","tags":["k8s"],"title":"ç¼–å†™ kubernetes èµ„æºæè¿°æ–‡ä»¶","uri":"/k8s8/"},{"categories":["k8s"],"content":"3ã€æ‰©ç¼©å®¹ ä¿®æ”¹deployment.yaml ä¸­çš„ replicas å±æ€§å³å¯ å®Œæˆåè¿è¡Œ kubectl apply -f xxx.yaml ","date":"2022-06-27","objectID":"/k8s8/:0:3","tags":["k8s"],"title":"ç¼–å†™ kubernetes èµ„æºæè¿°æ–‡ä»¶","uri":"/k8s8/"},{"categories":["k8s"],"content":"4ã€æ»šåŠ¨å‡çº§ ä¿®æ”¹deployment.yaml ä¸­çš„ imageName å±æ€§ç­‰ å®Œæˆåè¿è¡Œ kubectl apply -f xxx.yaml ","date":"2022-06-27","objectID":"/k8s8/:0:4","tags":["k8s"],"title":"ç¼–å†™ kubernetes èµ„æºæè¿°æ–‡ä»¶","uri":"/k8s8/"},{"categories":["web æœåŠ¡å™¨"],"content":"nginx ssh-key connection exception Not long ago, I wanted to restart the companyâ€™s gitlab server.I couldnâ€™t coonect to ssh when it restarted.emmâ€¦â€¦I try copy the ssh rsa.pub,but it didnâ€™t work. error log: identity_sign: private key ~/.ssh/id_rsa contents do not match public what is happenï¼Ÿ solution reconfigure gitlab ssh key! create new ssh key ssh-keygen -t rsa -C 'git@gitlab.com' -f ~/.ssh/gitlab-rsa update config file,enter ~./ssh,open config # add host Host gitlab.com HostName gitlab.com IdentityFile ~/.ssh/gitlab_id-rsa enter http://gitlab.com ,Profile Settingsâ€“\u003eSSH Keysâ€“\u003eAdd SSH Key You are done ","date":"2022-06-15","objectID":"/nginx05/:0:0","tags":["nginx","linux"],"title":"nginx ssh-key connection exception","uri":"/nginx05/"},{"categories":["k8s"],"content":"k8s manual expansion We find k8s-master node.Input the Commandï¼š expand kubectl scale --replicas=3 deploy my-test-deploy shrink kubectl scale --replicas=1 deploy my-test-deploy ","date":"2022-06-13","objectID":"/k8s7/:0:0","tags":["k8s"],"title":"kubernetes manual expansion","uri":"/k8s7/"},{"categories":["k8s"],"content":"trouble cleaning get resource list kubectl get deployment kubectl get pods kubectl get nodes # exists in the namespace kubectl api-resources --namespaced=true # not exists in the namespace kubectl api-resources --namespaced=false show info kubectl describe pod my-test-pod kubectl describe deployment my-test-pod exec container kubectl exec -ti my-test-pod /bin/bash ","date":"2022-06-13","objectID":"/k8s7/:1:0","tags":["k8s"],"title":"kubernetes manual expansion","uri":"/k8s7/"},{"categories":["ç›‘æ§"],"content":"nginx exporter å®‰è£…é…ç½® äºŒè¿›åˆ¶å®‰è£… wget https://github.com/nginxinc/nginx-prometheus-exporter/releases/download/v0.10.0/nginx-prometheus-exporter_0.10.0_linux_amd64.tar.gz tar -zxvf nginx-prometheus-exporter_0.10.0_linux_amd64.tar.gz -C ./nginx-exporter åœ¨nginxä¸Šé…ç½® ./configure \\ â€¦ \\ --with-http_stub_status_module make sudo make install åœ¨nginx.configä¸Šé…ç½® server { # æ–°å¢ location /nginx_status { stub_status on; access_log off; } } é‡å¯nginxæœåŠ¡ nginx -t nginx -s reload å¯åŠ¨nginx exporter nginx-prometheus-exporter -nginx.scrape-uri http://\u003cnginx\u003e:8080/nginx_status é…ç½® prometheus æ·»åŠ  prometheus.yml - job_name: 'nginx-exporter' file_sd_configs: - files: - \"./file_sd/nginx-exporter.yaml\" åœ¨ ./file_sd/æ–°å»º nginx-exporter.yaml - targets: ['\u003cIP\u003e:9113'] labels: instance: \u003cnginxåç§°\u003e ","date":"2022-06-08","objectID":"/nginx-exporter/:0:0","tags":["prometheus"],"title":"nginx exporter å®‰è£…é…ç½®","uri":"/nginx-exporter/"},{"categories":["go"],"content":"go Struct ç»“æ„ä½“ ç»“æ„ä½“æ˜¯å°†é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„ç±»å‹çš„å˜é‡ï¼Œç»„åˆåœ¨ä¸€èµ·çš„èšåˆæ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥çœ‹åšæ˜¯æ•°æ®çš„é›†åˆã€‚ ","date":"2022-04-26","objectID":"/go3/:0:0","tags":["golang"],"title":"go Struct ç»“æ„ä½“","uri":"/go3/"},{"categories":["go"],"content":"å£°æ˜ç»“æ„ä½“ //demo_11.go package main import ( \"fmt\" ) type Person struct { Name string Age int } func main() { var p1 Person p1.Name = \"Tom\" p1.Age = 30 fmt.Println(\"p1 =\", p1) var p2 = Person{Name:\"Burke\", Age:31} fmt.Println(\"p2 =\", p2) p3 := Person{Name:\"Aaron\", Age:32} fmt.Println(\"p2 =\", p3) //åŒ¿åç»“æ„ä½“ p4 := struct { Name string Age int } {Name:\"åŒ¿å\", Age:33} fmt.Println(\"p4 =\", p4) } ","date":"2022-04-26","objectID":"/go3/:1:0","tags":["golang"],"title":"go Struct ç»“æ„ä½“","uri":"/go3/"},{"categories":["go"],"content":"ç”Ÿæˆ JSON //demo_12.go package main import ( \"encoding/json\" \"fmt\" ) type Result struct { Code int `json:\"code\"` Message string `json:\"msg\"` } func main() { var res Result res.Code = 200 res.Message = \"success\" //åºåˆ—åŒ– jsons, errs := json.Marshal(res) if errs != nil { fmt.Println(\"json marshal error:\", errs) } fmt.Println(\"json data :\", string(jsons)) //ååºåˆ—åŒ– var res2 Result errs = json.Unmarshal(jsons, \u0026res2) if errs != nil { fmt.Println(\"json unmarshal error:\", errs) } fmt.Println(\"res2 :\", res2) } ","date":"2022-04-26","objectID":"/go3/:2:0","tags":["golang"],"title":"go Struct ç»“æ„ä½“","uri":"/go3/"},{"categories":["go"],"content":"æ”¹å˜æ•°æ® //demo_13.go package main import ( \"encoding/json\" \"fmt\" ) type Result struct { Code int `json:\"code\"` Message string `json:\"msg\"` } func main() { var res Result res.Code = 200 res.Message = \"success\" toJson(\u0026res) setData(\u0026res) toJson(\u0026res) } func setData (res *Result) { res.Code = 500 res.Message = \"fail\" } func toJson (res *Result) { jsons, errs := json.Marshal(res) if errs != nil { fmt.Println(\"json marshal error:\", errs) } fmt.Println(\"json data :\", string(jsons)) } ","date":"2022-04-26","objectID":"/go3/:3:0","tags":["golang"],"title":"go Struct ç»“æ„ä½“","uri":"/go3/"},{"categories":["go"],"content":"go Sliceåˆ‡ç‰‡è¯­æ³• åˆ‡ç‰‡æ˜¯ä¸€ç§åŠ¨æ€æ•°ç»„ï¼Œæ¯”æ•°ç»„æ“ä½œçµæ´»ï¼Œé•¿åº¦ä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥è¿›è¡Œè¿½åŠ å’Œåˆ é™¤ã€‚ len() å’Œ cap() è¿”å›ç»“æœå¯ç›¸åŒå’Œä¸åŒã€‚ ","date":"2022-04-25","objectID":"/go2/:0:0","tags":["golang"],"title":"go Sliceåˆ‡ç‰‡è¯­æ³•","uri":"/go2/"},{"categories":["go"],"content":"å£°æ˜åˆ‡ç‰‡ //demo_7.go package main import ( \"fmt\" ) func main() { var sli_1 [] int //nil åˆ‡ç‰‡ fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli_1),cap(sli_1),sli_1) var sli_2 = [] int {} //ç©ºåˆ‡ç‰‡ fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli_1),cap(sli_2),sli_2) var sli_3 = [] int {1, 2, 3, 4, 5} fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli_3),cap(sli_3),sli_3) sli_4 := [] int {1, 2, 3, 4, 5} fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli_4),cap(sli_4),sli_4) var sli_5 [] int = make([] int, 5, 8) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli_5),cap(sli_5),sli_5) sli_6 := make([] int, 5, 9) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli_6),cap(sli_6),sli_6) } ","date":"2022-04-25","objectID":"/go2/:1:0","tags":["golang"],"title":"go Sliceåˆ‡ç‰‡è¯­æ³•","uri":"/go2/"},{"categories":["go"],"content":"æˆªå–åˆ‡ç‰‡ //demo_8.go package main import ( \"fmt\" ) func main() { sli := [] int {1, 2, 3, 4, 5, 6} fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) fmt.Println(\"sli[1] ==\", sli[1]) fmt.Println(\"sli[:] ==\", sli[:]) fmt.Println(\"sli[1:] ==\", sli[1:]) fmt.Println(\"sli[:4] ==\", sli[:4]) fmt.Println(\"sli[0:3] ==\", sli[0:3]) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli[0:3]),cap(sli[0:3]),sli[0:3]) fmt.Println(\"sli[0:3:4] ==\", sli[0:3:4]) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli[0:3:4]),cap(sli[0:3:4]),sli[0:3:4]) } ","date":"2022-04-25","objectID":"/go2/:2:0","tags":["golang"],"title":"go Sliceåˆ‡ç‰‡è¯­æ³•","uri":"/go2/"},{"categories":["go"],"content":"è¿½åŠ åˆ‡ç‰‡ //demo_9.go package main import ( \"fmt\" ) func main() { sli := [] int {4, 5, 6} fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) sli = append(sli, 7) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) sli = append(sli, 8) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) sli = append(sli, 9) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) sli = append(sli, 10) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) } ","date":"2022-04-25","objectID":"/go2/:3:0","tags":["golang"],"title":"go Sliceåˆ‡ç‰‡è¯­æ³•","uri":"/go2/"},{"categories":["go"],"content":"åˆ é™¤åˆ‡ç‰‡ //demo_10.go package main import ( \"fmt\" ) func main() { sli := [] int {1, 2, 3, 4, 5, 6, 7, 8} fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) //åˆ é™¤å°¾éƒ¨ 2 ä¸ªå…ƒç´  fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli[:len(sli)-2]),cap(sli[:len(sli)-2]),sli[:len(sli)-2]) //åˆ é™¤å¼€å¤´ 2 ä¸ªå…ƒç´  fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli[2:]),cap(sli[2:]),sli[2:]) //åˆ é™¤ä¸­é—´ 2 ä¸ªå…ƒç´  sli = append(sli[:3], sli[3+2:]...) fmt.Printf(\"len=%d cap=%d slice=%v\\n\",len(sli),cap(sli),sli) } ","date":"2022-04-25","objectID":"/go2/:4:0","tags":["golang"],"title":"go Sliceåˆ‡ç‰‡è¯­æ³•","uri":"/go2/"},{"categories":["go"],"content":"go åŸºç¡€çŸ¥è¯† ","date":"2022-04-25","objectID":"/go1/:0:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"ç›®å½•ç»“æ„ â”œâ”€ code -- ä»£ç æ ¹ç›®å½• â”‚ â”œâ”€ bin â”‚ â”œâ”€ pkg â”‚ â”œâ”€ src â”‚ â”œâ”€â”€ hello â”‚ â”œâ”€â”€ hello.go bin å­˜æ”¾ç¼–è¯‘åå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚ pkg å­˜æ”¾ç¼–è¯‘åçš„åº”ç”¨åŒ…ã€‚ src å­˜æ”¾åº”ç”¨æºä»£ç ã€‚ Hello World ä»£ç  //åœ¨ hello ç›®å½•ä¸‹åˆ›å»º hello.go package main import ( \"fmt\" ) func main() { fmt.Println(\"Hello World!\") } ","date":"2022-04-25","objectID":"/go1/:1:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"åŸºç¡€å‘½ä»¤ go build hello #åœ¨srcç›®å½•æˆ–helloç›®å½•ä¸‹æ‰§è¡Œ go build helloï¼Œåªåœ¨å¯¹åº”å½“å‰ç›®å½•ä¸‹ç”Ÿæˆæ–‡ä»¶ã€‚ go install hello #åœ¨srcç›®å½•æˆ–helloç›®å½•ä¸‹æ‰§è¡Œ go install helloï¼Œä¼šæŠŠç¼–è¯‘å¥½çš„ç»“æœç§»åŠ¨åˆ° $GOPATH/binã€‚ go run hello #åœ¨srcç›®å½•æˆ–helloç›®å½•ä¸‹æ‰§è¡Œ go run helloï¼Œä¸ç”Ÿæˆä»»ä½•æ–‡ä»¶åªè¿è¡Œç¨‹åºã€‚ go fmt hello #åœ¨srcç›®å½•æˆ–helloç›®å½•ä¸‹æ‰§è¡Œ go run helloï¼Œæ ¼å¼åŒ–ä»£ç ï¼Œå°†ä»£ç ä¿®æ”¹æˆæ ‡å‡†æ ¼å¼ã€‚ ","date":"2022-04-25","objectID":"/go1/:2:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"æ•°æ®ç±»å‹ ç±»å‹ è¡¨ç¤º å¤‡æ³¨ å­—ç¬¦ä¸² string åªèƒ½ç”¨ä¸€å¯¹åŒå¼•å·ï¼ˆ\"\"ï¼‰æˆ–åå¼•å·ï¼ˆ``ï¼‰æ‹¬èµ·æ¥å®šä¹‰ï¼Œä¸èƒ½ç”¨å•å¼•å·ï¼ˆâ€™â€™ï¼‰å®šä¹‰ï¼ å¸ƒå°” bool åªæœ‰ true å’Œ falseï¼Œé»˜è®¤ä¸º falseã€‚ æ•´å‹ int8 uint8 int16 uint16 int32 uint32 int64 uint64 int uint å…·ä½“é•¿åº¦å–å†³äº CPU ä½æ•°ã€‚ æµ®ç‚¹å‹ float32 float64 ","date":"2022-04-25","objectID":"/go1/:3:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"å¸¸é‡å£°æ˜ å¸¸é‡ï¼Œåœ¨ç¨‹åºç¼–è¯‘é˜¶æ®µå°±ç¡®å®šä¸‹æ¥çš„å€¼ï¼Œè€Œç¨‹åºåœ¨è¿è¡Œæ—¶æ— æ³•æ”¹å˜è¯¥å€¼ã€‚ ","date":"2022-04-25","objectID":"/go1/:4:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"1. å•ä¸ªå¸¸é‡å£°æ˜ ç¬¬ä¸€ç§ï¼šconst å˜é‡åç§° æ•°æ®ç±»å‹ = å˜é‡å€¼ å¦‚æœä¸èµ‹å€¼ï¼Œä½¿ç”¨çš„æ˜¯è¯¥æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ã€‚ ç¬¬äºŒç§ï¼šconst å˜é‡åç§° = å˜é‡å€¼ æ ¹æ®å˜é‡å€¼ï¼Œè‡ªè¡Œåˆ¤æ–­æ•°æ®ç±»å‹ã€‚ ","date":"2022-04-25","objectID":"/go1/:4:1","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"2. å¤šä¸ªå¸¸é‡å£°æ˜ ç¬¬ä¸€ç§ï¼šconst å˜é‡åç§°,å˜é‡åç§° â€¦ ,æ•°æ®ç±»å‹ = å˜é‡å€¼,å˜é‡å€¼ â€¦ ç¬¬äºŒç§ï¼šconst å˜é‡åç§°,å˜é‡åç§° â€¦ = å˜é‡å€¼,å˜é‡å€¼ â€¦ ","date":"2022-04-25","objectID":"/go1/:4:2","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"3. ä»£ç  //demo_1.go package main import ( \"fmt\" ) func main() { const name string = \"Tom\" fmt.Println(name) const age = 30 fmt.Println(age) const name_1, name_2 string = \"Tom\", \"Jay\" fmt.Println(name_1, name_2) const name_3, age_1 = \"Tom\", 30 fmt.Println(name_3, age_1) } ","date":"2022-04-25","objectID":"/go1/:4:3","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"å˜é‡å£°æ˜ ","date":"2022-04-25","objectID":"/go1/:5:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"å•ä¸ªå˜é‡å£°æ˜ ç¬¬ä¸€ç§ï¼švar å˜é‡åç§° æ•°æ®ç±»å‹ = å˜é‡å€¼ å¦‚æœä¸èµ‹å€¼ï¼Œä½¿ç”¨çš„æ˜¯è¯¥æ•°æ®ç±»å‹çš„é»˜è®¤å€¼ã€‚ ç¬¬äºŒç§ï¼švar å˜é‡åç§° = å˜é‡å€¼ æ ¹æ®å˜é‡å€¼ï¼Œè‡ªè¡Œåˆ¤æ–­æ•°æ®ç±»å‹ã€‚ ç¬¬ä¸‰ç§ï¼šå˜é‡åç§° := å˜é‡å€¼ çœç•¥äº† var å’Œæ•°æ®ç±»å‹ï¼Œå˜é‡åç§°ä¸€å®šè¦æ˜¯æœªå£°æ˜è¿‡çš„ã€‚ ","date":"2022-04-25","objectID":"/go1/:5:1","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"å¤šä¸ªå˜é‡å£°æ˜ ç¬¬ä¸€ç§ï¼švar å˜é‡åç§°,å˜é‡åç§° â€¦ ,æ•°æ®ç±»å‹ = å˜é‡å€¼,å˜é‡å€¼ â€¦ ç¬¬äºŒç§ï¼švar å˜é‡åç§°,å˜é‡åç§° â€¦ = å˜é‡å€¼,å˜é‡å€¼ â€¦ ç¬¬ä¸‰ç§ï¼šå˜é‡åç§°,å˜é‡åç§° â€¦ := å˜é‡å€¼,å˜é‡å€¼ â€¦ ","date":"2022-04-25","objectID":"/go1/:5:2","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"ä»£ç  //demo_2.go package main import ( \"fmt\" ) func main() { var age_1 uint8 = 31 var age_2 = 32 age_3 := 33 fmt.Println(age_1, age_2, age_3) var age_4, age_5, age_6 int = 31, 32, 33 fmt.Println(age_4, age_5, age_6) var name_1, age_7 = \"Tom\", 30 fmt.Println(name_1, age_7) name_2, is_boy, height := \"Jay\", true, 180.66 fmt.Println(name_2, is_boy, height) } ","date":"2022-04-25","objectID":"/go1/:5:3","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"è¾“å‡ºæ–¹æ³• fmt.Printï¼šè¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆä»…åªæ˜¯è¾“å‡ºï¼‰ fmt.Printlnï¼šè¾“å‡ºåˆ°æ§åˆ¶å°å¹¶æ¢è¡Œ fmt.Printfï¼šä»…è¾“å‡ºæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²å’Œå­—ç¬¦ä¸²å˜é‡ï¼ˆæ•´å‹å’Œæ•´å‹å˜é‡ä¸å¯ä»¥ï¼‰ fmt.Sprintfï¼šæ ¼å¼åŒ–å¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸è¾“å‡ºã€‚ ","date":"2022-04-25","objectID":"/go1/:6:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"ä»£ç  //demo_3.go package main import ( \"fmt\" ) func main() { fmt.Print(\"è¾“å‡ºåˆ°æ§åˆ¶å°ä¸æ¢è¡Œ\") fmt.Println(\"---\") fmt.Println(\"è¾“å‡ºåˆ°æ§åˆ¶å°å¹¶æ¢è¡Œ\") fmt.Printf(\"name=%s,age=%d\\n\", \"Tom\", 30) fmt.Printf(\"name=%s,age=%d,height=%v\\n\", \"Tom\", 30, fmt.Sprintf(\"%.2f\", 180.567)) } ","date":"2022-04-25","objectID":"/go1/:6:1","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"æ•°ç»„ æ•°ç»„æ˜¯ä¸€ä¸ªç”±å›ºå®šé•¿åº¦çš„ç‰¹å®šç±»å‹å…ƒç´ ç»„æˆçš„åºåˆ—ï¼Œä¸€ä¸ªæ•°ç»„å¯ä»¥ç”±é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ç»„æˆï¼Œä¸€æ—¦å£°æ˜äº†ï¼Œæ•°ç»„çš„é•¿åº¦å°±å›ºå®šäº†ï¼Œä¸èƒ½åŠ¨æ€å˜åŒ–ã€‚ len() å’Œ cap() è¿”å›ç»“æœå§‹ç»ˆä¸€æ ·ã€‚ ","date":"2022-04-25","objectID":"/go1/:7:0","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"å£°æ˜æ•°ç»„ package main import ( \"fmt\" ) func main() { //ä¸€ç»´æ•°ç»„ var arr_1 [5] int fmt.Println(arr_1) var arr_2 = [5] int {1, 2, 3, 4, 5} fmt.Println(arr_2) arr_3 := [5] int {1, 2, 3, 4, 5} fmt.Println(arr_3) arr_4 := [...] int {1, 2, 3, 4, 5, 6} fmt.Println(arr_4) arr_5 := [5] int {0:3, 1:5, 4:6} fmt.Println(arr_5) //äºŒç»´æ•°ç»„ var arr_6 = [3][5] int {{1, 2, 3, 4, 5}, {9, 8, 7, 6, 5}, {3, 4, 5, 6, 7}} fmt.Println(arr_6) arr_7 := [3][5] int {{1, 2, 3, 4, 5}, {9, 8, 7, 6, 5}, {3, 4, 5, 6, 7}} fmt.Println(arr_7) arr_8 := [...][5] int {{1, 2, 3, 4, 5}, {9, 8, 7, 6, 5}, {0:3, 1:5, 4:6}} fmt.Println(arr_8) } ","date":"2022-04-25","objectID":"/go1/:7:1","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["go"],"content":"æ³¨æ„äº‹é¡¹ ä¸€ã€æ•°ç»„ä¸å¯åŠ¨æ€å˜åŒ–é—®é¢˜ï¼Œä¸€æ—¦å£°æ˜äº†ï¼Œå…¶é•¿åº¦å°±æ˜¯å›ºå®šçš„ã€‚ var arr_1 = [5] int {1, 2, 3, 4, 5} arr_1[5] = 6 fmt.Println(arr_1) è¿è¡Œä¼šæŠ¥é”™ï¼šinvalid array index 5 (out of bounds for 5-element array) äºŒã€æ•°ç»„æ˜¯å€¼ç±»å‹é—®é¢˜ï¼Œåœ¨å‡½æ•°ä¸­ä¼ é€’çš„æ—¶å€™æ˜¯ä¼ é€’çš„å€¼ï¼Œå¦‚æœä¼ é€’æ•°ç»„å¾ˆå¤§ï¼Œè¿™å¯¹å†…å­˜æ˜¯å¾ˆå¤§å¼€é”€ã€‚ //demo_5.go package main import ( \"fmt\" ) func main() { var arr = [5] int {1, 2, 3, 4, 5} modifyArr(arr) fmt.Println(arr) } func modifyArr(a [5] int) { a[1] = 20 } //demo_6.go package main import ( \"fmt\" ) func main() { var arr = [5] int {1, 2, 3, 4, 5} modifyArr(\u0026arr) fmt.Println(arr) } func modifyArr(a *[5] int) { a[1] = 20 } ä¸‰ã€æ•°ç»„èµ‹å€¼é—®é¢˜ï¼ŒåŒæ ·ç±»å‹çš„æ•°ç»„ï¼ˆé•¿åº¦ä¸€æ ·ä¸”æ¯ä¸ªå…ƒç´ ç±»å‹ä¹Ÿä¸€æ ·ï¼‰æ‰å¯ä»¥ç›¸äº’èµ‹å€¼ï¼Œåä¹‹ä¸å¯ä»¥ã€‚ var arr = [5] int {1, 2, 3, 4, 5} var arr_1 [5] int = arr var arr_2 [6] int = arr è¿è¡Œä¼šæŠ¥é”™ï¼šcannot use arr (type [5]int) as type [6]int in assignment ","date":"2022-04-25","objectID":"/go1/:7:2","tags":["golang"],"title":"go åŸºç¡€çŸ¥è¯†","uri":"/go1/"},{"categories":["æ—¥å¸¸"],"content":"VSCodeæ’ä»¶æ¨è=\u003e Code Runner Run code snippet or code file for multiple languages: C, C++, Java, JavaScript, PHP, Python, Perl, Perl 6, Ruby, Go, Lua, Groovy, PowerShell, BAT/CMD, BASH/SH, F# Script, F# (.NET Core), C# Script, C# (.NET Core), VBScript, TypeScript, CoffeeScript, Scala, Swift, Julia, Crystal, OCaml Script, R, AppleScript, Elixir, Visual Basic .NET, Clojure, Haxe, Objective-C, Rust, Racket, Scheme, AutoHotkey, AutoIt, Kotlin, Dart, Free Pascal, Haskell, Nim, D, Lisp, Kit, V, SCSS, Sass, CUDA, Less, Fortran, Ring, and custom command å¯ä»¥ç”¨ç¼–è¯‘è¿è¡Œè¶…è¿‡40ç§è¯­è¨€ï¼Œéå¸¸çš„æ–¹ä¾¿ï½ ","date":"2022-04-25","objectID":"/vscode-runcode/:0:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"VSCodeæ’ä»¶æ¨è=\u003e Code Runner","uri":"/vscode-runcode/"},{"categories":["æ—¥å¸¸"],"content":"åœ¨vscodeæ’ä»¶é‡Œå®‰è£… ","date":"2022-04-25","objectID":"/vscode-runcode/:1:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"VSCodeæ’ä»¶æ¨è=\u003e Code Runner","uri":"/vscode-runcode/"},{"categories":["æ—¥å¸¸"],"content":"è¿è¡Œä½ çš„ä»£ç  é”®ç›˜å¿«æ·é”® Ctrl+Alt+N å¿«æ·é”® F1 è°ƒå‡º å‘½ä»¤é¢æ¿, ç„¶åè¾“å…¥ Run Code åœ¨ç¼–è¾‘åŒºï¼Œå³é”®é€‰æ‹© Run Code åœ¨å·¦ä¾§çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œå³é”®é€‰æ‹© Run Code å³ä¸Šè§’çš„è¿è¡Œå°ä¸‰è§’æŒ‰é’® ","date":"2022-04-25","objectID":"/vscode-runcode/:2:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"VSCodeæ’ä»¶æ¨è=\u003e Code Runner","uri":"/vscode-runcode/"},{"categories":["æ—¥å¸¸"],"content":"ant build.xml ç¼–å†™ ","date":"2022-04-21","objectID":"/ant1/:0:0","tags":["java"],"title":"ant build.xml ç¼–å†™","uri":"/ant1/"},{"categories":["æ—¥å¸¸"],"content":"ç”Ÿæˆbuild.xml Eclipse è‡ªåŠ¨ç”Ÿæˆ Antçš„Build.xml é…ç½®æ–‡ä»¶,ç”Ÿæˆçš„æ–¹æ³•å¾ˆéšè”½ é€‰æ‹©ä½ è¦ç”ŸæˆBuild.xmlæ–‡ä»¶çš„é¡¹ç›®,å³é”®. Export-\u003e General -\u003e Ant Buildfiles . ç‚¹Next,é€‰æ‹©é¡¹ç›®ï¼Œå†ç‚¹Finish. ","date":"2022-04-21","objectID":"/ant1/:1:0","tags":["java"],"title":"ant build.xml ç¼–å†™","uri":"/ant1/"},{"categories":["æ—¥å¸¸"],"content":"ç¼–å†™build.xml \u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?\u003e \u003c!-- æ¯ä¸ªæ„å»ºæ–‡ä»¶å¯¹åº”ä¸€ä¸ªé¡¹ç›®ã€‚\u003cproject\u003eæ ‡ç­¾æ—¶æ„å»ºæ–‡ä»¶çš„æ ¹æ ‡ç­¾ã€‚å®ƒå¯ä»¥æœ‰å¤šä¸ªå†…åœ¨å±æ€§ï¼Œå°±å¦‚ä»£ç ä¸­æ‰€ç¤ºï¼Œå…¶å„ä¸ªå±æ€§çš„å«ä¹‰åˆ†åˆ«å¦‚ä¸‹ã€‚ (1) defaultè¡¨ç¤ºé»˜è®¤çš„è¿è¡Œç›®æ ‡ï¼Œè¿™ä¸ªå±æ€§æ˜¯å¿…é¡»çš„ã€‚ (2) basedirè¡¨ç¤ºé¡¹ç›®çš„åŸºå‡†ç›®å½•ã€‚ (3) nameè¡¨ç¤ºé¡¹ç›®åã€‚ (4) descriptionè¡¨ç¤ºé¡¹ç›®çš„æè¿°ã€‚ --\u003e \u003cproject default=\"build\" name=\"Sort\"\u003e \u003c!-- è®¾ç½®å±æ€§æˆ–æ–‡ä»¶è·¯å¾„ï¼Œè¯»å–å±æ€§ä½¿ç”¨${property}ï¼Œvalueè·¯å¾„é»˜è®¤é¡¹ç›®æ ¹ç›®å½• --\u003e \u003cproperty file=\"ant/builds.properties\" /\u003e \u003cproperty name=\"src.dir\" value=\"src/statics\" /\u003e \u003cproperty name=\"classes.dir\" value=\"ant/classes\" /\u003e \u003cproperty name=\"lib.dir\" value=\"lib\" /\u003e \u003cproperty name=\"dist.dir\" value=\"ant/dist\" /\u003e \u003c!-- å®šä¹‰classpath --\u003e \u003cpath id=\"master-classpath\"\u003e \u003cfileset file=\"${lib.dir}/*.jar\" /\u003e \u003cpathelement path=\"${classes.dir}\" /\u003e \u003c/path\u003e \u003c!--ä¸€ä¸ªé¡¹ç›®æ ‡ç­¾ProjectåŒ…å«å¤šä¸ªtargetæ ‡ç­¾ï¼Œä¸€ä¸ªtargetæ ‡ç­¾å¯ä»¥ä¾èµ–å…¶ä»–çš„targetæ ‡ç­¾ åœ¨ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ä¹‹å‰å¿…é¡»å…ˆç¼–è¯‘è¯¥æ–‡ä»¶ï¼Œå› ç­–å¯æ‰§è¡Œæ–‡ä»¶çš„targetä¾èµ–äºç¼–è¯‘ç¨‹åºçš„ targetã€‚ (1).nameè¡¨ç¤ºæ ‡æ˜ï¼Œè¿™ä¸ªå±æ€§æ˜¯å¿…é¡»çš„ã€‚ (2).dependsè¡¨ç¤ºä¾èµ–çš„ç›®æ ‡ã€‚ (3)ifè¡¨ç¤ºä»…å½“å±æ€§è®¾ç½®æ—¶æ‰æ‰§è¡Œã€‚ (4)unlessè¡¨ç¤ºå½“å±æ€§æ²¡æœ‰è®¾ç½®æ—¶æ‰æ‰§è¡Œã€‚ (5)descriptionè¡¨ç¤ºé¡¹ç›®çš„æè¿°ã€‚ Antçš„dependså±æ€§æŒ‡å®šäº†targetçš„æ‰§è¡Œé¡ºåºã€‚Antä¼šä¾ç…§dependså±æ€§ä¸­targetå‡ºç°é¡ºåºä¾æ¬¡æ‰§è¡Œæ¯ä¸ªtargetã€‚åœ¨æ‰§è¡Œä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æ‰§è¡Œå®ƒæ‰€ä¾èµ–çš„targetã€‚ --\u003e \u003c!-- åˆå§‹åŒ–ä»»åŠ¡ --\u003e \u003ctarget name=\"init\"\u003e \u003c!-- è¾“å‡ºæ ‡ç­¾ ï¼Œ${init}æ˜¯builds.propertiesä¸­çš„å±æ€§ --\u003e \u003cecho message=\" Available Targets:\"/\u003e \u003cecho message=\"-------------------------------------------------------\"/\u003e \u003cecho message=\" init ${init} ...\"/\u003e \u003cecho message=\"-------------------------------------------------------\"/\u003e \u003c/target\u003e \u003c!-- ç¼–è¯‘ --\u003e \u003ctarget name=\"compile\" depends=\"init\" description=\"compile the source files\"\u003e \u003c!-- åˆ é™¤æ–‡ä»¶å¤¹ --\u003e \u003cdelete dir=\"${classes.dir}\" /\u003e \u003c!-- åˆ›å»ºæ–‡ä»¶å¤¹ --\u003e \u003cmkdir dir=\"${classes.dir}\" /\u003e \u003c!-- ç¼–è¯‘javaç”Ÿæˆclassæ–‡ä»¶ ï¼Œå…¶å±æ€§å¦‚ä¸‹ (1).srcdirè¡¨ç¤ºæºç¨‹åºçš„ç›®å½•ã€‚ (2).destdirè¡¨ç¤ºclassæ–‡ä»¶çš„è¾“å‡ºç›®å½•ã€‚ (3).includeè¡¨ç¤ºè¢«ç¼–è¯‘çš„æ–‡ä»¶çš„æ¨¡å¼ã€‚ (4).excludesè¡¨ç¤ºè¢«æ’é™¤çš„æ–‡ä»¶çš„æ¨¡å¼ã€‚ (5).classpathè¡¨ç¤ºæ‰€ä½¿ç”¨çš„ç±»è·¯å¾„ã€‚ (6).debugè¡¨ç¤ºåŒ…å«çš„è°ƒè¯•ä¿¡æ¯ã€‚ (7).optimizeè¡¨ç¤ºæ˜¯å¦ä½¿ç”¨ä¼˜åŒ–ã€‚ (8).verbose è¡¨ç¤ºæä¾›è¯¦ç»†çš„è¾“å‡ºä¿¡æ¯ã€‚ (9).fileonerrorè¡¨ç¤ºå½“ç¢°åˆ°é”™è¯¯å°±è‡ªåŠ¨åœæ­¢ã€‚ --\u003e \u003cjavac srcdir=\"${src.dir}\" destdir=\"${classes.dir}\"\u003e \u003c!-- ç¼–è¯‘éœ€è¦çš„jaråŒ… å¼•ç”¨å‰é¢è®¾ç½®çš„class-path --\u003e \u003cclasspath refid=\"master-classpath\" /\u003e \u003c/javac\u003e \u003c/target\u003e \u003c!-- æ‰“åŒ…æˆjar --\u003e \u003ctarget name=\"pack\" description=\"make .jar file\"\u003e \u003cdelete dir=\"${dist.dir}\" /\u003e \u003cmkdir dir=\"${dist.dir}\" /\u003e \u003c!-- è¯¥æ ‡ç­¾ç”¨æ¥ç”Ÿæˆä¸€ä¸ªJARæ–‡ä»¶ï¼Œå…¶å±æ€§å¦‚ä¸‹ (1) destfileè¡¨ç¤ºJARæ–‡ä»¶åã€‚ (2) basedirè¡¨ç¤ºè¢«å½’æ¡£çš„æ–‡ä»¶åã€‚è¦æ“ä½œçš„æ–‡ä»¶è·¯å¾„ (3) includesè¡¨ç¤ºåˆ«å½’æ¡£çš„æ–‡ä»¶æ¨¡å¼ã€‚ (4) exchudesè¡¨ç¤ºè¢«æ’é™¤çš„æ–‡ä»¶æ¨¡å¼ã€‚ --\u003e \u003cjar destfile=\"${dist.dir}/hello.jar\" basedir=\"${classes.dir}\"\u003e \u003c!-- ä¸åŒ…å«çš„ç±»æˆ–å†…å®¹ --\u003e \u003cexclude name=\"**/*Test.*\" /\u003e \u003c/jar\u003e \u003c/target\u003e \u003c!-- ç”Ÿæˆzipå‹ç¼©åŒ… --\u003e \u003ctarget name=\"zip\"\u003e \u003cdelete dir=\"${release-dir}\" /\u003e \u003cmkdir dir=\"${release-dir}\" /\u003e \u003c!-- è¯¥æ ‡ç­¾ç”¨æ¥ç”Ÿæˆä¸€ä¸ªzipæ–‡ä»¶ï¼Œå…¶å±æ€§å¦‚ä¸‹ (1) destfileè¡¨ç¤ºzipæ–‡ä»¶åã€‚ (2) basedirè¡¨ç¤ºè¢«å½’æ¡£çš„æ–‡ä»¶åã€‚ è¦æ“ä½œçš„æ–‡ä»¶è·¯å¾„ (3) includesè¡¨ç¤ºåˆ«å½’æ¡£çš„æ–‡ä»¶æ¨¡å¼ã€‚ (4) exchudesè¡¨ç¤ºè¢«æ’é™¤çš„æ–‡ä»¶æ¨¡å¼ã€‚ --\u003e \u003czip destfile=\"${release-dir}/antTest.zip\" update=\"true\" basedir=\"ant\" /\u003e \u003c/target\u003e \u003c/project\u003e æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-04-21","objectID":"/ant1/:2:0","tags":["java"],"title":"ant build.xml ç¼–å†™","uri":"/ant1/"},{"categories":["k8s"],"content":"k8s è°ƒåº¦è¿‡ç¨‹ ","date":"2022-04-21","objectID":"/k8s6/:0:0","tags":["k8s"],"title":"kubernetes è°ƒåº¦è¿‡ç¨‹","uri":"/k8s6/"},{"categories":["k8s"],"content":"æ‰§è¡Œæ»šåŠ¨å‡çº§ ä¿®æ”¹deployment.ymlæ–‡ä»¶ï¼Œè¿½åŠ rollingUpdate # éƒ¨ç½²åº”ç”¨ apiVersion: apps/v1 kind: Deployment metadata: name: jobcher-blog-deployment labels: app: jobcher-blog spec: replicas: 3 selector: matchLabels: app: jobcher-blog minReadySeconds: 10 #å‡†å¤‡10s strategy: type: RollingUpdate rollingUpdate: maxUnavailable: 1 #æ›´æ–°æœŸé—´ä¸å°‘äº3-1 maxSurge: 1 #æ›´æ–°æœŸé—´ä¸è¶…è¿‡3+1 template: metadata: labels: app: jobcher-blog spec: containers: - name: jobcher-blog-pod image: hub.docker.com/blog/hugo:latest æ‰§è¡Œå‘½ä»¤ kubectl rollout restart deployment jobcher-blog-deployment ","date":"2022-04-21","objectID":"/k8s6/:1:0","tags":["k8s"],"title":"kubernetes è°ƒåº¦è¿‡ç¨‹","uri":"/k8s6/"},{"categories":["go"],"content":"Golang go build ç¼–è¯‘ä¸åŒç³»ç»Ÿä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ ","date":"2022-04-17","objectID":"/go/:0:0","tags":["golang"],"title":"Golang go build ç¼–è¯‘ä¸åŒç‰ˆæœ¬","uri":"/go/"},{"categories":["go"],"content":"Macç³»ç»Ÿç¼–è¯‘ CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build test.go CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build test.go ","date":"2022-04-17","objectID":"/go/:1:0","tags":["golang"],"title":"Golang go build ç¼–è¯‘ä¸åŒç‰ˆæœ¬","uri":"/go/"},{"categories":["go"],"content":"Linuxç³»ç»Ÿç¼–è¯‘ CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build test.go CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build test.go ","date":"2022-04-17","objectID":"/go/:2:0","tags":["golang"],"title":"Golang go build ç¼–è¯‘ä¸åŒç‰ˆæœ¬","uri":"/go/"},{"categories":["go"],"content":"windowsç³»ç»Ÿç¼–è¯‘ SET CGO_ENABLED=0 SET GOOS=darwin3 SET GOARCH=amd64 go build test.go SET CGO_ENABLED=0 SET GOOS=linux SET GOARCH=amd64 go build test.go GOOSï¼šç›®æ ‡å¯æ‰§è¡Œç¨‹åºè¿è¡Œæ“ä½œç³»ç»Ÿï¼Œæ”¯æŒ darwinï¼Œfreebsdï¼Œlinuxï¼Œwindows GOARCHï¼šç›®æ ‡å¯æ‰§è¡Œç¨‹åºæ“ä½œç³»ç»Ÿæ„æ¶ï¼ŒåŒ…æ‹¬ 386ï¼Œamd64ï¼Œarm ","date":"2022-04-17","objectID":"/go/:3:0","tags":["golang"],"title":"Golang go build ç¼–è¯‘ä¸åŒç‰ˆæœ¬","uri":"/go/"},{"categories":["æ—¥å¸¸"],"content":"è®°å½•ä¸€æ¬¡ä¸Šé—¨æ‰“æ•£å·¥ å£¬å¯…å¹´å¤´ç£¨éš¾å¤š äººé—´è§„åˆ™å¥ˆå¾ä½• åŸè¯—ä¸ºæŠŠç˜Ÿç¥é€ é£èµ·å¤§æ±Ÿæ‰¬æ´ªæ³¢ ç–«æƒ…å‡å¼±ï¼Œéé‚€äº²å‹ï¼Œæ— äººç›¸çº¦ï¼Œä½†é—»æ˜”æ—¥æŒšå‹ï¼Œæ„Ÿæ€€å¾€äº‹é‚€å¾å¾€ä¹‹ã€‚æ¬²æŠŠæ®·å‹¤ç‰µæŒ‚è¯‰ï¼Œå¹¸ä¹‹ã€‚é‚è‡³å‹èˆï¼Œè¯‰ä¹‹ï¼šå¸®å¿™è£…ä¸ªç›‘æ§å§ï½ ","date":"2022-04-17","objectID":"/20220416/:0:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"è®°å½•ä¸€æ¬¡ä¸Šé—¨æ‰“æ•£å·¥","uri":"/20220416/"},{"categories":["æ—¥å¸¸"],"content":"ä¹°ç‰©æ–™ å’Œæœ‹å‹ä¸¤ä¸ªäººå‡ºå‘ï¼Œå¸®æœ‹å‹é‚»å±…å®¶è£…ä¸ªç›‘æ§ï¼Œä»–è¿™ä¸ªç›‘æ§æ˜¯è¦æ±‚è£…åœ¨è½¦åº“é‡Œï¼Œä½†æ˜¯ç½‘çº¿è¦ä»4æ¥¼ä¸‹æ”¾ä¸‹å»ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å‡ºé—¨è´­ä¹°ä¸€ä¸‹ç‰©æ–™ï¼š å¸¦RJ45æ¥å£ç›‘æ§ è¶³å¤Ÿé•¿çš„ç½‘çº¿ èµ°äº†10000å¤šæ­¥äººéƒ½èµ°å‚»äº†ï½ ","date":"2022-04-17","objectID":"/20220416/:1:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"è®°å½•ä¸€æ¬¡ä¸Šé—¨æ‰“æ•£å·¥","uri":"/20220416/"},{"categories":["æ—¥å¸¸"],"content":"å¸ƒçº¿ è¿™ä¸ªæ²¡å•¥å¥½è¯´çš„ï¼Œçº¯ç²¹ä½“åŠ›æ´»ï¼Œæ„Ÿè°¢æœ‹å‹çš„æš´é£ä¹‹é”¤ï¼Œæé«˜äº†å·¥ä½œæ•ˆç‡ï¼ŒåŠ å¿«äº†é¡¹ç›®è¿›åº¦ ","date":"2022-04-17","objectID":"/20220416/:2:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"è®°å½•ä¸€æ¬¡ä¸Šé—¨æ‰“æ•£å·¥","uri":"/20220416/"},{"categories":["æ—¥å¸¸"],"content":"æ„Ÿè°¢ æ„Ÿè°¢æœ‹å‹ï¼Œç»™æˆ‘è¿™æ¬¡é¡¹ç›®å®è·µå’Œé”»ç‚¼çš„æœºä¼šè®©æˆ‘è®¤è¯†åˆ°äº†è‡ªå·±çš„èƒ½åŠ›çš„ä¸è¶³ï½ æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-04-17","objectID":"/20220416/:3:0","tags":["æ—¥å¸¸ç”Ÿæ´»"],"title":"è®°å½•ä¸€æ¬¡ä¸Šé—¨æ‰“æ•£å·¥","uri":"/20220416/"},{"categories":["gitlab"],"content":"ansible å‘½ä»¤ Inventoryï¼šAnsibleç®¡ç†çš„ä¸»æœºä¿¡æ¯ï¼ŒåŒ…æ‹¬IPåœ°å€ã€SSHç«¯å£ã€è´¦å·ã€å¯†ç ç­‰ Modulesï¼šä»»åŠ¡å‡æœ‰æ¨¡å—å®Œæˆï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ¨¡å—ï¼Œä¾‹å¦‚ç»å¸¸ç”¨çš„è„šæœ¬ã€‚ Pluginsï¼šä½¿ç”¨æ’ä»¶å¢åŠ Ansibleæ ¸å¿ƒåŠŸèƒ½ï¼Œè‡ªèº«æä¾›äº†å¾ˆå¤šæ’ä»¶ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ’ä»¶ã€‚ä¾‹å¦‚connectionæ’ä»¶ï¼Œç”¨äºè¿æ¥ç›®æ ‡ä¸»æœºã€‚ Playbooksï¼šâ€œå‰§æœ¬â€ï¼Œæ¨¡å—åŒ–å®šä¹‰ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œä¾›å¤–éƒ¨ç»Ÿä¸€è°ƒç”¨ã€‚Ansibleæ ¸å¿ƒåŠŸèƒ½ã€‚ ","date":"2022-04-14","objectID":"/ansible1/:0:0","tags":["ansible"],"title":"ansible å‘½ä»¤","uri":"/ansible1/"},{"categories":["gitlab"],"content":"ç¼–è¾‘ä¸»æœºæ¸…å• [webservers] 192.168.0.20 ansible_ssh_user=root ansible_ssh_pass=â€™200271200â€™ 192.168.0.21 ansible_ssh_user=root ansible_ssh_pass=â€™200271200â€™ 192.168.0.22 ansible_ssh_user=root ansible_ssh_pass=â€™200271200â€™ [dbservers] 10.12.0.100 10.12.0.101 sed -i \"s/#host_key_checking = .*/host_key_checking = False/g\" /etc/ansible/ansible.cfg ","date":"2022-04-14","objectID":"/ansible1/:1:0","tags":["ansible"],"title":"ansible å‘½ä»¤","uri":"/ansible1/"},{"categories":["gitlab"],"content":"å‘½ä»¤è¡Œ ansible all -m ping ansible all -m shell -a \"ls /root\" -u root -k ","date":"2022-04-14","objectID":"/ansible1/:2:0","tags":["ansible"],"title":"ansible å‘½ä»¤","uri":"/ansible1/"},{"categories":["gitlab"],"content":"å¸¸ç”¨æ¨¡å— åœ¨ç›®æ ‡ä¸»æœºæ‰§è¡Œshellå‘½ä»¤ã€‚ shell - name: å°†å‘½ä»¤ç»“æœè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶ shell: somescript.sh \u003e\u003e somelog.txt - name: åˆ‡æ¢ç›®å½•æ‰§è¡Œå‘½ä»¤ shell: cmd: ls -l | grep log chdir: somedir/ - name: ç¼–å†™è„šæœ¬ shell: | if [ 0 -eq 0 ]; then echo yes \u003e /tmp/result else echo no \u003e /tmp/result fi args: executable: /bin/bash copy å°†æ–‡ä»¶å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºã€‚ - name: æ‹·è´æ–‡ä»¶ copy: src: /srv/myfiles/foo.conf dest: /etc/foo.conf owner: foo group: foo mode: u=rw,g=r,o=r # mode: u+rw,g-wx,o-rwx # mode: '0644' backup: yes file ç®¡ç†æ–‡ä»¶å’Œæ–‡ä»¶å±æ€§ã€‚ - name: åˆ›å»ºç›®å½• file: path: /etc/some_directory state: directory mode: '0755' - name: åˆ é™¤æ–‡ä»¶ file: path: /etc/foo.txt state: absent - name: é€’å½’åˆ é™¤ç›®å½• file: path: /etc/foo state: absent presentï¼Œlatestï¼šè¡¨ç¤ºå®‰è£… absentï¼šè¡¨ç¤ºå¸è½½ yum è½¯ä»¶åŒ…ç®¡ç†ã€‚ - name: å®‰è£…æœ€æ–°ç‰ˆapache yum: name: httpd state: latest - name: å®‰è£…åˆ—è¡¨ä¸­æ‰€æœ‰åŒ… yum: name: - nginx - postgresql - postgresql-server state: present - name: å¸è½½apacheåŒ… yum: name: httpd state: absent - name: æ›´æ–°æ‰€æœ‰åŒ… yum: name: '*' state: latest - name: å®‰è£…nginxæ¥è‡ªè¿œç¨‹repo yum: name: http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm # name: /usr/local/src/nginx-release-centos-6-0.el6.ngx.noarch.rpm state: present service/systemd ç®¡ç†æœåŠ¡ - name: æœåŠ¡ç®¡ç† service: name: httpd state: started #state: stopped #state: restarted #state: reloaded - name: è®¾ç½®å¼€æœºå¯åŠ¨ service: name: httpd enabled: yes unarchive è§£å‹ - name: è§£å‹ unarchive: src=test.tar.gz dest=/tmp debug æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰“å°è¯­å¥ã€‚ - debug: msg: System {{ inventory_hostname }} has uuid {{ ansible_product_uuid }} - name: æ˜¾ç¤ºä¸»æœºå·²çŸ¥çš„æ‰€æœ‰å˜é‡ debug: var: hostvars[inventory_hostname] verbosity: 4 ","date":"2022-04-14","objectID":"/ansible1/:3:0","tags":["ansible"],"title":"ansible å‘½ä»¤","uri":"/ansible1/"},{"categories":["æ—¥å¸¸"],"content":"Antä¸­å¦‚ä½•æ·»åŠ ç¬¬ä¸‰æ–¹jaråŒ…ä¾èµ– å¦‚æœä½¿ç”¨antè¿›è¡Œjavaé¡¹ç›®çš„ç¼–è¯‘éƒ¨ç½²ï¼Œé‚£æ€ä¹ˆæ·»åŠ ç¬¬ä¸‰æ–¹jaråŒ…çš„ä¾èµ–å‘¢ï¼Ÿæ–¹æ³•å¦‚ä¸‹ï¼š åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºlibç›®å½•ï¼Œå¹¶æŠŠæ‰€æœ‰éœ€è¦çš„ç¬¬ä¸‰æ–¹jaråŒ…æ”¾åˆ°æ­¤ç›®å½•ä¸‹ã€‚ åœ¨build.xmlä¸­ä¾æ¬¡æ·»åŠ ï¼špathã€propertyï¼Œå¹¶åœ¨javacä¸­æ·»åŠ classpathï¼Œæ·»åŠ unjarã€‚å®Œæ•´é…ç½®å¦‚ä¸‹ï¼š \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003cproject name=\"MyTool\" default=\"build\" basedir=\".\"\u003e \u003cdescription\u003eThe ant project to build MyTool.\u003c/description\u003e \u003cproperty name=\"srcDir\" location=\"src\" description=\"æºæ–‡ä»¶çš„å­˜æ”¾ç›®å½•\" /\u003e \u003cproperty name=\"libDir\" location=\"lib\" description=\"ç¬¬ä¸‰æ–¹jaråŒ…çš„å­˜æ”¾ç›®å½•\" /\u003e \u003cproperty name=\"antDir\" location=\"ant\" description=\"ç¼–è¯‘åæ‰€æœ‰æ–‡ä»¶å­˜æ”¾çš„æ ¹ç›®å½•\" /\u003e \u003cproperty name=\"binDir\" location=\"${antDir}/bin\" description=\"ç¼–è¯‘åclassæ–‡ä»¶çš„å­˜æ”¾ç›®å½•\" /\u003e \u003cproperty name=\"jarDir\" location=\"${antDir}/jar\" description=\"æ‰“åŒ…åjaråŒ…çš„å­˜æ”¾ç›®å½•\" /\u003e \u003cproperty name=\"jarFile\" location=\"${jarDir}/MyTool.jar\" description=\"æ‰“åŒ…åjaråŒ…å­˜æ”¾çš„å®Œæ•´è·¯å¾„\" /\u003e \u003cproperty name=\"package\" value=\"com.xiboliya.mytool\" description=\"åŒ…å\" /\u003e \u003cproperty name=\"mainClass\" value=\"MyTool\" description=\"ä¸»ç±»å\" /\u003e \u003cproperty name=\"resFromDir\" location=\"res\" description=\"èµ„æºæ–‡ä»¶çš„æºç›®å½•\" /\u003e \u003cproperty name=\"resToDir\" location=\"${binDir}/res\" description=\"èµ„æºæ–‡ä»¶çš„ç›®æ ‡ç›®å½•\" /\u003e \u003cpath id=\"libPath\" description=\"ç¼–è¯‘æ—¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹jaråŒ…çš„å­˜æ”¾è·¯å¾„\"\u003e \u003cfileset dir=\"${libDir}\" erroronmissingdir=\"false\"\u003e \u003cinclude name=\"*.jar\" /\u003e \u003c/fileset\u003e \u003c/path\u003e \u003cproperty name=\"classpath\" refid=\"libPath\" description=\"ç¼–è¯‘æ—¶ä¾èµ–çš„ç¬¬ä¸‰æ–¹jaråŒ…çš„å­˜æ”¾è·¯å¾„\" /\u003e \u003ctarget name=\"init\" description=\"åˆå§‹åŒ–\"\u003e \u003cdelete dir=\"${binDir}\" /\u003e \u003cdelete dir=\"${jarDir}\" /\u003e \u003cmkdir dir=\"${binDir}\" /\u003e \u003cmkdir dir=\"${jarDir}\" /\u003e \u003ccopy todir=\"${resToDir}\" description=\"å¤åˆ¶èµ„æºæ–‡ä»¶\"\u003e \u003cfileset dir=\"${resFromDir}\" /\u003e \u003c/copy\u003e \u003c/target\u003e \u003ctarget name=\"compile\" depends=\"init\" description=\"ç¼–è¯‘ä»£ç \"\u003e \u003cjavac srcdir=\"${srcDir}\" destdir=\"${binDir}\" classpath=\"${classpath}\" includeAntRuntime=\"false\"\u003e \u003ccompilerarg value=\"-Xlint:unchecked\"/\u003e \u003ccompilerarg value=\"-Xlint:deprecation\"/\u003e \u003c/javac\u003e \u003c/target\u003e \u003ctarget name=\"unjarLib\" depends=\"init\" description=\"è§£å‹ç¬¬ä¸‰æ–¹jaråŒ…ï¼Œä»¥ä¾¿äºé‡æ–°æ‰“åŒ…å…¥ç¨‹åºjaråŒ…ä¸­\"\u003e \u003cunjar dest=\"${binDir}\"\u003e \u003cfileset dir=\"${libDir}\"\u003e \u003cinclude name=\"**/*.jar\" /\u003e \u003c/fileset\u003e \u003cpatternset\u003e \u003cexclude name=\"META-INF\"/\u003e \u003cexclude name=\"META-INF/MANIFEST.MF\"/\u003e \u003c/patternset\u003e \u003c/unjar\u003e \u003c/target\u003e \u003ctarget name=\"makeJar\" depends=\"init,compile,unjarLib\" description=\"ç”ŸæˆjaråŒ…\"\u003e \u003cjar destfile=\"${jarFile}\" basedir=\"${binDir}\" excludes=\"**/Thumbs.db\" description=\"æ‰“åŒ…ä¸ºjaræ–‡ä»¶ï¼Œå¹¶æ’é™¤Thumbs.dbæ–‡ä»¶\"\u003e \u003cmanifest\u003e \u003cattribute name=\"Main-Class\" value=\"${package}.${mainClass}\" /\u003e \u003c/manifest\u003e \u003c/jar\u003e \u003c/target\u003e \u003ctarget name=\"build\" depends=\"init,compile,makeJar\" description=\"ç¼–è¯‘å¹¶æ‰“åŒ…\"\u003e \u003cecho message=\"Ant is building the project.\" /\u003e \u003c/target\u003e \u003c/project\u003e æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-04-14","objectID":"/ant/:0:0","tags":["javascript"],"title":"Antä¸­å¦‚ä½•æ·»åŠ ç¬¬ä¸‰æ–¹jaråŒ…ä¾èµ–","uri":"/ant/"},{"categories":["k8s"],"content":"k8sæœ¬åœ°è”è°ƒç¥å™¨kt-connect è½¬è½½è‡ªBboysoulâ€™sBlog k8sé›†ç¾¤å†…éƒ¨çš„æœåŠ¡ç½‘ç»œæ€ä¹ˆå’Œæˆ‘ä»¬æœ¬åœ°ç½‘ç»œæ‰“é€šã€‚kt-connectå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ ","date":"2022-04-14","objectID":"/kt-connect/:0:0","tags":["k8s"],"title":"k8sæœ¬åœ°è”è°ƒç¥å™¨kt-connect","uri":"/kt-connect/"},{"categories":["k8s"],"content":"ä½¿ç”¨æ–¹æ³• ä¸‹è½½å®‰è£…ä»€ä¹ˆçš„éƒ½å¾ˆç®€å•ï¼Œä¸€ä¸ªäºŒè¿›åˆ¶è€Œå·² https://github.com/alibaba/kt-connect å¦‚æœä½ å®‰è£…å¥½äº†ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä½¿ç”¨å°±å¥½äº† sudo ktctl connect å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šé…ç½®æ–‡ä»¶ sudo ktctl --kubeconfig ~/.kube/local connect æ‰§è¡Œå®Œæˆä¹‹åï¼Œè¿™ä¸ªé›†ç¾¤çš„æ‰€æœ‰svcéƒ½å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°è§£æï¼Œå½“ç„¶ç›´æ¥ping podçš„ipä¹Ÿæ˜¯å¯ä»¥çš„ ","date":"2022-04-14","objectID":"/kt-connect/:1:0","tags":["k8s"],"title":"k8sæœ¬åœ°è”è°ƒç¥å™¨kt-connect","uri":"/kt-connect/"},{"categories":["k8s"],"content":"OpenELBï¼šäº‘åŸç”Ÿè´Ÿè½½å‡è¡¡å™¨æ’ä»¶ OpenELB æ˜¯ä¸€ä¸ªå¼€æºçš„äº‘åŸç”Ÿè´Ÿè½½å‡è¡¡å™¨å®ç°ï¼Œå¯ä»¥åœ¨åŸºäºè£¸é‡‘å±æœåŠ¡å™¨ã€è¾¹ç¼˜ä»¥åŠè™šæ‹ŸåŒ–çš„ Kubernetes ç¯å¢ƒä¸­ä½¿ç”¨ LoadBalancer ç±»å‹çš„ Service å¯¹å¤–æš´éœ²æœåŠ¡ã€‚ ","date":"2022-04-13","objectID":"/openelb/:0:0","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"åœ¨ Kubernetes ä¸­å®‰è£… OpenELB kubectl apply -f https://raw.githubusercontent.com/openelb/openelb/master/deploy/openelb.yaml æŸ¥çœ‹çŠ¶æ€ kubectl get po -n openelb-system ","date":"2022-04-13","objectID":"/openelb/:1:0","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"ä½¿ç”¨ kubectl åˆ é™¤ OpenELB kubectl delete -f https://raw.githubusercontent.com/openelb/openelb/master/deploy/openelb.yaml kubectl get ns ","date":"2022-04-13","objectID":"/openelb/:2:0","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"é…ç½® OpenELB kubectl edit configmap kube-proxy -n kube-system # ä¿®æ”¹ ç½‘å¡ ipvs: strictARP: true ","date":"2022-04-13","objectID":"/openelb/:3:0","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"é‡å¯ç»„ä»¶ kubectl rollout restart daemonset kube-proxy -n kube-system ","date":"2022-04-13","objectID":"/openelb/:3:1","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"ä¸º master1 èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ª annotation æ¥æŒ‡å®šç½‘å¡ï¼š kubectl annotate nodes master1 layer2.openelb.kubesphere.io/v1alpha1=\"192.168.0.2\" ","date":"2022-04-13","objectID":"/openelb/:3:2","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"åˆ›å»ºåœ°å€æ±  layer2-eip.yaml apiVersion: network.kubesphere.io/v1alpha2 kind: Eip metadata: name: layer2-eip spec: address: 192.168.0.91-192.168.0.100 interface: eth0 protocol: layer2 ","date":"2022-04-13","objectID":"/openelb/:3:3","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"åˆ›å»ºéƒ¨ç½² jobcher-service.yaml #æš´éœ²ç«¯å£ apiVersion: v1 kind: Service metadata: name: jobcher-service annotations: lb.kubesphere.io/v1alpha1: openelb protocol.openelb.kubesphere.io/v1alpha1: layer2 eip.openelb.kubesphere.io/v1alpha2: layer2-eip labels: app: jobcher-blog spec: selector: app: jobcher-blog ports: - name: jobcher-port protocol: TCP port: 80 targetPort: 80 type: LoadBalancer ","date":"2022-04-13","objectID":"/openelb/:3:4","tags":["k8s"],"title":"OpenELBï¼šè®©k8sç§æœ‰ç¯å¢ƒå¯¹å¤–æš´éœ²ç«¯å£","uri":"/openelb/"},{"categories":["k8s"],"content":"kubernetes ansible è‡ªåŠ¨åŒ–éƒ¨ç½² ","date":"2022-04-08","objectID":"/k8s5/:0:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"æœåŠ¡å™¨è§„åˆ’ è§’è‰² IP ç»„ä»¶ k8s-master1 10.12.12.15 kube-apiserver kube-controller-manager kube-scheduler etcd k8s-master2 10.12.12.17 kube-apiserver kube-controller-manager kube-scheduler etcd k8s-02 10.12.12.22 kubelet kube-proxy docker etcd k8s-03 10.12.12.21 kubelet kube-proxy docker etcd load Balancer(master) 10.12.12.15 10.12.12.23(VIP) nginx keepalived load Balancer(backup) 10.12.12.17 nginx keepalived ","date":"2022-04-08","objectID":"/k8s5/:1:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"ç³»ç»Ÿåˆå§‹åŒ– å…³é—­selinuxï¼Œfirewalld å…³é—­swap æ—¶é—´åŒæ­¥ å†™hosts sshå…å¯†ï¼ˆå¯é€‰ï¼‰ ","date":"2022-04-08","objectID":"/k8s5/:2:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"etcdé›†ç¾¤éƒ¨ç½² ç”Ÿæˆetcdè¯ä¹¦ éƒ¨ç½²ä¸‰ä¸ªETCé›†ç¾¤ æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ ","date":"2022-04-08","objectID":"/k8s5/:3:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"éƒ¨ç½²MasterÃŸ ç”Ÿæˆapiserverè¯ä¹¦ éƒ¨ç½²apiserverã€controller-managerå’Œschedulerç»„ä»¶ å¯åŠ¨TLS Bootstrapping ","date":"2022-04-08","objectID":"/k8s5/:4:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"éƒ¨ç½²Node å®‰è£…Docker éƒ¨ç½²Kubeletå’Œkube-proxy åœ¨Masterä¸Šè¿è¡Œä¸ºæ–°Nodeé¢å‘è¯ä¹¦ æˆæƒapiserverè®¿é—®kubelet ","date":"2022-04-08","objectID":"/k8s5/:5:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"éƒ¨ç½²æ’ä»¶ï¼ˆå‡†å¤‡å¥½é•œåƒï¼‰ Flannel Web UI CoreDNS Ingress Controller ","date":"2022-04-08","objectID":"/k8s5/:6:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["k8s"],"content":"Masteré«˜å¯ç”¨ å¢åŠ MasterèŠ‚ç‚¹ï¼ˆä¸Master1ä¸€è‡´ï¼‰ éƒ¨ç½²nginxè´Ÿè½½å‡è¡¡å™¨ Nginx+Keepalived é«˜å¯ç”¨ ä¿®æ”¹Nodeè¿æ¥VIP ","date":"2022-04-08","objectID":"/k8s5/:7:0","tags":["k8s"],"title":"kubernetes ansibleè‡ªåŠ¨åŒ–éƒ¨ç½²","uri":"/k8s5/"},{"categories":["gitlab"],"content":"Gité£è¡Œè§„åˆ™(Flight Rules) ç¼–è¾‘æäº¤(editting commits) æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ? æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº† æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹ æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶ æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit) åˆ é™¤ä»»æ„æäº¤(commit) æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹ æš‚å­˜(Staging) æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit) æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨ æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥ æœªæš‚å­˜(Unstaged)çš„å†…å®¹ æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯ æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes) æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹ åˆ†æ”¯(Branches) æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯ æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´ æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†main æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶ æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯ æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯ æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯ æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯ Rebasing å’Œåˆå¹¶(Merging) æˆ‘æƒ³æ’¤é”€rebase/merge æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push) æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit) å®‰å…¨åˆå¹¶(merging)ç­–ç•¥ æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit) æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit) æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº† äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜ è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°â€™noopâ€™ æœ‰å†²çªçš„æƒ…å†µ Stash æš‚å­˜æ‰€æœ‰æ”¹åŠ¨ æš‚å­˜æŒ‡å®šæ–‡ä»¶ æš‚å­˜æ—¶è®°å½•æ¶ˆæ¯ ä½¿ç”¨æŸä¸ªæŒ‡å®šæš‚å­˜ æš‚å­˜æ—¶ä¿ç•™æœªæš‚å­˜çš„å†…å®¹ æ‚é¡¹(Miscellaneous Objects) å…‹éš†æ‰€æœ‰å­æ¨¡å— åˆ é™¤æ ‡ç­¾(tag) æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag) å·²åˆ é™¤è¡¥ä¸(patch) è·Ÿè¸ªæ–‡ä»¶(Tracking Files) æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹ æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶ é…ç½®(Configuration) æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias) æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç  æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ å…¶å®ƒèµ„æº(Other Resources) ä¹¦(Books) æ•™ç¨‹(Tutorials) è„šæœ¬å’Œå·¥å…·(Scripts and Tools) GUIå®¢æˆ·ç«¯(GUI Clients) ","date":"2022-03-24","objectID":"/git3/:0:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"ç¼–è¾‘æäº¤(editting commits) ","date":"2022-03-24","objectID":"/git3/:1:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘åˆšæ‰æäº¤äº†ä»€ä¹ˆ? å¦‚æœä½ ç”¨ git commit -a æäº¤äº†ä¸€æ¬¡å˜åŒ–(changes)ï¼Œè€Œä½ åˆä¸ç¡®å®šåˆ°åº•è¿™æ¬¡æäº¤äº†å“ªäº›å†…å®¹ã€‚ ä½ å°±å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ˜¾ç¤ºå½“å‰HEADä¸Šçš„æœ€è¿‘ä¸€æ¬¡çš„æäº¤(commit): (main)$ git show æˆ–è€… $ git log -n1 -p ","date":"2022-03-24","objectID":"/git3/:1:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº† å¦‚æœä½ çš„æäº¤ä¿¡æ¯(commit message)å†™é”™äº†ä¸”è¿™æ¬¡æäº¤(commit)è¿˜æ²¡æœ‰æ¨(push), ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥ä¿®æ”¹æäº¤ä¿¡æ¯(commit message): $ git commit --amend --only è¿™ä¼šæ‰“å¼€ä½ çš„é»˜è®¤ç¼–è¾‘å™¨, åœ¨è¿™é‡Œä½ å¯ä»¥ç¼–è¾‘ä¿¡æ¯. å¦ä¸€æ–¹é¢, ä½ ä¹Ÿå¯ä»¥ç”¨ä¸€æ¡å‘½ä»¤ä¸€æ¬¡å®Œæˆ: $ git commit --amend --only -m 'xxxxxxx' å¦‚æœä½ å·²ç»æ¨(push)äº†è¿™æ¬¡æäº¤(commit), ä½ å¯ä»¥ä¿®æ”¹è¿™æ¬¡æäº¤(commit)ç„¶åå¼ºæ¨(force push), ä½†æ˜¯ä¸æ¨èè¿™ä¹ˆåšã€‚ ","date":"2022-03-24","objectID":"/git3/:1:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æäº¤(commit)é‡Œçš„ç”¨æˆ·åå’Œé‚®ç®±ä¸å¯¹ å¦‚æœè¿™åªæ˜¯å•ä¸ªæäº¤(commit)ï¼Œä¿®æ”¹å®ƒï¼š $ git commit --amend --author \"New Authorname \u003cauthoremail@mydomain.com\u003e\" å¦‚æœä½ éœ€è¦ä¿®æ”¹æ‰€æœ‰å†å², å‚è€ƒ â€˜git filter-branchâ€™çš„æŒ‡å—é¡µ. ","date":"2022-03-24","objectID":"/git3/:1:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶ é€šè¿‡ä¸‹é¢çš„æ–¹æ³•ï¼Œä»ä¸€ä¸ªæäº¤(commit)é‡Œç§»é™¤ä¸€ä¸ªæ–‡ä»¶: $ git checkout HEAD^ myfile $ git add -A $ git commit --amend è¿™å°†éå¸¸æœ‰ç”¨ï¼Œå½“ä½ æœ‰ä¸€ä¸ªå¼€æ”¾çš„è¡¥ä¸(open patch)ï¼Œä½ å¾€ä¸Šé¢æäº¤äº†ä¸€ä¸ªä¸å¿…è¦çš„æ–‡ä»¶ï¼Œä½ éœ€è¦å¼ºæ¨(force push)å»æ›´æ–°è¿™ä¸ªè¿œç¨‹è¡¥ä¸ã€‚ ","date":"2022-03-24","objectID":"/git3/:1:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³åˆ é™¤æˆ‘çš„çš„æœ€åä¸€æ¬¡æäº¤(commit) å¦‚æœä½ éœ€è¦åˆ é™¤æ¨äº†çš„æäº¤(pushed commits)ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚å¯æ˜¯ï¼Œè¿™ä¼šä¸å¯é€†çš„æ”¹å˜ä½ çš„å†å²ï¼Œä¹Ÿä¼šæä¹±é‚£äº›å·²ç»ä»è¯¥ä»“åº“æ‹‰å–(pulled)äº†çš„äººçš„å†å²ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœä½ ä¸æ˜¯å¾ˆç¡®å®šï¼Œåƒä¸‡ä¸è¦è¿™ä¹ˆåšã€‚ $ git reset HEAD^ --hard $ git push -f [remote] [branch] å¦‚æœä½ è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹, æŠŠGité‡ç½®(reset)åˆ°ä½ æœ€åä¸€æ¬¡æäº¤å‰çš„çŠ¶æ€å°±å¯ä»¥äº†(åŒæ—¶ä¿å­˜æš‚å­˜çš„å˜åŒ–): (my-branch*)$ git reset --soft HEAD@{1} è¿™åªèƒ½åœ¨æ²¡æœ‰æ¨é€ä¹‹å‰æœ‰ç”¨. å¦‚æœä½ å·²ç»æ¨äº†, å”¯ä¸€å®‰å…¨èƒ½åšçš„æ˜¯ git revert SHAofBadCommitï¼Œ é‚£ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤(commit)ç”¨äºæ’¤æ¶ˆå‰ä¸€ä¸ªæäº¤çš„æ‰€æœ‰å˜åŒ–(changes)ï¼› æˆ–è€…, å¦‚æœä½ æ¨çš„è¿™ä¸ªåˆ†æ”¯æ˜¯rebase-safeçš„ (ä¾‹å¦‚ï¼š å…¶å®ƒå¼€å‘è€…ä¸ä¼šä»è¿™ä¸ªåˆ†æ”¯æ‹‰), åªéœ€è¦ä½¿ç”¨ git push -fï¼› æ›´å¤š, è¯·å‚è€ƒ the above sectionã€‚ ","date":"2022-03-24","objectID":"/git3/:1:5","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"åˆ é™¤ä»»æ„æäº¤(commit) åŒæ ·çš„è­¦å‘Šï¼šä¸åˆ°ä¸‡ä¸å¾—å·²çš„æ—¶å€™ä¸è¦è¿™ä¹ˆåš. $ git rebase --onto SHA1_OF_BAD_COMMIT^ SHA1_OF_BAD_COMMIT $ git push -f [remote] [branch] æˆ–è€…åšä¸€ä¸ª äº¤äº’å¼rebase åˆ é™¤é‚£äº›ä½ æƒ³è¦åˆ é™¤çš„æäº¤(commit)é‡Œæ‰€å¯¹åº”çš„è¡Œã€‚ ","date":"2022-03-24","objectID":"/git3/:1:6","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘å°è¯•æ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤(amended commit)åˆ°è¿œç¨‹ï¼Œä½†æ˜¯æŠ¥é”™ï¼š To https://github.com/yourusername/repo.git ! [rejected] mybranch -\u003e mybranch (non-fast-forward) error: failed to push some refs to 'https://github.com/tanay1337/webmaker.org.git' hint: Updates were rejected because the tip of your current branch is behind hint: its remote counterpart. Integrate the remote changes (e.g. hint: 'git pull ...') before pushing again. hint: See the 'Note about fast-forwards' in 'git push --help' for details. æ³¨æ„, rebasing(è§ä¸‹é¢)å’Œä¿®æ­£(amending)ä¼šç”¨ä¸€ä¸ªæ–°çš„æäº¤(commit)ä»£æ›¿æ—§çš„, æ‰€ä»¥å¦‚æœä¹‹å‰ä½ å·²ç»å¾€è¿œç¨‹ä»“åº“ä¸Šæ¨è¿‡ä¸€æ¬¡ä¿®æ­£å‰çš„æäº¤(commit)ï¼Œé‚£ä½ ç°åœ¨å°±å¿…é¡»å¼ºæ¨(force push) (-f)ã€‚ æ³¨æ„ â€“ æ€»æ˜¯ ç¡®ä¿ä½ æŒ‡æ˜ä¸€ä¸ªåˆ†æ”¯! (my-branch)$ git push origin mybranch -f ä¸€èˆ¬æ¥è¯´, è¦é¿å…å¼ºæ¨. æœ€å¥½æ˜¯åˆ›å»ºå’Œæ¨(push)ä¸€ä¸ªæ–°çš„æäº¤(commit)ï¼Œè€Œä¸æ˜¯å¼ºæ¨ä¸€ä¸ªä¿®æ­£åçš„æäº¤ã€‚åè€…ä¼šä½¿é‚£äº›ä¸è¯¥åˆ†æ”¯æˆ–è¯¥åˆ†æ”¯çš„å­åˆ†æ”¯å·¥ä½œçš„å¼€å‘è€…ï¼Œåœ¨æºå†å²ä¸­äº§ç”Ÿå†²çªã€‚ ","date":"2022-03-24","objectID":"/git3/:1:7","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æ„å¤–çš„åšäº†ä¸€æ¬¡ç¡¬é‡ç½®(hard reset)ï¼Œæˆ‘æƒ³æ‰¾å›æˆ‘çš„å†…å®¹ å¦‚æœä½ æ„å¤–çš„åšäº† git reset --hard, ä½ é€šå¸¸èƒ½æ‰¾å›ä½ çš„æäº¤(commit), å› ä¸ºGitå¯¹æ¯ä»¶äº‹éƒ½ä¼šæœ‰æ—¥å¿—ï¼Œä¸”éƒ½ä¼šä¿å­˜å‡ å¤©ã€‚ (main)$ git reflog ä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªä½ è¿‡å»æäº¤(commit)çš„åˆ—è¡¨, å’Œä¸€ä¸ªé‡ç½®çš„æäº¤ã€‚ é€‰æ‹©ä½ æƒ³è¦å›åˆ°çš„æäº¤(commit)çš„SHAï¼Œå†é‡ç½®ä¸€æ¬¡: (main)$ git reset --hard SHA1234 è¿™æ ·å°±å®Œæˆäº†ã€‚ ","date":"2022-03-24","objectID":"/git3/:1:8","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æš‚å­˜(Staging) ","date":"2022-03-24","objectID":"/git3/:2:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘éœ€è¦æŠŠæš‚å­˜çš„å†…å®¹æ·»åŠ åˆ°ä¸Šä¸€æ¬¡çš„æäº¤(commit) (my-branch*)$ git commit --amend ","date":"2022-03-24","objectID":"/git3/:2:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³è¦æš‚å­˜ä¸€ä¸ªæ–°æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ–‡ä»¶çš„å…¨éƒ¨ ä¸€èˆ¬æ¥è¯´, å¦‚æœä½ æƒ³æš‚å­˜ä¸€ä¸ªæ–‡ä»¶çš„ä¸€éƒ¨åˆ†, ä½ å¯è¿™æ ·åš: $ git add --patch filename.x -p ç®€å†™ã€‚è¿™ä¼šæ‰“å¼€äº¤äº’æ¨¡å¼ï¼Œ ä½ å°†èƒ½å¤Ÿç”¨ s é€‰é¡¹æ¥åˆ†éš”æäº¤(commit)ï¼› ç„¶è€Œ, å¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯æ–°çš„, ä¼šæ²¡æœ‰è¿™ä¸ªé€‰æ‹©ï¼Œ æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶æ—¶, è¿™æ ·åš: $ git add -N filename.x ç„¶å, ä½ éœ€è¦ç”¨ e é€‰é¡¹æ¥æ‰‹åŠ¨é€‰æ‹©éœ€è¦æ·»åŠ çš„è¡Œï¼Œæ‰§è¡Œ git diff --cached å°†ä¼šæ˜¾ç¤ºå“ªäº›è¡Œæš‚å­˜äº†å“ªäº›è¡Œåªæ˜¯ä¿å­˜åœ¨æœ¬åœ°äº†ã€‚ ","date":"2022-03-24","objectID":"/git3/:2:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³æŠŠåœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„å˜åŒ–(changes)åŠ åˆ°ä¸¤ä¸ªæäº¤(commit)é‡Œ git add ä¼šæŠŠæ•´ä¸ªæ–‡ä»¶åŠ å…¥åˆ°ä¸€ä¸ªæäº¤. git add -p å…è®¸äº¤äº’å¼çš„é€‰æ‹©ä½ æƒ³è¦æäº¤çš„éƒ¨åˆ†. ","date":"2022-03-24","objectID":"/git3/:2:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³æŠŠæš‚å­˜çš„å†…å®¹å˜æˆæœªæš‚å­˜ï¼ŒæŠŠæœªæš‚å­˜çš„å†…å®¹æš‚å­˜èµ·æ¥ å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥å°†æ‰€æœ‰çš„å†…å®¹å˜ä¸ºæœªæš‚å­˜ï¼Œç„¶åå†é€‰æ‹©ä½ æƒ³è¦çš„å†…å®¹è¿›è¡Œcommitã€‚ ä½†å‡å®šä½ å°±æ˜¯æƒ³è¦è¿™ä¹ˆåšï¼Œè¿™é‡Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„commitæ¥ä¿å­˜ä½ å·²æš‚å­˜çš„å†…å®¹ï¼Œç„¶åæš‚å­˜ä½ çš„æœªæš‚å­˜çš„å†…å®¹å¹¶è¿›è¡Œstashã€‚ç„¶åresetæœ€åä¸€ä¸ªcommitå°†åŸæœ¬æš‚å­˜çš„å†…å®¹å˜ä¸ºæœªæš‚å­˜ï¼Œæœ€åstash popå›æ¥ã€‚ $ git commit -m \"WIP\" $ git add . $ git stash $ git reset HEAD^ $ git stash pop --index 0 æ³¨æ„1: è¿™é‡Œä½¿ç”¨popä»…ä»…æ˜¯å› ä¸ºæƒ³å°½å¯èƒ½ä¿æŒå¹‚ç­‰ã€‚ æ³¨æ„2: å‡å¦‚ä½ ä¸åŠ ä¸Š--indexä½ ä¼šæŠŠæš‚å­˜çš„æ–‡ä»¶æ ‡è®°ä¸ºä¸ºå­˜å‚¨.è¿™ä¸ªé“¾æ¥ è§£é‡Šå¾—æ¯”è¾ƒæ¸…æ¥šã€‚ï¼ˆä¸è¿‡æ˜¯è‹±æ–‡çš„ï¼Œå…¶å¤§æ„æ˜¯è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºåº•å±‚çš„é—®é¢˜ï¼Œstashæ—¶ä¼šåš2ä¸ªcommitï¼Œå…¶ä¸­ä¸€ä¸ªä¼šè®°å½•indexçŠ¶æ€ï¼Œstagedçš„æ–‡ä»¶ç­‰ä¸œè¥¿ï¼Œå¦ä¸€ä¸ªè®°å½•worktreeå’Œå…¶ä»–çš„ä¸€äº›ä¸œè¥¿ï¼Œå¦‚æœä½ ä¸åœ¨applyæ—¶åŠ indexï¼Œgitä¼šæŠŠä¸¤ä¸ªä¸€èµ·é”€æ¯ï¼Œæ‰€ä»¥stagedé‡Œå°±ç©ºäº†ï¼‰ã€‚ ","date":"2022-03-24","objectID":"/git3/:2:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æœªæš‚å­˜(Unstaged)çš„å†…å®¹ ","date":"2022-03-24","objectID":"/git3/:3:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ $ git checkout -b my-branch ","date":"2022-03-24","objectID":"/git3/:3:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³æŠŠæœªæš‚å­˜çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå·²å­˜åœ¨çš„åˆ†æ”¯ $ git stash $ git checkout my-branch $ git stash pop ","date":"2022-03-24","objectID":"/git3/:3:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ä¸¢å¼ƒæœ¬åœ°æœªæäº¤çš„å˜åŒ–(uncommitted changes) å¦‚æœä½ åªæ˜¯æƒ³é‡ç½®æº(origin)å’Œä½ æœ¬åœ°(local)ä¹‹é—´çš„ä¸€äº›æäº¤(commit)ï¼Œä½ å¯ä»¥ï¼š # one commit (my-branch)$ git reset --hard HEAD^ # two commits (my-branch)$ git reset --hard HEAD^^ # four commits (my-branch)$ git reset --hard HEAD~4 # or (main)$ git checkout -f é‡ç½®æŸä¸ªç‰¹æ®Šçš„æ–‡ä»¶, ä½ å¯ä»¥ç”¨æ–‡ä»¶ååšä¸ºå‚æ•°: $ git reset filename ","date":"2022-03-24","objectID":"/git3/:3:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ä¸¢å¼ƒæŸäº›æœªæš‚å­˜çš„å†…å®¹ å¦‚æœä½ æƒ³ä¸¢å¼ƒå·¥ä½œæ‹·è´ä¸­çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ã€‚ ç­¾å‡º(checkout)ä¸éœ€è¦çš„å†…å®¹ï¼Œä¿ç•™éœ€è¦çš„ã€‚ $ git checkout -p # Answer y to all of the snippets you want to drop å¦å¤–ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨ stashï¼Œ Stashæ‰€æœ‰è¦ä¿ç•™ä¸‹çš„å†…å®¹, é‡ç½®å·¥ä½œæ‹·è´, é‡æ–°åº”ç”¨ä¿ç•™çš„éƒ¨åˆ†ã€‚ $ git stash -p # Select all of the snippets you want to save $ git reset --hard $ git stash pop æˆ–è€…, stash ä½ ä¸éœ€è¦çš„éƒ¨åˆ†, ç„¶åstash dropã€‚ $ git stash -p # Select all of the snippets you don't want to save $ git stash drop ","date":"2022-03-24","objectID":"/git3/:3:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"åˆ†æ”¯(Branches) ","date":"2022-03-24","objectID":"/git3/:4:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘ä»é”™è¯¯çš„åˆ†æ”¯æ‹‰å–äº†å†…å®¹ï¼Œæˆ–æŠŠå†…å®¹æ‹‰å–åˆ°äº†é”™è¯¯çš„åˆ†æ”¯ è¿™æ˜¯å¦å¤–ä¸€ç§ä½¿ç”¨ git reflog æƒ…å†µï¼Œæ‰¾åˆ°åœ¨è¿™æ¬¡é”™è¯¯æ‹‰(pull) ä¹‹å‰HEADçš„æŒ‡å‘ã€‚ (main)$ git reflog ab7555f HEAD@{0}: pull origin wrong-branch: Fast-forward c5bc55a HEAD@{1}: checkout: checkout message goes here é‡ç½®åˆ†æ”¯åˆ°ä½ æ‰€éœ€çš„æäº¤(desired commit): $ git reset --hard c5bc55a å®Œæˆã€‚ ","date":"2022-03-24","objectID":"/git3/:4:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³æ‰”æ‰æœ¬åœ°çš„æäº¤(commit)ï¼Œä»¥ä¾¿æˆ‘çš„åˆ†æ”¯ä¸è¿œç¨‹çš„ä¿æŒä¸€è‡´ å…ˆç¡®è®¤ä½ æ²¡æœ‰æ¨(push)ä½ çš„å†…å®¹åˆ°è¿œç¨‹ã€‚ git status ä¼šæ˜¾ç¤ºä½ é¢†å…ˆ(ahead)æº(origin)å¤šå°‘ä¸ªæäº¤: (my-branch)$ git status # On branch my-branch # Your branch is ahead of 'origin/my-branch' by 2 commits. # (use \"git push\" to publish your local commits) # ä¸€ç§æ–¹æ³•æ˜¯: (main)$ git reset --hard origin/my-branch ","date":"2022-03-24","objectID":"/git3/:4:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘éœ€è¦æäº¤åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä½†é”™è¯¯çš„æäº¤åˆ°äº†main åœ¨mainä¸‹åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä¸åˆ‡æ¢åˆ°æ–°åˆ†æ”¯,ä»åœ¨mainä¸‹: (main)$ git branch my-branch æŠŠmainåˆ†æ”¯é‡ç½®åˆ°å‰ä¸€ä¸ªæäº¤: (main)$ git reset --hard HEAD^ HEAD^ æ˜¯ HEAD^1 çš„ç®€å†™ï¼Œä½ å¯ä»¥é€šè¿‡æŒ‡å®šè¦è®¾ç½®çš„HEADæ¥è¿›ä¸€æ­¥é‡ç½®ã€‚ æˆ–è€…, å¦‚æœä½ ä¸æƒ³ä½¿ç”¨ HEAD^, æ‰¾åˆ°ä½ æƒ³é‡ç½®åˆ°çš„æäº¤(commit)çš„hash(git log èƒ½å¤Ÿå®Œæˆ)ï¼Œ ç„¶åé‡ç½®åˆ°è¿™ä¸ªhashã€‚ ä½¿ç”¨git push åŒæ­¥å†…å®¹åˆ°è¿œç¨‹ã€‚ ä¾‹å¦‚, mainåˆ†æ”¯æƒ³é‡ç½®åˆ°çš„æäº¤çš„hashä¸ºa13b85e: (main)$ git reset --hard a13b85e HEAD is now at a13b85e ç­¾å‡º(checkout)åˆšæ‰æ–°å»ºçš„åˆ†æ”¯ç»§ç»­å·¥ä½œ: (main)$ git checkout my-branch ","date":"2022-03-24","objectID":"/git3/:4:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ä¿ç•™æ¥è‡ªå¦å¤–ä¸€ä¸ªref-ishçš„æ•´ä¸ªæ–‡ä»¶ å‡è®¾ä½ æ­£åœ¨åšä¸€ä¸ªåŸå‹æ–¹æ¡ˆ(åŸæ–‡ä¸ºworking spike (see note)), æœ‰æˆç™¾çš„å†…å®¹ï¼Œæ¯ä¸ªéƒ½å·¥ä½œå¾—å¾ˆå¥½ã€‚ç°åœ¨, ä½ æäº¤åˆ°äº†ä¸€ä¸ªåˆ†æ”¯ï¼Œä¿å­˜å·¥ä½œå†…å®¹: (solution)$ git add -A \u0026\u0026 git commit -m \"Adding all changes from this spike into one big commit.\" å½“ä½ æƒ³è¦æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªåˆ†æ”¯é‡Œ (å¯èƒ½æ˜¯feature, æˆ–è€… develop), ä½ å…³å¿ƒæ˜¯ä¿æŒæ•´ä¸ªæ–‡ä»¶çš„å®Œæ•´ï¼Œä½ æƒ³è¦ä¸€ä¸ªå¤§çš„æäº¤åˆ†éš”æˆæ¯”è¾ƒå°ã€‚ å‡è®¾ä½ æœ‰: åˆ†æ”¯ solution, æ‹¥æœ‰åŸå‹æ–¹æ¡ˆï¼Œ é¢†å…ˆ develop åˆ†æ”¯ã€‚ åˆ†æ”¯ develop, åœ¨è¿™é‡Œä½ åº”ç”¨åŸå‹æ–¹æ¡ˆçš„ä¸€äº›å†…å®¹ã€‚ æˆ‘å»å¯ä»¥é€šè¿‡æŠŠå†…å®¹æ‹¿åˆ°ä½ çš„åˆ†æ”¯é‡Œï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜: (develop)$ git checkout solution -- file1.txt è¿™ä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å†…å®¹ä»åˆ†æ”¯ solution æ‹¿åˆ°åˆ†æ”¯ develop é‡Œæ¥: # On branch develop # Your branch is up-to-date with 'origin/develop'. # Changes to be committed: # (use \"git reset HEAD \u003cfile\u003e...\" to unstage) # # modified: file1.txt ç„¶å, æ­£å¸¸æäº¤ã€‚ Note: Spike solutions are made to analyze or solve the problem. These solutions are used for estimation and discarded once everyone gets clear visualization of the problem. ~ Wikipedia. ","date":"2022-03-24","objectID":"/git3/:4:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æŠŠå‡ ä¸ªæäº¤(commit)æäº¤åˆ°äº†åŒä¸€ä¸ªåˆ†æ”¯ï¼Œè€Œè¿™äº›æäº¤åº”è¯¥åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†æ”¯é‡Œ å‡è®¾ä½ æœ‰ä¸€ä¸ªmainåˆ†æ”¯ï¼Œ æ‰§è¡Œgit log, ä½ çœ‹åˆ°ä½ åšè¿‡ä¸¤æ¬¡æäº¤: (main)$ git log commit e3851e817c451cc36f2e6f3049db528415e3c114 Author: Alex Lee \u003calexlee@example.com\u003e Date: Tue Jul 22 15:39:27 2014 -0400 Bug #21 - Added CSRF protection commit 5ea51731d150f7ddc4a365437931cd8be3bf3131 Author: Alex Lee \u003calexlee@example.com\u003e Date: Tue Jul 22 15:39:12 2014 -0400 Bug #14 - Fixed spacing on title commit a13b85e984171c6e2a1729bb061994525f626d14 Author: Aki Rose \u003cakirose@example.com\u003e Date: Tue Jul 21 01:12:48 2014 -0400 First commit è®©æˆ‘ä»¬ç”¨æäº¤hash(commit hash)æ ‡è®°bug (e3851e8 for #21, 5ea5173 for #14). é¦–å…ˆ, æˆ‘ä»¬æŠŠmainåˆ†æ”¯é‡ç½®åˆ°æ­£ç¡®çš„æäº¤(a13b85e): (main)$ git reset --hard a13b85e HEAD is now at a13b85e ç°åœ¨, æˆ‘ä»¬å¯¹ bug #21 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯: (main)$ git checkout -b 21 (21)$ æ¥ç€, æˆ‘ä»¬ç”¨ cherry-pick æŠŠå¯¹bug #21çš„æäº¤æ”¾å…¥å½“å‰åˆ†æ”¯ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†åº”ç”¨(apply)è¿™ä¸ªæäº¤(commit)ï¼Œä»…ä»…è¿™ä¸€ä¸ªæäº¤(commit)ï¼Œç›´æ¥åœ¨HEADä¸Šé¢ã€‚ (21)$ git cherry-pick e3851e8 è¿™æ—¶å€™, è¿™é‡Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œ å‚è§äº¤äº’å¼ rebasing ç«  å†²çªèŠ‚ è§£å†³å†²çª. å†è€…ï¼Œ æˆ‘ä»¬ä¸ºbug #14 åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯, ä¹ŸåŸºäºmainåˆ†æ”¯ (21)$ git checkout main (main)$ git checkout -b 14 (14)$ æœ€å, ä¸º bug #14 æ‰§è¡Œ cherry-pick: (14)$ git cherry-pick 5ea5173 ","date":"2022-03-24","objectID":"/git3/:4:5","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³åˆ é™¤ä¸Šæ¸¸(upstream)åˆ†æ”¯è¢«åˆ é™¤äº†çš„æœ¬åœ°åˆ†æ”¯ ä¸€æ—¦ä½ åœ¨github ä¸Šé¢åˆå¹¶(merge)äº†ä¸€ä¸ªpull request, ä½ å°±å¯ä»¥åˆ é™¤ä½ forké‡Œè¢«åˆå¹¶çš„åˆ†æ”¯ã€‚ å¦‚æœä½ ä¸å‡†å¤‡ç»§ç»­åœ¨è¿™ä¸ªåˆ†æ”¯é‡Œå·¥ä½œ, åˆ é™¤è¿™ä¸ªåˆ†æ”¯çš„æœ¬åœ°æ‹·è´ä¼šæ›´å¹²å‡€ï¼Œä½¿ä½ ä¸ä¼šé™·å…¥å·¥ä½œåˆ†æ”¯å’Œä¸€å †é™ˆæ—§åˆ†æ”¯çš„æ··ä¹±ä¹‹ä¸­ã€‚ $ git fetch -p ","date":"2022-03-24","objectID":"/git3/:4:6","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘ä¸å°å¿ƒåˆ é™¤äº†æˆ‘çš„åˆ†æ”¯ å¦‚æœä½ å®šæœŸæ¨é€åˆ°è¿œç¨‹, å¤šæ•°æƒ…å†µä¸‹åº”è¯¥æ˜¯å®‰å…¨çš„ï¼Œä½†æœ‰äº›æ—¶å€™è¿˜æ˜¯å¯èƒ½åˆ é™¤äº†è¿˜æ²¡æœ‰æ¨åˆ°è¿œç¨‹çš„åˆ†æ”¯ã€‚ è®©æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåˆ†æ”¯å’Œä¸€ä¸ªæ–°çš„æ–‡ä»¶: (main)$ git checkout -b my-branch (my-branch)$ git branch (my-branch)$ touch foo.txt (my-branch)$ ls README.md foo.txt æ·»åŠ æ–‡ä»¶å¹¶åšä¸€æ¬¡æäº¤ (my-branch)$ git add . (my-branch)$ git commit -m 'foo.txt added' (my-branch)$ foo.txt added 1 files changed, 1 insertions(+) create mode 100644 foo.txt (my-branch)$ git log commit 4e3cd85a670ced7cc17a2b5d8d3d809ac88d5012 Author: siemiatj \u003csiemiatj@example.com\u003e Date: Wed Jul 30 00:34:10 2014 +0200 foo.txt added commit 69204cdf0acbab201619d95ad8295928e7f411d5 Author: Kate Hudson \u003ckatehudson@example.com\u003e Date: Tue Jul 29 13:14:46 2014 -0400 Fixes #6: Force pushing after amending commits ç°åœ¨æˆ‘ä»¬åˆ‡å›åˆ°ä¸»(main)åˆ†æ”¯ï¼Œâ€˜ä¸å°å¿ƒçš„â€™åˆ é™¤my-branchåˆ†æ”¯ (my-branch)$ git checkout main Switched to branch 'main' Your branch is up-to-date with 'origin/main'. (main)$ git branch -D my-branch Deleted branch my-branch (was 4e3cd85). (main)$ echo oh noes, deleted my branch! oh noes, deleted my branch! åœ¨è¿™æ—¶å€™ä½ åº”è¯¥æƒ³èµ·äº†reflog, ä¸€ä¸ªå‡çº§ç‰ˆçš„æ—¥å¿—ï¼Œå®ƒå­˜å‚¨äº†ä»“åº“(repo)é‡Œé¢æ‰€æœ‰åŠ¨ä½œçš„å†å²ã€‚ (main)$ git reflog 69204cd HEAD@{0}: checkout: moving from my-branch to main 4e3cd85 HEAD@{1}: commit: foo.txt added 69204cd HEAD@{2}: checkout: moving from main to my-branch æ­£å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥è‡ªåˆ é™¤åˆ†æ”¯çš„æäº¤hash(commit hash)ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ˜¯å¦èƒ½æ¢å¤åˆ é™¤äº†çš„åˆ†æ”¯ã€‚ (main)$ git checkout -b my-branch-help Switched to a new branch 'my-branch-help' (my-branch-help)$ git reset --hard 4e3cd85 HEAD is now at 4e3cd85 foo.txt added (my-branch-help)$ ls README.md foo.txt çœ‹! æˆ‘ä»¬æŠŠåˆ é™¤çš„æ–‡ä»¶æ‰¾å›æ¥äº†ã€‚ Gitçš„ reflog åœ¨rebasingå‡ºé”™çš„æ—¶å€™ä¹Ÿæ˜¯åŒæ ·æœ‰ç”¨çš„ã€‚ ","date":"2022-03-24","objectID":"/git3/:4:7","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³åˆ é™¤ä¸€ä¸ªåˆ†æ”¯ åˆ é™¤ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯: (main)$ git push origin --delete my-branch ä½ ä¹Ÿå¯ä»¥: (main)$ git push origin :my-branch åˆ é™¤ä¸€ä¸ªæœ¬åœ°åˆ†æ”¯: (main)$ git branch -D my-branch ","date":"2022-03-24","objectID":"/git3/:4:8","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ä»åˆ«äººæ­£åœ¨å·¥ä½œçš„è¿œç¨‹åˆ†æ”¯ç­¾å‡º(checkout)ä¸€ä¸ªåˆ†æ”¯ é¦–å…ˆ, ä»è¿œç¨‹æ‹‰å–(fetch) æ‰€æœ‰åˆ†æ”¯: (main)$ git fetch --all å‡è®¾ä½ æƒ³è¦ä»è¿œç¨‹çš„davesåˆ†æ”¯ç­¾å‡ºåˆ°æœ¬åœ°çš„daves (main)$ git checkout --track origin/daves Branch daves set up to track remote branch daves from origin. Switched to a new branch 'daves' (--track æ˜¯ git checkout -b branch] [remotename/branch çš„ç®€å†™) è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªdavesåˆ†æ”¯çš„æœ¬åœ°æ‹·è´, ä»»ä½•æ¨è¿‡(pushed)çš„æ›´æ–°ï¼Œè¿œç¨‹éƒ½èƒ½çœ‹åˆ°. ","date":"2022-03-24","objectID":"/git3/:4:9","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"Rebasing å’Œåˆå¹¶(Merging) ","date":"2022-03-24","objectID":"/git3/:5:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³æ’¤é”€rebase/merge ä½ å¯ä»¥åˆå¹¶(merge)æˆ–rebaseäº†ä¸€ä¸ªé”™è¯¯çš„åˆ†æ”¯, æˆ–è€…å®Œæˆä¸äº†ä¸€ä¸ªè¿›è¡Œä¸­çš„rebase/mergeã€‚ Git åœ¨è¿›è¡Œå±é™©æ“ä½œçš„æ—¶å€™ä¼šæŠŠåŸå§‹çš„HEADä¿å­˜åœ¨ä¸€ä¸ªå«ORIG_HEADçš„å˜é‡é‡Œ, æ‰€ä»¥è¦æŠŠåˆ†æ”¯æ¢å¤åˆ°rebase/mergeå‰çš„çŠ¶æ€æ˜¯å¾ˆå®¹æ˜“çš„ã€‚ (my-branch)$ git reset --hard ORIG_HEAD ","date":"2022-03-24","objectID":"/git3/:5:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘å·²ç»rebaseè¿‡, ä½†æ˜¯æˆ‘ä¸æƒ³å¼ºæ¨(force push) ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³æŠŠè¿™äº›å˜åŒ–(changes)ååº”åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œä½ å°±å¿…é¡»å¾—å¼ºæ¨(force push)ã€‚ æ˜¯å› ä½ å¿«è¿›(Fast forward)äº†æäº¤ï¼Œæ”¹å˜äº†Gitå†å², è¿œç¨‹åˆ†æ”¯ä¸ä¼šæ¥å—å˜åŒ–(changes)ï¼Œé™¤éå¼ºæ¨(force push)ã€‚è¿™å°±æ˜¯è®¸å¤šäººä½¿ç”¨ merge å·¥ä½œæµ, è€Œä¸æ˜¯ rebasing å·¥ä½œæµçš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œ å¼€å‘è€…çš„å¼ºæ¨(force push)ä¼šä½¿å¤§çš„å›¢é˜Ÿé™·å…¥éº»çƒ¦ã€‚ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œä¸€ç§å®‰å…¨ä½¿ç”¨ rebase çš„æ–¹æ³•æ˜¯ï¼Œä¸è¦æŠŠä½ çš„å˜åŒ–(changes)åæ˜ åˆ°è¿œç¨‹åˆ†æ”¯ä¸Š, è€Œæ˜¯æŒ‰ä¸‹é¢çš„åš: (main)$ git checkout my-branch (my-branch)$ git rebase -i main (my-branch)$ git checkout main (main)$ git merge --ff-only my-branch æ›´å¤š, å‚è§ this SO thread. ","date":"2022-03-24","objectID":"/git3/:5:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘éœ€è¦ç»„åˆ(combine)å‡ ä¸ªæäº¤(commit) å‡è®¾ä½ çš„å·¥ä½œåˆ†æ”¯å°†ä¼šåšå¯¹äº main çš„pull-requestã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¸å…³å¿ƒæäº¤(commit)çš„æ—¶é—´æˆ³ï¼Œåªæƒ³ç»„åˆ æ‰€æœ‰ æäº¤(commit) åˆ°ä¸€ä¸ªå•ç‹¬çš„é‡Œé¢, ç„¶åé‡ç½®(reset)é‡æäº¤(recommit)ã€‚ ç¡®ä¿ä¸»(main)åˆ†æ”¯æ˜¯æœ€æ–°çš„å’Œä½ çš„å˜åŒ–éƒ½å·²ç»æäº¤äº†, ç„¶å: (my-branch)$ git reset --soft main (my-branch)$ git commit -am \"New awesome feature\" å¦‚æœä½ æƒ³è¦æ›´å¤šçš„æ§åˆ¶, æƒ³è¦ä¿ç•™æ—¶é—´æˆ³, ä½ éœ€è¦åšäº¤äº’å¼rebase (interactive rebase): (my-branch)$ git rebase -i main å¦‚æœæ²¡æœ‰ç›¸å¯¹çš„å…¶å®ƒåˆ†æ”¯ï¼Œ ä½ å°†ä¸å¾—ä¸ç›¸å¯¹è‡ªå·±çš„HEAD è¿›è¡Œ rebaseã€‚ ä¾‹å¦‚ï¼šä½ æƒ³ç»„åˆæœ€è¿‘çš„ä¸¤æ¬¡æäº¤(commit), ä½ å°†ç›¸å¯¹äºHEAD~2 è¿›è¡Œrebaseï¼Œ ç»„åˆæœ€è¿‘3æ¬¡æäº¤(commit), ç›¸å¯¹äºHEAD~3, ç­‰ç­‰ã€‚ (main)$ git rebase -i HEAD~2 åœ¨ä½ æ‰§è¡Œäº†äº¤äº’å¼ rebaseçš„å‘½ä»¤(interactive rebase command)å, ä½ å°†åœ¨ä½ çš„ç¼–è¾‘å™¨é‡Œçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹: pick a9c8a1d Some refactoring pick 01b2fd8 New awesome feature pick b729ad5 fixup pick e3851e8 another fix # Rebase 8074d12..b729ad5 onto 8074d12 # # Commands: # p, pick = use commit # r, reword = use commit, but edit the commit message # e, edit = use commit, but stop for amending # s, squash = use commit, but meld into previous commit # f, fixup = like \"squash\", but discard this commit's log message # x, exec = run command (the rest of the line) using shell # # These lines can be re-ordered; they are executed from top to bottom. # # If you remove a line here THAT COMMIT WILL BE LOST. # # However, if you remove everything, the rebase will be aborted. # # Note that empty commits are commented out æ‰€æœ‰ä»¥ # å¼€å¤´çš„è¡Œéƒ½æ˜¯æ³¨é‡Š, ä¸ä¼šå½±å“ rebase. ç„¶åï¼Œä½ å¯ä»¥ç”¨ä»»ä½•ä¸Šé¢å‘½ä»¤åˆ—è¡¨çš„å‘½ä»¤æ›¿æ¢ pick, ä½ ä¹Ÿå¯ä»¥é€šè¿‡åˆ é™¤å¯¹åº”çš„è¡Œæ¥åˆ é™¤ä¸€ä¸ªæäº¤(commit)ã€‚ ä¾‹å¦‚, å¦‚æœä½ æƒ³ å•ç‹¬ä¿ç•™æœ€æ—§(first)çš„æäº¤(commit),ç»„åˆæ‰€æœ‰å‰©ä¸‹çš„åˆ°ç¬¬äºŒä¸ªé‡Œé¢, ä½ å°±åº”è¯¥ç¼–è¾‘ç¬¬äºŒä¸ªæäº¤(commit)åé¢çš„æ¯ä¸ªæäº¤(commit) å‰çš„å•è¯ä¸º f: pick a9c8a1d Some refactoring pick 01b2fd8 New awesome feature f b729ad5 fixup f e3851e8 another fix å¦‚æœä½ æƒ³ç»„åˆè¿™äº›æäº¤(commit) å¹¶é‡å‘½åè¿™ä¸ªæäº¤(commit), ä½ åº”è¯¥åœ¨ç¬¬äºŒä¸ªæäº¤(commit)æ—è¾¹æ·»åŠ ä¸€ä¸ªrï¼Œæˆ–è€…æ›´ç®€å•çš„ç”¨s æ›¿ä»£ f: pick a9c8a1d Some refactoring pick 01b2fd8 New awesome feature s b729ad5 fixup s e3851e8 another fix ä½ å¯ä»¥åœ¨æ¥ä¸‹æ¥å¼¹å‡ºçš„æ–‡æœ¬æç¤ºæ¡†é‡Œé‡å‘½åæäº¤(commit)ã€‚ Newer, awesomer features # Please enter the commit message for your changes. Lines starting # with '#' will be ignored, and an empty message aborts the commit. # rebase in progress; onto 8074d12 # You are currently editing a commit while rebasing branch 'main' on '8074d12'. # # Changes to be committed: # modified: README.md # å¦‚æœæˆåŠŸäº†, ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹: (main)$ Successfully rebased and updated refs/heads/main. å®‰å…¨åˆå¹¶(merging)ç­–ç•¥ --no-commit æ‰§è¡Œåˆå¹¶(merge)ä½†ä¸è‡ªåŠ¨æäº¤, ç»™ç”¨æˆ·åœ¨åšæäº¤å‰æ£€æŸ¥å’Œä¿®æ”¹çš„æœºä¼šã€‚ no-ff ä¼šä¸ºç‰¹æ€§åˆ†æ”¯(feature branch)çš„å­˜åœ¨è¿‡ç•™ä¸‹è¯æ®, ä¿æŒé¡¹ç›®å†å²ä¸€è‡´ã€‚ (main)$ git merge --no-ff --no-commit my-branch æˆ‘éœ€è¦å°†ä¸€ä¸ªåˆ†æ”¯åˆå¹¶æˆä¸€ä¸ªæäº¤(commit) (main)$ git merge --squash my-branch æˆ‘åªæƒ³ç»„åˆ(combine)æœªæ¨çš„æäº¤(unpushed commit) æœ‰æ—¶å€™ï¼Œåœ¨å°†æ•°æ®æ¨å‘ä¸Šæ¸¸ä¹‹å‰ï¼Œä½ æœ‰å‡ ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œæäº¤(commit)ã€‚è¿™æ—¶å€™ä¸å¸Œæœ›æŠŠå·²ç»æ¨(push)è¿‡çš„ç»„åˆè¿›æ¥ï¼Œå› ä¸ºå…¶ä»–äººå¯èƒ½å·²ç»æœ‰æäº¤(commit)å¼•ç”¨å®ƒä»¬äº†ã€‚ (main)$ git rebase -i @{u} è¿™ä¼šäº§ç”Ÿä¸€æ¬¡äº¤äº’å¼çš„rebase(interactive rebase), åªä¼šåˆ—å‡ºæ²¡æœ‰æ¨(push)çš„æäº¤(commit)ï¼Œ åœ¨è¿™ä¸ªåˆ—è¡¨æ—¶è¿›è¡Œreorder/fix/squash éƒ½æ˜¯å®‰å…¨çš„ã€‚ ","date":"2022-03-24","objectID":"/git3/:5:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æ£€æŸ¥æ˜¯å¦åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)éƒ½åˆå¹¶(merge)è¿‡äº† æ£€æŸ¥ä¸€ä¸ªåˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤(commit)æ˜¯å¦éƒ½å·²ç»åˆå¹¶(merge)åˆ°äº†å…¶å®ƒåˆ†æ”¯, ä½ åº”è¯¥åœ¨è¿™äº›åˆ†æ”¯çš„head(æˆ–ä»»ä½• commits)ä¹‹é—´åšä¸€æ¬¡diff: (main)$ git log --graph --left-right --cherry-pick --oneline HEAD...feature/120-on-scroll è¿™ä¼šå‘Šè¯‰ä½ åœ¨ä¸€ä¸ªåˆ†æ”¯é‡Œæœ‰è€Œå¦ä¸€ä¸ªåˆ†æ”¯æ²¡æœ‰çš„æ‰€æœ‰æäº¤(commit), å’Œåˆ†æ”¯ä¹‹é—´ä¸å…±äº«çš„æäº¤(commit)çš„åˆ—è¡¨ã€‚ å¦ä¸€ä¸ªåšæ³•å¯ä»¥æ˜¯: (main)$ git log main ^feature/120-on-scroll --no-merges ","date":"2022-03-24","objectID":"/git3/:5:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"äº¤äº’å¼rebase(interactive rebase)å¯èƒ½å‡ºç°çš„é—®é¢˜ è¿™ä¸ªrebase ç¼–è¾‘å±å¹•å‡ºç°â€™noopâ€™ å¦‚æœä½ çœ‹åˆ°çš„æ˜¯è¿™æ ·: noop è¿™æ„å‘³ç€ä½ rebaseçš„åˆ†æ”¯å’Œå½“å‰åˆ†æ”¯åœ¨åŒä¸€ä¸ªæäº¤(commit)ä¸Š, æˆ–è€… é¢†å…ˆ(ahead) å½“å‰åˆ†æ”¯ã€‚ ä½ å¯ä»¥å°è¯•: æ£€æŸ¥ç¡®ä¿ä¸»(main)åˆ†æ”¯æ²¡æœ‰é—®é¢˜ rebase HEAD~2 æˆ–è€…æ›´æ—© æœ‰å†²çªçš„æƒ…å†µ å¦‚æœä½ ä¸èƒ½æˆåŠŸçš„å®Œæˆrebase, ä½ å¯èƒ½å¿…é¡»è¦è§£å†³å†²çªã€‚ é¦–å…ˆæ‰§è¡Œ git status æ‰¾å‡ºå“ªäº›æ–‡ä»¶æœ‰å†²çª: (my-branch)$ git status On branch my-branch Changes not staged for commit: (use \"git add \u003cfile\u003e...\" to update what will be committed) (use \"git checkout -- \u003cfile\u003e...\" to discard changes in working directory) modified: README.md åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢, README.md æœ‰å†²çªã€‚ æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹: \u003c\u003c\u003c\u003c\u003c\u003c\u003c HEAD some code ========= some code \u003e\u003e\u003e\u003e\u003e\u003e\u003e new-commit ä½ éœ€è¦è§£å†³æ–°æäº¤çš„ä»£ç (ç¤ºä¾‹é‡Œ, ä»ä¸­é—´==çº¿åˆ°new-commitçš„åœ°æ–¹)ä¸HEAD ä¹‹é—´ä¸ä¸€æ ·çš„åœ°æ–¹. æœ‰æ—¶å€™è¿™äº›åˆå¹¶éå¸¸å¤æ‚ï¼Œä½ åº”è¯¥ä½¿ç”¨å¯è§†åŒ–çš„å·®å¼‚ç¼–è¾‘å™¨(visual diff editor): (main*)$ git mergetool -t opendiff åœ¨ä½ è§£å†³å®Œæ‰€æœ‰å†²çªå’Œæµ‹è¯•è¿‡å, git add å˜åŒ–äº†çš„(changed)æ–‡ä»¶, ç„¶åç”¨git rebase --continue ç»§ç»­rebaseã€‚ (my-branch)$ git add README.md (my-branch)$ git rebase --continue å¦‚æœåœ¨è§£å†³å®Œæ‰€æœ‰çš„å†²çªè¿‡åï¼Œå¾—åˆ°äº†ä¸æäº¤å‰ä¸€æ ·çš„ç»“æœ, å¯ä»¥æ‰§è¡Œgit rebase --skipã€‚ ä»»ä½•æ—¶å€™ä½ æƒ³ç»“æŸæ•´ä¸ªrebase è¿‡ç¨‹ï¼Œå›æ¥rebaseå‰çš„åˆ†æ”¯çŠ¶æ€, ä½ å¯ä»¥åš: (my-branch)$ git rebase --abort ","date":"2022-03-24","objectID":"/git3/:5:5","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"Stash ","date":"2022-03-24","objectID":"/git3/:6:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æš‚å­˜æ‰€æœ‰æ”¹åŠ¨ æš‚å­˜ä½ å·¥ä½œç›®å½•ä¸‹çš„æ‰€æœ‰æ”¹åŠ¨ $ git stash ä½ å¯ä»¥ä½¿ç”¨-uæ¥æ’é™¤ä¸€äº›æ–‡ä»¶ $ git stash -u ","date":"2022-03-24","objectID":"/git3/:6:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æš‚å­˜æŒ‡å®šæ–‡ä»¶ å‡è®¾ä½ åªæƒ³æš‚å­˜æŸä¸€ä¸ªæ–‡ä»¶ $ git stash push working-directory-path/filename.ext å‡è®¾ä½ æƒ³æš‚å­˜å¤šä¸ªæ–‡ä»¶ $ git stash push working-directory-path/filename1.ext working-directory-path/filename2.ext ","date":"2022-03-24","objectID":"/git3/:6:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æš‚å­˜æ—¶è®°å½•æ¶ˆæ¯ è¿™æ ·ä½ å¯ä»¥åœ¨listæ—¶çœ‹åˆ°å®ƒ $ git stash save \u003cmessage\u003e æˆ– $ git stash push -m \u003cmessage\u003e ","date":"2022-03-24","objectID":"/git3/:6:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"ä½¿ç”¨æŸä¸ªæŒ‡å®šæš‚å­˜ é¦–å…ˆä½ å¯ä»¥æŸ¥çœ‹ä½ çš„stashè®°å½• $ git stash list ç„¶åä½ å¯ä»¥applyæŸä¸ªstash $ git stash apply \"stash@{n}\" æ­¤å¤„ï¼Œ â€™nâ€™æ˜¯stashåœ¨æ ˆä¸­çš„ä½ç½®ï¼Œæœ€ä¸Šå±‚çš„stashä¼šæ˜¯0 é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ—¶é—´æ ‡è®°(å‡å¦‚ä½ èƒ½è®°å¾—çš„è¯)ã€‚ $ git stash apply \"stash@{2.hours.ago}\" ","date":"2022-03-24","objectID":"/git3/:6:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æš‚å­˜æ—¶ä¿ç•™æœªæš‚å­˜çš„å†…å®¹ ä½ éœ€è¦æ‰‹åŠ¨createä¸€ä¸ªstash commitï¼Œ ç„¶åä½¿ç”¨git stash storeã€‚ $ git stash create $ git stash store -m \"commit-message\" CREATED_SHA1 ","date":"2022-03-24","objectID":"/git3/:6:5","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æ‚é¡¹(Miscellaneous Objects) ","date":"2022-03-24","objectID":"/git3/:7:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"å…‹éš†æ‰€æœ‰å­æ¨¡å— $ git clone --recursive git://github.com/foo/bar.git å¦‚æœå·²ç»å…‹éš†äº†: $ git submodule update --init --recursive ","date":"2022-03-24","objectID":"/git3/:7:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"åˆ é™¤æ ‡ç­¾(tag) $ git tag -d \u003ctag_name\u003e $ git push \u003cremote\u003e :refs/tags/\u003ctag_name\u003e ","date":"2022-03-24","objectID":"/git3/:7:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æ¢å¤å·²åˆ é™¤æ ‡ç­¾(tag) å¦‚æœä½ æƒ³æ¢å¤ä¸€ä¸ªå·²åˆ é™¤æ ‡ç­¾(tag), å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤: é¦–å…ˆ, éœ€è¦æ‰¾åˆ°æ— æ³•è®¿é—®çš„æ ‡ç­¾(unreachable tag): $ git fsck --unreachable | grep tag è®°ä¸‹è¿™ä¸ªæ ‡ç­¾(tag)çš„hashï¼Œç„¶åç”¨Gitçš„ update-ref: $ git update-ref refs/tags/\u003ctag_name\u003e \u003chash\u003e è¿™æ—¶ä½ çš„æ ‡ç­¾(tag)åº”è¯¥å·²ç»æ¢å¤äº†ã€‚ ","date":"2022-03-24","objectID":"/git3/:7:3","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"å·²åˆ é™¤è¡¥ä¸(patch) å¦‚æœæŸäººåœ¨ GitHub ä¸Šç»™ä½ å‘äº†ä¸€ä¸ªpull request, ä½†æ˜¯ç„¶åä»–åˆ é™¤äº†ä»–è‡ªå·±çš„åŸå§‹ fork, ä½ å°†æ²¡æ³•å…‹éš†ä»–ä»¬çš„æäº¤(commit)æˆ–ä½¿ç”¨ git amã€‚åœ¨è¿™ç§æƒ…å†µä¸‹, æœ€å¥½æ‰‹åŠ¨çš„æŸ¥çœ‹ä»–ä»¬çš„æäº¤(commit)ï¼Œå¹¶æŠŠå®ƒä»¬æ‹·è´åˆ°ä¸€ä¸ªæœ¬åœ°æ–°åˆ†æ”¯ï¼Œç„¶ååšæäº¤ã€‚ åšå®Œæäº¤å, å†ä¿®æ”¹ä½œè€…ï¼Œå‚è§å˜æ›´ä½œè€…ã€‚ ç„¶å, åº”ç”¨å˜åŒ–, å†å‘èµ·ä¸€ä¸ªæ–°çš„pull requestã€‚ ","date":"2022-03-24","objectID":"/git3/:7:4","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"è·Ÿè¸ªæ–‡ä»¶(Tracking Files) ","date":"2022-03-24","objectID":"/git3/:8:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘åªæƒ³æ”¹å˜ä¸€ä¸ªæ–‡ä»¶åå­—çš„å¤§å°å†™ï¼Œè€Œä¸ä¿®æ”¹å†…å®¹ (main)$ git mv --force myfile MyFile ","date":"2022-03-24","objectID":"/git3/:8:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ä»Gitåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ä¿ç•™è¯¥æ–‡ä»¶ (main)$ git rm --cached log.txt ","date":"2022-03-24","objectID":"/git3/:8:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"é…ç½®(Configuration) ","date":"2022-03-24","objectID":"/git3/:9:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ç»™ä¸€äº›Gitå‘½ä»¤æ·»åŠ åˆ«å(alias) åœ¨ OS X å’Œ Linux ä¸‹, ä½ çš„ Gitçš„é…ç½®æ–‡ä»¶å‚¨å­˜åœ¨ ~/.gitconfigã€‚æˆ‘åœ¨[alias] éƒ¨åˆ†æ·»åŠ äº†ä¸€äº›å¿«æ·åˆ«å(å’Œä¸€äº›æˆ‘å®¹æ˜“æ‹¼å†™é”™è¯¯çš„)ï¼Œå¦‚ä¸‹: [alias] a = add amend = commit --amend c = commit ca = commit --amend ci = commit -a co = checkout d = diff dc = diff --changed ds = diff --staged f = fetch loll = log --graph --decorate --pretty=oneline --abbrev-commit m = merge one = log --pretty=oneline outstanding = rebase -i @{u} s = status unpushed = log @{u} wc = whatchanged wip = rebase -i @{u} zap = fetch -p ","date":"2022-03-24","objectID":"/git3/:9:1","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘æƒ³ç¼“å­˜ä¸€ä¸ªä»“åº“(repository)çš„ç”¨æˆ·åå’Œå¯†ç  ä½ å¯èƒ½æœ‰ä¸€ä¸ªä»“åº“éœ€è¦æˆæƒï¼Œè¿™æ—¶ä½ å¯ä»¥ç¼“å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œä¸ç”¨æ¯æ¬¡æ¨/æ‹‰(push/pull)çš„æ—¶å€™éƒ½è¾“å…¥ï¼ŒCredential helperèƒ½å¸®ä½ ã€‚ $ git config --global credential.helper cache # Set git to use the credential memory cache $ git config --global credential.helper 'cache --timeout=3600' # Set the cache to timeout after 1 hour (setting is in seconds) ","date":"2022-03-24","objectID":"/git3/:9:2","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æˆ‘ä¸çŸ¥é“æˆ‘åšé”™äº†äº›ä»€ä¹ˆ ä½ æŠŠäº‹æƒ…æç ¸äº†ï¼šä½  é‡ç½®(reset) äº†ä¸€äº›ä¸œè¥¿, æˆ–è€…ä½ åˆå¹¶äº†é”™è¯¯çš„åˆ†æ”¯, äº¦æˆ–ä½ å¼ºæ¨äº†åæ‰¾ä¸åˆ°ä½ è‡ªå·±çš„æäº¤(commit)äº†ã€‚æœ‰äº›æ—¶å€™, ä½ ä¸€ç›´éƒ½åšå¾—å¾ˆå¥½, ä½†ä½ æƒ³å›åˆ°ä»¥å‰çš„æŸä¸ªçŠ¶æ€ã€‚ è¿™å°±æ˜¯ git reflog çš„ç›®çš„ï¼Œ reflog è®°å½•å¯¹åˆ†æ”¯é¡¶ç«¯(the tip of a branch)çš„ä»»ä½•æ”¹å˜, å³ä½¿é‚£ä¸ªé¡¶ç«¯æ²¡æœ‰è¢«ä»»ä½•åˆ†æ”¯æˆ–æ ‡ç­¾å¼•ç”¨ã€‚åŸºæœ¬ä¸Š, æ¯æ¬¡HEADçš„æ”¹å˜, ä¸€æ¡æ–°çš„è®°å½•å°±ä¼šå¢åŠ åˆ°reflogã€‚é—æ†¾çš„æ˜¯ï¼Œè¿™åªå¯¹æœ¬åœ°åˆ†æ”¯èµ·ä½œç”¨ï¼Œä¸”å®ƒåªè·Ÿè¸ªåŠ¨ä½œ (ä¾‹å¦‚ï¼Œä¸ä¼šè·Ÿè¸ªä¸€ä¸ªæ²¡æœ‰è¢«è®°å½•çš„æ–‡ä»¶çš„ä»»ä½•æ”¹å˜)ã€‚ (main)$ git reflog 0a2e358 HEAD@{0}: reset: moving to HEAD~2 0254ea7 HEAD@{1}: checkout: moving from 2.2 to main c10f740 HEAD@{2}: checkout: moving from main to 2.2 ä¸Šé¢çš„reflogå±•ç¤ºäº†ä»mainåˆ†æ”¯ç­¾å‡º(checkout)åˆ°2.2 åˆ†æ”¯ï¼Œç„¶åå†ç­¾å›ã€‚ é‚£é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªç¡¬é‡ç½®(hard reset)åˆ°ä¸€ä¸ªè¾ƒæ—§çš„æäº¤ã€‚æœ€æ–°çš„åŠ¨ä½œå‡ºç°åœ¨æœ€ä¸Šé¢ä»¥ HEAD@{0}æ ‡è¯†. å¦‚æœäº‹å®è¯æ˜ä½ ä¸å°å¿ƒå›ç§»(move back)äº†æäº¤(commit), reflog ä¼šåŒ…å«ä½ ä¸å°å¿ƒå›ç§»å‰mainä¸ŠæŒ‡å‘çš„æäº¤(0254ea7)ã€‚ $ git reset --hard 0254ea7 ç„¶åä½¿ç”¨git resetå°±å¯ä»¥æŠŠmainæ”¹å›åˆ°ä¹‹å‰çš„commitï¼Œè¿™æä¾›äº†ä¸€ä¸ªåœ¨å†å²è¢«æ„å¤–æ›´æ”¹æƒ…å†µä¸‹çš„å®‰å…¨ç½‘ã€‚ (æ‘˜è‡ª). å…¶å®ƒèµ„æº(Other Resources) ","date":"2022-03-24","objectID":"/git3/:10:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"ä¹¦(Books) Pro Git - Scott Chaconâ€™s excellent git book Git Internals - Scott Chaconâ€™s other excellent git book ","date":"2022-03-24","objectID":"/git3/:11:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"æ•™ç¨‹(Tutorials) Learn Git branching ä¸€ä¸ªåŸºäºç½‘é¡µçš„äº¤äº’å¼ branching/merging/rebasing æ•™ç¨‹ Getting solid at Git rebase vs. merge git-workflow - Aaron Meurerçš„æ€ä¹ˆä½¿ç”¨Gitä¸ºå¼€æºä»“åº“è´¡çŒ® GitHub as a workflow - ä½¿ç”¨GitHubåšä¸ºå·¥ä½œæµçš„è¶£äº‹, å°¤å…¶æ˜¯ç©ºPRs ","date":"2022-03-24","objectID":"/git3/:12:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"è„šæœ¬å’Œå·¥å…·(Scripts and Tools) firstaidgit.io ä¸€ä¸ªå¯æœç´¢çš„æœ€å¸¸è¢«é—®åˆ°çš„Gitçš„é—®é¢˜ git-extra-commands - ä¸€å †æœ‰ç”¨çš„é¢å¤–çš„Gitè„šæœ¬ git-extras - GIT å·¥å…·é›† â€“ repo summary, repl, changelog population, author commit percentages and more git-fire - git-fire æ˜¯ä¸€ä¸ª Git æ’ä»¶ï¼Œç”¨äºå¸®åŠ©åœ¨ç´§æ€¥æƒ…å†µä¸‹æ·»åŠ æ‰€æœ‰å½“å‰æ–‡ä»¶, åšæäº¤(committing), å’Œæ¨(push)åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯(é˜»æ­¢åˆå¹¶å†²çª)ã€‚ git-tips - Gitå°æç¤º git-town - é€šç”¨ï¼Œé«˜çº§Gitå·¥ä½œæµæ”¯æŒï¼ http://www.git-town.com ","date":"2022-03-24","objectID":"/git3/:13:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["gitlab"],"content":"GUIå®¢æˆ·ç«¯(GUI Clients) GitKraken - è±ªåçš„Gitå®¢æˆ·ç«¯ Windows, Mac \u0026 Linux git-cola - å¦å¤–ä¸€ä¸ªGitå®¢æˆ·ç«¯ Windows \u0026 OS X GitUp - ä¸€ä¸ªæ–°çš„Gitå®¢æˆ·ç«¯ï¼Œåœ¨å¤„ç†Gitçš„å¤æ‚æ€§ä¸Šæœ‰è‡ªå·±çš„ç‰¹ç‚¹ gitx-dev - å›¾å½¢åŒ–çš„Gitå®¢æˆ·ç«¯ OS X Source Tree - å…è´¹çš„å›¾å½¢åŒ–Gitå®¢æˆ·ç«¯ Windows \u0026 OS X Tower - å›¾å½¢åŒ–Gitå®¢æˆ·ç«¯ OS X(ä»˜è´¹) ","date":"2022-03-24","objectID":"/git3/:14:0","tags":["gitlab"],"title":"Git è§„åˆ™","uri":"/git3/"},{"categories":["work"],"content":"shellè„šæœ¬ä¹‹å˜é‡ ","date":"2022-03-20","objectID":"/shell1/:0:0","tags":["work"],"title":"shell è„šæœ¬ï¼ˆ1ï¼‰","uri":"/shell1/"},{"categories":["work"],"content":"å˜é‡æ›¿æ¢ è¯­æ³• è¯´æ˜ ${å˜é‡å#åŒ¹é…è§„åˆ™} ä»å˜é‡å¼€å¤´è¿›è¡Œè§„åˆ™åŒ¹é…ï¼Œå°†ç¬¦åˆæœ€çŸ­çš„æ•°æ®åˆ é™¤ ${å˜é‡å##åŒ¹é…è§„åˆ™} ä»å˜é‡å¼€å¤´è¿›è¡Œè§„åˆ™åŒ¹é…ï¼Œå°†ç¬¦åˆæœ€é•¿çš„æ•°æ®åˆ é™¤ ${å˜é‡å%åŒ¹é…è§„åˆ™} ä»å˜é‡å°¾éƒ¨è¿›è¡Œè§„åˆ™åŒ¹é…ï¼Œå°†ç¬¦åˆæœ€çŸ­çš„æ•°æ®åˆ é™¤ ${å˜é‡å%%åŒ¹é…è§„åˆ™} ä»å˜é‡å°¾éƒ¨è¿›è¡Œè§„åˆ™åŒ¹é…ï¼Œå°†ç¬¦åˆæœ€é•¿çš„æ•°æ®åˆ é™¤ ${å˜é‡å/æ—§å­—ç¬¦ä¸²/æ–°å­—ç¬¦ä¸²} å˜é‡å†…å®¹ç¬¦åˆæ—§å­—ç¬¦ä¸²åˆ™ï¼Œåˆ™ç¬¬ä¸€ä¸ªæ—§å­—ç¬¦ä¸²ä¼šè¢«æ–°å­—ç¬¦ä¸²å–ä»£ ${å˜é‡å//æ—§å­—ç¬¦ä¸²/æ–°å­—ç¬¦ä¸²} å˜é‡å†…å®¹ç¬¦åˆæ—§å­—ç¬¦ä¸²åˆ™ï¼Œåˆ™å…¨éƒ¨çš„æ—§å­—ç¬¦ä¸²ä¼šè¢«æ–°å­—ç¬¦ä¸²å–ä»£ ","date":"2022-03-20","objectID":"/shell1/:1:0","tags":["work"],"title":"shell è„šæœ¬ï¼ˆ1ï¼‰","uri":"/shell1/"},{"categories":["work"],"content":"å­—ç¬¦ä¸²å¤„ç† è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ - è¯­æ³• è¯´æ˜ æ–¹æ³•ä¸€ ${#string} æ—  æ–¹æ³•äºŒ expr length â€œ$stringâ€ stringæœ‰ç©ºæ ¼ï¼Œåˆ™å¿…é¡»åŠ åŒå¼•å· è·å–å­ä¸²åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ä½ç½® è¯­æ³•ï¼š expr index $string $substring è®¡ç®—å­ä¸²é•¿åº¦ è¯­æ³•ï¼š expr match $string substr æŠ½å–å­ä¸² ${string:position} ï¼šä»stringä¸­çš„positionå¼€å§‹ ${string:position:length}ï¼šä»positionå¼€å§‹ï¼ŒåŒ¹é…é•¿åº¦ä¸ºlength ${string:-position}ï¼šä»å³è¾¹å¼€å§‹åŒ¹é… ${string:(position)}ï¼šä»å·¦è¾¹å¼€å§‹åŒ¹é… expr substr $string $position $lengthï¼šä»positionå¼€å§‹ï¼ŒåŒ¹é…é•¿åº¦ä¸ºlength ","date":"2022-03-20","objectID":"/shell1/:2:0","tags":["work"],"title":"shell è„šæœ¬ï¼ˆ1ï¼‰","uri":"/shell1/"},{"categories":["k8s"],"content":"kubernetes è„šæœ¬å¿«é€Ÿå®‰è£… 1ã€ä¸‰å°æœºå™¨è®¾ç½®è‡ªå·±çš„hostnameï¼ˆä¸èƒ½æ˜¯localhostï¼‰ # ä¿®æ”¹ hostname; k8s-01è¦å˜ä¸ºè‡ªå·±çš„hostname hostnamectl set-hostname k8s-01 # è®¾ç½® hostname è§£æ echo \"127.0.0.1 $(hostname)\" \u003e\u003e /etc/hosts 2ã€æ‰€æœ‰æœºå™¨æ‰¹é‡æ‰§è¡Œå¦‚ä¸‹è„šæœ¬ #å…ˆåœ¨æ‰€æœ‰æœºå™¨æ‰§è¡Œ vi k8s.sh # è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ˆè¾“å…¥iï¼‰ï¼ŒæŠŠå¦‚ä¸‹è„šæœ¬å¤åˆ¶ # æ‰€æœ‰æœºå™¨ç»™è„šæœ¬æƒé™ chmod +x k8s.sh #æ‰§è¡Œè„šæœ¬ ./k8s.sh #/bin/sh #######################å¼€å§‹è®¾ç½®ç¯å¢ƒ##################################### \\n printf \"##################æ­£åœ¨é…ç½®æ‰€æœ‰åŸºç¡€ç¯å¢ƒä¿¡æ¯################## \\n\" printf \"##################å…³é—­selinux################## \\n\" sed -i 's/enforcing/disabled/' /etc/selinux/config setenforce 0 printf \"##################å…³é—­swap################## \\n\" swapoff -a sed -ri 's/.*swap.*/#\u0026/' /etc/fstab printf \"##################é…ç½®è·¯ç”±è½¬å‘################## \\n\" cat \u003c\u003cEOF | sudo tee /etc/modules-load.d/k8s.conf br_netfilter EOF echo 'net.ipv4.ip_forward = 1' \u003e\u003e /etc/sysctl.d/k8s.conf ## å¿…é¡» ipv6æµé‡æ¡¥æ¥ echo 'net.bridge.bridge-nf-call-ip6tables = 1' \u003e\u003e /etc/sysctl.d/k8s.conf ## å¿…é¡» ipv4æµé‡æ¡¥æ¥ echo 'net.bridge.bridge-nf-call-iptables = 1' \u003e\u003e /etc/sysctl.d/k8s.conf echo \"net.ipv6.conf.all.disable_ipv6 = 1\" \u003e\u003e /etc/sysctl.d/k8s.conf echo \"net.ipv6.conf.default.disable_ipv6 = 1\" \u003e\u003e /etc/sysctl.d/k8s.conf echo \"net.ipv6.conf.lo.disable_ipv6 = 1\" \u003e\u003e /etc/sysctl.d/k8s.conf echo \"net.ipv6.conf.all.forwarding = 1\" \u003e\u003e /etc/sysctl.d/k8s.conf modprobe br_netfilter sudo sysctl --system printf \"##################é…ç½®ipvs################## \\n\" cat \u003c\u003cEOF | sudo tee /etc/sysconfig/modules/ipvs.modules #!/bin/bash modprobe -- ip_vs modprobe -- ip_vs_rr modprobe -- ip_vs_wrr modprobe -- ip_vs_sh modprobe -- nf_conntrack_ipv4 EOF chmod 755 /etc/sysconfig/modules/ipvs.modules sh /etc/sysconfig/modules/ipvs.modules printf \"##################å®‰è£…ipvsadmç›¸å…³è½¯ä»¶################## \\n\" yum install -y ipset ipvsadm printf \"##################å®‰è£…dockerå®¹å™¨ç¯å¢ƒ################## \\n\" sudo yum remove docker* sudo yum install -y yum-utils sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum install -y docker-ce-19.03.9 docker-ce-cli-19.03.9 containerd.io systemctl enable docker systemctl start docker sudo systemctl daemon-reload sudo systemctl restart docker printf \"##################å®‰è£…k8sæ ¸å¿ƒåŒ… kubeadm kubelet kubectl################## \\n\" cat \u003c\u003cEOF \u003e /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 repo_gpgcheck=0 gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF ###æŒ‡å®šk8så®‰è£…ç‰ˆæœ¬ yum install -y kubelet-1.21.0 kubeadm-1.21.0 kubectl-1.21.0 ###è¦æŠŠkubeletç«‹å³å¯åŠ¨ã€‚ systemctl enable kubelet systemctl start kubelet printf \"##################ä¸‹è½½api-serverç­‰æ ¸å¿ƒé•œåƒ################## \\n\" sudo tee ./images.sh \u003c\u003c-'EOF' #!/bin/bash docker pull k8s.gcr.io/kube-apiserver:v1.21.9 docker pull k8s.gcr.io/kube-controller-manager:v1.21.9 docker pull k8s.gcr.io/kube-scheduler:v1.21.9 docker pull k8s.gcr.io/kube-proxy:v1.21.9 docker pull k8s.gcr.io/pause:3.4.1 docker pull k8s.gcr.io/etcd:3.4.13-0 docker pull k8s.gcr.io/coredns/coredns:v1.8.0 EOF chmod +x ./images.sh \u0026\u0026 ./images.sh ### k8sçš„æ‰€æœ‰åŸºæœ¬ç¯å¢ƒå…¨éƒ¨å®Œæˆ 3ã€ä½¿ç”¨kubeadmå¼•å¯¼é›†ç¾¤ï¼ˆå‚ç…§åˆå§‹åŒ–masterç»§ç»­åšï¼‰ #### --apiserver-advertise-address çš„åœ°å€ä¸€å®šå†™æˆè‡ªå·±masteræœºå™¨çš„ipåœ°å€ #### è™šæ‹Ÿæœºæˆ–è€…å…¶ä»–äº‘å‚å•†ç»™ä½ çš„æœºå™¨ip 10.96 192.168 #### ä»¥ä¸‹çš„åªåœ¨masterèŠ‚ç‚¹æ‰§è¡Œ kubeadm init \\ --apiserver-advertise-address=10.12.12.24 \\ --kubernetes-version v1.21.0 \\ --service-cidr=10.96.0.0/16 \\ --pod-network-cidr=10.124.0.0/16 4ã€masterç»“æŸä»¥åï¼ŒæŒ‰ç…§æ§åˆ¶å°å¼•å¯¼ç»§ç»­å¾€ä¸‹ ## ç¬¬ä¸€æ­¥ mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config ##ç¬¬äºŒæ­¥ export KUBECONFIG=/etc/kubernetes/admin.conf ##ç¬¬ä¸‰æ­¥ éƒ¨ç½²ç½‘ç»œæ’ä»¶ kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml ##ç¬¬å››æ­¥ï¼Œç”¨æ§åˆ¶å°æ‰“å°çš„kubeadm join å»å…¶ä»–nodeèŠ‚ç‚¹æ‰§è¡Œ kubeadm join 10.170.11.8:6443 --token cnb7x2.lzgz7mfzcjutn0nk \\ --discovery-token-ca-cert-hash sha256:00c9e977ee52632098aadb515c90076603daee94a167728110ef8086d0d5b37d ","date":"2022-03-10","objectID":"/k8s4/:0:0","tags":["k8s"],"title":"kubernetes è„šæœ¬å¿«é€Ÿå®‰è£…","uri":"/k8s4/"},{"categories":["k8s"],"content":"åˆå§‹åŒ–workerèŠ‚ç‚¹ï¼ˆworkeræ‰§è¡Œï¼‰ ##è¿‡æœŸæ€ä¹ˆåŠ kubeadm token create --print-join-command kubeadm join --token y1eyw5.ylg568kvohfdsfco --discovery-token-ca-cert-hash sha256: 6c35e4f73f72afd89bf1c8c303ee55677d2cdb1342d67bb23c852aba2efc7c73 5ã€éªŒè¯é›†ç¾¤ #ç­‰ä¸€ä¼šï¼Œåœ¨masterèŠ‚ç‚¹æ‰§è¡Œ kubectl get nodes 6ã€è®¾ç½®kube-proxyçš„ipvsæ¨¡å¼ ##ä¿®æ”¹kube-proxyé»˜è®¤çš„é…ç½® kubectl edit cm kube-proxy -n kube-system ## ä¿®æ”¹mode: \"ipvs\" ##æ”¹å®Œä»¥åé‡å¯kube-proxy ### æŸ¥åˆ°æ‰€æœ‰çš„kube-proxy kubectl get pod -n kube-system |grep kube-proxy ### åˆ é™¤ä¹‹å‰çš„å³å¯ kubectl delete pod ã€ç”¨è‡ªå·±æŸ¥å‡ºæ¥çš„kube-proxy-dw5sf kube-proxy-hsrwp kube-proxy-vqv7nã€‘ -n kube-system ### ","date":"2022-03-10","objectID":"/k8s4/:1:0","tags":["k8s"],"title":"kubernetes è„šæœ¬å¿«é€Ÿå®‰è£…","uri":"/k8s4/"},{"categories":["work"],"content":"Maven å®‰è£…ç¼–è¯‘ Mavenå°±æ˜¯ä¸“é—¨ä¸ºJavaé¡¹ç›®æ‰“é€ çš„ç®¡ç†å’Œæ„å»ºå·¥å…·ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ï¼› æä¾›äº†ä¸€å¥—æ ‡å‡†åŒ–çš„æ„å»ºæµç¨‹ï¼ˆç¼–è¯‘ï¼Œæµ‹è¯•ï¼Œæ‰“åŒ…ï¼Œå‘å¸ƒâ€¦â€¦ï¼‰ï¼› æä¾›äº†ä¸€å¥—ä¾èµ–ç®¡ç†æœºåˆ¶ã€‚ é»˜è®¤ç»“æ„ï¼š a-maven-project â”œâ”€â”€ pom.xml â”œâ”€â”€ src â”‚ â”œâ”€â”€ main â”‚ â”‚ â”œâ”€â”€ java â”‚ â”‚ â””â”€â”€ resources â”‚ â””â”€â”€ test â”‚ â”œâ”€â”€ java â”‚ â””â”€â”€ resources â””â”€â”€ target é¡¹ç›®çš„æ ¹ç›®å½•a-maven-projectæ˜¯é¡¹ç›®åï¼Œ å®ƒæœ‰ä¸€ä¸ªé¡¹ç›®æè¿°æ–‡ä»¶pom.xmlï¼Œ å­˜æ”¾Javaæºç çš„ç›®å½•æ˜¯src/main/javaï¼Œ å­˜æ”¾èµ„æºæ–‡ä»¶çš„ç›®å½•æ˜¯src/main/resourcesï¼Œ å­˜æ”¾æµ‹è¯•æºç çš„ç›®å½•æ˜¯src/test/javaï¼Œ å­˜æ”¾æµ‹è¯•èµ„æºçš„ç›®å½•æ˜¯src/test/resourcesï¼Œ æœ€åï¼Œæ‰€æœ‰ç¼–è¯‘ã€æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶éƒ½æ”¾åœ¨targetç›®å½•é‡Œã€‚ è¿™äº›å°±æ˜¯ä¸€ä¸ªMavené¡¹ç›®çš„æ ‡å‡†ç›®å½•ç»“æ„ã€‚ pom.xmlæ–‡ä»¶: \u003cproject ...\u003e \u003cmodelVersion\u003e4.0.0\u003c/modelVersion\u003e \u003cgroupId\u003ecom.itranswarp.learnjava\u003c/groupId\u003e \u003cartifactId\u003ehello\u003c/artifactId\u003e \u003cversion\u003e1.0\u003c/version\u003e \u003cpackaging\u003ejar\u003c/packaging\u003e \u003cproperties\u003e ... \u003c/properties\u003e \u003cdependencies\u003e \u003cdependency\u003e \u003cgroupId\u003ecommons-logging\u003c/groupId\u003e \u003cartifactId\u003ecommons-logging\u003c/artifactId\u003e \u003cversion\u003e1.2\u003c/version\u003e \u003c/dependency\u003e \u003c/dependencies\u003e \u003c/project\u003e groupIdç±»ä¼¼äºJavaçš„åŒ…åï¼Œé€šå¸¸æ˜¯å…¬å¸æˆ–ç»„ç»‡åç§°ï¼Œ artifactIdç±»ä¼¼äºJavaçš„ç±»åï¼Œé€šå¸¸æ˜¯é¡¹ç›®åç§°ï¼Œ versionï¼Œä¸€ä¸ªMavenå·¥ç¨‹å°±æ˜¯ç”±groupIdï¼ŒartifactIdå’Œversionä½œä¸ºå”¯ä¸€æ ‡è¯†ã€‚ æˆ‘ä»¬åœ¨å¼•ç”¨å…¶ä»–ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯é€šè¿‡è¿™3ä¸ªå˜é‡ç¡®å®šã€‚ ä¾èµ–commons-loggingï¼š \u003cdependency\u003e \u003cgroupId\u003ecommons-logging\u003c/groupId\u003e \u003cartifactId\u003ecommons-logging\u003c/artifactId\u003e \u003cversion\u003e1.2\u003c/version\u003e \u003c/dependency\u003e ä½¿ç”¨\u003cdependency\u003eå£°æ˜ä¸€ä¸ªä¾èµ–åï¼ŒMavenå°±ä¼šè‡ªåŠ¨ä¸‹è½½è¿™ä¸ªä¾èµ–åŒ…å¹¶æŠŠå®ƒæ”¾åˆ°classpathä¸­ã€‚ ","date":"2022-03-03","objectID":"/maven/:0:0","tags":["work"],"title":"Maven å®‰è£…ç¼–è¯‘","uri":"/maven/"},{"categories":["work"],"content":"å®‰è£…Maven ","date":"2022-03-03","objectID":"/maven/:1:0","tags":["work"],"title":"Maven å®‰è£…ç¼–è¯‘","uri":"/maven/"},{"categories":["work"],"content":"Nodejs å®‰è£…ç¼–è¯‘ Node.jså¹³å°æ˜¯åœ¨åç«¯è¿è¡ŒJavaScriptä»£ç ï¼Œå¿…é¡»é¦–å…ˆåœ¨æœ¬æœºå®‰è£…Nodeç¯å¢ƒã€‚ ","date":"2022-03-03","objectID":"/nodejs/:0:0","tags":["work"],"title":"Nodejs å®‰è£…ç¼–è¯‘","uri":"/nodejs/"},{"categories":["work"],"content":"å®‰è£…Node.js ","date":"2022-03-03","objectID":"/nodejs/:1:0","tags":["work"],"title":"Nodejs å®‰è£…ç¼–è¯‘","uri":"/nodejs/"},{"categories":["work"],"content":"å®‰è£…npm npmå…¶å®æ˜¯Node.jsçš„åŒ…ç®¡ç†å·¥å…·ï¼ˆpackage managerï¼‰ã€‚ ","date":"2022-03-03","objectID":"/nodejs/:2:0","tags":["work"],"title":"Nodejs å®‰è£…ç¼–è¯‘","uri":"/nodejs/"},{"categories":["work"],"content":"åŸºç¡€ç¯å¢ƒå®‰è£… # docker è„šæœ¬å®‰è£… curl -sSL https://get.daocloud.io/docker | sh #docker compose è„šæœ¬å®‰è£… curl -L https://get.daocloud.io/docker/compose/releases/download/v2.4.1/docker-compose-`uname -s`-`uname -m` \u003e /usr/local/bin/docker-compose #å¯æ‰§è¡Œæƒé™ sudo chmod +x /usr/local/bin/docker-compose #åˆ›å»ºè½¯é“¾ï¼š sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose #æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ docker-compose --version ","date":"2022-03-03","objectID":"/ruoyi/:1:0","tags":["work"],"title":"ruoyi-cloud dockeréƒ¨ç½²","uri":"/ruoyi/"},{"categories":["work"],"content":"ä¸‹è½½å®‰è£… git clone https://gitlab.sanjiang.com/it-group/ruoyi-cloud.git ","date":"2022-03-03","objectID":"/ruoyi/:2:0","tags":["work"],"title":"ruoyi-cloud dockeréƒ¨ç½²","uri":"/ruoyi/"},{"categories":["work"],"content":"ç¼–è¯‘ cd ruoyi-cloud mvn clean install -DskipTests ","date":"2022-03-03","objectID":"/ruoyi/:3:0","tags":["work"],"title":"ruoyi-cloud dockeréƒ¨ç½²","uri":"/ruoyi/"},{"categories":["work"],"content":"å¤åˆ¶jaråŒ… cd ./docker ./copy.sh ","date":"2022-03-03","objectID":"/ruoyi/:4:0","tags":["work"],"title":"ruoyi-cloud dockeréƒ¨ç½²","uri":"/ruoyi/"},{"categories":["work"],"content":"éƒ¨ç½²docker ./deploy.sh base ./deploy.sh modules ","date":"2022-03-03","objectID":"/ruoyi/:5:0","tags":["work"],"title":"ruoyi-cloud dockeréƒ¨ç½²","uri":"/ruoyi/"},{"categories":["work"],"content":"æ£€æŸ¥docker docker ps -a | grep ruoyi docker logs -f ruoyi-auth docker logs -f ruoyi-gateway docker logs -f ruoyi-modules-system ","date":"2022-03-03","objectID":"/ruoyi/:6:0","tags":["work"],"title":"ruoyi-cloud dockeréƒ¨ç½²","uri":"/ruoyi/"},{"categories":["gitlab"],"content":"gitç‰ˆæœ¬æ§åˆ¶ ","date":"2022-02-28","objectID":"/git2/:0:0","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"ç‰ˆæœ¬å›é€€ ","date":"2022-02-28","objectID":"/git2/:1:0","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"1.æŸ¥çœ‹gitæäº¤å†å² #æŸ¥çœ‹gitæäº¤å†å² git log å¦‚æœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Š--pretty=onelineå‚æ•° git log --pretty=oneline ","date":"2022-02-28","objectID":"/git2/:1:1","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"2.å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ Gitå¿…é¡»çŸ¥é“å½“å‰ç‰ˆæœ¬æ˜¯å“ªä¸ªç‰ˆæœ¬ï¼Œåœ¨Gitä¸­ï¼Œç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯æœ€æ–°çš„æäº¤b534d741..ï¼ˆæ³¨æ„æˆ‘çš„æäº¤IDå’Œä½ çš„è‚¯å®šä¸ä¸€æ ·ï¼‰ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100 git reset --hard HEAD^ æœ€æ–°çš„é‚£ä¸ªç‰ˆæœ¬å·²ç»çœ‹ä¸åˆ°äº†ï¼Œå¯ä»¥é¡ºç€å¾€ä¸Šæ‰¾ï¼Œæ‰¾åˆ°é‚£ä¸ªç‰ˆæœ¬çš„ID git reset --hard c8275ca Gitåœ¨å†…éƒ¨æœ‰ä¸ªæŒ‡å‘å½“å‰ç‰ˆæœ¬çš„HEADæŒ‡é’ˆ,å½“ä½ å›é€€ç‰ˆæœ¬çš„æ—¶å€™ï¼ŒGitä»…ä»…æ˜¯æŠŠHEADä»æŒ‡å‘update â”Œâ”€â”€â”€â”€â” â”‚HEADâ”‚ â””â”€â”€â”€â”€â”˜ â”‚ â””â”€â”€\u003e â—‹ update â”‚ â—‹ Create README.md â”‚ â—‹ init æ”¹ä¸ºæŒ‡å‘Create README.mdï¼š â”Œâ”€â”€â”€â”€â” â”‚HEADâ”‚ â””â”€â”€â”€â”€â”˜ â”‚ â”‚ â—‹ update â”‚ â”‚ â””â”€â”€\u003e â—‹ Create README.md â”‚ â—‹ init ç°åœ¨ï¼Œä½ å›é€€åˆ°äº†æŸä¸ªç‰ˆæœ¬ï¼Œå…³æ‰äº†ç”µè„‘ï¼Œç¬¬äºŒå¤©æ—©ä¸Šå°±åæ‚”äº†ï¼Œæƒ³æ¢å¤åˆ°æ–°ç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿæ‰¾ä¸åˆ°æ–°ç‰ˆæœ¬çš„commit idæ€ä¹ˆåŠï¼Ÿ åœ¨Gitä¸­ï¼Œæ€»æ˜¯æœ‰åæ‚”è¯å¯ä»¥åƒçš„ã€‚å½“ä½ ç”¨$ git reset --hard HEAD^å›é€€åˆ°Create README.mdç‰ˆæœ¬æ—¶ï¼Œå†æƒ³æ¢å¤åˆ°updateï¼Œå°±å¿…é¡»æ‰¾åˆ°updateçš„commit idã€‚Gitæä¾›äº†ä¸€ä¸ªå‘½ä»¤git reflogç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ï¼š git reflog ","date":"2022-02-28","objectID":"/git2/:1:2","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"3.æ€»ç»“ä¸€ä¸‹ï¼š HEADæŒ‡å‘çš„ç‰ˆæœ¬å°±æ˜¯å½“å‰ç‰ˆæœ¬ï¼Œå› æ­¤ï¼ŒGitå…è®¸æˆ‘ä»¬åœ¨ç‰ˆæœ¬çš„å†å²ä¹‹é—´ç©¿æ¢­ï¼Œä½¿ç”¨å‘½ä»¤git reset --hard commit_idã€‚ ç©¿æ¢­å‰ï¼Œç”¨git logå¯ä»¥æŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ã€‚ è¦é‡è¿”æœªæ¥ï¼Œç”¨git reflogæŸ¥çœ‹å‘½ä»¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ã€‚ ","date":"2022-02-28","objectID":"/git2/:1:3","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"å·¥ä½œåŒºå’Œæš‚å­˜åŒº å·¥ä½œåŒºï¼ˆWorking Directoryï¼‰ å°±æ˜¯ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„shellæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒº ç‰ˆæœ¬åº“ï¼ˆRepositoryï¼‰ å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚ ","date":"2022-02-28","objectID":"/git2/:2:0","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"ç®¡ç†ä¿®æ”¹ é‚£æ€ä¹ˆæäº¤ç¬¬äºŒæ¬¡ä¿®æ”¹å‘¢ï¼Ÿä½ å¯ä»¥ç»§ç»­git addå†git commitï¼Œä¹Ÿå¯ä»¥åˆ«ç€æ€¥æäº¤ç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼Œå…ˆgit addç¬¬äºŒæ¬¡ä¿®æ”¹ï¼Œå†git commitï¼Œå°±ç›¸å½“äºæŠŠä¸¤æ¬¡ä¿®æ”¹åˆå¹¶åä¸€å—æäº¤äº†ï¼š ç¬¬ä¸€æ¬¡ä¿®æ”¹ -\u003e git add -\u003e ç¬¬äºŒæ¬¡ä¿®æ”¹ -\u003e git add -\u003e git commit ç°åœ¨ï¼Œä½ åˆç†è§£äº†Gitæ˜¯å¦‚ä½•è·Ÿè¸ªä¿®æ”¹çš„ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œå¦‚æœä¸ç”¨git addåˆ°æš‚å­˜åŒºï¼Œé‚£å°±ä¸ä¼šåŠ å…¥åˆ°commitä¸­ã€‚ ","date":"2022-02-28","objectID":"/git2/:3:0","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"æ’¤é”€ä¿®æ”¹ git checkout -- fileå¯ä»¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ git checkout -- readme.txt å‘½ä»¤git checkout -- readme.txtæ„æ€å°±æ˜¯ï¼ŒæŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š ä¸€ç§æ˜¯readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼› ä¸€ç§æ˜¯readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œç°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ã€‚ æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›åˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚ git checkout -- fileå‘½ä»¤ä¸­çš„--å¾ˆé‡è¦ï¼Œæ²¡æœ‰--ï¼Œå°±å˜æˆäº†â€œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯â€çš„å‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨åé¢çš„åˆ†æ”¯ç®¡ç†ä¸­ä¼šå†æ¬¡é‡åˆ°git checkoutå‘½ä»¤ã€‚ ","date":"2022-02-28","objectID":"/git2/:4:0","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["gitlab"],"content":"åˆ é™¤æ–‡ä»¶ ","date":"2022-02-28","objectID":"/git2/:5:0","tags":["gitlab"],"title":"gitç‰ˆæœ¬æ§åˆ¶","uri":"/git2/"},{"categories":["åŸºç¡€"],"content":"Linux crontab å‘½ä»¤ Linux crontabæ˜¯ç”¨æ¥å®šæœŸæ‰§è¡Œç¨‹åºçš„å‘½ä»¤ã€‚ ç³»ç»Ÿæ‰§è¡Œçš„å·¥ä½œï¼šç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œå¦‚å¤‡ä»½ç³»ç»Ÿæ•°æ®ã€æ¸…ç†ç¼“å­˜ ä¸ªäººæ‰§è¡Œçš„å·¥ä½œï¼šæŸä¸ªç”¨æˆ·å®šæœŸè¦åšçš„å·¥ä½œï¼Œä¾‹å¦‚æ¯éš”10åˆ†é’Ÿæ£€æŸ¥é‚®ä»¶æœåŠ¡å™¨æ˜¯å¦æœ‰æ–°ä¿¡ï¼Œè¿™äº›å·¥ä½œå¯ç”±æ¯ä¸ªç”¨æˆ·è‡ªè¡Œè®¾ç½® ","date":"2022-02-22","objectID":"/crontab/:0:0","tags":["è¿ç»´"],"title":"Linux crontab å‘½ä»¤","uri":"/crontab/"},{"categories":["åŸºç¡€"],"content":"è¯­æ³• crontab [ -u user ] file crontab [ -u user ] { -l | -r | -e } è¯´æ˜ï¼š crontab æ˜¯ç”¨æ¥è®©ä½¿ç”¨è€…åœ¨å›ºå®šæ—¶é—´æˆ–å›ºå®šé—´éš”æ‰§è¡Œç¨‹åºä¹‹ç”¨ï¼Œæ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼ä½¿ç”¨è€…çš„æ—¶ç¨‹è¡¨ã€‚ -u user æ˜¯æŒ‡è®¾å®šæŒ‡å®š user çš„æ—¶ç¨‹è¡¨ï¼Œè¿™ä¸ªå‰ææ˜¯ä½ å¿…é¡»è¦æœ‰å…¶æƒé™(æ¯”å¦‚è¯´æ˜¯ root)æ‰èƒ½å¤ŸæŒ‡å®šä»–äººçš„æ—¶ç¨‹è¡¨ã€‚å¦‚æœä¸ä½¿ç”¨ -u user çš„è¯ï¼Œå°±æ˜¯è¡¨ç¤ºè®¾å®šè‡ªå·±çš„æ—¶ç¨‹è¡¨ã€‚ å‚æ•°è¯´æ˜ï¼š -e : æ‰§è¡Œæ–‡å­—ç¼–è¾‘å™¨æ¥è®¾å®šæ—¶ç¨‹è¡¨ï¼Œå†…å®šçš„æ–‡å­—ç¼–è¾‘å™¨æ˜¯ VIï¼Œå¦‚æœä½ æƒ³ç”¨åˆ«çš„æ–‡å­—ç¼–è¾‘å™¨ï¼Œåˆ™è¯·å…ˆè®¾å®š VISUAL ç¯å¢ƒå˜æ•°æ¥æŒ‡å®šä½¿ç”¨é‚£ä¸ªæ–‡å­—ç¼–è¾‘å™¨(æ¯”å¦‚è¯´ setenv VISUAL joe) -r : åˆ é™¤ç›®å‰çš„æ—¶ç¨‹è¡¨ -l : åˆ—å‡ºç›®å‰çš„æ—¶ç¨‹è¡¨ æ—¶é—´æ ¼å¼å¦‚ä¸‹ï¼š f1 f2 f3 f4 f5 program * * * * * - - - - - | | | | | | | | | +----- æ˜ŸæœŸä¸­æ˜ŸæœŸå‡  (0 - 6) (æ˜ŸæœŸå¤© ä¸º0) | | | +---------- æœˆä»½ (1 - 12) | | +--------------- ä¸€ä¸ªæœˆä¸­çš„ç¬¬å‡ å¤© (1 - 31) | +-------------------- å°æ—¶ (0 - 23) +------------------------- åˆ†é’Ÿ (0 - 59) å…¶ä¸­ f1 æ˜¯è¡¨ç¤ºåˆ†é’Ÿï¼Œf2 è¡¨ç¤ºå°æ—¶ï¼Œf3 è¡¨ç¤ºä¸€ä¸ªæœˆä»½ä¸­çš„ç¬¬å‡ æ—¥ï¼Œf4 è¡¨ç¤ºæœˆä»½ï¼Œf5 è¡¨ç¤ºä¸€ä¸ªæ˜ŸæœŸä¸­çš„ç¬¬å‡ å¤©ã€‚program è¡¨ç¤ºè¦æ‰§è¡Œçš„ç¨‹åºã€‚ å½“ f1 ä¸º * æ—¶è¡¨ç¤ºæ¯åˆ†é’Ÿéƒ½è¦æ‰§è¡Œ programï¼Œf2 ä¸º * æ—¶è¡¨ç¤ºæ¯å°æ—¶éƒ½è¦æ‰§è¡Œç¨‹åºï¼Œå…¶é¦€ç±»æ¨ å½“ f1 ä¸º a-b æ—¶è¡¨ç¤ºä»ç¬¬ a åˆ†é’Ÿåˆ°ç¬¬ b åˆ†é’Ÿè¿™æ®µæ—¶é—´å†…è¦æ‰§è¡Œï¼Œf2 ä¸º a-b æ—¶è¡¨ç¤ºä»ç¬¬ a åˆ°ç¬¬ b å°æ—¶éƒ½è¦æ‰§è¡Œï¼Œå…¶é¦€ç±»æ¨ å½“ f1 ä¸º */n æ—¶è¡¨ç¤ºæ¯ n åˆ†é’Ÿä¸ªæ—¶é—´é—´éš”æ‰§è¡Œä¸€æ¬¡ï¼Œf2 ä¸º */n è¡¨ç¤ºæ¯ n å°æ—¶ä¸ªæ—¶é—´é—´éš”æ‰§è¡Œä¸€æ¬¡ï¼Œå…¶é¦€ç±»æ¨ å½“ f1 ä¸º a, b, c,... æ—¶è¡¨ç¤ºç¬¬ a, b, c,... åˆ†é’Ÿè¦æ‰§è¡Œï¼Œf2 ä¸º a, b, c,... æ—¶è¡¨ç¤ºç¬¬ a, b, c...ä¸ªå°æ—¶è¦æ‰§è¡Œï¼Œå…¶é¦€ç±»æ¨ ","date":"2022-02-22","objectID":"/crontab/:1:0","tags":["è¿ç»´"],"title":"Linux crontab å‘½ä»¤","uri":"/crontab/"},{"categories":["æ—¥å¸¸"],"content":"linux ç½‘ç»œæµ‹é€Ÿ ","date":"2022-02-22","objectID":"/bench/:0:0","tags":["javascript"],"title":"linux ç½‘ç»œæµ‹é€Ÿ","uri":"/bench/"},{"categories":["æ—¥å¸¸"],"content":"ä¸€é”®æµ‹è¯•è„šæœ¬bench.sh é€‚ç”¨äºå„ç§ Linux å‘è¡Œç‰ˆçš„ç½‘ç»œï¼ˆä¸‹è¡Œï¼‰å’Œ IO æµ‹è¯•ï¼š æ˜¾ç¤ºå½“å‰æµ‹è¯•çš„å„ç§ç³»ç»Ÿä¿¡æ¯ å–è‡ªä¸–ç•Œå¤šå¤„çš„çŸ¥åæ•°æ®ä¸­å¿ƒçš„æµ‹è¯•ç‚¹ï¼Œä¸‹è½½æµ‹è¯•æ¯”è¾ƒå…¨é¢ æ”¯æŒ IPv6 ä¸‹è½½æµ‹é€Ÿ IO æµ‹è¯•ä¸‰æ¬¡ï¼Œå¹¶æ˜¾ç¤ºå¹³å‡å€¼ wget -qO- bench.sh | bash #æˆ–è€…ä¸‹é¢è¿™å‘½ä»¤ä¸‹è½½æ‰§è¡Œ curl -Lso- bench.sh | bash æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2022-02-22","objectID":"/bench/:1:0","tags":["javascript"],"title":"linux ç½‘ç»œæµ‹é€Ÿ","uri":"/bench/"},{"categories":["docker"],"content":"docker å‘½ä»¤(2) ","date":"2022-02-18","objectID":"/docker02/:0:0","tags":["docker"],"title":"docker å‘½ä»¤(2)","uri":"/docker02/"},{"categories":["docker"],"content":"docker ps å‘½ä»¤ docker ps èƒ½æŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­çš„å®¹å™¨ docker ps -a èƒ½æŸ¥çœ‹æ‰€æœ‰çš„å®¹å™¨ docker rm -f $(docker ps -aq) å¼ºåˆ¶åˆ é™¤æ‰€æœ‰å®¹å™¨ ","date":"2022-02-18","objectID":"/docker02/:1:0","tags":["docker"],"title":"docker å‘½ä»¤(2)","uri":"/docker02/"},{"categories":["docker"],"content":"docker runå’Œdocker createæœ‰ä»€ä¹ˆåŒºåˆ« docker createå‘½ä»¤èƒ½å¤ŸåŸºäºé•œåƒåˆ›å»ºå®¹å™¨ã€‚ è¯¥å‘½ä»¤æ‰§è¡Œçš„æ•ˆæœç±»ä¼¼äºdocker run -dï¼Œå³åˆ›å»ºä¸€ä¸ªå°†åœ¨ç³»ç»Ÿåå°è¿è¡Œçš„å®¹å™¨ã€‚ ä½†æ˜¯ä¸docker run -dä¸åŒçš„æ˜¯ï¼Œdocker createåˆ›å»ºçš„å®¹å™¨å¹¶æœªå®é™…å¯åŠ¨ï¼Œè¿˜éœ€è¦æ‰§è¡Œdocker startå‘½ä»¤æˆ–docker runå‘½ä»¤ä»¥å¯åŠ¨å®¹å™¨ã€‚ äº‹å®ä¸Šï¼Œdocker createå‘½ä»¤å¸¸ç”¨äºåœ¨å¯åŠ¨å®¹å™¨ä¹‹å‰è¿›è¡Œå¿…è¦çš„è®¾ç½®ã€‚ ","date":"2022-02-18","objectID":"/docker02/:2:0","tags":["docker"],"title":"docker å‘½ä»¤(2)","uri":"/docker02/"},{"categories":["gitlab"],"content":"CICD æ¦‚å¿µ DevOps Devlopmentå’ŒOperationçš„ç»„åˆè¯ è§„åˆ’-ã€‹ä»£ç -ã€‹æ„å»º-ã€‹æµ‹è¯•-ã€‹å‘å¸ƒ-ã€‹éƒ¨ç½²-ã€‹è¿è¥-ã€‹ç›‘æ§-ã€‹å†æ¬¡è§„åˆ’ devOpsçœ‹ä½œå¼€å‘ï¼ˆè½¯ä»¶å·¥ç¨‹ï¼‰ã€æŠ€æœ¯è¿è¥å’Œè´¨é‡ä¿éšœï¼ˆQAï¼‰ä¸‰è€…çš„äº¤é›† çªå‡ºé‡è§†è½¯ä»¶å¼€å‘äººå‘˜å’Œè¿ç»´äººå‘˜çš„æ²Ÿé€šåˆä½œï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æµç¨‹æ¥ä½¿å¾—è½¯ä»¶æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒæ›´åŠ å¿«æ·ã€é¢‘ç¹å’Œå¯é ã€‚ DevOpså¸Œæœ›åšåˆ°çš„æ˜¯è½¯ä»¶äº§å“äº¤ä»˜è¿‡ç¨‹ä¸­ITå·¥å…·é“¾çš„æ‰“é€šï¼Œä½¿å¾—å„ä¸ªå›¢é˜Ÿå‡å°‘æ—¶é—´æŸè€—ã€‚æ›´åŠ é«˜æ•ˆçš„ååŒå·¥ä½œã€‚è‰¯å¥½çš„é—­ç¯å¯ä»¥å¤§å¤§å¢åŠ æ•´ä½“çš„äº§å‡ºã€‚ CICD æŒç»­é›†æˆ æŒç»­éƒ¨ç½² æŒç»­é›†æˆ æŒç»­é›†æˆæ˜¯æŒ‡è½¯ä»¶ä¸ªäººç ”å‘çš„éƒ¨åˆ†å‘è½¯ä»¶æ•´ä½“éƒ¨åˆ†äº¤ä»˜ï¼Œé¢‘ç¹è¿›è¡Œé›†æˆä»¥ä¾¿æ›´å¿«åœ°å‘ç°å…¶ä¸­çš„é”™è¯¯ã€‚â€œæŒç»­é›†æˆâ€æºè‡ªäºæé™ç¼–ç¨‹ï¼ˆXPï¼‰ï¼Œæ˜¯12æœ€åˆçš„12ç§å®è·µä¹‹ä¸€ Ciéœ€è¦å…·å¤‡è¿™äº›ï¼š å…¨é¢çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè¿™æ˜¯å®è·µæŒç»­é›†æˆå’ŒæŒç»­éƒ¨ç½²çš„åŸºç¡€ï¼ŒåŒæ—¶ï¼Œé€‰æ‹©åˆé€‚çš„è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ä¹Ÿæå…¶é‡è¦ï¼› çµæ´»çš„åŸºç¡€è®¾æ–½ã€‚å®¹å™¨ï¼Œè™šæ‹ŸåŒ–çš„å­˜åœ¨è®©å¼€å‘äººå‘˜å’ŒQAä¸å¿…å†å¤§è´¹å‘¨æŠ˜ ç‰ˆæœ¬æ§åˆ¶å·¥å…·ã€‚å¦‚gitï¼Œcvsï¼Œsvnç­‰ è‡ªåŠ¨åŒ–çš„æ„å»ºå’Œè½¯ä»¶å‘å¸ƒæµç¨‹å·¥å…·ï¼Œå¦‚ Jenkinsï¼Œflow.ci; åé¦ˆæœºåˆ¶ï¼Œå¦‚æ„å»º/æµ‹è¯•çš„å¤±è´¥ï¼Œå¯ä»¥å¿«é€Ÿåœ°åé¦ˆåˆ°ç›¸å…³è´Ÿè´£äººï¼Œä»¥å°½å¿«è§£å†³è¾¾åˆ°ä¸€ä¸ªæ›´ç¨³å®šçš„ç‰ˆæœ¬ã€‚ ","date":"2022-02-17","objectID":"/devops/:0:0","tags":["gitlab"],"title":"CICD æ¦‚å¿µ","uri":"/devops/"},{"categories":["gitlab"],"content":"gitä½¿ç”¨æ–¹æ³• ","date":"2022-02-17","objectID":"/git/:0:0","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"ä¸€ã€gitå®‰è£…é…ç½® Debian/Ubuntu apt-get install libcurl4-gnutls-dev libexpat1-dev gettext \\ libz-dev libssl-dev apt-get install git git --version git version 1.8.1.2 Centos/RedHat yum install curl-devel expat-devel gettext-devel \\ openssl-devel zlib-devel yum -y install git-core git --version git version 1.7.1 ","date":"2022-02-17","objectID":"/git/:1:0","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"äºŒã€gitæ‹‰å–å¼‚å¸¸å¦‚ä½•é‡æ–°æ‹‰å– ","date":"2022-02-17","objectID":"/git/:2:0","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"1.åŒä¸€æ–‡ä»¶æœ‰ä¿®æ”¹ï¼Œäº§ç”Ÿå†²çªã€‚ å…ˆå°†æœ¬åœ°ä¿®æ”¹å­˜å‚¨èµ·æ¥ ä½¿ç”¨git stashå‘½ä»¤ï¼Œè¿™æ ·æœ¬åœ°çš„æ‰€æœ‰ä¿®æ”¹å°±éƒ½è¢«æš‚æ—¶å­˜å‚¨èµ·æ¥ ã€‚å…¶ä¸­stash@{0}å°±æ˜¯åˆšæ‰ä¿å­˜çš„æ ‡è®°ã€‚åç»­å¯ä»¥é€šè¿‡æ­¤æ ‡è®°è®¿é—®ã€‚ å†æ¬¡æ‹‰å–ä»£ç  git pull è¿˜åŸæš‚å­˜çš„å†…å®¹ git stash pop stash@{0} è§£å†³å†²çª åœ¨å­˜åœ¨å†²çªçš„æ–‡ä»¶ä¸­ï¼ŒUpdated upstream å’Œ=====ä¹‹é—´çš„å†…å®¹ä¸ºæ‹‰å–ä¸‹æ¥çš„ä»£ç ï¼Œ=====å’Œstashed changesä¹‹é—´çš„å†…å®¹å°±ä¸ºæœ¬åœ°ä¿®æ”¹çš„ä»£ç ã€‚è§£å†³å®Œæˆä¹‹åï¼Œå°±å¯ä»¥æ­£å¸¸çš„æäº¤äº†ã€‚ 5.åˆ é™¤stash ä½¿ç”¨git stash drop stash@{0}å‘½ä»¤ï¼Œå¦‚æœä¸åŠ stashç¼–å·ï¼Œé»˜è®¤çš„å°±æ˜¯åˆ é™¤æœ€æ–°çš„ï¼Œå³ç¼–å·ä¸º0çš„ã€‚æˆ–è€…git stash clearå‘½ä»¤ï¼Œæ¸…é™¤æ‰€æœ‰stashã€‚ ","date":"2022-02-17","objectID":"/git/:2:1","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"2.æƒ³è¦è®©æŸä¸€ä¸ªæ–‡ä»¶æ”¾å¼ƒä¿®æ”¹ï¼ŒåŒæ­¥æœåŠ¡å™¨ã€‚ git checkout [æœ¬åœ°å˜åŠ¨æ–‡ä»¶çš„è·¯å¾„] ","date":"2022-02-17","objectID":"/git/:2:2","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"3.æœåŠ¡å™¨ä»£ç å®Œå…¨æ›¿æ¢å’Œè¦†ç›–æœ¬åœ°çš„ä»£ç æ”¹åŠ¨ã€‚ git fetch --all git reset --hard origin/master git pull ","date":"2022-02-17","objectID":"/git/:2:3","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"ä¸‰ã€gitå‘½ä»¤è¡¨æ ¼ ä¸“ç”¨åè¯ å«ä¹‰ Workspace å·¥ä½œåŒº Index/Stage æš‚å­˜åŒº Repository ä»“åº“åŒºï¼ˆæˆ–æœ¬åœ°ä»“åº“ï¼‰ Remote è¿œç¨‹ä»“åº“ ","date":"2022-02-17","objectID":"/git/:3:0","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"1.æ–°å»ºä»£ç ä»“åº“ # åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“ $ git init # æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“ $ git init [project-name] # ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å² $ git clone [url] ","date":"2022-02-17","objectID":"/git/:3:1","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"2.é…ç½® Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚ # æ˜¾ç¤ºå½“å‰çš„Gité…ç½® $ git config --list # ç¼–è¾‘Gité…ç½®æ–‡ä»¶ $ git config -e [--global] # è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯ $ git config [--global] user.name \"[name]\" $ git config [--global] user.email \"[email address]\" ","date":"2022-02-17","objectID":"/git/:3:2","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"3.å¢åŠ /åˆ é™¤æ–‡ä»¶ # æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº $ git add [file1] [file2] ... # æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½• $ git add [dir] # æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº $ git add . # æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤ # å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤ $ git add -p # åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº $ git rm [file1] [file2] ... # åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº $ git rm --cached [file] # æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº $ git mv [file-original] [file-renamed] ","date":"2022-02-17","objectID":"/git/:3:3","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"4.ä»£ç æäº¤ # æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº $ git commit -m [message] # æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº $ git commit [file1] [file2] ... -m [message] # æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº $ git commit -a # æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯ $ git commit -v # ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤ # å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯ $ git commit --amend -m [message] # é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ– $ git commit --amend [file1] [file2] ... ","date":"2022-02-17","objectID":"/git/:3:4","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"5.åˆ†æ”¯ # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯ $ git branch # åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ $ git branch -r # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯ $ git branch -a # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯ $ git branch [branch-name] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ $ git checkout -b [branch] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit $ git branch [branch] [commit] # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³» $ git branch --track [branch] [remote-branch] # åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº $ git checkout [branch-name] # åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ $ git checkout - # å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´ $ git branch --set-upstream [branch] [remote-branch] # åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ $ git merge [branch] # é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯ $ git cherry-pick [commit] # åˆ é™¤åˆ†æ”¯ $ git branch -d [branch-name] # åˆ é™¤è¿œç¨‹åˆ†æ”¯ $ git push origin --delete [branch-name] $ git branch -dr [remote/branch] ","date":"2022-02-17","objectID":"/git/:3:5","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"6.æ ‡ç­¾ # åˆ—å‡ºæ‰€æœ‰tag $ git tag # æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit $ git tag [tag] # æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit $ git tag [tag] [commit] # åˆ é™¤æœ¬åœ°tag $ git tag -d [tag] # åˆ é™¤è¿œç¨‹tag $ git push origin :refs/tags/[tagName] # æŸ¥çœ‹tagä¿¡æ¯ $ git show [tag] # æäº¤æŒ‡å®štag $ git push [remote] [tag] # æäº¤æ‰€æœ‰tag $ git push [remote] --tags # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag $ git checkout -b [branch] [tag] ","date":"2022-02-17","objectID":"/git/:3:6","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"7.æŸ¥çœ‹ä¿¡æ¯ # æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶ $ git status # æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å² $ git log # æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶ $ git log --stat # æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯ $ git log -S [keyword] # æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ $ git log [tag] HEAD --pretty=format:%s # æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶\"æäº¤è¯´æ˜\"å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶ $ git log [tag] HEAD --grep feature # æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å $ git log --follow [file] $ git whatchanged [file] # æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff $ git log -p [file] # æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤ $ git log -5 --pretty --oneline # æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº $ git shortlog -sn # æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡ $ git blame [file] # æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ $ git diff # æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚ $ git diff --cached [file] # æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚ $ git diff HEAD # æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚ $ git diff [first-branch]...[second-branch] # æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç  $ git diff --shortstat \"@{0 day ago}\" # æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ– $ git show [commit] # æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶ $ git show --name-only [commit] # æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹ $ git show [commit]:[filename] # æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤ $ git reflog ","date":"2022-02-17","objectID":"/git/:3:7","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"è¿œç¨‹åŒæ­¥ # ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨ $ git fetch [remote] # æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“ $ git remote -v # æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯ $ git remote show [remote] # å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å $ git remote add [shortname] [url] # å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶ $ git pull [remote] [branch] # ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ $ git push [remote] [branch] # å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª $ git push [remote] --force # æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ $ git push [remote] --all ","date":"2022-02-17","objectID":"/git/:3:8","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"æ’¤é”€ # æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº $ git checkout [file] # æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº $ git checkout [commit] [file] # æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº $ git checkout . # é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜ $ git reset [file] # é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ $ git reset --hard # é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜ $ git reset [commit] # é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´ $ git reset --hard [commit] # é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜ $ git reset --keep [commit] # æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit # åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ $ git revert [commit] # æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥ $ git stash $ git stash pop ","date":"2022-02-17","objectID":"/git/:3:9","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["gitlab"],"content":"å…¶ä»– # ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ… $ git archive ","date":"2022-02-17","objectID":"/git/:3:10","tags":["gitlab"],"title":"gitä½¿ç”¨æ–¹æ³•","uri":"/git/"},{"categories":["k8s"],"content":"kubernetesé¢è¯•é¢˜æ±‡æ€» ","date":"2022-02-16","objectID":"/k8s3/:0:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"1ã€ k8sæ˜¯ä»€ä¹ˆï¼Ÿè¯·è¯´å‡ºä½ çš„äº†è§£ï¼Ÿ ç­”ï¼šKubenetesæ˜¯ä¸€ä¸ªé’ˆå¯¹å®¹å™¨åº”ç”¨ï¼Œè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ï¼Œå¼¹æ€§ä¼¸ç¼©å’Œç®¡ç†çš„å¼€æºç³»ç»Ÿã€‚ä¸»è¦åŠŸèƒ½æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­çš„å®¹å™¨ç¼–æ’ã€‚ K8Sæ˜¯Googleå…¬å¸æ¨å‡ºçš„ï¼Œå®ƒæ¥æºäºç”±Googleå…¬å¸å†…éƒ¨ä½¿ç”¨äº†15å¹´çš„Borgç³»ç»Ÿï¼Œé›†ç»“äº†Borgçš„ç²¾åã€‚ ","date":"2022-02-16","objectID":"/k8s3/:1:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"2ã€ K8sæ¶æ„çš„ç»„æˆæ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šå’Œå¤§å¤šæ•°åˆ†å¸ƒå¼ç³»ç»Ÿä¸€æ ·ï¼ŒK8Sé›†ç¾¤è‡³å°‘éœ€è¦ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰å’Œå¤šä¸ªè®¡ç®—èŠ‚ç‚¹ï¼ˆNodeï¼‰ã€‚ ä¸»èŠ‚ç‚¹ä¸»è¦ç”¨äºæš´éœ²APIï¼Œè°ƒåº¦éƒ¨ç½²å’ŒèŠ‚ç‚¹çš„ç®¡ç†ï¼› è®¡ç®—èŠ‚ç‚¹è¿è¡Œä¸€ä¸ªå®¹å™¨è¿è¡Œç¯å¢ƒï¼Œä¸€èˆ¬æ˜¯dockerç¯å¢ƒï¼ˆç±»ä¼¼dockerç¯å¢ƒçš„è¿˜æœ‰rktï¼‰ï¼ŒåŒæ—¶è¿è¡Œä¸€ä¸ªK8sçš„ä»£ç†ï¼ˆkubeletï¼‰ç”¨äºå’Œmasteré€šä¿¡ã€‚è®¡ç®—èŠ‚ç‚¹ä¹Ÿä¼šè¿è¡Œä¸€äº›é¢å¤–çš„ç»„ä»¶ï¼Œåƒè®°å½•æ—¥å¿—ï¼ŒèŠ‚ç‚¹ç›‘æ§ï¼ŒæœåŠ¡å‘ç°ç­‰ç­‰ã€‚è®¡ç®—èŠ‚ç‚¹æ˜¯k8sé›†ç¾¤ä¸­çœŸæ­£å·¥ä½œçš„èŠ‚ç‚¹ã€‚ K8Sæ¶æ„ç»†åˆ†ï¼š 1ã€MasterèŠ‚ç‚¹ï¼ˆé»˜è®¤ä¸å‚åŠ å®é™…å·¥ä½œï¼‰ï¼š Kubectlï¼šå®¢æˆ·ç«¯å‘½ä»¤è¡Œå·¥å…·ï¼Œä½œä¸ºæ•´ä¸ªK8sé›†ç¾¤çš„æ“ä½œå…¥å£ï¼› Api Serverï¼šåœ¨K8sæ¶æ„ä¸­æ‰¿æ‹…çš„æ˜¯â€œæ¡¥æ¢â€çš„è§’è‰²ï¼Œä½œä¸ºèµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œå®ƒæä¾›äº†è®¤è¯ã€æˆæƒã€è®¿é—®æ§åˆ¶ã€APIæ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶ã€‚å®¢æˆ·ç«¯ä¸k8sç¾¤é›†åŠK8så†…éƒ¨ç»„ä»¶çš„é€šä¿¡ï¼Œéƒ½è¦é€šè¿‡Api Serverè¿™ä¸ªç»„ä»¶ï¼› Controller-managerï¼šè´Ÿè´£ç»´æŠ¤ç¾¤é›†çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰ï¼› Schedulerï¼šè´Ÿè´£èµ„æºçš„è°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°†podè°ƒåº¦åˆ°ç›¸åº”çš„nodeèŠ‚ç‚¹ä¸Šï¼› Etcdï¼šæ‹…ä»»æ•°æ®ä¸­å¿ƒçš„è§’è‰²ï¼Œä¿å­˜äº†æ•´ä¸ªç¾¤é›†çš„çŠ¶æ€ï¼› 2ã€NodeèŠ‚ç‚¹ï¼š Kubeletï¼šè´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶ä¹Ÿè´Ÿè´£Volumeå’Œç½‘ç»œçš„ç®¡ç†ï¼Œä¸€èˆ¬è¿è¡Œåœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œæ˜¯NodeèŠ‚ç‚¹çš„ä»£ç†ï¼Œå½“Schedulerç¡®å®šæŸä¸ªnodeä¸Šè¿è¡Œpodä¹‹åï¼Œä¼šå°†podçš„å…·ä½“ä¿¡æ¯ï¼ˆimageï¼Œvolumeï¼‰ç­‰å‘é€ç»™è¯¥èŠ‚ç‚¹çš„kubeletï¼Œkubeletæ ¹æ®è¿™äº›ä¿¡æ¯åˆ›å»ºå’Œè¿è¡Œå®¹å™¨ï¼Œå¹¶å‘masterè¿”å›è¿è¡ŒçŠ¶æ€ã€‚ï¼ˆè‡ªåŠ¨ä¿®å¤åŠŸèƒ½ï¼šå¦‚æœæŸä¸ªèŠ‚ç‚¹ä¸­çš„å®¹å™¨å®•æœºï¼Œå®ƒä¼šå°è¯•é‡å¯è¯¥å®¹å™¨ï¼Œè‹¥é‡å¯æ— æ•ˆï¼Œåˆ™ä¼šå°†è¯¥podæ€æ­»ï¼Œç„¶åé‡æ–°åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼‰ï¼› Kube-proxyï¼šServiceåœ¨é€»è¾‘ä¸Šä»£è¡¨äº†åç«¯çš„å¤šä¸ªpodã€‚è´Ÿè´£ä¸ºServiceæä¾›clusterå†…éƒ¨çš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼ˆå¤–ç•Œé€šè¿‡Serviceè®¿é—®podæä¾›çš„æœåŠ¡æ—¶ï¼ŒServiceæ¥æ”¶åˆ°çš„è¯·æ±‚åå°±æ˜¯é€šè¿‡kube-proxyæ¥è½¬å‘åˆ°podä¸Šçš„ï¼‰ï¼› container-runtimeï¼šæ˜¯è´Ÿè´£ç®¡ç†è¿è¡Œå®¹å™¨çš„è½¯ä»¶ï¼Œæ¯”å¦‚docker Podï¼šæ˜¯k8sé›†ç¾¤é‡Œé¢æœ€å°çš„å•ä½ã€‚æ¯ä¸ªpodé‡Œè¾¹å¯ä»¥è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªcontainerï¼ˆå®¹å™¨ï¼‰ï¼Œå¦‚æœä¸€ä¸ªpodä¸­æœ‰ä¸¤ä¸ªcontainerï¼Œé‚£ä¹ˆcontainerçš„USRï¼ˆç”¨æˆ·ï¼‰ã€MNTï¼ˆæŒ‚è½½ç‚¹ï¼‰ã€PIDï¼ˆè¿›ç¨‹å·ï¼‰æ˜¯ç›¸äº’éš”ç¦»çš„ï¼ŒUTSï¼ˆä¸»æœºåå’ŒåŸŸåï¼‰ã€IPCï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€NETï¼ˆç½‘ç»œæ ˆï¼‰æ˜¯ç›¸äº’å…±äº«çš„ã€‚æˆ‘æ¯”è¾ƒå–œæ¬¢æŠŠpodæ¥å½“åšè±Œè±†å¤¹ï¼Œè€Œè±Œè±†å°±æ˜¯podä¸­çš„containerï¼› ","date":"2022-02-16","objectID":"/k8s3/:2:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"3ã€ å®¹å™¨å’Œä¸»æœºéƒ¨ç½²åº”ç”¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šå®¹å™¨çš„ä¸­å¿ƒæ€æƒ³å°±æ˜¯ç§’çº§å¯åŠ¨ï¼›ä¸€æ¬¡å°è£…ã€åˆ°å¤„è¿è¡Œï¼›è¿™æ˜¯ä¸»æœºéƒ¨ç½²åº”ç”¨æ— æ³•è¾¾åˆ°çš„æ•ˆæœï¼Œä½†åŒæ—¶ä¹Ÿæ›´åº”è¯¥æ³¨é‡å®¹å™¨çš„æ•°æ®æŒä¹…åŒ–é—®é¢˜ã€‚ å¦å¤–ï¼Œå®¹å™¨éƒ¨ç½²å¯ä»¥å°†å„ä¸ªæœåŠ¡è¿›è¡Œéš”ç¦»ï¼Œäº’ä¸å½±å“ï¼Œè¿™ä¹Ÿæ˜¯å®¹å™¨çš„å¦ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚ ","date":"2022-02-16","objectID":"/k8s3/:3:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"4ã€è¯·ä½ è¯´ä¸€ä¸‹kubenetesé’ˆå¯¹podèµ„æºå¯¹è±¡çš„å¥åº·ç›‘æµ‹æœºåˆ¶ï¼Ÿ ç­”ï¼šK8sä¸­å¯¹äºpodèµ„æºå¯¹è±¡çš„å¥åº·çŠ¶æ€æ£€æµ‹ï¼Œæä¾›äº†ä¸‰ç±»probeï¼ˆæ¢é’ˆï¼‰æ¥æ‰§è¡Œå¯¹podçš„å¥åº·ç›‘æµ‹ï¼š livenessProbeæ¢é’ˆ å¯ä»¥æ ¹æ®ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™æ¥åˆ¤å®špodæ˜¯å¦å¥åº·ï¼Œå¦‚æœlivenessProbeæ¢é’ˆæ¢æµ‹åˆ°å®¹å™¨ä¸å¥åº·ï¼Œåˆ™kubeletä¼šæ ¹æ®å…¶é‡å¯ç­–ç•¥æ¥å†³å®šæ˜¯å¦é‡å¯ï¼Œå¦‚æœä¸€ä¸ªå®¹å™¨ä¸åŒ…å«livenessProbeæ¢é’ˆï¼Œåˆ™kubeletä¼šè®¤ä¸ºå®¹å™¨çš„livenessProbeæ¢é’ˆçš„è¿”å›å€¼æ°¸è¿œæˆåŠŸã€‚ ReadinessProbeæ¢é’ˆ åŒæ ·æ˜¯å¯ä»¥æ ¹æ®ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™æ¥åˆ¤æ–­podæ˜¯å¦å¥åº·ï¼Œå¦‚æœæ¢æµ‹å¤±è´¥ï¼Œæ§åˆ¶å™¨ä¼šå°†æ­¤podä»å¯¹åº”serviceçš„endpointåˆ—è¡¨ä¸­ç§»é™¤ï¼Œä»æ­¤ä¸å†å°†ä»»ä½•è¯·æ±‚è°ƒåº¦åˆ°æ­¤Podä¸Šï¼Œç›´åˆ°ä¸‹æ¬¡æ¢æµ‹æˆåŠŸã€‚ startupProbeæ¢é’ˆ å¯åŠ¨æ£€æŸ¥æœºåˆ¶ï¼Œåº”ç”¨ä¸€äº›å¯åŠ¨ç¼“æ…¢çš„ä¸šåŠ¡ï¼Œé¿å…ä¸šåŠ¡é•¿æ—¶é—´å¯åŠ¨è€Œè¢«ä¸Šé¢ä¸¤ç±»æ¢é’ˆkillæ‰ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå¯ä»¥æ¢å¦ä¸€ç§æ–¹å¼è§£å†³ï¼Œå°±æ˜¯å®šä¹‰ä¸Šé¢ä¸¤ç±»æ¢é’ˆæœºåˆ¶æ—¶ï¼Œåˆå§‹åŒ–æ—¶é—´å®šä¹‰çš„é•¿ä¸€äº›å³å¯ã€‚ æ¯ç§æ¢æµ‹æ–¹æ³•èƒ½æ”¯æŒä»¥ä¸‹å‡ ä¸ªç›¸åŒçš„æ£€æŸ¥å‚æ•°ï¼Œç”¨äºè®¾ç½®æ§åˆ¶æ£€æŸ¥æ—¶é—´ï¼š initialDelaySecondsï¼šåˆå§‹ç¬¬ä¸€æ¬¡æ¢æµ‹é—´éš”ï¼Œç”¨äºåº”ç”¨å¯åŠ¨çš„æ—¶é—´ï¼Œé˜²æ­¢åº”ç”¨è¿˜æ²¡å¯åŠ¨è€Œå¥åº·æ£€æŸ¥å¤±è´¥ periodSecondsï¼šæ£€æŸ¥é—´éš”ï¼Œå¤šä¹…æ‰§è¡Œprobeæ£€æŸ¥ï¼Œé»˜è®¤ä¸º10sï¼› timeoutSecondsï¼šæ£€æŸ¥è¶…æ—¶æ—¶é•¿ï¼Œæ¢æµ‹åº”ç”¨timeoutåä¸ºå¤±è´¥ï¼› successThresholdï¼šæˆåŠŸæ¢æµ‹é˜ˆå€¼ï¼Œè¡¨ç¤ºæ¢æµ‹å¤šå°‘æ¬¡ä¸ºå¥åº·æ­£å¸¸ï¼Œé»˜è®¤æ¢æµ‹1æ¬¡ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:4:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"ä¸Šé¢ä¸¤ç§æ¢é’ˆéƒ½æ”¯æŒä»¥ä¸‹ä¸‰ç§æ¢æµ‹æ–¹æ³•ï¼š Execï¼šé€šè¿‡æ‰§è¡Œå‘½ä»¤çš„æ–¹å¼æ¥æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Œæ¯”å¦‚ä½¿ç”¨catå‘½ä»¤æŸ¥çœ‹podä¸­çš„æŸä¸ªé‡è¦é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™è¡¨ç¤ºpodå¥åº·ã€‚åä¹‹å¼‚å¸¸ã€‚ Execæ¢æµ‹æ–¹å¼çš„yamlæ–‡ä»¶è¯­æ³•å¦‚ä¸‹ï¼š spec: containers: - name: liveness image: k8s.gcr.io/busybox args: - /bin/sh - -c - touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600 livenessProbe: #é€‰æ‹©livenessProbeçš„æ¢æµ‹æœºåˆ¶ exec: #æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ command: - cat - /tmp/healthy initialDelaySeconds: 5 #åœ¨å®¹å™¨è¿è¡Œäº”ç§’åå¼€å§‹æ¢æµ‹ periodSeconds: 5 #æ¯æ¬¡æ¢æµ‹çš„æ—¶é—´é—´éš”ä¸º5ç§’ åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæ¢æµ‹æœºåˆ¶ä¸ºåœ¨å®¹å™¨è¿è¡Œ5ç§’åï¼Œæ¯éš”äº”ç§’æ¢æµ‹ä¸€æ¬¡ï¼Œå¦‚æœcatå‘½ä»¤è¿”å›çš„å€¼ä¸ºâ€œ0â€ï¼Œåˆ™è¡¨ç¤ºå¥åº·ï¼Œå¦‚æœä¸ºé0ï¼Œåˆ™è¡¨ç¤ºå¼‚å¸¸ã€‚ Httpgetï¼šé€šè¿‡å‘é€http/htpsè¯·æ±‚æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼Œè¿”å›çš„çŠ¶æ€ç ä¸º200-399åˆ™è¡¨ç¤ºå®¹å™¨å¥åº·ï¼ˆæ³¨http getç±»ä¼¼äºå‘½ä»¤curl -Iï¼‰ã€‚ Httpgetæ¢æµ‹æ–¹å¼çš„yamlæ–‡ä»¶è¯­æ³•å¦‚ä¸‹ï¼š spec: containers: - name: liveness image: k8s.gcr.io/liveness livenessProbe: #é‡‡ç”¨livenessProbeæœºåˆ¶æ¢æµ‹ httpGet: #é‡‡ç”¨httpgetçš„æ–¹å¼ scheme:HTTP #æŒ‡å®šåè®®ï¼Œä¹Ÿæ”¯æŒhttps path: /healthz #æ£€æµ‹æ˜¯å¦å¯ä»¥è®¿é—®åˆ°ç½‘é¡µæ ¹ç›®å½•ä¸‹çš„healthzç½‘é¡µæ–‡ä»¶ port: 8080 #ç›‘å¬ç«¯å£æ˜¯8080 initialDelaySeconds: 3 #å®¹å™¨è¿è¡Œ3ç§’åå¼€å§‹æ¢æµ‹ periodSeconds: 3 #æ¢æµ‹é¢‘ç‡ä¸º3ç§’ ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼Œæ¢æµ‹æ–¹å¼ä¸ºé¡¹å®¹å™¨å‘é€HTTP GETè¯·æ±‚ï¼Œè¯·æ±‚çš„æ˜¯8080ç«¯å£ä¸‹çš„healthzæ–‡ä»¶ï¼Œè¿”å›ä»»ä½•å¤§äºæˆ–ç­‰äº200ä¸”å°äº400çš„çŠ¶æ€ç è¡¨ç¤ºæˆåŠŸã€‚ä»»ä½•å…¶ä»–ä»£ç è¡¨ç¤ºå¼‚å¸¸ã€‚ tcpSocketï¼šé€šè¿‡å®¹å™¨çš„IPå’ŒPortæ‰§è¡ŒTCPæ£€æŸ¥ï¼Œå¦‚æœèƒ½å¤Ÿå»ºç«‹TCPè¿æ¥ï¼Œåˆ™è¡¨æ˜å®¹å™¨å¥åº·ï¼Œè¿™ç§æ–¹å¼ä¸HTTPgetçš„æ¢æµ‹æœºåˆ¶æœ‰äº›ç±»ä¼¼ï¼Œtcpsocketå¥åº·æ£€æŸ¥é€‚ç”¨äºTCPä¸šåŠ¡ã€‚ tcpSocketæ¢æµ‹æ–¹å¼çš„yamlæ–‡ä»¶è¯­æ³•å¦‚ä¸‹ï¼š spec: containers: - name: goproxy image: k8s.gcr.io/goproxy:0.1 ports: - containerPort: 8080 #è¿™é‡Œä¸¤ç§æ¢æµ‹æœºåˆ¶éƒ½ç”¨ä¸Šäº†ï¼Œéƒ½æ˜¯ä¸ºäº†å’Œå®¹å™¨çš„8080ç«¯å£å»ºç«‹TCPè¿æ¥ readinessProbe: tcpSocket: port: 8080 initialDelaySeconds: 5 periodSeconds: 10 livenessProbe: tcpSocket: port: 8080 initialDelaySeconds: 15 periodSeconds: 20 åœ¨ä¸Šè¿°çš„yamlé…ç½®æ–‡ä»¶ä¸­ï¼Œä¸¤ç±»æ¢é’ˆéƒ½ä½¿ç”¨äº†ï¼Œåœ¨å®¹å™¨å¯åŠ¨5ç§’åï¼Œkubeletå°†å‘é€ç¬¬ä¸€ä¸ªreadinessProbeæ¢é’ˆï¼Œè¿™å°†è¿æ¥å®¹å™¨çš„8080ç«¯å£ï¼Œå¦‚æœæ¢æµ‹æˆåŠŸï¼Œåˆ™è¯¥podä¸ºå¥åº·ï¼Œåç§’åï¼Œkubeletå°†è¿›è¡Œç¬¬äºŒæ¬¡è¿æ¥ã€‚ é™¤äº†readinessProbeæ¢é’ˆå¤–ï¼Œåœ¨å®¹å™¨å¯åŠ¨15ç§’åï¼Œkubeletå°†å‘é€ç¬¬ä¸€ä¸ªlivenessProbeæ¢é’ˆï¼Œä»ç„¶å°è¯•è¿æ¥å®¹å™¨çš„8080ç«¯å£ï¼Œå¦‚æœè¿æ¥å¤±è´¥ï¼Œåˆ™é‡å¯å®¹å™¨ã€‚ æ¢é’ˆæ¢æµ‹çš„ç»“æœæ— å¤–ä¹ä»¥ä¸‹ä¸‰è€…ä¹‹ä¸€ï¼š Successï¼šContaineré€šè¿‡äº†æ£€æŸ¥ï¼› Failureï¼šContaineræ²¡æœ‰é€šè¿‡æ£€æŸ¥ï¼› Unknownï¼šæ²¡æœ‰æ‰§è¡Œæ£€æŸ¥ï¼Œå› æ­¤ä¸é‡‡å–ä»»ä½•æªæ–½ï¼ˆé€šå¸¸æ˜¯æˆ‘ä»¬æ²¡æœ‰å®šä¹‰æ¢é’ˆæ£€æµ‹ï¼Œé»˜è®¤ä¸ºæˆåŠŸï¼‰ã€‚ è‹¥è§‰å¾—ä¸Šé¢è¿˜ä¸å¤Ÿé€å½»ï¼Œå¯ä»¥ç§»æ­¥å…¶å®˜ç½‘æ–‡æ¡£ï¼šhttps://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/ ","date":"2022-02-16","objectID":"/k8s3/:5:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"5ã€ å¦‚ä½•æ§åˆ¶æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ï¼Ÿ ç­”ï¼š å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹åˆ°æ›´æ–°æ—¶å¯ä»¥æ§åˆ¶çš„å‚æ•°ï¼š [root@master yaml]# kubectl explain deploy.spec.strategy.rollingUpdate maxSurge ï¼šæ­¤å‚æ•°æ§åˆ¶æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ï¼Œå‰¯æœ¬æ€»æ•°è¶…è¿‡é¢„æœŸpodæ•°é‡çš„ä¸Šé™ã€‚å¯ä»¥æ˜¯ç™¾åˆ†æ¯”ï¼Œä¹Ÿå¯ä»¥æ˜¯å…·ä½“çš„å€¼ã€‚é»˜è®¤ä¸º1ã€‚ ï¼ˆä¸Šè¿°å‚æ•°çš„ä½œç”¨å°±æ˜¯åœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå€¼è‹¥ä¸º3ï¼Œé‚£ä¹ˆä¸ç®¡ä¸‰ä¸ƒäºŒä¸€ï¼Œå…ˆè¿è¡Œä¸‰ä¸ªpodï¼Œç”¨äºæ›¿æ¢æ—§çš„podï¼Œä»¥æ­¤ç±»æ¨ï¼‰ maxUnavailableï¼šæ­¤å‚æ•°æ§åˆ¶æ»šåŠ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œä¸å¯ç”¨çš„Podçš„æ•°é‡ã€‚ ï¼ˆè¿™ä¸ªå€¼å’Œä¸Šé¢çš„å€¼æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä¸¾ä¸ªä¾‹å­ï¼šæˆ‘æœ‰åä¸ªpodï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å…è®¸è¿™åä¸ªpodä¸­æœ€å¤šæœ‰ä¸‰ä¸ªä¸å¯ç”¨ï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ªå‚æ•°çš„å€¼è®¾ç½®ä¸º3ï¼Œåœ¨æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œåªè¦ä¸å¯ç”¨çš„podæ•°é‡å°äºæˆ–ç­‰äº3ï¼Œé‚£ä¹ˆæ›´æ–°è¿‡ç¨‹å°±ä¸ä¼šåœæ­¢ï¼‰ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:6:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"6ã€K8sä¸­é•œåƒçš„ä¸‹è½½ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šå¯é€šè¿‡å‘½ä»¤â€œkubectl explain pod.spec.containersâ€æ¥æŸ¥çœ‹imagePullPolicyè¿™è¡Œçš„è§£é‡Šã€‚ K8sçš„é•œåƒä¸‹è½½ç­–ç•¥æœ‰ä¸‰ç§ï¼šAlwaysã€Neverã€IFNotPresentï¼› Alwaysï¼šé•œåƒæ ‡ç­¾ä¸ºlatestæ—¶ï¼Œæ€»æ˜¯ä»æŒ‡å®šçš„ä»“åº“ä¸­è·å–é•œåƒï¼› Neverï¼šç¦æ­¢ä»ä»“åº“ä¸­ä¸‹è½½é•œåƒï¼Œä¹Ÿå°±æ˜¯è¯´åªèƒ½ä½¿ç”¨æœ¬åœ°é•œåƒï¼› IfNotPresentï¼šä»…å½“æœ¬åœ°æ²¡æœ‰å¯¹åº”é•œåƒæ—¶ï¼Œæ‰ä»ç›®æ ‡ä»“åº“ä¸­ä¸‹è½½ã€‚ é»˜è®¤çš„é•œåƒä¸‹è½½ç­–ç•¥æ˜¯ï¼šå½“é•œåƒæ ‡ç­¾æ˜¯latestæ—¶ï¼Œé»˜è®¤ç­–ç•¥æ˜¯Alwaysï¼›å½“é•œåƒæ ‡ç­¾æ˜¯è‡ªå®šä¹‰æ—¶ï¼ˆä¹Ÿå°±æ˜¯æ ‡ç­¾ä¸æ˜¯latestï¼‰ï¼Œé‚£ä¹ˆé»˜è®¤ç­–ç•¥æ˜¯IfNotPresentã€‚ ","date":"2022-02-16","objectID":"/k8s3/:7:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"7ã€ imageçš„çŠ¶æ€æœ‰å“ªäº›ï¼Ÿ Runningï¼šPodæ‰€éœ€çš„å®¹å™¨å·²ç»è¢«æˆåŠŸè°ƒåº¦åˆ°æŸä¸ªèŠ‚ç‚¹ï¼Œä¸”å·²ç»æˆåŠŸè¿è¡Œï¼Œ Pendingï¼šAPIserveråˆ›å»ºäº†podèµ„æºå¯¹è±¡ï¼Œå¹¶ä¸”å·²ç»å­˜å…¥etcdä¸­ï¼Œä½†å®ƒå°šæœªè¢«è°ƒåº¦å®Œæˆæˆ–è€…ä»ç„¶å¤„äºä»“åº“ä¸­ä¸‹è½½é•œåƒçš„è¿‡ç¨‹ Unknownï¼šAPIserveræ— æ³•æ­£å¸¸è·å–åˆ°podå¯¹è±¡çš„çŠ¶æ€ï¼Œé€šå¸¸æ˜¯å…¶æ— æ³•ä¸æ‰€åœ¨å·¥ä½œèŠ‚ç‚¹çš„kubeleté€šä¿¡æ‰€è‡´ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:8:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"8ã€ podçš„é‡å¯ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šå¯ä»¥é€šè¿‡å‘½ä»¤â€œkubectl explain pod.specâ€æŸ¥çœ‹podçš„é‡å¯ç­–ç•¥ã€‚ï¼ˆrestartPolicyå­—æ®µï¼‰ Alwaysï¼šä½†å‡¡podå¯¹è±¡ç»ˆæ­¢å°±é‡å¯ï¼Œæ­¤ä¸ºé»˜è®¤ç­–ç•¥ã€‚ OnFailureï¼šä»…åœ¨podå¯¹è±¡å‡ºç°é”™è¯¯æ—¶æ‰é‡å¯ ","date":"2022-02-16","objectID":"/k8s3/:9:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"9ã€ Serviceè¿™ç§èµ„æºå¯¹è±¡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šç”¨æ¥ç»™ç›¸åŒçš„å¤šä¸ªpodå¯¹è±¡æä¾›ä¸€ä¸ªå›ºå®šçš„ç»Ÿä¸€è®¿é—®æ¥å£ï¼Œå¸¸ç”¨äºæœåŠ¡å‘ç°å’ŒæœåŠ¡è®¿é—®ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:10:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"10ã€ç‰ˆæœ¬å›æ»šç›¸å…³çš„å‘½ä»¤ï¼Ÿ [root@master httpd-web]# kubectl apply -f httpd2-deploy1.yaml --record #è¿è¡Œyamlæ–‡ä»¶ï¼Œå¹¶è®°å½•ç‰ˆæœ¬ä¿¡æ¯ï¼› [root@master httpd-web]# kubectl rollout history deployment httpd-devploy1 #æŸ¥çœ‹è¯¥deploymentçš„å†å²ç‰ˆæœ¬ [root@master httpd-web]# kubectl rollout undo deployment httpd-devploy1 --to-revision=1 #æ‰§è¡Œå›æ»šæ“ä½œï¼ŒæŒ‡å®šå›æ»šåˆ°ç‰ˆæœ¬1 #åœ¨yamlæ–‡ä»¶çš„specå­—æ®µä¸­ï¼Œå¯ä»¥å†™ä»¥ä¸‹é€‰é¡¹ï¼ˆç”¨äºé™åˆ¶æœ€å¤šè®°å½•å¤šå°‘ä¸ªå†å²ç‰ˆæœ¬ï¼‰ï¼š spec: revisionHistoryLimit: 5 #è¿™ä¸ªå­—æ®µé€šè¿‡ kubectl explain deploy.spec å‘½ä»¤æ‰¾åˆ°revisionHistoryLimit \u003cinteger\u003eè¡Œè·å¾— ","date":"2022-02-16","objectID":"/k8s3/:11:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"11ã€ æ ‡ç­¾ä¸æ ‡ç­¾é€‰æ‹©å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ æ ‡ç­¾ï¼šæ˜¯å½“ç›¸åŒç±»å‹çš„èµ„æºå¯¹è±¡è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œä¸ºäº†æ›´å¥½çš„ç®¡ç†ï¼Œå¯ä»¥æŒ‰ç…§æ ‡ç­¾å°†å…¶åˆ†ä¸ºä¸€ä¸ªç»„ï¼Œä¸ºçš„æ˜¯æå‡èµ„æºå¯¹è±¡çš„ç®¡ç†æ•ˆç‡ã€‚ æ ‡ç­¾é€‰æ‹©å™¨ï¼šå°±æ˜¯æ ‡ç­¾çš„æŸ¥è¯¢è¿‡æ»¤æ¡ä»¶ã€‚ç›®å‰APIæ”¯æŒä¸¤ç§æ ‡ç­¾é€‰æ‹©å™¨ï¼š åŸºäºç­‰å€¼å…³ç³»çš„ï¼Œå¦‚ï¼šâ€œ=â€ã€â€œâ€â€œ==â€ã€â€œï¼=â€ï¼ˆæ³¨ï¼šâ€œ==â€ä¹Ÿæ˜¯ç­‰äºçš„æ„æ€ï¼Œyamlæ–‡ä»¶ä¸­çš„matchLabelså­—æ®µï¼‰ï¼› åŸºäºé›†åˆçš„ï¼Œå¦‚ï¼šinã€notinã€existsï¼ˆyamlæ–‡ä»¶ä¸­çš„matchExpressionså­—æ®µï¼‰ï¼› æ³¨ï¼šin:åœ¨è¿™ä¸ªé›†åˆä¸­ï¼›notinï¼šä¸åœ¨è¿™ä¸ªé›†åˆä¸­ï¼›existsï¼šè¦ä¹ˆå…¨åœ¨ï¼ˆexistsï¼‰è¿™ä¸ªé›†åˆä¸­ï¼Œè¦ä¹ˆéƒ½ä¸åœ¨ï¼ˆnotexistsï¼‰ï¼› ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨çš„æ“ä½œé€»è¾‘ï¼š åœ¨ä½¿ç”¨åŸºäºé›†åˆçš„æ ‡ç­¾é€‰æ‹©å™¨åŒæ—¶æŒ‡å®šå¤šä¸ªé€‰æ‹©å™¨ä¹‹é—´çš„é€»è¾‘å…³ç³»ä¸ºâ€œä¸â€æ“ä½œï¼ˆæ¯”å¦‚ï¼š- {key: name,operator: In,values: [zhangsan,lisi]} ï¼Œé‚£ä¹ˆåªè¦æ‹¥æœ‰è¿™ä¸¤ä¸ªå€¼çš„èµ„æºï¼Œéƒ½ä¼šè¢«é€‰ä¸­ï¼‰ï¼› ä½¿ç”¨ç©ºå€¼çš„æ ‡ç­¾é€‰æ‹©å™¨ï¼Œæ„å‘³ç€æ¯ä¸ªèµ„æºå¯¹è±¡éƒ½è¢«é€‰ä¸­ï¼ˆå¦‚ï¼šæ ‡ç­¾é€‰æ‹©å™¨çš„é”®æ˜¯â€œAâ€ï¼Œä¸¤ä¸ªèµ„æºå¯¹è±¡åŒæ—¶æ‹¥æœ‰Aè¿™ä¸ªé”®ï¼Œä½†æ˜¯å€¼ä¸ä¸€æ ·ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨ç©ºå€¼çš„æ ‡ç­¾é€‰æ‹©å™¨ï¼Œé‚£ä¹ˆå°†åŒæ—¶é€‰ä¸­è¿™ä¸¤ä¸ªèµ„æºå¯¹è±¡ï¼‰ ç©ºçš„æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆæ³¨æ„ä¸æ˜¯ä¸Šé¢è¯´çš„ç©ºå€¼ï¼Œè€Œæ˜¯ç©ºçš„ï¼Œéƒ½æ²¡æœ‰å®šä¹‰é”®çš„åç§°ï¼‰ï¼Œå°†æ— æ³•é€‰æ‹©å‡ºä»»ä½•èµ„æºï¼› åœ¨åŸºäºé›†åˆçš„é€‰æ‹©å™¨ä¸­ï¼Œä½¿ç”¨â€œInâ€æˆ–è€…â€œNotinâ€æ“ä½œæ—¶ï¼Œå…¶valueså¯ä»¥ä¸ºç©ºï¼Œä½†æ˜¯å¦‚æœä¸ºç©ºï¼Œè¿™ä¸ªæ ‡ç­¾é€‰æ‹©å™¨ï¼Œå°±æ²¡æœ‰ä»»ä½•æ„ä¹‰äº†ã€‚ ä¸¤ç§æ ‡ç­¾é€‰æ‹©å™¨ç±»å‹ï¼ˆåŸºäºç­‰å€¼ã€åŸºäºé›†åˆçš„ä¹¦å†™æ–¹æ³•ï¼‰ï¼š selector: matchLabels: #åŸºäºç­‰å€¼ app: nginx matchExpressions: #åŸºäºé›†åˆ - {key: name,operator: In,values: [zhangsan,lisi]} #keyã€operatorã€valuesè¿™ä¸‰ä¸ªå­—æ®µæ˜¯å›ºå®šçš„ - {key: age,operator: Exists,values:} #å¦‚æœæŒ‡å®šä¸ºexistsï¼Œé‚£ä¹ˆvaluesçš„å€¼ä¸€å®šè¦ä¸ºç©º ","date":"2022-02-16","objectID":"/k8s3/:12:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"12ã€ å¸¸ç”¨çš„æ ‡ç­¾åˆ†ç±»æœ‰å“ªäº›ï¼Ÿ æ ‡ç­¾åˆ†ç±»æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œä½†æ˜¯ä¸ºäº†èƒ½ä½¿ä»–äººå¯ä»¥è¾¾åˆ°ä¸€ç›®äº†ç„¶çš„æ•ˆæœï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ä»¥ä¸‹ä¸€äº›åˆ†ç±»ï¼š ç‰ˆæœ¬ç±»æ ‡ç­¾ï¼ˆreleaseï¼‰ï¼šstableï¼ˆç¨³å®šç‰ˆï¼‰ã€canaryï¼ˆé‡‘ä¸é›€ç‰ˆæœ¬ï¼Œå¯ä»¥å°†å…¶ç§°ä¹‹ä¸ºæµ‹è¯•ç‰ˆä¸­çš„æµ‹è¯•ç‰ˆï¼‰ã€betaï¼ˆæµ‹è¯•ç‰ˆï¼‰ï¼› ç¯å¢ƒç±»æ ‡ç­¾ï¼ˆenvironmentï¼‰ï¼šdevï¼ˆå¼€å‘ï¼‰ã€qaï¼ˆæµ‹è¯•ï¼‰ã€productionï¼ˆç”Ÿäº§ï¼‰ã€opï¼ˆè¿ç»´ï¼‰ï¼› åº”ç”¨ç±»ï¼ˆappï¼‰ï¼šuiã€asã€pcã€scï¼› æ¶æ„ç±»ï¼ˆtierï¼‰ï¼šfrontendï¼ˆå‰ç«¯ï¼‰ã€backendï¼ˆåç«¯ï¼‰ã€cacheï¼ˆç¼“å­˜ï¼‰ï¼› åˆ†åŒºæ ‡ç­¾ï¼ˆpartitionï¼‰ï¼šcustomerAï¼ˆå®¢æˆ·Aï¼‰ã€customerBï¼ˆå®¢æˆ·Bï¼‰ï¼› å“æ§çº§åˆ«ï¼ˆTrackï¼‰ï¼šdailyï¼ˆæ¯å¤©ï¼‰ã€weeklyï¼ˆæ¯å‘¨ï¼‰ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:13:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"13ã€ æœ‰å‡ ç§æŸ¥çœ‹æ ‡ç­¾çš„æ–¹å¼ï¼Ÿ ç­”ï¼šå¸¸ç”¨çš„æœ‰ä»¥ä¸‹ä¸‰ç§æŸ¥çœ‹æ–¹å¼ï¼š [root@master ~]# kubectl get pod --show-labels #æŸ¥çœ‹podï¼Œå¹¶ä¸”æ˜¾ç¤ºæ ‡ç­¾å†…å®¹ [root@master ~]# kubectl get pod -L env,tier #æ˜¾ç¤ºèµ„æºå¯¹è±¡æ ‡ç­¾çš„å€¼ [root@master ~]# kubectl get pod -l env,tier #åªæ˜¾ç¤ºç¬¦åˆé”®å€¼èµ„æºå¯¹è±¡çš„podï¼Œè€Œâ€œ-Lâ€æ˜¯æ˜¾ç¤ºæ‰€æœ‰çš„pod ","date":"2022-02-16","objectID":"/k8s3/:14:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"14ã€ æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ ‡ç­¾çš„å‘½ä»¤ï¼Ÿ #å¯¹podæ ‡ç­¾çš„æ“ä½œ [root@master ~]# kubectl label pod label-pod abc=123 #ç»™åä¸ºlabel-podçš„podæ·»åŠ æ ‡ç­¾ [root@master ~]# kubectl label pod label-pod abc=456 --overwrite #ä¿®æ”¹åä¸ºlabel-podçš„æ ‡ç­¾ [root@master ~]# kubectl label pod label-pod abc- #åˆ é™¤åä¸ºlabel-podçš„æ ‡ç­¾ [root@master ~]# kubectl get pod --show-labels #å¯¹nodeèŠ‚ç‚¹çš„æ ‡ç­¾æ“ä½œ [root@master ~]# kubectl label nodes node01 disk=ssd #ç»™èŠ‚ç‚¹node01æ·»åŠ diskæ ‡ç­¾ [root@master ~]# kubectl label nodes node01 disk=sss â€“overwrite #ä¿®æ”¹èŠ‚ç‚¹node01çš„æ ‡ç­¾ [root@master ~]# kubectl label nodes node01 disk- #åˆ é™¤èŠ‚ç‚¹node01çš„diskæ ‡ç­¾ ","date":"2022-02-16","objectID":"/k8s3/:15:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"15ã€ DaemonSetèµ„æºå¯¹è±¡çš„ç‰¹æ€§ï¼Ÿ DaemonSetè¿™ç§èµ„æºå¯¹è±¡ä¼šåœ¨æ¯ä¸ªk8sé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½è¿è¡Œä¸€ä¸ªpodï¼Œè¿™æ˜¯å®ƒå’Œdeploymentèµ„æºå¯¹è±¡çš„æœ€å¤§ä¹Ÿæ˜¯å”¯ä¸€çš„åŒºåˆ«ã€‚æ‰€ä»¥ï¼Œåœ¨å…¶yamlæ–‡ä»¶ä¸­ï¼Œä¸æ”¯æŒå®šä¹‰replicasï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸Deploymentã€RSç­‰èµ„æºå¯¹è±¡çš„å†™æ³•ç›¸åŒã€‚ å®ƒçš„ä¸€èˆ¬ä½¿ç”¨åœºæ™¯å¦‚ä¸‹ï¼š åœ¨å»åšæ¯ä¸ªèŠ‚ç‚¹çš„æ—¥å¿—æ”¶é›†å·¥ä½œï¼› ç›‘æ§æ¯ä¸ªèŠ‚ç‚¹çš„çš„è¿è¡ŒçŠ¶æ€ï¼› ","date":"2022-02-16","objectID":"/k8s3/:16:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"16ã€ è¯´è¯´ä½ å¯¹Jobè¿™ç§èµ„æºå¯¹è±¡çš„äº†è§£ï¼Ÿ ç­”ï¼šJobä¸å…¶ä»–æœåŠ¡ç±»å®¹å™¨ä¸åŒï¼ŒJobæ˜¯ä¸€ç§å·¥ä½œç±»å®¹å™¨ï¼ˆä¸€èˆ¬ç”¨äºåšä¸€æ¬¡æ€§ä»»åŠ¡ï¼‰ã€‚ä½¿ç”¨å¸¸è§ä¸å¤šï¼Œå¯ä»¥å¿½ç•¥è¿™ä¸ªé—®é¢˜ã€‚ #æé«˜Jobæ‰§è¡Œæ•ˆç‡çš„æ–¹æ³•ï¼š spec: parallelism: 2 #ä¸€æ¬¡è¿è¡Œ2ä¸ª completions: 8 #æœ€å¤šè¿è¡Œ8ä¸ª template: metadata: ","date":"2022-02-16","objectID":"/k8s3/:17:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"17ã€æè¿°ä¸€ä¸‹podçš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›çŠ¶æ€ï¼Ÿ Pendingï¼šè¡¨ç¤ºpodå·²ç»è¢«åŒæ„åˆ›å»ºï¼Œæ­£åœ¨ç­‰å¾…kube-scheduleré€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹åˆ›å»ºï¼Œä¸€èˆ¬æ˜¯åœ¨å‡†å¤‡é•œåƒï¼› Runningï¼šè¡¨ç¤ºpodä¸­æ‰€æœ‰çš„å®¹å™¨å·²ç»è¢«åˆ›å»ºï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ­£åœ¨è¿è¡Œæˆ–è€…æ˜¯æ­£åœ¨å¯åŠ¨æˆ–è€…æ˜¯æ­£åœ¨é‡å¯ï¼› Succeededï¼šè¡¨ç¤ºæ‰€æœ‰å®¹å™¨å·²ç»æˆåŠŸç»ˆæ­¢ï¼Œå¹¶ä¸”ä¸ä¼šå†å¯åŠ¨ï¼› Failedï¼šè¡¨ç¤ºpodä¸­æ‰€æœ‰å®¹å™¨éƒ½æ˜¯é0ï¼ˆä¸æ­£å¸¸ï¼‰çŠ¶æ€é€€å‡ºï¼› Unknownï¼šè¡¨ç¤ºæ— æ³•è¯»å–PodçŠ¶æ€ï¼Œé€šå¸¸æ˜¯kube-controller-manageræ— æ³•ä¸Podé€šä¿¡ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:18:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"18ã€ åˆ›å»ºä¸€ä¸ªpodçš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼š 1ï¼‰ å®¢æˆ·ç«¯æäº¤Podçš„é…ç½®ä¿¡æ¯ï¼ˆå¯ä»¥æ˜¯yamlæ–‡ä»¶å®šä¹‰å¥½çš„ä¿¡æ¯ï¼‰åˆ°kube-apiserverï¼› 2ï¼‰ Apiserveræ”¶åˆ°æŒ‡ä»¤åï¼Œé€šçŸ¥ç»™controller-manageråˆ›å»ºä¸€ä¸ªèµ„æºå¯¹è±¡ï¼› 3ï¼‰ Controller-manageré€šè¿‡api-serverå°†podçš„é…ç½®ä¿¡æ¯å­˜å‚¨åˆ°ETCDæ•°æ®ä¸­å¿ƒä¸­ï¼› 4ï¼‰ Kube-scheduleræ£€æµ‹åˆ°podä¿¡æ¯ä¼šå¼€å§‹è°ƒåº¦é¢„é€‰ï¼Œä¼šå…ˆè¿‡æ»¤æ‰ä¸ç¬¦åˆPodèµ„æºé…ç½®è¦æ±‚çš„èŠ‚ç‚¹ï¼Œç„¶åå¼€å§‹è°ƒåº¦è°ƒä¼˜ï¼Œä¸»è¦æ˜¯æŒ‘é€‰å‡ºæ›´é€‚åˆè¿è¡Œpodçš„èŠ‚ç‚¹ï¼Œç„¶åå°†podçš„èµ„æºé…ç½®å•å‘é€åˆ°nodeèŠ‚ç‚¹ä¸Šçš„kubeletç»„ä»¶ä¸Šã€‚ 5ï¼‰ Kubeletæ ¹æ®schedulerå‘æ¥çš„èµ„æºé…ç½®å•è¿è¡Œpodï¼Œè¿è¡ŒæˆåŠŸåï¼Œå°†podçš„è¿è¡Œä¿¡æ¯è¿”å›ç»™schedulerï¼Œschedulerå°†è¿”å›çš„podè¿è¡ŒçŠ¶å†µçš„ä¿¡æ¯å­˜å‚¨åˆ°etcdæ•°æ®ä¸­å¿ƒã€‚ ","date":"2022-02-16","objectID":"/k8s3/:19:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"19ã€ åˆ é™¤ä¸€ä¸ªPodä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…ï¼Ÿ ç­”ï¼šKube-apiserverä¼šæ¥å—åˆ°ç”¨æˆ·çš„åˆ é™¤æŒ‡ä»¤ï¼Œé»˜è®¤æœ‰30ç§’æ—¶é—´ç­‰å¾…ä¼˜é›…é€€å‡ºï¼Œè¶…è¿‡30ç§’ä¼šè¢«æ ‡è®°ä¸ºæ­»äº¡çŠ¶æ€ï¼Œæ­¤æ—¶Podçš„çŠ¶æ€Terminatingï¼Œkubeletçœ‹åˆ°podæ ‡è®°ä¸ºTerminatingå°±å¼€å§‹äº†å…³é—­Podçš„å·¥ä½œï¼› å…³é—­æµç¨‹å¦‚ä¸‹ï¼š 1ã€ podä»serviceçš„endpointåˆ—è¡¨ä¸­è¢«ç§»é™¤ï¼› 2ã€ å¦‚æœè¯¥podå®šä¹‰äº†ä¸€ä¸ªåœæ­¢å‰çš„é’©å­ï¼Œå…¶ä¼šåœ¨podå†…éƒ¨è¢«è°ƒç”¨ï¼Œåœæ­¢é’©å­ä¸€èˆ¬å®šä¹‰äº†å¦‚ä½•ä¼˜é›…çš„ç»“æŸè¿›ç¨‹ï¼› 3ã€ è¿›ç¨‹è¢«å‘é€TERMä¿¡å·ï¼ˆkill -14ï¼‰ 4ã€ å½“è¶…è¿‡ä¼˜é›…é€€å‡ºçš„æ—¶é—´åï¼ŒPodä¸­çš„æ‰€æœ‰è¿›ç¨‹éƒ½ä¼šè¢«å‘é€SIGKILLä¿¡å·ï¼ˆkill -9ï¼‰ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:20:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"20ã€ K8sçš„Serviceæ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šPodæ¯æ¬¡é‡å¯æˆ–è€…é‡æ–°éƒ¨ç½²ï¼Œå…¶IPåœ°å€éƒ½ä¼šäº§ç”Ÿå˜åŒ–ï¼Œè¿™ä½¿å¾—podé—´é€šä¿¡å’Œpodä¸å¤–éƒ¨é€šä¿¡å˜å¾—å›°éš¾ï¼Œè¿™æ—¶å€™ï¼Œå°±éœ€è¦Serviceä¸ºpodæä¾›ä¸€ä¸ªå›ºå®šçš„å…¥å£ã€‚ Serviceçš„Endpointåˆ—è¡¨é€šå¸¸ç»‘å®šäº†ä¸€ç»„ç›¸åŒé…ç½®çš„podï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡çš„æ–¹å¼æŠŠå¤–ç•Œè¯·æ±‚åˆ†é…åˆ°å¤šä¸ªpodä¸Š ","date":"2022-02-16","objectID":"/k8s3/:21:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"21ã€ k8sæ˜¯æ€ä¹ˆè¿›è¡ŒæœåŠ¡æ³¨å†Œçš„ï¼Ÿ ç­”ï¼šPodå¯åŠ¨åä¼šåŠ è½½å½“å‰ç¯å¢ƒæ‰€æœ‰Serviceä¿¡æ¯ï¼Œä»¥ä¾¿ä¸åŒPodæ ¹æ®Serviceåè¿›è¡Œé€šä¿¡ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:22:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"22ã€ k8sé›†ç¾¤å¤–æµé‡æ€ä¹ˆè®¿é—®Podï¼Ÿ ç­”ï¼šå¯ä»¥é€šè¿‡Serviceçš„NodePortæ–¹å¼è®¿é—®ï¼Œä¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹ç›‘å¬åŒä¸€ä¸ªç«¯å£ï¼Œæ¯”å¦‚ï¼š30000ï¼Œè®¿é—®èŠ‚ç‚¹çš„æµé‡ä¼šè¢«é‡å®šå‘åˆ°å¯¹åº”çš„Serviceä¸Šé¢ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:23:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"23ã€ k8sæ•°æ®æŒä¹…åŒ–çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ ç­”ï¼š1ï¼‰EmptyDirï¼ˆç©ºç›®å½•ï¼‰ï¼šæ²¡æœ‰æŒ‡å®šè¦æŒ‚è½½å®¿ä¸»æœºä¸Šçš„æŸä¸ªç›®å½•ï¼Œç›´æ¥ç”±Podå†…ä¿éƒ¨æ˜ å°„åˆ°å®¿ä¸»æœºä¸Šã€‚ç±»ä¼¼äºdockerä¸­çš„manager volumeã€‚ ä¸»è¦ä½¿ç”¨åœºæ™¯ï¼š 1ï¼‰ åªéœ€è¦ä¸´æ—¶å°†æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œæ¯”å¦‚åœ¨åˆå¹¶/æ’åºç®—æ³•ä¸­ï¼› 2ï¼‰ ä½œä¸ºä¸¤ä¸ªå®¹å™¨çš„å…±äº«å­˜å‚¨ï¼Œä½¿å¾—ç¬¬ä¸€ä¸ªå†…å®¹ç®¡ç†çš„å®¹å™¨å¯ä»¥å°†ç”Ÿæˆçš„æ•°æ®å­˜å…¥å…¶ä¸­ï¼ŒåŒæ—¶ç”±åŒä¸€ä¸ªwebserverå®¹å™¨å¯¹å¤–æä¾›è¿™äº›é¡µé¢ã€‚ emptyDirçš„ç‰¹æ€§ï¼š åŒä¸ªpodé‡Œé¢çš„ä¸åŒå®¹å™¨ï¼Œå…±äº«åŒä¸€ä¸ªæŒä¹…åŒ–ç›®å½•ï¼Œå½“podèŠ‚ç‚¹åˆ é™¤æ—¶ï¼Œvolumeçš„æ•°æ®ä¹Ÿä¼šè¢«åˆ é™¤ã€‚å¦‚æœä»…ä»…æ˜¯å®¹å™¨è¢«é”€æ¯ï¼Œpodè¿˜åœ¨ï¼Œåˆ™ä¸ä¼šå½±å“volumeä¸­çš„æ•°æ®ã€‚ æ€»ç»“æ¥è¯´ï¼šemptyDirçš„æ•°æ®æŒä¹…åŒ–çš„ç”Ÿå‘½å‘¨æœŸå’Œä½¿ç”¨çš„podä¸€è‡´ã€‚ä¸€èˆ¬æ˜¯ä½œä¸ºä¸´æ—¶å­˜å‚¨ä½¿ç”¨ã€‚ 2ï¼‰Hostpathï¼šå°†å®¿ä¸»æœºä¸Šå·²å­˜åœ¨çš„ç›®å½•æˆ–æ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨ã€‚ç±»ä¼¼äºdockerä¸­çš„bind mountæŒ‚è½½æ–¹å¼ã€‚ è¿™ç§æ•°æ®æŒä¹…åŒ–æ–¹å¼ï¼Œè¿ç”¨åœºæ™¯ä¸å¤šï¼Œå› ä¸ºå®ƒå¢åŠ äº†podä¸èŠ‚ç‚¹ä¹‹é—´çš„è€¦åˆã€‚ ä¸€èˆ¬å¯¹äºk8sé›†ç¾¤æœ¬èº«çš„æ•°æ®æŒä¹…åŒ–å’Œdockeræœ¬èº«çš„æ•°æ®æŒä¹…åŒ–ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå¯ä»¥è‡ªè¡Œå‚è€ƒapiServiceçš„yamlæ–‡ä»¶ï¼Œä½äºï¼š/etc/kubernetes/mainâ€¦ç›®å½•ä¸‹ã€‚ 3ï¼‰PersistentVolumeï¼ˆç®€ç§°PVï¼‰ï¼š åŸºäºNFSæœåŠ¡çš„PVï¼Œä¹Ÿå¯ä»¥åŸºäºGFSçš„PVã€‚å®ƒçš„ä½œç”¨æ˜¯ç»Ÿä¸€æ•°æ®æŒä¹…åŒ–ç›®å½•ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚ åœ¨ä¸€ä¸ªPVçš„yamlæ–‡ä»¶ä¸­ï¼Œå¯ä»¥å¯¹å…¶é…ç½®PVçš„å¤§å°ï¼Œ æŒ‡å®šPVçš„è®¿é—®æ¨¡å¼ï¼š ReadWriteOnceï¼šåªèƒ½ä»¥è¯»å†™çš„æ–¹å¼æŒ‚è½½åˆ°å•ä¸ªèŠ‚ç‚¹ï¼› ReadOnlyManyï¼šèƒ½ä»¥åªè¯»çš„æ–¹å¼æŒ‚è½½åˆ°å¤šä¸ªèŠ‚ç‚¹ï¼› ReadWriteManyï¼šèƒ½ä»¥è¯»å†™çš„æ–¹å¼æŒ‚è½½åˆ°å¤šä¸ªèŠ‚ç‚¹ã€‚ï¼Œ ä»¥åŠæŒ‡å®špvçš„å›æ”¶ç­–ç•¥ï¼š recycleï¼šæ¸…é™¤PVçš„æ•°æ®ï¼Œç„¶åè‡ªåŠ¨å›æ”¶ï¼› Retainï¼šéœ€è¦æ‰‹åŠ¨å›æ”¶ï¼› deleteï¼šåˆ é™¤äº‘å­˜å‚¨èµ„æºï¼Œäº‘å­˜å‚¨ä¸“ç”¨ï¼› #PSï¼šè¿™é‡Œçš„å›æ”¶ç­–ç•¥æŒ‡çš„æ˜¯åœ¨PVè¢«åˆ é™¤åï¼Œåœ¨è¿™ä¸ªPVä¸‹æ‰€å­˜å‚¨çš„æºæ–‡ä»¶æ˜¯å¦åˆ é™¤ï¼‰ã€‚ è‹¥éœ€ä½¿ç”¨PVï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼šPVCï¼ŒPVCæ˜¯å‘PVç”³è¯·åº”ç”¨æ‰€éœ€çš„å®¹é‡å¤§å°ï¼ŒK8sé›†ç¾¤ä¸­å¯èƒ½ä¼šæœ‰å¤šä¸ªPVï¼ŒPVCå’ŒPVè‹¥è¦å…³è”ï¼Œå…¶å®šä¹‰çš„è®¿é—®æ¨¡å¼å¿…é¡»ä¸€è‡´ã€‚å®šä¹‰çš„storageClassNameä¹Ÿå¿…é¡»ä¸€è‡´ï¼Œè‹¥ç¾¤é›†ä¸­å­˜åœ¨ç›¸åŒçš„ï¼ˆåå­—ã€è®¿é—®æ¨¡å¼éƒ½ä¸€è‡´ï¼‰ä¸¤ä¸ªPVï¼Œé‚£ä¹ˆPVCä¼šé€‰æ‹©å‘å®ƒæ‰€éœ€å®¹é‡æ¥è¿‘çš„PVå»ç”³è¯·ï¼Œæˆ–è€…éšæœºç”³è¯·ã€‚ ","date":"2022-02-16","objectID":"/k8s3/:24:0","tags":["k8s"],"title":"kubernetesé¢è¯•é¢˜æ±‡æ€»","uri":"/k8s3/"},{"categories":["k8s"],"content":"Kubernetes å®‰è£… ","date":"2022-02-13","objectID":"/k8s2/:0:0","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"ç¯å¢ƒé…ç½® ","date":"2022-02-13","objectID":"/k8s2/:1:0","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å…³é—­é˜²ç«å¢™ï¼š å¦‚æœæ˜¯äº‘æœåŠ¡å™¨ï¼Œéœ€è¦è®¾ç½®å®‰å…¨ç»„ç­–ç•¥æ”¾è¡Œç«¯å£ systemctl stop firewalld systemctl disable firewalld ","date":"2022-02-13","objectID":"/k8s2/:1:1","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"ä¿®æ”¹ hostname hostnamectl set-hostname k8s-01 echo \"127.0.0.1 $(hostname)\" \u003e\u003e /etc/hosts reboot ","date":"2022-02-13","objectID":"/k8s2/:1:2","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å…³é—­ selinuxï¼š sed -i 's/enforcing/disabled/' /etc/selinux/config setenforce 0 ","date":"2022-02-13","objectID":"/k8s2/:1:3","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å…³é—­ swapï¼š swapoff -a sed -ri 's/.*swap.*/#\u0026/' /etc/fstab ","date":"2022-02-13","objectID":"/k8s2/:1:4","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"ä¿®æ”¹ /etc/sysctl.conf # å¦‚æœæœ‰é…ç½®ï¼Œåˆ™ä¿®æ”¹ sed -i \"s#^net.ipv4.ip_forward.*#net.ipv4.ip_forward=1#g\" /etc/sysctl.conf sed -i \"s#^net.bridge.bridge-nf-call-ip6tables.*#net.bridge.bridge-nf-call-ip6tables=1#g\" /etc/sysctl.conf sed -i \"s#^net.bridge.bridge-nf-call-iptables.*#net.bridge.bridge-nf-call-iptables=1#g\" /etc/sysctl.conf sed -i \"s#^net.ipv6.conf.all.disable_ipv6.*#net.ipv6.conf.all.disable_ipv6=1#g\" /etc/sysctl.conf sed -i \"s#^net.ipv6.conf.default.disable_ipv6.*#net.ipv6.conf.default.disable_ipv6=1#g\" /etc/sysctl.conf sed -i \"s#^net.ipv6.conf.lo.disable_ipv6.*#net.ipv6.conf.lo.disable_ipv6=1#g\" /etc/sysctl.conf sed -i \"s#^net.ipv6.conf.all.forwarding.*#net.ipv6.conf.all.forwarding=1#g\" /etc/sysctl.conf # å¯èƒ½æ²¡æœ‰ï¼Œè¿½åŠ  echo \"net.ipv4.ip_forward = 1\" \u003e\u003e /etc/sysctl.conf echo \"net.bridge.bridge-nf-call-ip6tables = 1\" \u003e\u003e /etc/sysctl.conf echo \"net.bridge.bridge-nf-call-iptables = 1\" \u003e\u003e /etc/sysctl.conf echo \"net.ipv6.conf.all.disable_ipv6 = 1\" \u003e\u003e /etc/sysctl.conf echo \"net.ipv6.conf.default.disable_ipv6 = 1\" \u003e\u003e /etc/sysctl.conf echo \"net.ipv6.conf.lo.disable_ipv6 = 1\" \u003e\u003e /etc/sysctl.conf echo \"net.ipv6.conf.all.forwarding = 1\" \u003e\u003e /etc/sysctl.conf # æ‰§è¡Œå‘½ä»¤ä»¥åº”ç”¨ sysctl -p ","date":"2022-02-13","objectID":"/k8s2/:1:5","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å®‰è£…docker sudo yum remove docker* sudo yum install -y yum-utils #é…ç½®docker yum æº sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo #å®‰è£…docker 19.03.9 yum install -y docker-ce-3:19.03.9-3.el7.x86_64 docker-ce-cli-3:19.03.9-3.el7.x86_64 containerd.io #å®‰è£…docker 19.03.9 docker-ce 19.03.9 yum install -y docker-ce-19.03.9-3 docker-ce-cli-19.03.9 containerd.io #å¯åŠ¨æœåŠ¡ systemctl start docker systemctl enable docker sudo systemctl daemon-reload sudo systemctl restart docker ","date":"2022-02-13","objectID":"/k8s2/:2:0","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å®‰è£…k8sæ ¸å¿ƒï¼ˆéƒ½æ‰§è¡Œï¼‰ ","date":"2022-02-13","objectID":"/k8s2/:3:0","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"é…ç½®K8Sçš„yumæº cat \u003c\u003cEOF \u003e /etc/yum.repos.d/kubernetes.repo [kubernetes]ÃŸ name=Kubernetes baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=0 repo_gpgcheck=0 gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg EOF ","date":"2022-02-13","objectID":"/k8s2/:3:1","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å¸è½½æ—§ç‰ˆæœ¬,å®‰è£…æ–°ç‰ˆæœ¬ yum remove -y kubelet kubeadm kubectl # æŸ¥çœ‹å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬ yum list kubelet --showduplicates | sort -r # å®‰è£…kubeletã€kubeadmã€kubectl æŒ‡å®šç‰ˆæœ¬ yum install -y kubelet-1.21.0 kubeadm-1.21.0 kubectl-1.21.0 # å¼€æœºå¯åŠ¨kubelet systemctl enable kubelet \u0026\u0026 systemctl start kubelet ","date":"2022-02-13","objectID":"/k8s2/:3:2","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"åˆå§‹åŒ–masterèŠ‚ç‚¹ ","date":"2022-02-13","objectID":"/k8s2/:4:0","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"åˆ›å»ºimages.sh,vim images.shç²˜è´´ä»¥ä¸‹å‘½ä»¤ docker pull k8s.gcr.io/kube-apiserver:v1.21.9 docker pull k8s.gcr.io/kube-controller-manager:v1.21.9 docker pull k8s.gcr.io/kube-scheduler:v1.21.9 docker pull k8s.gcr.io/kube-proxy:v1.21.9 docker pull k8s.gcr.io/pause:3.4.1 docker pull k8s.gcr.io/etcd:3.4.13-0 docker pull k8s.gcr.io/coredns/coredns:v1.8.0 chmod +x images.shÃŸ sh images.sh ","date":"2022-02-13","objectID":"/k8s2/:4:1","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"kubeadm init masterèŠ‚ç‚¹ kubeadm init \\ --apiserver-advertise-address=192.168.99.19 \\ --kubernetes-version v1.23.3 \\ --service-cidr=10.99.0.0/16 \\ --pod-network-cidr=10.124.0.0/16 ","date":"2022-02-13","objectID":"/k8s2/:4:2","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å¤åˆ¶ç›¸å…³æ–‡ä»¶å¤¹ mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config ","date":"2022-02-13","objectID":"/k8s2/:4:3","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å¯¼å‡ºç¯å¢ƒå˜é‡ export KUBECONFIG=/etc/kubernetes/admin.conf ","date":"2022-02-13","objectID":"/k8s2/:4:4","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"éƒ¨ç½²ä¸€ä¸ªpodç½‘ç»œ kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml ","date":"2022-02-13","objectID":"/k8s2/:4:5","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"å‘½ä»¤æ£€æŸ¥ kubectl get pod -A ##è·å–é›†ç¾¤ä¸­æ‰€æœ‰éƒ¨ç½²å¥½çš„åº”ç”¨Pod kubectl get nodes ##æŸ¥çœ‹é›†ç¾¤æ‰€æœ‰æœºå™¨çš„çŠ¶æ€ ","date":"2022-02-13","objectID":"/k8s2/:4:6","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"åˆå§‹åŒ–workerèŠ‚ç‚¹ï¼ˆworkeræ‰§è¡Œï¼‰ ##è¿‡æœŸæ€ä¹ˆåŠ kubeadm token create --print-join-command kubeadm join --token y1eyw5.ylg568kvohfdsfco --discovery-token-ca-cert-hash sha256: 6c35e4f73f72afd89bf1c8c303ee55677d2cdb1342d67bb23c852aba2efc7c73 ","date":"2022-02-13","objectID":"/k8s2/:5:0","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["k8s"],"content":"éªŒè¯é›†ç¾¤ #è·å–æ‰€æœ‰èŠ‚ç‚¹ kubectl get nodes ","date":"2022-02-13","objectID":"/k8s2/:5:1","tags":["k8s"],"title":"Kubernetes å®‰è£…","uri":"/k8s2/"},{"categories":["åŸºç¡€"],"content":"linux å¸¸ç”¨å‘½ä»¤ ","date":"2022-02-12","objectID":"/linux1/:0:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"è½¯ä»¶æ“ä½œå‘½ä»¤ #è½¯ä»¶åŒ…ç®¡ç†å™¨ yum # å®‰è£…è½¯ä»¶ yum install xxxx # å¸è½½è½¯ä»¶ yum remove xxx # æœç´¢è½¯ä»¶ yum search xxx # æ¸…ç†ç¼“å­˜ yum clean packages # åˆ—å‡ºå·²å®‰è£… yum list # è½¯ä»¶åŒ…ä¿¡æ¯ yum info ","date":"2022-02-12","objectID":"/linux1/:1:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"æœåŠ¡å™¨ç¡¬ä»¶èµ„æºå’Œç£ç›˜æ“ä½œ # å†…å­˜ free -h # ç¡¬ç›˜ df -h # è´Ÿè½½ w/top/htop # æŸ¥çœ‹cpu cat /proc/cpuinfo # æŸ¥çœ‹ç£ç›˜ fdisk -l ","date":"2022-02-12","objectID":"/linux1/:2:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ“ä½œå‘½ä»¤ å‘½ä»¤ è§£é‡Š ls æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶ touch æ–°å»ºæ–‡ä»¶ mkdir æ–°å»ºç›®å½• cd è¿›å…¥ç›®å½• rm åˆ é™¤æ–‡ä»¶å’Œç›®å½• cp å¤åˆ¶ mv ç§»åŠ¨ pwd æ˜¾ç¤ºè·¯å¾„ ","date":"2022-02-12","objectID":"/linux1/:3:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"ç³»ç»Ÿç”¨æˆ·æ“ä½œå‘½ä»¤ ","date":"2022-02-12","objectID":"/linux1/:4:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"é˜²ç«å¢™ç›¸å…³è®¾ç½® ","date":"2022-02-12","objectID":"/linux1/:5:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"ææƒæ“ä½œsudoå’Œæ–‡ä»¶ä¼ è¾“ ","date":"2022-02-12","objectID":"/linux1/:6:0","tags":["è¿ç»´"],"title":"linuxå¸¸ç”¨å‘½ä»¤","uri":"/linux1/"},{"categories":["åŸºç¡€"],"content":"linux åŸºç¡€çŸ¥è¯† ","date":"2022-02-11","objectID":"/linux/:0:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"1ã€ç®€è¿°Linuxæƒé™åˆ’åˆ†åŸåˆ™ã€‚ ç»™æ–‡ä»¶æˆ–ç›®å½•åˆ†é…æƒé™æ—¶ï¼Œå…ˆè€ƒè™‘æ‰€æœ‰è€…å’Œæ‰€å±ç»„ éµå¾ªæœ€å°åŒ–æƒé™ï¼Œç”¨å•¥æƒé™ç»™å•¥æƒé™ ä¿®æ”¹ç›®å½•å’Œå­æ–‡ä»¶å½’å±æƒé™ï¼Œæ³¨æ„é€’å½’ æ–‡ä»¶æƒé™åˆ†é…æ˜¯æœ€å¸¸ç”¨çš„å®‰å…¨é˜²æŠ¤æ‰‹æ®µ ","date":"2022-02-11","objectID":"/linux/:1:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"2ã€å½“ç”¨æˆ·user1ï¼Œå¯¹/testdirç›®å½•æœ‰å†™å’Œæ‰§è¡Œæƒé™æ—¶ï¼Œè¯¥ç›®å½•ä¸‹çš„åªè¯»æ–‡ä»¶file1æ˜¯å¦å¯ä¿®æ”¹å’Œåˆ é™¤ï¼Ÿ å¯¹file1ä¸èƒ½ä¿®æ”¹ä¹Ÿä¸èƒ½åˆ é™¤ã€‚ï¼ˆå¦‚æœå¯¹ç›®å½•æœ‰å†™æƒé™å’Œæ‰§è¡Œæƒé™ï¼Œåˆ™å¯¹file1ä¸èƒ½ä¿®æ”¹å¯ä»¥åˆ é™¤ï¼‰ ","date":"2022-02-11","objectID":"/linux/:2:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"3ã€å¦‚æœä¸€ä¸ªç³»ç»Ÿæ²¡æœ‰ä»»ä½•çš„å¤‡ä»½ç­–ç•¥ï¼Œè¯·å†™å‡ºä¸€ä¸ªè¾ƒä¸ºå…¨é¢åˆç†çš„å¤‡ä»½æ–¹æ¡ˆï¼ å¢é‡å¤‡ä»½ï¼šå°†ç›¸è¾ƒäºå‰ä¸€å¤©å¢åŠ çš„å†…å®¹å¤‡ä»½ï¼Œé€‚åˆæ¯å¤©æ”¹å˜é‡è¾ƒå¤§çš„æ•°æ®ã€‚ å·®å¼‚å¤‡ä»½ï¼šå°†ç›¸è¾ƒäºç¬¬ä¸€å¤©æ”¹å˜çš„å†…å®¹å¤‡ä»½ï¼Œé€‚åˆåŸå§‹æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯ä¹‹åæ”¹å˜çš„æ¯”è¾ƒå°ï¼Œå³ä½¿ä¸­é—´å“ªä¸€å¤©çš„ä¸¢äº†ä¹Ÿæ²¡äº‹ï¼Œåªè¦æœ€åä¸€å¤©ï¼Œå’Œç¬¬ä¸€å¤©çš„åœ¨å°±è¡Œã€‚ ","date":"2022-02-11","objectID":"/linux/:3:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"4ã€ç½‘ç«™æœåŠ¡å™¨æ¯å¤©äº§ç”Ÿçš„æ—¥å¿—æ•°é‡è¾ƒå¤§ï¼Œè¯·é—®å¦‚ä½•å¤‡ä»½? ä½¿ç”¨logrotateæ»šåŠ¨æ—¥å¿— splitå¤§æ–‡ä»¶åˆ‡åˆ†å¤„ç† shellè„šæœ¬å¤„ç†æ—¥å¿— ","date":"2022-02-11","objectID":"/linux/:4:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"5ã€ç®€è¿°Raid 0ã€Raid 1ã€Raid 5çš„ç‰¹ç‚¹ä¸åŸç†ã€‚ RAIDç­‰çº§ æœ€å°‘ç¡¬ç›˜ æœ€å¤§å®¹é”™ å¯ç”¨å®¹é‡ è¯»å–æ€§èƒ½ å†™å…¥æ€§èƒ½ å®‰å…¨æ€§ ç›®çš„ åº”ç”¨äº§ä¸š å•ä¸€ç¡¬ç›˜ (å‚è€ƒ) 0 1 1 1 æ—  JBOD 1 0 n 1 1 æ— ï¼ˆåŒRAID 0ï¼‰ å¢åŠ å®¹é‡ ä¸ªäººï¼ˆæš‚æ—¶ï¼‰ 0 2 0 n n n ä¸€ä¸ªç¡¬ç›˜å¼‚å¸¸ï¼Œå…¨éƒ¨ç¡¬ç›˜éƒ½ä¼šå¼‚å¸¸ è¿½æ±‚æœ€å¤§å®¹é‡ã€é€Ÿåº¦ è§†é¢‘å‰ªæ¥ç¼“å­˜ç”¨é€” 1 2 n-1 1 n 1 é«˜ï¼Œä¸€ä¸ªæ­£å¸¸å³å¯ è¿½æ±‚æœ€å¤§å®‰å…¨æ€§ ä¸ªäººã€ä¼ä¸šå¤‡ä»½ 5 3 1 n-1 n-1 n-1 ä¸­ä¸‹è‡³ä¸­ è¿½æ±‚æœ€å¤§å®¹é‡ã€æœ€å°é¢„ç®— ä¸ªäººã€å°å‹ä¼ä¸šå¤‡ä»½ 6 4 2 n-2 n-2 n-2 ä¸­è‡³ä¸­é«˜,ä»…å®‰å…¨æ€§è¾ƒRAID 5é«˜ åŒRAID 5ï¼Œä½†è¾ƒå®‰å…¨ ä¸ªäººã€ä¼ä¸šå¤‡ä»½ 10 4 é«˜ ç»¼åˆRAID 0/1ä¼˜ç‚¹ï¼Œç†è®ºé€Ÿåº¦è¾ƒå¿« å¤§å‹æ•°æ®åº“ã€æœåŠ¡å™¨ 50 6 é«˜ æå‡èµ„æ–™å®‰å…¨ 60 8 é«˜ æå‡èµ„æ–™å®‰å…¨ ","date":"2022-02-11","objectID":"/linux/:5:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"6ã€ç®€è¿°Raid6ã€Raid 10çš„ç‰¹ç‚¹ä¸åŸç†ã€‚ ä¸RAID 5ç›¸æ¯”ï¼ŒRAID 6å¢åŠ ç¬¬äºŒä¸ªç‹¬ç«‹çš„å¥‡å¶æ ¡éªŒä¿¡æ¯å—ã€‚ä¸¤ä¸ªç‹¬ç«‹çš„å¥‡å¶ç³»ç»Ÿä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œæ•°æ®çš„å¯é æ€§éå¸¸é«˜ï¼Œä»»æ„ä¸¤å—ç£ç›˜åŒæ—¶å¤±æ•ˆæ—¶ä¸ä¼šå½±å“æ•°æ®å®Œæ•´æ€§ã€‚RAID 6éœ€è¦åˆ†é…ç»™å¥‡å¶æ ¡éªŒä¿¡æ¯æ›´å¤§çš„ç£ç›˜ç©ºé—´å’Œé¢å¤–çš„æ ¡éªŒè®¡ç®—ï¼Œç›¸å¯¹äºRAID 5æœ‰æ›´å¤§çš„IOæ“ä½œé‡å’Œè®¡ç®—é‡ï¼Œå…¶â€œå†™æ€§èƒ½â€å¼ºçƒˆå–å†³äºå…·ä½“çš„å®ç°æ–¹æ¡ˆï¼Œå› æ­¤RAID 6é€šå¸¸ä¸ä¼šé€šè¿‡è½¯ä»¶æ–¹å¼æ¥å®ç°ï¼Œè€Œæ›´å¯èƒ½é€šè¿‡ç¡¬ä»¶æ–¹å¼å®ç°ã€‚ RAID 10æ˜¯å…ˆåˆ†å‰²èµ„æ–™å†é•œåƒï¼Œå†å°†æ‰€æœ‰ç¡¬ç›˜åˆ†ä¸ºä¸¤ç»„ï¼Œè§†ä¸ºä»¥RAID 1ä½œä¸ºæœ€ä½ç»„åˆï¼Œç„¶åå°†æ¯ç»„RAID 1è§†ä¸ºä¸€ä¸ªâ€œç¡¬ç›˜â€ç»„åˆä¸ºRAID 0è¿ä½œã€‚å½“RAID 10æœ‰ä¸€ä¸ªç¡¬ç›˜å—æŸï¼Œå…¶ä½™ç¡¬ç›˜ä¼šç»§ç»­è¿ä½œ ","date":"2022-02-11","objectID":"/linux/:6:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"7ã€è½¯Raidä¸ç¡¬Raidçš„åŒºåˆ«ï¼Ÿ ç¡¬RAIDï¼šé€šè¿‡ç”¨ç¡¬ä»¶æ¥å®ç°RAIDåŠŸèƒ½çš„å°±æ˜¯ç¡¬RAIDï¼Œæ¯”å¦‚ï¼šå„ç§RAIDå¡ï¼Œè¿˜æœ‰ä¸»æ¿é›†æˆèƒ½å¤Ÿåšçš„RAIDéƒ½æ˜¯ç¡¬RAIDã€‚ è½¯RAIDï¼šé€šè¿‡ç”¨æ“ä½œç³»ç»Ÿæ¥å®ŒæˆRAIDåŠŸèƒ½çš„å°±æ˜¯è½¯RAIDï¼Œæ¯”å¦‚ï¼šåœ¨Linuxæ“ä½œç³»ç»Ÿä¸‹ï¼Œç”¨3å—ç¡¬ç›˜åšçš„RAID5. ","date":"2022-02-11","objectID":"/linux/:7:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"8ã€Linuxä¸­æœ‰è®¸å¤šç³»ç»Ÿèµ„æºéœ€è¦ç›‘ç®¡ï¼Œè¯·é—®æœ‰å“ªäº›å‘½ä»¤å¯ä»¥æŸ¥çœ‹ï¼Ÿ htop æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ free -h æŸ¥çœ‹å†…å­˜ ","date":"2022-02-11","objectID":"/linux/:8:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"9ã€ç®€è¿°CentOS 6.xçš„å¯åŠ¨è¿‡ç¨‹ï¼Ÿ åŠ ç”µè‡ªæ£€ï¼Œå¾—åˆ°BIOSçš„ç¡¬ä»¶ä¿¡æ¯ï¼Œè·å–ç¬¬ä¸€ä¸ªå¯åŠ¨è®¾å¤‡ è¯»å–ç¬¬ä¸€ä¸ªå¯åŠ¨è®¾å¤‡MBRçš„å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆgrubï¼‰çš„å¯åŠ¨ä¿¡æ¯ åŠ è½½æ ¸å¿ƒæ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒä¿¡æ¯ï¼Œæ ¸å¿ƒå¼€å§‹è§£å‹ç¼©ï¼Œå¹¶å°è¯•é©±åŠ¨æ‰€æœ‰çš„ç¡¬ä»¶è®¾å¤‡ è¿è¡Œinitç¨‹åº è¿è¡Œç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬ /etc/rc.d/rc.sysinit å¯åŠ¨æ ¸å¿ƒçš„å¤–æŒ‚æ¨¡å— initæ‰§è¡Œè¿è¡Œå„ä¸ªæ‰¹å¤„ç†æ–‡ä»¶ initæ‰§è¡Œ/etc/rc.d/rc.local æ‰§è¡Œ/bin/loginç¨‹åºï¼Œç­‰å¾…ç”¨æˆ·ç™»å½• ç™»é™†ä¹‹åï¼Œæ‰“å°ç™»é™†æç¤ºç¬¦ï¼Œå¹¶å¼€å§‹shellæ§åˆ¶ä¸»æœº ","date":"2022-02-11","objectID":"/linux/:9:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"10ã€ç®€è¿°CentOS 7.xçš„å¯åŠ¨è¿‡ç¨‹ï¼Ÿ åŠ ç”µåç³»ç»Ÿå›ºä»¶ï¼ˆsystem firmwareï¼‰,ä¹Ÿå°±æ˜¯BIOSæˆ–è€…UEFIè¿›è¡ŒåŠ ç”µæµ‹è¯•ï¼Œåˆå§‹åŒ–éƒ¨åˆ†ç¡¬ä»¶è®¾å¤‡ã€‚ ç³»ç»Ÿå›ºä»¶å¯»æ‰¾å¯å¯åŠ¨è®¾å¤‡ã€‚ ç³»ç»Ÿå›ºä»¶ä»diskä¸Šè¯»å–boot loaderï¼ŒCentOS7ä¸­çš„boot loaderæ˜¯grub2ï¼Œä¹‹åç³»ç»Ÿå›ºä»¶æŠŠæ§åˆ¶æƒäº¤ç»™boot loaderã€‚ boot loaderä»ç¡¬ç›˜è£…è½½é…ç½®æ–‡ä»¶ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºä¸€ä¸ªå¯åŠ¨é€‰æ‹©èœå•ã€‚ ç”¨æˆ·é€‰æ‹©å¯åŠ¨é¡¹åï¼Œboot loaderä»ç¡¬ç›˜åŠ è½½é€‰å®šçš„å†…æ ¸ï¼ˆkernelï¼‰å’Œinitramfsåˆ°å†…å­˜ä¸­ã€‚initramfsä¸­åŒ…æ‹¬äº†åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æ‰€éœ€çš„æ‰€æœ‰ç¡¬ä»¶çš„å†…æ ¸æ¨¡å—ï¼ˆmodulesï¼‰ã€‚å®ƒçš„é…ç½®æ–‡ä»¶æ˜¯ /etc/dracut.conf ã€‚ boot loaderæŠŠå¯åŠ¨æ—¶ä¼ å…¥çš„å‚æ•°å¦‚rd.break, è¿˜æœ‰initramfsåœ¨å†…å­˜ä¸­çš„åœ°å€ï¼Œä»¥åŠç³»ç»Ÿçš„æ§åˆ¶æƒéƒ½ç§»äº¤ç»™kernelã€‚ kernelåˆå§‹åŒ–æ‰€æœ‰ç¡¬ä»¶ï¼Œç„¶åä»initramfsä¸­æ‰§è¡Œ /sbin/init æŠŠå®ƒä½œä¸ºPID 1. CentOS7ä¸­çš„initå°±æ˜¯systemdã€‚ æ¥è‡ªinitramfsä¸­çš„systemdæ‰§è¡Œæ‰€æœ‰initrd.targetä¸­çš„unitã€‚æŠŠæ ¹æ–‡ä»¶ç³»ç»Ÿ / æŒ‚è½½ï¼ˆmountï¼‰åˆ° /sysroot. å†…æ ¸çš„æ ¹æ–‡ä»¶ç³»ç»Ÿä»initramfsåˆ‡æ¢åˆ°åˆšæ‰æŒ‚è½½çš„/sysrootä¸Šåï¼Œsysrootä¸­çš„systemdä¼šé‡æ–°å†æ‰§è¡Œä¸€æ¬¡ã€‚ systemdæ‰§è¡Œdefault.target, ç³»ç»Ÿå¯åŠ¨å®Œæˆã€‚ ","date":"2022-02-11","objectID":"/linux/:10:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"11ã€å¦‚ä½•è¿›è¡ŒLinuxç³»ç»Ÿä¼˜åŒ–ï¼Ÿ æ°¸ä¹…å…³é—­selinux vim /etc/selinux/config å°†SELINUX=enforcingæ”¹ä¸ºSELINUX=disabledï¼Œä¿å­˜åé€€å‡º,é‡å¯ç”Ÿæ•ˆ è®¾å®šç³»ç»Ÿrunlevelä¸º3 èŠ‚çº¦ç³»ç»Ÿèµ„æº grep 3:initdefault /etc/inittab id:3:initdefault: init 3 ","date":"2022-02-11","objectID":"/linux/:11:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"12ã€å¤§æ–‡ä»¶å¦‚ä½•åˆ é™¤ï¼Ÿ æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µï¼ŒæŸ¥çœ‹æ˜¯å¦éœ€è¦æ‰©å®¹ df -h æŸ¥æ‰¾å¤§æ–‡ä»¶ï¼Œä½¿ç”¨duå®šä½å¤§æ–‡ä»¶ä½ç½® # åœ¨æ ¹ç›®å½•æŸ¥æ‰¾ï¼Œå±•ç¤ºç¬¬ä¸€å±‚çº§çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œå€’å™æ’åˆ— ï¼Œå±•ç¤ºå‰10å du -h / --max-depth=1 | sort -hr | head -n 10 åˆ é™¤æ–‡ä»¶ # åˆ é™¤æ–‡ä»¶å¯ä»¥ç›´æ¥ç”¨rm -rf åˆ é™¤ rm -rf \u003cæ–‡ä»¶æˆ–ç›®å½•\u003e # æŒ‰æ—¶é—´å’Œåç§°åˆ é™¤ :æ‰¾åˆ°ç›®å½•ä¸‹ï¼Œè¶…è¿‡10å¤©çš„æ–‡ä»¶ åˆ é™¤åå­—åç¼€ä¸º.gzçš„æ–‡ä»¶ find /ç›®å½•/* -mtime +10 -name \"*.gz\" -exec rm -rf {} \\ ","date":"2022-02-11","objectID":"/linux/:12:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["åŸºç¡€"],"content":"kill çš„å‡ ç§æ ¼å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å‘½ä»¤ å‚æ•° -l ä¿¡å·ï¼Œè‹¥æœä¸åŠ ä¿¡å·çš„ç¼–å·å‚æ•°ï¼Œåˆ™ä½¿ç”¨â€œ-lâ€å‚æ•°ä¼šåˆ—å‡ºå…¨éƒ¨çš„ä¿¡å·åç§° -a å½“å¤„ç†å½“å‰è¿›ç¨‹æ—¶ï¼Œä¸é™åˆ¶å‘½ä»¤åå’Œè¿›ç¨‹å·çš„å¯¹åº”å…³ç³» -p æŒ‡å®škill å‘½ä»¤åªæ‰“å°ç›¸å…³è¿›ç¨‹çš„è¿›ç¨‹å·ï¼Œè€Œä¸å‘é€ä»»ä½•ä¿¡å· -s æŒ‡å®šå‘é€ä¿¡å· -u æŒ‡å®šç”¨æˆ· åˆ—å‡ºæ‰€æœ‰ä¿¡å·åç§° kill -l å¸¸ç”¨ä¿¡å· ä¿¡å· æ•°å­— å«ä¹‰ HUP 1 ç»ˆç«¯æ–­çº¿ INT 2 ä¸­æ–­ï¼ˆåŒ Ctrl + Cï¼‰ QUIT 3 é€€å‡ºï¼ˆåŒ Ctrl + \\ï¼‰ TERM 15 ç»ˆæ­¢ KILL 9 å¼ºåˆ¶ç»ˆæ­¢ CONT 18 ç»§ç»­ï¼ˆä¸STOPç›¸åï¼Œ fg/bgå‘½ä»¤ï¼‰ STOP 19 æš‚åœï¼ˆåŒ Ctrl + Zï¼‰ killå‘½ä»¤å¯ä»¥å¸¦ä¿¡å·å·ç é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦ã€‚å¦‚æœæ²¡æœ‰ä¿¡å·å·ç ï¼Œkillå‘½ä»¤å°±ä¼šå‘å‡ºç»ˆæ­¢ä¿¡å·(15)ï¼Œè¿™ä¸ªä¿¡å·å¯ä»¥è¢«è¿›ç¨‹æ•è·ï¼Œä½¿å¾—è¿›ç¨‹åœ¨é€€å‡ºä¹‹å‰å¯ä»¥æ¸…ç†å¹¶é‡Šæ”¾èµ„æºã€‚ ","date":"2022-02-11","objectID":"/linux/:13:0","tags":["è¿ç»´"],"title":"linuxåŸºç¡€çŸ¥è¯†","uri":"/linux/"},{"categories":["æ—¥å¸¸"],"content":"ç½‘å¿ƒäº‘æŒ‚æœºæ•™ç¨‹ | è½»æ¾å®ç°ç¡åæ”¶å…¥~ é¦–å…ˆï¼Œæœ¬æ–‡ç« åªæ˜¯åˆ†äº«ï¼Œé€ æˆä¸€åˆ‡çš„åæœï¼Œåšä¸»æ¦‚ä¸è´Ÿè´£ï¼éƒ½æ˜¯æˆå¹´äººäº†â€¦â€¦ æˆ‘é‡‡ç”¨docker å®¹å™¨é­”æ–¹æ¥æŒ‚è½½ç½‘å¿ƒäº‘ ","date":"2022-02-11","objectID":"/wxyun/:0:0","tags":["ç½‘å¿ƒäº‘","å¤–å¿«"],"title":"ç½‘å¿ƒäº‘æŒ‚æœºæ•™ç¨‹ | è½»æ¾å®ç°ç¡åæ”¶å…¥~","uri":"/wxyun/"},{"categories":["æ—¥å¸¸"],"content":"docker éƒ¨ç½² /mnt/money/wxedge_storageè¿™ä¸ªè·¯å¾„æ”¹ä¸ºè‡ªå·±çš„å­˜å‚¨è·¯å¾„å»ºè®®\u003e200G docker run \\ --name=wxedge \\ --restart=always \\ --privileged \\ --net=host \\ --tmpfs /run \\ --tmpfs /tmp \\ -v /mnt/money/wxedge_storage:/storage:rw \\ -d \\ registry.cn-hangzhou.aliyuncs.com/onething/wxedge ","date":"2022-02-11","objectID":"/wxyun/:1:0","tags":["ç½‘å¿ƒäº‘","å¤–å¿«"],"title":"ç½‘å¿ƒäº‘æŒ‚æœºæ•™ç¨‹ | è½»æ¾å®ç°ç¡åæ”¶å…¥~","uri":"/wxyun/"},{"categories":["æ—¥å¸¸"],"content":"è®¾å¤‡ç»‘å®š è¿›å…¥dockeripåœ°å€ ï¼ˆhttp://127.0.0.1:18888) ä¸‹è½½app æ‰«ç ç»‘å®š ","date":"2022-02-11","objectID":"/wxyun/:2:0","tags":["ç½‘å¿ƒäº‘","å¤–å¿«"],"title":"ç½‘å¿ƒäº‘æŒ‚æœºæ•™ç¨‹ | è½»æ¾å®ç°ç¡åæ”¶å…¥~","uri":"/wxyun/"},{"categories":["æ—¥å¸¸"],"content":"æˆåŠŸ ç„¶ååç­‰ç¬¬äºŒå¤©æ”¶ç›Šåˆ°è´¦å°±å¯ä»¥äº†ï¼Œè®°å¾—19:00-23:00æ˜¯æ”¶ç›Šé«˜å³°æœŸå°½é‡ä¿æŒåœ¨çº¿~ ","date":"2022-02-11","objectID":"/wxyun/:3:0","tags":["ç½‘å¿ƒäº‘","å¤–å¿«"],"title":"ç½‘å¿ƒäº‘æŒ‚æœºæ•™ç¨‹ | è½»æ¾å®ç°ç¡åæ”¶å…¥~","uri":"/wxyun/"},{"categories":["docker"],"content":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume Dockerçš„é•œåƒï¼ˆimageï¼‰ã€å®¹å™¨ï¼ˆcontainerï¼‰ã€æ•°æ®å·ï¼ˆvolumeï¼‰ï¼Œ éƒ½æ˜¯ç”±daemonæ‰˜ç®¡çš„ã€‚ å› æ­¤ï¼Œåœ¨éœ€è¦æ¸…ç†æ—¶ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨å…¶è‡ªå¸¦çš„æ‰‹æ®µã€‚ ","date":"2022-02-10","objectID":"/docker-clean/:0:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†æŠ€å·§ æ¸…ç†æ‰€æœ‰åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼š docker container prune # or docker rm $(docker ps -aq) æ¸…ç†æ‰€æœ‰æ‚¬æŒ‚ï¼ˆ\u003cnone\u003eï¼‰é•œåƒï¼š docker image prune # or docker rmi $(docker images -qf \"dangling=true\") æ¸…ç†æ‰€æœ‰æ— ç”¨æ•°æ®å·ï¼š docker volume prune ç”±äºpruneæ“ä½œæ˜¯æ‰¹é‡åˆ é™¤ç±»çš„å±é™©æ“ä½œï¼Œæ‰€ä»¥ä¼šæœ‰ä¸€æ¬¡ç¡®è®¤ã€‚ å¦‚æœä¸æƒ³è¾“å…¥y\u003cCR\u003eæ¥ç¡®è®¤ï¼Œå¯ä»¥æ·»åŠ -fæ“ä½œã€‚æ…ç”¨ï¼ ","date":"2022-02-10","objectID":"/docker-clean/:1:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†åœæ­¢çš„å®¹å™¨ docker rm -lv CONTAINER -læ˜¯æ¸…ç†linkï¼Œvæ˜¯æ¸…ç†volumeã€‚ è¿™é‡Œçš„CONTAINERæ˜¯å®¹å™¨çš„nameæˆ–IDï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªã€‚ å‚æ•°åˆ—è¡¨ï¼š Name shorthand Default Description â€“force,-f false Force the removal of a running container (uses SIGKILL) â€“link, -l false Remove the specified link â€“volumes, -v false ","date":"2022-02-10","objectID":"/docker-clean/:2:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†æ‰€æœ‰åœæ­¢çš„å®¹å™¨ é€šè¿‡docker pså¯ä»¥æŸ¥è¯¢å½“å‰è¿è¡Œçš„å®¹å™¨ä¿¡æ¯ã€‚ è€Œé€šè¿‡docker ps -aï¼Œå¯ä»¥æŸ¥è¯¢æ‰€æœ‰çš„å®¹å™¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²åœæ­¢çš„ã€‚ åœ¨éœ€è¦æ¸…ç†æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨æ—¶ï¼Œé€šå¸¸åˆ©ç”¨shellçš„ç‰¹æ€§ï¼Œç»„åˆä¸€ä¸‹å°±å¥½ã€‚ docker rm $(docker ps -aq) å…¶ä¸­ï¼Œpsçš„-qï¼Œæ˜¯åªè¾“å‡ºå®¹å™¨IDï¼Œæ–¹ä¾¿ä½œä¸ºå‚æ•°è®©rmä½¿ç”¨ã€‚ å‡å¦‚ç»™rmæŒ‡å®š-fï¼Œåˆ™å¯ä»¥æ¸…ç†æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬æ­£åœ¨è¿è¡Œçš„ã€‚ è¿™æ¡ç»„åˆå‘½ä»¤ï¼Œç­‰ä»·äºå¦ä¸€æ¡å‘½ä»¤ï¼š docker container prune containerå­å‘½ä»¤ï¼Œä¸‹é¢åŒ…å«äº†æ‰€æœ‰å’Œå®¹å™¨ç›¸å…³çš„å­å‘½ä»¤ã€‚ åŒ…æ‹¬docker psï¼Œç­‰ä»·äºdocker container psæˆ–docker container lsã€‚ å…¶ä½™è¿˜æœ‰startã€stopã€killã€cpç­‰ï¼Œä¸€çº§å­å‘½ä»¤ç›¸å½“äºäºŒçº§å­å‘½ä»¤åœ¨å¤–é¢çš„aliasã€‚ è€Œpruneåˆ™æ˜¯ç‰¹åˆ«æä¾›çš„æ¸…ç†å‘½ä»¤ï¼Œè¿™åœ¨å…¶å®ƒçš„ç®¡ç†å‘½ä»¤é‡Œè¿˜å¯ä»¥çœ‹åˆ°ï¼Œæ¯”å¦‚imageã€volumeã€‚ ","date":"2022-02-10","objectID":"/docker-clean/:3:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æŒ‰éœ€æ‰¹é‡æ¸…ç†å®¹å™¨ æ¸…é™¤æ‰€æœ‰å·²åœæ­¢çš„å®¹å™¨ï¼Œæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ¸…ç†ã€‚ ä½†æœ‰æ—¶ä¼šéœ€è¦åšä¸€äº›ç‰¹æ®Šè¿‡æ»¤ã€‚ è¿™æ—¶å°±éœ€è¦ä½¿ç”¨docker ps --filterã€‚ æ¯”å¦‚ï¼Œæ˜¾ç¤ºæ‰€æœ‰è¿”å›å€¼ä¸º0ï¼Œå³æ­£å¸¸é€€å‡ºçš„å®¹å™¨ï¼š docker ps -a --filter 'exited=0' åŒç†ï¼Œå¯ä»¥å¾—åˆ°å…¶å®ƒéæ­£å¸¸é€€å‡ºçš„å®¹å™¨ã€‚ ç›®å‰æ”¯æŒçš„è¿‡æ»¤å™¨æœ‰ï¼š id (containerâ€™s id) label (label=\u003ckey\u003e or label=\u003ckey\u003e=\u003cvalue\u003e) name (containerâ€™s name) exited (int - the code of exited containers. Only useful with â€“all) status (created|restarting|running|removing|paused|exited|dead) ancestor (\u003cimage-name\u003e[:\u003ctag\u003e], \u003cimage id\u003e or \u003cimage@digest\u003e) - filters containers that were created from the given image or a descendant. before (containerâ€™s id or name) - filters containers created before given id or name since (containerâ€™s id or name) - filters containers created since given id or name isolation (default|process|hyperv) (Windows daemon only) volume (volume name or mount point) - filters containers that mount volumes. network (network id or name) - filters containers connected to the provided network health (starting|healthy|unhealthy|none) - filters containers based on healthcheck status ","date":"2022-02-10","objectID":"/docker-clean/:4:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†å¤±è´¥ å¦‚æœåœ¨æ¸…ç†å®¹å™¨æ—¶å‘ç”Ÿå¤±è´¥ï¼Œé€šè¿‡é‡å¯Dockerçš„Daemonï¼Œåº”è¯¥éƒ½èƒ½è§£å†³é—®é¢˜ã€‚ # systemd sudo systemctl restart docker.service # initd sudo service docker restart ","date":"2022-02-10","objectID":"/docker-clean/:5:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†é•œåƒ ä¸æ¸…ç†å®¹å™¨çš„psã€rmç±»ä¼¼ï¼Œæ¸…ç†é•œåƒä¹Ÿæœ‰imagesã€rmiä¸¤ä¸ªå­å‘½ä»¤ã€‚ imagesç”¨æ¥æŸ¥çœ‹ï¼Œrmiç”¨æ¥åˆ é™¤ã€‚ æ¸…ç†é•œåƒå‰ï¼Œåº”è¯¥ç¡®ä¿è¯¥é•œåƒçš„å®¹å™¨ï¼Œå·²ç»è¢«æ¸…é™¤ã€‚ docker rmi IMAGE å…¶ä¸­ï¼ŒIMAGEå¯ä»¥æ˜¯nameæˆ–IDã€‚ å¦‚æœæ˜¯nameï¼Œä¸åŠ TAGå¯ä»¥åˆ é™¤æ‰€æœ‰TAGã€‚ å¦å¤–ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤ä¹Ÿéƒ½å±äºaliasã€‚ docker imagesç­‰ä»·äºdocker image lsï¼Œè€Œdocker rmiç­‰ä»·äºdocker image rmã€‚ æŒ‰éœ€æ‰¹é‡æ¸…ç†é•œåƒ Â¶ ä¸psç±»ä¼¼ï¼Œimagesä¹Ÿæ”¯æŒ--filterå‚æ•°ã€‚ ä¸æ¸…ç†ç›¸å…³ï¼Œæœ€å¸¸ç”¨çš„ï¼Œå½“å±\u003cnone\u003eäº†ã€‚ docker images --filter \"dangling=true\" è¿™æ¡å‘½ä»¤ï¼Œå¯ä»¥åˆ—å‡ºæ‰€æœ‰æ‚¬æŒ‚ï¼ˆdanglingï¼‰çš„é•œåƒï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºä¸ºçš„é‚£äº›ã€‚ docker rmi $(docker images -qf \"dangling=true\") è¿™æ¡ç»„åˆå‘½ä»¤ï¼Œå¦‚æœä¸å†™å…¥Bashçš„aliasï¼Œå‡ ä¹æ— æ³•ä½¿ç”¨ã€‚ ä¸è¿‡è¿˜æœ‰ä¸€æ¡ç­‰ä»·å‘½ä»¤ï¼Œéå¸¸å®¹æ˜“ä½¿ç”¨ã€‚ docker image prune pruneå’Œimagesç±»ä¼¼ï¼Œä¹ŸåŒæ ·æ”¯æŒâ€“filterå‚æ•°ã€‚ å…¶å®ƒçš„filteræœ‰ï¼š dangling (boolean - true or false) label (label=\u003ckey\u003e or label=\u003ckey\u003e=\u003cvalue\u003e) before (\u003cimage-name\u003e[:\u003ctag\u003e], \u003cimage id\u003e or \u003cimage@digest\u003e) - filter images created before given id or references since (\u003cimage-name\u003e[:\u003ctag\u003e], \u003cimage id\u003e or \u003cimage@digest\u003e) - filter images created since given id or references reference (pattern of an image reference) - filter images whose reference matches the specified pattern ","date":"2022-02-10","objectID":"/docker-clean/:6:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†æ‰€æœ‰æ— ç”¨é•œåƒ è¿™æ‹›è¦æ…ç”¨ï¼Œå¦åˆ™éœ€è¦é‡æ–°ä¸‹è½½ã€‚ docker image prune -a ","date":"2022-02-10","objectID":"/docker-clean/:7:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"æ¸…ç†æ•°æ®å· æ•°æ®å·ä¸å¦‚å®¹å™¨æˆ–é•œåƒé‚£æ ·æ˜¾çœ¼ï¼Œä½†å çš„ç¡¬ç›˜å´å¯å¤§å¯å°ã€‚ æ•°æ®å·çš„ç›¸å…³å‘½ä»¤ï¼Œéƒ½åœ¨docker volumeä¸­äº†ã€‚ ä¸€èˆ¬ç”¨docker volume lsæ¥æŸ¥çœ‹ï¼Œç”¨docker volume rm VOLUMEæ¥åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªã€‚ ä¸è¿‡ï¼Œç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸éœ€è¦æ‰§è¡Œè¿™ä¸¤ä¸ªå‘½ä»¤çš„ç»„åˆã€‚ ç›´æ¥æ‰§è¡Œdocker volume pruneå°±å¥½ï¼Œå³å¯åˆ é™¤æ‰€æœ‰æ— ç”¨å·ã€‚ æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªå±é™©æ“ä½œï¼ç”šè‡³å¯ä»¥è¯´ï¼Œè¿™æ˜¯æœ¬æ–‡ä¸­æœ€å±é™©çš„æ“ä½œï¼ ä¸€èˆ¬çœŸæ­£æœ‰ä»·å€¼çš„è¿è¡Œæ•°æ®ï¼Œéƒ½åœ¨æ•°æ®å·ä¸­ã€‚ ï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½æŒ‚è½½åˆ°äº†å®¹å™¨å¤–çš„æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œé‚£å°±æ²¡å…³ç³»ã€‚ï¼‰ å¦‚æœåœ¨å…³é”®æœåŠ¡åœæ­¢æœŸé—´ï¼Œæ‰§è¡Œè¿™ä¸ªæ“ä½œï¼Œå¾ˆå¯èƒ½ä¼šä¸¢å¤±æ‰€æœ‰æ•°æ®ï¼ ","date":"2022-02-10","objectID":"/docker-clean/:8:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["docker"],"content":"ä»æ–‡ä»¶ç³»ç»Ÿåˆ é™¤ é™¤é…ç½®æ–‡ä»¶ä»¥ä¸ºï¼ŒDockerçš„å†…å®¹ç›¸å…³æ–‡ä»¶ï¼ŒåŸºæœ¬éƒ½æ”¾åœ¨/var/lib/docker/ç›®å½•ä¸‹ã€‚ è¯¥ç›®å½•ä¸‹æœ‰ä¸‹åˆ—å­ç›®å½•ï¼ŒåŸºæœ¬å¯ä»¥çŒœæµ‹å‡ºç”¨é€”ï¼š aufs containers image network plugins swarm tmp trust volumes ä¸€èˆ¬ä¸æ¨èç›´æ¥æ“ä½œè¿™äº›ç›®å½•ï¼Œé™¤éä¸€äº›æç‰¹æ®Šæƒ…å†µã€‚ æ“ä½œä¸å½“ï¼Œåæœéš¾æ–™ï¼Œéœ€è¦æ…é‡ã€‚ ","date":"2022-02-10","objectID":"/docker-clean/:9:0","tags":["docker"],"title":"æ¸…ç†Dockerçš„containerï¼Œimageä¸volume","uri":"/docker-clean/"},{"categories":["gitlab"],"content":"Jenkins å®‰è£…ä¸ä½¿ç”¨ ä»£ç åœ¨æœ¬åœ°ä¿®æ”¹â€”-ã€‹æäº¤åˆ°è¿œç¨‹gitlabâ€”-ã€‹è§¦å‘jenkinsæ•´ä¸ªè‡ªåŠ¨åŒ–æ„å»ºæµç¨‹ï¼ˆæ‰“åŒ…ï¼Œæµ‹è¯•ï¼Œå‘å¸ƒï¼Œéƒ¨ç½²ï¼‰ ","date":"2022-02-09","objectID":"/jenkins/:0:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["gitlab"],"content":"å®‰è£…docker å®‰è£…docker ","date":"2022-02-09","objectID":"/jenkins/:1:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["gitlab"],"content":"dockerå®‰è£…jenkins docker run \\ -u root \\ -d \\ -p 8080:8080 \\ -p 50000:50000 \\ -v jenkins-data:/var/jenkins_home \\ -v /etc/localtime:/etc/localtime:ro \\ -v /var/run/docker.sock:/var/run/docker.sock \\ --restart=always \\ jenkinsci/blueocean ","date":"2022-02-09","objectID":"/jenkins/:2:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["gitlab"],"content":"è®¿é—® http://localhost:8080 æ˜¾ç¤ºåˆå§‹å¯†ç  docker exec -ti \u003cå®¹å™¨åç§°\u003e sh cat /var/jenkins_home/secrets/initialAdminPassword ","date":"2022-02-09","objectID":"/jenkins/:3:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["gitlab"],"content":"å·¥ä½œæµç¨‹ å…ˆå®šä¹‰ä¸€ä¸ªæµæ°´çº¿é¡¹ç›®ï¼ŒæŒ‡å®šé¡¹ç›®çš„gitä½ç½® gitä½ç½®è‡ªåŠ¨æ‹‰å–ä»£ç  è§£ææ‹‰å–ä»£ç é‡Œé¢çš„Jenkinsfileæ–‡ä»¶ æŒ‰ç…§JenkinsfileæŒ‡å®šçš„æµæ°´çº¿å¼€å§‹åŠ å·¥é¡¹ç›® ","date":"2022-02-09","objectID":"/jenkins/:4:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["gitlab"],"content":"Jenkinsfileè¯­æ³• åŸºç¡€è¯­æ³•,åœ¨ä»“åº“åˆ›å»ºä¸€ä¸ª Jenkinsfile æ–‡ä»¶ pipeline { /* å…¨éƒ¨çš„CICDæµç¨‹éƒ½åœ¨è¿™é‡Œå®šä¹‰ */ //ä»»æ„ä»£ç†å¯ç”¨å°±å¯ä»¥æ‰§è¡Œ agent any //å®šä¹‰æµæ°´çº¿çš„åŠ å·¥æµç¨‹ stages { /* æµæ°´çº¿çš„æ‰€æœ‰é˜¶æ®µ 1.ç¼–è¯‘ \"å¸¸é‡\"'å˜é‡' 2.æµ‹è¯• 3.æ‰“åŒ… 4.éƒ¨ç½² */ stage('ä»£ç ç¼–è¯‘'){ steps { //è¦åšçš„æ‰€æœ‰äº‹æƒ… echo \"ç¼–è¯‘â€¦â€¦\" } } stage('ä»£ç æµ‹è¯•'){ steps { //è¦åšçš„æ‰€æœ‰äº‹æƒ… echo \"æµ‹è¯•â€¦â€¦\" } } stage('æ‰“åŒ…'){ steps { //è¦åšçš„æ‰€æœ‰äº‹æƒ… echo \"æ‰“åŒ…â€¦â€¦\" } } stage('éƒ¨ç½²'){ steps { //è¦åšçš„æ‰€æœ‰äº‹æƒ… echo \"éƒ¨ç½²â€¦â€¦\" } } } } ","date":"2022-02-09","objectID":"/jenkins/:5:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["gitlab"],"content":"æ„å»ºè¿œç¨‹è§¦å‘ åœ¨jenkinsä¸Šé€‰æ‹©:é¡¹ç›®-\u003eé…ç½®-\u003eæ„å»ºè§¦å‘å™¨-\u003eå‹¾é€‰è§¦å‘è¿œç¨‹æ„å»º æ–°ç–†gitlabè´¦æˆ·ï¼Œç™»å½•æ–°ç”¨æˆ·å¹¶å¤©å‰‘tokenä»¤ç‰Œ æ‰¾åˆ°gitlab è®¾ç½®-\u003ewebhook ç½‘ç«™æ ¼å¼ http://\u003cUSER\u003e:\u003cTOKENAPI\u003e@\u003cJENKINS-URL\u003e/job/test-blog-demo/build?token=\u003cTOKEN\u003e ","date":"2022-02-09","objectID":"/jenkins/:6:0","tags":["gitlab"],"title":"Jenkins å®‰è£…ä¸ä½¿ç”¨","uri":"/jenkins/"},{"categories":["æ•°æ®åº“"],"content":"Navicat æŸ¥çœ‹å¯†ç æ–¹æ¡ˆ ","date":"2022-02-08","objectID":"/navicatforgetpassword/:0:0","tags":["mysql"],"title":"Navicat æŸ¥çœ‹å¯¼å‡ºè¿æ¥çš„å¯†ç  | navicatæŸ¥çœ‹å¯†ç æ–¹æ¡ˆ","uri":"/navicatforgetpassword/"},{"categories":["æ•°æ®åº“"],"content":"è§£å†³é—®é¢˜ï¼š æˆ‘ä»¬ç»å¸¸ä½¿ç”¨navicatè¿æ¥æ•°æ®åº“ï¼Œæœ‰æ—¶å€™æ—¶é—´ä¹…äº†ä¹‹åï¼Œä¼šå¿˜è®°ä¹‹å‰çš„å¯†ç ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬æœ‰åŠæ³•è·å¾—åªè¦æ­£å¸¸è¿æ¥çš„æ•°æ®åº“çš„å¯†ç  ","date":"2022-02-08","objectID":"/navicatforgetpassword/:1:0","tags":["mysql"],"title":"Navicat æŸ¥çœ‹å¯¼å‡ºè¿æ¥çš„å¯†ç  | navicatæŸ¥çœ‹å¯†ç æ–¹æ¡ˆ","uri":"/navicatforgetpassword/"},{"categories":["æ•°æ®åº“"],"content":"æ­¥éª¤ï¼š å¯¼å‡ºè¿æ¥connections.ncxï¼Œæ‹¿åˆ°ä¿å­˜åˆ°æœ¬åœ°çš„connections.ncxæ–‡ä»¶ä¸­çš„Passwordï¼Œç²˜è´´åˆ°ä¸‹é¢çš„ä»£ç ä¸­ ç™»é™†https://tool.lu/coderunner/ï¼Œä½¿ç”¨PHPåœ¨çº¿è¿è¡Œå·¥å…·ï¼Œç²˜è´´ä¸‹é¢æ·»åŠ å¯†ç åçš„ä»£ç  å¤‡ç”¨å·¥å…·ç½‘å€ï¼ˆhttps://zixuephp.net/tool-runcode.htmlï¼‰ \u003c?php class NavicatPassword { protected $version = 0; protected $aesKey = 'libcckeylibcckey'; protected $aesIv = 'libcciv libcciv '; protected $blowString = '3DC5CA39'; protected $blowKey = null; protected $blowIv = null; public function __construct($version = 12) { $this-\u003eversion = $version; $this-\u003eblowKey = sha1('3DC5CA39', true); $this-\u003eblowIv = hex2bin('d9c7c3c8870d64bd'); } public function encrypt($string) { $result = FALSE; switch ($this-\u003eversion) { case 11: $result = $this-\u003eencryptEleven($string); break; case 12: $result = $this-\u003eencryptTwelve($string); break; default: break; } return $result; } protected function encryptEleven($string) { $round = intval(floor(strlen($string) / 8)); $leftLength = strlen($string) % 8; $result = ''; $currentVector = $this-\u003eblowIv; for ($i = 0; $i \u003c $round; $i++) { $temp = $this-\u003eencryptBlock($this-\u003exorBytes(substr($string, 8 * $i, 8), $currentVector)); $currentVector = $this-\u003exorBytes($currentVector, $temp); $result .= $temp; } if ($leftLength) { $currentVector = $this-\u003eencryptBlock($currentVector); $result .= $this-\u003exorBytes(substr($string, 8 * $i, $leftLength), $currentVector); } return strtoupper(bin2hex($result)); } protected function encryptBlock($block) { return openssl_encrypt($block, 'BF-ECB', $this-\u003eblowKey, OPENSSL_RAW_DATA|OPENSSL_NO_PADDING); } protected function decryptBlock($block) { return openssl_decrypt($block, 'BF-ECB', $this-\u003eblowKey, OPENSSL_RAW_DATA|OPENSSL_NO_PADDING); } protected function xorBytes($str1, $str2) { $result = ''; for ($i = 0; $i \u003c strlen($str1); $i++) { $result .= chr(ord($str1[$i]) ^ ord($str2[$i])); } return $result; } protected function encryptTwelve($string) { $result = openssl_encrypt($string, 'AES-128-CBC', $this-\u003eaesKey, OPENSSL_RAW_DATA, $this-\u003eaesIv); return strtoupper(bin2hex($result)); } public function decrypt($string) { $result = FALSE; switch ($this-\u003eversion) { case 11: $result = $this-\u003edecryptEleven($string); break; case 12: $result = $this-\u003edecryptTwelve($string); break; default: break; } return $result; } protected function decryptEleven($upperString) { $string = hex2bin(strtolower($upperString)); $round = intval(floor(strlen($string) / 8)); $leftLength = strlen($string) % 8; $result = ''; $currentVector = $this-\u003eblowIv; for ($i = 0; $i \u003c $round; $i++) { $encryptedBlock = substr($string, 8 * $i, 8); $temp = $this-\u003exorBytes($this-\u003edecryptBlock($encryptedBlock), $currentVector); $currentVector = $this-\u003exorBytes($currentVector, $encryptedBlock); $result .= $temp; } if ($leftLength) { $currentVector = $this-\u003eencryptBlock($currentVector); $result .= $this-\u003exorBytes(substr($string, 8 * $i, $leftLength), $currentVector); } return $result; } protected function decryptTwelve($upperString) { $string = hex2bin(strtolower($upperString)); return openssl_decrypt($string, 'AES-128-CBC', $this-\u003eaesKey, OPENSSL_RAW_DATA, $this-\u003eaesIv); } }; //éœ€è¦æŒ‡å®šnavacatç‰ˆæœ¬ä¸¤ç§ï¼Œ11æˆ–12 $navicatPassword = new NavicatPassword(12); //è§£å¯†ï¼Œæ‹¬å·é‡Œé¢å†™å…¥navicatåŠ å¯†åçš„å¯†ç  $decode = $navicatPassword-\u003edecrypt('E75BF077AB8BAA3AC2D5'); echo $decode.\"\\n\"; ?\u003e ç‚¹å‡»æ‰§è¡Œä¹‹åï¼Œå°±ä¼šå¾—åˆ°çœŸå®å¯†ç  ","date":"2022-02-08","objectID":"/navicatforgetpassword/:2:0","tags":["mysql"],"title":"Navicat æŸ¥çœ‹å¯¼å‡ºè¿æ¥çš„å¯†ç  | navicatæŸ¥çœ‹å¯†ç æ–¹æ¡ˆ","uri":"/navicatforgetpassword/"},{"categories":["é—®é¢˜åº“"],"content":"ProXmoX VEå‡çº§ apt-get update æŠ¥é”™ ","date":"2022-01-30","objectID":"/pveupdate/:0:0","tags":["error"],"title":"ProXmoX VEå‡çº§ apt-get update æŠ¥é”™","uri":"/pveupdate/"},{"categories":["é—®é¢˜åº“"],"content":"è§£å†³æ–¹æ³• vim /etc/apt/sources.list.d/pve-enterprise.list #æ³¨é‡Šæ‰ #deb https://enterprise.proxmox.com/debian/pve stretch pve-enterprise ","date":"2022-01-30","objectID":"/pveupdate/:1:0","tags":["error"],"title":"ProXmoX VEå‡çº§ apt-get update æŠ¥é”™","uri":"/pveupdate/"},{"categories":["é—®é¢˜åº“"],"content":"æ·»åŠ å†…å®¹ echo \"deb http://download.proxmox.com/debian/pve stretch pve-no-subscription\" \u003e /etc/apt/sources.list.d/pve-install-repo.list wget http://download.proxmox.com/debian/proxmox-ve-release-5.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-5.x.gpg ","date":"2022-01-30","objectID":"/pveupdate/:2:0","tags":["error"],"title":"ProXmoX VEå‡çº§ apt-get update æŠ¥é”™","uri":"/pveupdate/"},{"categories":["é—®é¢˜åº“"],"content":"æ›´æ–°ç³»ç»Ÿ apt update \u0026\u0026 apt dist-upgrade ","date":"2022-01-30","objectID":"/pveupdate/:3:0","tags":["error"],"title":"ProXmoX VEå‡çº§ apt-get update æŠ¥é”™","uri":"/pveupdate/"},{"categories":["é—®é¢˜åº“"],"content":"ç»“å°¾ å‡çº§å®Œæˆåï¼Œå¯ä»¥æ‰§è¡Œpveversion -væŸ¥çœ‹ä¸‹æœ€æ–°çš„è½¯ä»¶ç‰ˆæœ¬ã€‚ç„¶åæ‰§è¡Œrebooté‡å¯ç‰©ç†æœåŠ¡å™¨ ","date":"2022-01-30","objectID":"/pveupdate/:4:0","tags":["error"],"title":"ProXmoX VEå‡çº§ apt-get update æŠ¥é”™","uri":"/pveupdate/"},{"categories":["æ•°æ®åº“"],"content":"mysql å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰ ","date":"2022-01-21","objectID":"/mysql02/:0:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ2ï¼‰","uri":"/mysql02/"},{"categories":["æ•°æ®åº“"],"content":"mysql ä¸»ä»å¤åˆ¶ MySQL ä¸»ä»å¤åˆ¶æ˜¯æŒ‡æ•°æ®å¯ä»¥ä»ä¸€ä¸ªMySQLæ•°æ®åº“æœåŠ¡å™¨ä¸»èŠ‚ç‚¹å¤åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ã€‚MySQL é»˜è®¤é‡‡ç”¨å¼‚æ­¥å¤åˆ¶æ–¹å¼ï¼Œè¿™æ ·ä»èŠ‚ç‚¹ä¸ç”¨ä¸€ç›´è®¿é—®ä¸»æœåŠ¡å™¨æ¥æ›´æ–°è‡ªå·±çš„æ•°æ®ï¼Œæ•°æ®çš„æ›´æ–°å¯ä»¥åœ¨è¿œç¨‹è¿æ¥ä¸Šè¿›è¡Œï¼Œä»èŠ‚ç‚¹å¯ä»¥å¤åˆ¶ä¸»æ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®åº“æˆ–è€…ç‰¹å®šçš„æ•°æ®åº“ï¼Œæˆ–è€…ç‰¹å®šçš„è¡¨ã€‚ ","date":"2022-01-21","objectID":"/mysql02/:1:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ2ï¼‰","uri":"/mysql02/"},{"categories":["æ•°æ®åº“"],"content":"MySQL ä¸»ä»å¤åˆ¶çš„ä¸»è¦ç”¨é€” è¯»å†™åˆ†ç¦» æ•°æ®å®æ—¶å¤‡ä»½ï¼Œå½“ç³»ç»Ÿä¸­æŸä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯ä»¥æ–¹ä¾¿çš„æ•…éšœåˆ‡æ¢(ä¸»ä»åˆ‡æ¢) é«˜å¯ç”¨ï¼ˆHAï¼‰ æ¶æ„æ‰©å±• ","date":"2022-01-21","objectID":"/mysql02/:2:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ2ï¼‰","uri":"/mysql02/"},{"categories":["æ•°æ®åº“"],"content":"MySQL ä¸»ä»å¤åˆ¶çš„åŸç† MySQLä¸»ä»å¤åˆ¶æ¶‰åŠåˆ°ä¸‰ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªè¿è¡Œåœ¨ä¸»èŠ‚ç‚¹ï¼ˆlog dump threadï¼‰ï¼Œå…¶ä½™ä¸¤ä¸ª(I/O thread, SQL thread)è¿è¡Œåœ¨ä»èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º: ä¸»èŠ‚ç‚¹ log dump çº¿ç¨‹ å½“ä»èŠ‚ç‚¹è¿æ¥ä¸»èŠ‚ç‚¹æ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªlog dump çº¿ç¨‹ï¼Œç”¨äºå‘é€å’Œè¯»å–bin-logçš„å†…å®¹ã€‚åœ¨è¯»å–bin-logä¸­çš„æ“ä½œæ—¶ï¼Œlog dumpçº¿ç¨‹ä¼šå¯¹ä¸»èŠ‚ç‚¹ä¸Šçš„bin-logåŠ é”ï¼Œå½“è¯»å–å®Œæˆï¼Œåœ¨å‘é€ç»™ä»èŠ‚ç‚¹ä¹‹å‰ï¼Œé”ä¼šè¢«é‡Šæ”¾ã€‚ä¸»èŠ‚ç‚¹ä¼šä¸ºè‡ªå·±çš„æ¯ä¸€ä¸ªä»èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªlog dump çº¿ç¨‹ã€‚ ä»èŠ‚ç‚¹ I/Oçº¿ç¨‹ å½“ä»èŠ‚ç‚¹ä¸Šæ‰§è¡Œstart slaveå‘½ä»¤ä¹‹åï¼Œä»èŠ‚ç‚¹ä¼šåˆ›å»ºä¸€ä¸ªI/Oçº¿ç¨‹ç”¨æ¥è¿æ¥ä¸»èŠ‚ç‚¹ï¼Œè¯·æ±‚ä¸»åº“ä¸­æ›´æ–°çš„bin-logã€‚I/Oçº¿ç¨‹æ¥æ”¶åˆ°ä¸»èŠ‚ç‚¹çš„blog dumpè¿›ç¨‹å‘æ¥çš„æ›´æ–°ä¹‹åï¼Œä¿å­˜åœ¨æœ¬åœ°relay-logï¼ˆä¸­ç»§æ—¥å¿—ï¼‰ä¸­ã€‚ ä»èŠ‚ç‚¹ SQLçº¿ç¨‹ SQLçº¿ç¨‹è´Ÿè´£è¯»å–relay-logä¸­çš„å†…å®¹ï¼Œè§£ææˆå…·ä½“çš„æ“ä½œå¹¶æ‰§è¡Œï¼Œæœ€ç»ˆä¿è¯ä¸»ä»æ•°æ®çš„ä¸€è‡´æ€§ã€‚ å¯¹äºæ¯ä¸€ä¸ªä¸»ä»è¿æ¥ï¼Œéƒ½éœ€è¦è¿™ä¸‰ä¸ªè¿›ç¨‹æ¥å®Œæˆã€‚å½“ä¸»èŠ‚ç‚¹æœ‰å¤šä¸ªä»èŠ‚ç‚¹æ—¶ï¼Œä¸»èŠ‚ç‚¹ä¼šä¸ºæ¯ä¸€ä¸ªå½“å‰è¿æ¥çš„ä»èŠ‚ç‚¹å»ºä¸€ä¸ªlog dump è¿›ç¨‹ï¼Œè€Œæ¯ä¸ªä»èŠ‚ç‚¹éƒ½æœ‰è‡ªå·±çš„I/Oè¿›ç¨‹ï¼ŒSQLè¿›ç¨‹ã€‚ä»èŠ‚ç‚¹ç”¨ä¸¤ä¸ªçº¿ç¨‹å°†ä»ä¸»åº“æ‹‰å–æ›´æ–°å’Œæ‰§è¡Œåˆ†æˆç‹¬ç«‹çš„ä»»åŠ¡ï¼Œè¿™æ ·åœ¨æ‰§è¡ŒåŒæ­¥æ•°æ®ä»»åŠ¡çš„æ—¶å€™ï¼Œä¸ä¼šé™ä½è¯»æ“ä½œçš„æ€§èƒ½ã€‚æ¯”å¦‚ï¼Œå¦‚æœä»èŠ‚ç‚¹æ²¡æœ‰è¿è¡Œï¼Œæ­¤æ—¶I/Oè¿›ç¨‹å¯ä»¥å¾ˆå¿«ä»ä¸»èŠ‚ç‚¹è·å–æ›´æ–°ï¼Œå°½ç®¡SQLè¿›ç¨‹è¿˜æ²¡æœ‰æ‰§è¡Œã€‚å¦‚æœåœ¨SQLè¿›ç¨‹æ‰§è¡Œä¹‹å‰ä»èŠ‚ç‚¹æœåŠ¡åœæ­¢ï¼Œè‡³å°‘I/Oè¿›ç¨‹å·²ç»ä»ä¸»èŠ‚ç‚¹æ‹‰å–åˆ°äº†æœ€æ–°çš„å˜æ›´å¹¶ä¸”ä¿å­˜åœ¨æœ¬åœ°relayæ—¥å¿—ä¸­ï¼Œå½“æœåŠ¡å†æ¬¡èµ·æ¥ä¹‹åï¼Œå°±å¯ä»¥å®Œæˆæ•°æ®çš„åŒæ­¥ã€‚ è¦å®æ–½å¤åˆ¶ï¼Œé¦–å…ˆå¿…é¡»æ‰“å¼€Master ç«¯çš„binary logï¼ˆbin-logï¼‰åŠŸèƒ½ï¼Œå¦åˆ™æ— æ³•å®ç°ã€‚ ","date":"2022-01-21","objectID":"/mysql02/:3:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ2ï¼‰","uri":"/mysql02/"},{"categories":["æ—¥å¸¸"],"content":"Proxmox VE åœ¨çº¿æ‰©å®¹ç£ç›˜åˆ†åŒº ","date":"2022-01-19","objectID":"/pve1/:0:0","tags":["æ‰©å®¹ç£ç›˜","pve"],"title":"Proxmox VE åœ¨çº¿æ‰©å®¹ç£ç›˜åˆ†åŒº","uri":"/pve1/"},{"categories":["æ—¥å¸¸"],"content":"æ·»åŠ ç£ç›˜å¤§å° ","date":"2022-01-19","objectID":"/pve1/:1:0","tags":["æ‰©å®¹ç£ç›˜","pve"],"title":"Proxmox VE åœ¨çº¿æ‰©å®¹ç£ç›˜åˆ†åŒº","uri":"/pve1/"},{"categories":["æ—¥å¸¸"],"content":"åœ¨VMä¸Šåšæ‰©å®¹æ“ä½œ å®‰è£… growpart yum install -y epel-release yum install -y cloud-utils æŸ¥çœ‹ç³»ç»Ÿç›˜ è·¯å¾„ fdisk -l df -h æ‰©å®¹è®¾å¤‡å¹¶é‡å¯ growpart /dev/sda 2 #2ä»£è¡¨æ˜¯ç¬¬äºŒå—ç³»ç»Ÿåˆ†åŒºï¼Œä¸æ˜¯sda2,ä¸­é—´æœ‰ç©ºæ ¼ reboot é‡å¯æ‰§è¡Œå‘½ä»¤ xfs_growfs /dev/sda2 #(xfs æ–‡ä»¶ç³»ç»Ÿ) resize2fs /dev/sda2 #(ext4 æ–‡ä»¶ç³»ç»Ÿ) æ›´æ–°å®Œæˆ df -h ","date":"2022-01-19","objectID":"/pve1/:2:0","tags":["æ‰©å®¹ç£ç›˜","pve"],"title":"Proxmox VE åœ¨çº¿æ‰©å®¹ç£ç›˜åˆ†åŒº","uri":"/pve1/"},{"categories":["gitlab"],"content":"Gitlabæ‰¹é‡å¯¼å‡ºç”¨æˆ· ç™»é™†GitlabæœåŠ¡å™¨è¿›è¡Œæ•°æ®åº“ç™»é™†ã€æ•°æ®æŸ¥è¯¢åŠä¿¡æ¯å¯¼å‡ºæ“ä½œã€‚ ","date":"2022-01-14","objectID":"/exportuser/:0:0","tags":["è‡ªåŠ¨åŒ–"],"title":"Gitlabæ‰¹é‡å¯¼å‡ºç”¨æˆ·","uri":"/exportuser/"},{"categories":["gitlab"],"content":"æ“ä½œæ­¥éª¤ æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œå®šä½æ•°æ®åº“ç›¸å…³ä¿¡æ¯ cat /var/opt/gitlab/gitlab-rails/etc/database.yml æŸ¥çœ‹Gitlabå¯¹åº”çš„ç³»ç»Ÿç”¨æˆ· cat /etc/passwd | grep gitlab åˆ‡æ¢ç”¨æˆ·gitlab-psql su - gitlab-psql ç™»é™†æ•°æ®åº“ï¼ˆ-hæŒ‡å®šhostï¼Œ-dæŒ‡å®šæ•°æ®åº“ï¼‰ ä½¿ç”¨ç¬¬1æ­¥è·å–çš„ä¿¡æ¯ psql -h /var/opt/gitlab/postgresql -d gitlabhq_production (1) æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ gitlabhq_production=# \\h (2) æŸ¥çœ‹æ•°æ®åº“ gitlabhq_production=# \\l (3) æŸ¥çœ‹åº“ä¸­çš„è¡¨ï¼ˆæ‰§è¡Œå‘½ä»¤åï¼ŒæŒ‰å›è½¦é”®æ˜¾ç¤ºæ›´å¤šè¡¨ä¿¡æ¯ï¼‰ gitlabhq_production=# \\dt (4) é€šè¿‡ç­›æŸ¥ï¼Œå¯åœ¨åº“ä¸­æ‰¾åˆ°usersè¡¨ï¼Œç›¸å…³ç”¨æˆ·ä¿¡æ¯éƒ½è®°å½•åœ¨è¡¨ä¸­ï¼ gitlabhq_production=# \\d users (5) æŸ¥çœ‹è¡¨ä¿¡æ¯ gitlabhq_production=# SELECT * FROM users; (6) æŸ¥çœ‹usersè¡¨ä¸­çš„nameå­—æ®µ gitlabhq_production=# SELECT name FROM users; (7)ç™»å‡ºæ•°æ®åº“ gitlabhq_production=# \\q æ ¹æ®éœ€è¦æå–çš„ä¿¡æ¯ï¼Œç¡®å®šè¡¨usersä¸­çš„å­—æ®µï¼Œè¿›è¡Œå¯¼å‡ºæ“ä½œ echo 'select name,username,email,state from users;' |psql -h /var/opt/gitlab/postgresql -d gitlabhq_production \u003e userinfo.txt å­˜å‚¨åœ¨/var/opt/gitlab/postgresql/userinfo.txt ","date":"2022-01-14","objectID":"/exportuser/:1:0","tags":["è‡ªåŠ¨åŒ–"],"title":"Gitlabæ‰¹é‡å¯¼å‡ºç”¨æˆ·","uri":"/exportuser/"},{"categories":["k8s"],"content":"Harbor æ­å»º Harbor æ˜¯ä¸€ä¸ªå¼€æºå¯ä¿¡çš„äº‘åŸç”Ÿæ³¨å†Œè¡¨é¡¹ç›®ï¼Œç”¨äºå­˜å‚¨ã€ç­¾åå’Œæ‰«æå†…å®¹ã€‚ç”¨äºå­˜å‚¨docker image ","date":"2022-01-14","objectID":"/harbor/:0:0","tags":["k8s"],"title":"Harbor æ­å»º","uri":"/harbor/"},{"categories":["k8s"],"content":"è¦æ±‚ Linuxä¸»æœº docker 17.06.0-ce ä»¥ä¸Š docker-compose 1.18.0 ä»¥ä¸Š é“¾æ¥è·³è½¬ï¼šdocker å®‰è£… ","date":"2022-01-14","objectID":"/harbor/:1:0","tags":["k8s"],"title":"Harbor æ­å»º","uri":"/harbor/"},{"categories":["k8s"],"content":"å®‰è£… ä¸‹è½½ç¨‹åº åœ¨çº¿å®‰è£…åŒ… wget https://github.com/goharbor/harbor/releases/download/v1.10.10/harbor-online-installer-v1.10.10.tgz ç¦»çº¿å®‰è£…åŒ… wget https://github.com/goharbor/harbor/releases/download/v1.10.10/harbor-offline-installer-v1.10.10.tgz å®‰è£… mkdir -p /data cd /data tar -zxvf harbor-offline-installer-v1.10.10.tgz cd /harbor ./install.sh æ¥ä¸‹æ¥åªè¦å®‰é™çš„ç­‰å¾…å®‰è£…å°±å¯ä»¥äº† ","date":"2022-01-14","objectID":"/harbor/:2:0","tags":["k8s"],"title":"Harbor æ­å»º","uri":"/harbor/"},{"categories":["k8s"],"content":"é…ç½® # Configuration file of Harbor # The IP address or hostname to access admin UI and registry service. # DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients. hostname: \u003cåŸŸå\u003e # http related config http: # port for http, default is 80. If https enabled, this port will redirect to https port port: 80 # https related config https: # https port for harbor, default is 443 port: 443 # SSLè¯ä¹¦ certificate: /hub/ssl/bundle.pem private_key: /hub/ssl/key # Uncomment external_url if you want to enable external proxy # And when it enabled the hostname will no longer used # external_url: https://reg.mydomain.com:8433 # The initial password of Harbor admin # It only works in first time to install harbor # Remember Change the admin password from UI after launching Harbor. harbor_admin_password: \u003cå¯†ç \u003e # Harbor DB configuration database: # The password for the root user of Harbor DB. Change this before any production use. password: \u003cå¯†ç \u003e # The maximum number of connections in the idle connection pool. If it \u003c=0, no idle connections are retained. max_idle_conns: 50 # The maximum number of open connections to the database. If it \u003c= 0, then there is no limit on the number of open connections. # Note: the default number of connections is 100 for postgres. max_open_conns: 100 # The default data volume data_volume: /data # Harbor Storage settings by default is using /data dir on local filesystem # Uncomment storage_service setting If you want to using external storage # storage_service: # # ca_bundle is the path to the custom root ca certificate, which will be injected into the truststore # # of registry's and chart repository's containers. This is usually needed when the user hosts a internal storage with self signed certificate. # ca_bundle: # # storage backend, default is filesystem, options include filesystem, azure, gcs, s3, swift and oss # # for more info about this configuration please refer https://docs.docker.com/registry/configuration/ # filesystem: # maxthreads: 100 # # set disable to true when you want to disable registry redirect # redirect: # disabled: false # Clair configuration clair: # The interval of clair updaters, the unit is hour, set to 0 to disable the updaters. updaters_interval: 12 jobservice: # Maximum number of job workers in job service max_job_workers: 10 notification: # Maximum retry count for webhook job webhook_job_max_retry: 10 chart: # Change the value of absolute_url to enabled can enable absolute url in chart absolute_url: disabled # Log configurations log: # options are debug, info, warning, error, fatal level: info # configs for logs in local storage local: # Log files are rotated log_rotate_count times before being removed. If count is 0, old versions are removed rather than rotated. rotate_count: 50 # Log files are rotated only if they grow bigger than log_rotate_size bytes. If size is followed by k, the size is assumed to be in kilobytes. # If the M is used, the size is in megabytes, and if G is used, the size is in gigabytes. So size 100, size 100k, size 100M and size 100G # are all valid. rotate_size: 200M # The directory on your host that store log location: /var/log/harbor # Uncomment following lines to enable external syslog endpoint. # external_endpoint: # # protocol used to transmit log to external endpoint, options is tcp or udp # protocol: tcp # # The host of external endpoint # host: localhost # # Port of external endpoint # port: 5140 #This attribute is for migrator to detect the version of the .cfg file, DO NOT MODIFY! _version: 1.10.0 # Uncomment external_database if using external database. # external_database: # harbor: # host: harbor_db_host # port: harbor_db_port # db_name: harbor_db_name # username: harbor_db_username # password: harbor_db_password # ssl_mode: disable # max_idle_conns: 2 # max_open_conns: 0 # clair: # host: clair_db_host # port: clair_db_port # db_name: clair_db_name # username: clair_db_username # password: clair_db_password # ssl_mode: dis","date":"2022-01-14","objectID":"/harbor/:3:0","tags":["k8s"],"title":"Harbor æ­å»º","uri":"/harbor/"},{"categories":["ç›‘æ§"],"content":"prometheus+grafana+alertmanager å®‰è£…é…ç½® æœåŠ¡å™¨ç›‘æ§å‘Šè­¦ç³»ç»Ÿæ­å»ºï¼Œé€šè¿‡exporterè·å–èŠ‚ç‚¹ä¿¡æ¯åˆ°prometheusã€‚prometheusé…ç½®è§„åˆ™ï¼Œä½¿garfanaå’Œalertmanagerèƒ½å¤Ÿæ¥å—åˆ°æ•°æ®ï¼Œåˆ†åˆ«å±•ç¤ºæ•°æ®å’Œå‘é€å‘Šè­¦ ","date":"2022-01-13","objectID":"/prometheus1/:0:0","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"å‚æ•° VM :192.168.99.78 ç«¯å£ æœåŠ¡ 9100 node_exporter 3000 grafana 9090 prometheus 9115 blackbox_exporter ","date":"2022-01-13","objectID":"/prometheus1/:1:0","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"å®‰è£… ","date":"2022-01-13","objectID":"/prometheus1/:2:0","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"grafaå®‰è£… dockerå®‰è£… docker run -d -p 3000:3000 \\ --name=grafana \\ -v grafana-storage:/var/lib/grafana \\ grafana/grafana:8.3.3 ","date":"2022-01-13","objectID":"/prometheus1/:2:1","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"prometheus å®‰è£… ä¸‹è½½ wget https://github.com/prometheus/prometheus/releases/download/v2.32.1/prometheus-2.32.1.linux-amd64.tar.gz tar -zxvf prometheus-2.32.1.linux-amd64.tar.gz cd prometheus-2.32.1.linux-amd64 mkdir -p file_sd mkdir -p rules è¿è¡Œ prometheus killall prometheus nohup ./prometheus --config.file=prometheus.yml \u0026 # æŸ¥çœ‹è¿è¡ŒçŠ¶å†µ tail -f nohup.out ","date":"2022-01-13","objectID":"/prometheus1/:2:2","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"node_exporter å®‰è£… docker-compose å®‰è£… version: \"3\" services: node-exporter: image: prom/node-exporter:v1.3.1 container_name: node-exporter restart: always ports: - \"9100:9100\" docker-compose up -d äºŒè¿›åˆ¶å®‰è£… wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz tar -zxvf node_exporter-1.3.1.linux-amd64.tar.gz cd node_exporter-1.3.1.linux-amd64 nohup ./node_exporter \u0026 ","date":"2022-01-13","objectID":"/prometheus1/:2:3","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"blackbox_exporter äºŒè¿›åˆ¶å®‰è£… wget https://github.com/prometheus/blackbox_exporter/releases/download/v0.19.0/blackbox_exporter-0.19.0.linux-amd64.tar.gz tar -zxvf blackbox_exporter-0.19.0.linux-amd64.tar.gz cd blackbox_exporter-0.19.0.linux-amd64 nohup ./blackbox_exporter \u0026 ","date":"2022-01-13","objectID":"/prometheus1/:2:4","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"Alertmanager äºŒè¿›åˆ¶å®‰è£… wget https://github.com/prometheus/alertmanager/releases/download/v0.23.0/alertmanager-0.23.0.linux-amd64.tar.gz tar -zxvf alertmanager-0.23.0.linux-amd64.tar.gz cd alertmanager-0.23.0.linux-amd64 nohup ./alertmanager \u0026 docker-compose å®‰è£… version: \"3\" services: alertmanager: image: \"prom/alertmanager:v0.22.2\" volumes: - \"/etc/localtime:/etc/localtime\" - \"./alertmanager.yml:/etc/alertmanager/alertmanager.yml\" ports: - \"9093:9093\" restart: \"always\" container_name: \"alertmanager\" ","date":"2022-01-13","objectID":"/prometheus1/:2:5","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"prometheus.yml é…ç½® global: scrape_interval: 15s # By default, scrape targets every 15 seconds. # Attach these labels to any time series or alerts when communicating with # external systems (federation, remote storage, Alertmanager). external_labels: monitor: 'codelab-monitor' # Alertmanager configuration # alerting: # alertmanagers: # - static_configs: # - targets: # - 192.168.99.78:9093 # Load rules once and periodically evaluate them according to the global 'evaluation_interval'. # rule_files: # - \"./rules/blackbox.yaml\" # - \"./rules/node-exporter.yaml\" # A scrape configuration containing exactly one endpoint to scrape: # Here it's Prometheus itself. scrape_configs: # The job name is added as a label `job=\u003cjob_name\u003e` to any timeseries scraped from this config. - job_name: 'prometheus' # Override the global default and scrape targets from this job every 5 seconds. scrape_interval: 5s static_configs: - targets: ['localhost:9090'] - job_name: 'node-exporter' file_sd_configs: - files: - \"./file_sd/node-exporter.yaml\" refresh_interval: 5s - job_name: 'blackbox' metrics_path: /probe scrape_interval: 30s scrape_timeout: 30s params: module: [http_2xx] # Look for a HTTP 200 response. file_sd_configs: - files: - \"./file_sd/blackbox.yaml\" refresh_interval: 5s relabel_configs: - source_labels: [__address__] target_label: __param_target - source_labels: [__param_target] target_label: instance - target_label: __address__ replacement: 192.168.99.78:9115 ","date":"2022-01-13","objectID":"/prometheus1/:3:0","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"node-exporter.yaml - targets: ['192.168.99.78:9100'] labels: instance: \u003cå®ä¾‹åç§°\u003e - targets: ['\u003cIP\u003e:9100'] labels: instance: å®ä¾‹åç§° ","date":"2022-01-13","objectID":"/prometheus1/:3:1","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"blackbox.yaml - targets: - https://www.jobcher.com - https://\u003cåŸŸå\u003e ","date":"2022-01-13","objectID":"/prometheus1/:3:2","tags":["prometheus"],"title":"prometheus grafana alertmanager å®‰è£…é…ç½®","uri":"/prometheus1/"},{"categories":["ç›‘æ§"],"content":"prometheus é…ç½® Prometheus æ˜¯ç”± SoundCloud å¼€æºç›‘æ§å‘Šè­¦è§£å†³æ–¹æ¡ˆ ","date":"2022-01-13","objectID":"/prometheus/:0:0","tags":["prometheus"],"title":"prometheus é…ç½®","uri":"/prometheus/"},{"categories":["ç›‘æ§"],"content":"ç»„ä»¶ Prometheus Serverï¼Œ ä¸»è¦ç”¨äºæŠ“å–æ•°æ®å’Œå­˜å‚¨æ—¶åºæ•°æ®ï¼Œå¦å¤–è¿˜æä¾›æŸ¥è¯¢å’Œ Alert Rule é…ç½®ç®¡ç†ã€‚ client librariesï¼Œç”¨äºå¯¹æ¥ Prometheus Server, å¯ä»¥æŸ¥è¯¢å’Œä¸ŠæŠ¥æ•°æ®ã€‚ push gateway ï¼Œç”¨äºæ‰¹é‡ï¼ŒçŸ­æœŸçš„ç›‘æ§æ•°æ®çš„æ±‡æ€»èŠ‚ç‚¹ï¼Œä¸»è¦ç”¨äºä¸šåŠ¡æ•°æ®æ±‡æŠ¥ç­‰ã€‚ å„ç§æ±‡æŠ¥æ•°æ®çš„ exporters ï¼Œä¾‹å¦‚æ±‡æŠ¥æœºå™¨æ•°æ®çš„ node_exporter, æ±‡æŠ¥ MongoDB ä¿¡æ¯çš„ MongoDB exporter ç­‰ç­‰ã€‚ ç”¨äºå‘Šè­¦é€šçŸ¥ç®¡ç†çš„ alertmanager ã€‚ ","date":"2022-01-13","objectID":"/prometheus/:1:0","tags":["prometheus"],"title":"prometheus é…ç½®","uri":"/prometheus/"},{"categories":["ç›‘æ§"],"content":"è¿è¡Œé€»è¾‘ Prometheus server å®šæœŸä»é™æ€é…ç½®çš„ targets æˆ–è€…æœåŠ¡å‘ç°çš„ targets æ‹‰å–æ•°æ®ã€‚ å½“æ–°æ‹‰å–çš„æ•°æ®å¤§äºé…ç½®å†…å­˜ç¼“å­˜åŒºçš„æ—¶å€™ï¼ŒPrometheus ä¼šå°†æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ï¼ˆå¦‚æœä½¿ç”¨ remote storage å°†æŒä¹…åŒ–åˆ°äº‘ç«¯ï¼‰ã€‚ Prometheus å¯ä»¥é…ç½® rulesï¼Œç„¶åå®šæ—¶æŸ¥è¯¢æ•°æ®ï¼Œå½“æ¡ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¼šå°† alert æ¨é€åˆ°é…ç½®çš„ Alertmanagerã€‚ Alertmanager æ”¶åˆ°è­¦å‘Šçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®é…ç½®ï¼Œèšåˆï¼Œå»é‡ï¼Œé™å™ªï¼Œæœ€åå‘é€è­¦å‘Šã€‚ å¯ä»¥ä½¿ç”¨ APIï¼Œ Prometheus Console æˆ–è€… Grafana æŸ¥è¯¢å’Œèšåˆæ•°æ®ã€‚ ","date":"2022-01-13","objectID":"/prometheus/:2:0","tags":["prometheus"],"title":"prometheus é…ç½®","uri":"/prometheus/"},{"categories":["ç›‘æ§"],"content":"å®‰è£…prometheus ä½¿ç”¨é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£… wget https://github.com/prometheus/prometheus/releases/download/v2.32.1/prometheus-2.32.1.linux-amd64.tar.gz tar -zxvf prometheus-2.32.1.linux-amd64.tar.gz cd prometheus-2.32.1.linux-amd64 ä½¿ç”¨docker å®‰è£… mkdir -p opt/prometheus vim prometheus.yml docker run \\ -p 9090:9090 \\ -v /path/to/prometheus.yml:/opt/prometheus/prometheus.yml \\ prom/prometheus ","date":"2022-01-13","objectID":"/prometheus/:3:0","tags":["prometheus"],"title":"prometheus é…ç½®","uri":"/prometheus/"},{"categories":["æ—¥å¸¸"],"content":"centos7.9 ç½‘ç»œé…ç½® è§£å†³centos æ–°æœºå™¨ç½‘ç»œä¸é€šçš„é—®é¢˜ï¼ŒCentOS7é»˜è®¤ä¸å¯åŠ¨ç½‘å¡çš„ã€‚CentOS å®‰è£…æˆåŠŸå,è¿›è¡Œä¸€ä¸‹ ping çš„æ“ä½œ,éªŒè¯ç½‘ç»œæ˜¯å¦è”é€š. ping 1.1.1.1 ip addr # æŸ¥çœ‹ipç½‘ç»œåç§° å¯ç”¨ç½‘å¡ è¿›å…¥ /etc/sysconfig/network-scipts æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰¾åˆ°IPç½‘å¡åç§° cd /etc/sysconfig/network-scipts vim ifcfg-eth0 å¯ç”¨ ONBOOT #vim ifcfg-eth0 #ä¿®æ”¹ ONBOOT=YES # esc å¹¶:wqé€€å‡ºä¿å­˜ é‡å¯æœºå™¨ shutdown -r now ","date":"2022-01-11","objectID":"/linux-network/:0:0","tags":["linux"],"title":"centos7.9 ç½‘ç»œé…ç½®","uri":"/linux-network/"},{"categories":["æ—¥å¸¸"],"content":"ç»“å°¾ centosç”¨çš„æŒºåˆ«æ‰­ï¼Œä¸è€ƒè™‘æ€§èƒ½å’Œæ€§ä»·æ¯”ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç”¨ubuntuâ€¦â€¦ï¼Œç®€å•çš„é…ç½®ï¼Œåˆå­¦è€…æˆ‘å»ºè®®è¿˜æ˜¯å…ˆç”¨ubuntuï¼Œä¼šå°‘è¸©å¾ˆå¤šå‘ã€‚å½“ç„¶äº†ï¼Œç”¨x86ä¸ç„¶åˆå­¦è€…ç”¨æ ‘è“æ´¾å’Œarmè®¾å¤‡ï¼Œä¼šç¢°åˆ°å¾ˆå¤šå…¼å®¹æ€§çš„é—®é¢˜ã€‚ ","date":"2022-01-11","objectID":"/linux-network/:1:0","tags":["linux"],"title":"centos7.9 ç½‘ç»œé…ç½®","uri":"/linux-network/"},{"categories":["é—®é¢˜åº“"],"content":"å®‰è£… docker å‡ºç° ERROR: Unsupported distribution â€˜olâ€™ é—®é¢˜ éƒ¨ç½²docker å®‰è£…å‡ºç° ERROR: Unsupported distribution â€˜olâ€™ ç¡®è®¤æ˜¯ä¸æ˜¯armæ¶æ„ uname -r ç¡®è®¤ä½¿ç”¨çš„æ˜¯ä¸æ˜¯oracleæœåŠ¡å™¨ç³»ç»Ÿ,å¦‚æœæ˜¯è¯·ç»§ç»­æ“ä½œï¼Œå®‰è£…ä¾èµ–ï¼š dnf install -y dnf-utils zip unzip dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo å®‰è£…docker dnf remove -y runc dnf install -y docker-ce --nobest å®Œæˆdocker å®‰è£…å¹¶æ£€æŸ¥ systemctl enable docker.service systemctl start docker.service #æ£€æŸ¥ systemctl status docker.service docker info docker version ","date":"2022-01-11","objectID":"/error1/:0:0","tags":["error"],"title":"å®‰è£… docker å‡ºç° ERROR: Unsupported distribution 'ol' é—®é¢˜","uri":"/error1/"},{"categories":["é—®é¢˜åº“"],"content":"ç»“å°¾ è¯¥é—®é¢˜ä¸»è¦æ˜¯oracleæ²¡æœ‰æ”¯æŒä¾èµ–å¯¼è‡´çš„~oracleè¿˜æ˜¯å¾ˆä¸é”™çš„~ ","date":"2022-01-11","objectID":"/error1/:1:0","tags":["error"],"title":"å®‰è£… docker å‡ºç° ERROR: Unsupported distribution 'ol' é—®é¢˜","uri":"/error1/"},{"categories":["k8s"],"content":"Kubernetes å®éªŒæ‰‹å†Œï¼ˆ1ï¼‰ é€šè¿‡åœ¨pveåˆ›å»º5å°è™šæ‹Ÿæœºï¼š èŠ‚ç‚¹ IP ä½œç”¨ node0 192.168.99.69 k8s-master01 node1 192.168.99.9 k8s-master02 node2 192.168.99.53 k8s-master03 node3 192.168.99.41 k8s-node01 node4 192.168.99.219 k8s-node02 node5 192.168.99.42 k8s-master-lb é…ç½®ä¿¡æ¯ å¤‡æ³¨ ç³»ç»Ÿç‰ˆæœ¬ Ubuntu Docker 20.10.12 podç½‘æ®µ 172.168.0.0/12 serviceç½‘æ®µ 10.96.0.0/12 VIP ä¸è¦å’Œå†…ç½‘IPé‡å¤ï¼ŒVIPéœ€è¦å’Œä¸»æœºåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†… æ›´æ–°ansibleè¿æ¥ ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.99.155 ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.99.199 ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.99.87 #ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.99.41 #ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.99.219 vim /etc/hosts 192.168.99.155 k8s-master01 192.168.99.199 k8s-master02 192.168.99.87 k8s-master03 #192.168.99.41 k8s-node01 #192.168.99.219 k8s-node02 ","date":"2022-01-07","objectID":"/k8s1/:0:0","tags":["k8s"],"title":"Kubernetes å®éªŒæ‰‹å†Œï¼ˆ1ï¼‰","uri":"/k8s1/"},{"categories":["k8s"],"content":"åŸºæœ¬é…ç½® å®‰è£…åŸºæœ¬è½¯ä»¶åŒ… apt install wget jq psmisc vim net-tools telnet lvm2 git -y # å…³é—­swapåˆ†åŒº vim /etc/fstab æ³¨é‡Šæ‰swap å†…å®¹ å¹¶é‡å¯ reboot # æ—¶é—´åŒæ­¥ apt install ntpdate -y # æŸ¥çœ‹æ—¶åŒº timedatectl set-timezone 'Asia/Shanghai' timedatectl date å®‰è£…docker curl -sSL https://get.daocloud.io/docker | sh systemctl restart docker å®‰è£…k8sç»„ä»¶ # æ›´æ–° apt åŒ…ç´¢å¼•å¹¶å®‰è£…ä½¿ç”¨ Kubernetes sudo apt-get update sudo apt-get install -y apt-transport-https ca-certificates curl # ä¸‹è½½ Google Cloud å…¬å¼€ç­¾åç§˜é’¥ï¼š sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg # æ·»åŠ  Kubernetes apt ä»“åº“ echo \"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main\" | sudo tee /etc/apt/sources.list.d/kubernetes.list # æ›´æ–° apt åŒ…ç´¢å¼•ï¼Œå®‰è£… kubeletã€kubeadm å’Œ kubectlï¼Œå¹¶é”å®šå…¶ç‰ˆæœ¬ï¼š sudo apt-get update sudo apt-get install -y kubelet kubeadm kubectl sudo apt-mark hold kubelet kubeadm kubectl å®‰è£…keepalivedå’Œhaproxy æ‰€æœ‰MasterèŠ‚ç‚¹å®‰è£…HAProxyå’ŒKeepAlived apt install keepalived haproxy -y cp -rf /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg.bak rm -rf /etc/haproxy/haproxy.cfg vim /etc/haproxy/haproxy.cfg æ‰€æœ‰MasterèŠ‚ç‚¹çš„HAProxyé…ç½®ç›¸åŒ global maxconn 2000 ulimit-n 16384 log 127.0.0.1 local0 err stats timeout 30s defaults log global mode http option httplog timeout connect 5000 timeout client 50000 timeout server 50000 timeout http-request 15s timeout http-keep-alive 15s frontend monitor-in bind *:33305 mode http option httplog monitor-uri /monitor frontend k8s-master bind 0.0.0.0:16443 bind 127.0.0.1:16443 mode tcp option tcplog tcp-request inspect-delay 5s default_backend k8s-master backend k8s-master mode tcp option tcplog option tcp-check balance roundrobin default-server inter 10s downinter 5s rise 2 fall 2 slowstart 60s maxconn 250 maxqueue 256 weight 100 server k8s-master01 192.168.99.155:6443 check server k8s-master02 192.168.99.199:6443 check server k8s-master03 192.168.99.87:6443 check æ‰€æœ‰MasterèŠ‚ç‚¹é…ç½®KeepAlivedï¼Œé…ç½®ä¸ä¸€æ ·ï¼Œæ³¨æ„åŒºåˆ† æ³¨æ„æ¯ä¸ªèŠ‚ç‚¹çš„IPå’Œç½‘å¡ï¼ˆinterfaceå‚æ•°ï¼‰ vim /etc/keepalived/keepalived.conf ! Configuration File for keepalived global_defs { router_id LVS_DEVEL script_user root enable_script_security } vrrp_script chk_apiserver { script \"/etc/keepalived/check_apiserver.sh\" interval 5 weight -5 fall 2 rise 1 } vrrp_instance VI_1 { state MASTER interface ens18 #æŸ¥çœ‹ç½‘å…³åœ°å€ mcast_src_ip 192.168.99.155 #æœ¬æœºIP virtual_router_id 51 priority 101 advert_int 2 authentication { auth_type PASS auth_pass K8SHA_KA_AUTH } virtual_ipaddress { 192.168.99.42 # vipåœ°å€ } # track_script { # chk_apiserver # } } é…ç½®KeepAlivedå¥åº·æ£€æŸ¥æ–‡ä»¶ vim /etc/keepalived/check_apiserver.sh #!/bin/bash err=0 for k in $(seq 1 3) do check_code=$(pgrep haproxy) if [[ $check_code == \"\" ]]; then err=$(expr $err + 1) sleep 1 continue else err=0 break fi done if [[ $err != \"0\" ]]; then echo \"systemctl stop keepalived\" /usr/bin/systemctl stop keepalived exit 1 else exit 0 fi chmod +x /etc/keepalived/check_apiserver.sh systemctl restart haproxy.service systemctl restart keepalived.service apt install kubeadm -y ","date":"2022-01-07","objectID":"/k8s1/:1:0","tags":["k8s"],"title":"Kubernetes å®éªŒæ‰‹å†Œï¼ˆ1ï¼‰","uri":"/k8s1/"},{"categories":["k8s"],"content":"é›†ç¾¤åˆå§‹åŒ– Master01èŠ‚ç‚¹åˆ›å»ºnew.yamlé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š mkdir -p k8s \u0026\u0026 cd k8s vim new.yaml apiVersion: kubeadm.k8s.io/v1beta2 bootstrapTokens: - groups: - system:bootstrappers:kubeadm:default-node-token token: 7t2weq.bjbawausm0jaxury ttl: 24h0m0s usages: - signing - authentication kind: InitConfiguration localAPIEndpoint: advertiseAddress: 192.168.99.155 bindPort: 6443 nodeRegistration: criSocket: /var/run/dockershim.sock name: k8s-master01 taints: - effect: NoSchedule key: node-role.kubernetes.io/master --- apiServer: certSANs: - 192.168.99.42 timeoutForControlPlane: 4m0s apiVersion: kubeadm.k8s.io/v1beta2 certificatesDir: /etc/kubernetes/pki clusterName: kubernetes controlPlaneEndpoint: 192.168.99.42:16443 controllerManager: {} dns: type: CoreDNS etcd: local: dataDir: /var/lib/etcd imageRepository: registry.cn-hangzhou.aliyuncs.com/google_containers kind: ClusterConfiguration kubernetesVersion: v1.23.1 networking: dnsDomain: cluster.local podSubnet: 172.168.0.0/16 serviceSubnet: 10.96.0.0/12 scheduler: {} kubeadm config images pull --config /root/k8s/new.yaml master01 èŠ‚ç‚¹ç”Ÿæˆåˆå§‹åŒ–,åˆå§‹åŒ–ä»¥åä¼šåœ¨/etc/kubernetesç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„è¯ä¹¦å’Œé…ç½®æ–‡ä»¶ï¼Œä¹‹åå…¶ä»–MasterèŠ‚ç‚¹åŠ å…¥Master01å³å¯ systemctl enable --now kubelet kubeadm init --config /root/k8s/new.yaml --upload-certs åˆå§‹åŒ–æˆåŠŸä»¥åï¼Œä¼šäº§ç”ŸTokenå€¼ï¼Œç”¨äºå…¶ä»–èŠ‚ç‚¹åŠ å…¥æ—¶ä½¿ç”¨ï¼Œå› æ­¤è¦è®°å½•ä¸‹åˆå§‹åŒ–æˆåŠŸç”Ÿæˆçš„tokenå€¼ï¼ˆä»¤ç‰Œå€¼ï¼‰ï¼š ","date":"2022-01-07","objectID":"/k8s1/:2:0","tags":["k8s"],"title":"Kubernetes å®éªŒæ‰‹å†Œï¼ˆ1ï¼‰","uri":"/k8s1/"},{"categories":["æ—¥å¸¸"],"content":"RocketMQ å®‰è£…å’Œéƒ¨ç½² éƒ¨ç½²RocketMQ ","date":"2022-01-07","objectID":"/rocketmq/:0:0","tags":["RocketMQ"],"title":"RocketMQ å®‰è£…å’Œå¯åŠ¨","uri":"/rocketmq/"},{"categories":["æ—¥å¸¸"],"content":"å•æœºå®‰è£…æ„å»º å®‰è£…JDK 1.8.0 yum install java-1.8.0-openjdk* å®‰è£…Maven wget http://dlcdn.apache.org/maven/maven-3/3.8.4/binaries/apache-maven-3.8.4-bin.tar.gz tar -zxvf apache-maven-3.8.4-bin.tar.gz mv -f apache-maven-3.8.4 /usr/local/ vim /etc/profile # æœ«å°¾æ·»åŠ  export MAVEN_HOME=/usr/local/apache-maven-3.8.4 export PATH=${PATH}:${MAVEN_HOME}/bin # ä¿å­˜ source /etc/profile # æŸ¥çœ‹mavenæ˜¯å¦æ­£å¸¸ mvn -v ","date":"2022-01-07","objectID":"/rocketmq/:1:0","tags":["RocketMQ"],"title":"RocketMQ å®‰è£…å’Œå¯åŠ¨","uri":"/rocketmq/"},{"categories":["æ—¥å¸¸"],"content":"å¿«é€Ÿéƒ¨ç½² #æ„å»º DLedger git clone https://github.com/openmessaging/openmessaging-storage-dledger.git cd openmessaging-storage-dledger mvn clean install -DskipTests # æ„å»º RocketMQ git clone https://github.com/apache/rocketmq.git cd rocketmq git checkout -b store_with_dledger origin/store_with_dledger mvn -Prelease-all -DskipTests clean install -U # éƒ¨ç½² cd rocketmq/distribution/target/apache-rocketmq sh bin/dledger/fast-try.sh start # é€šè¿‡ mqadmin è¿ç»´å‘½ä»¤æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ sh bin/mqadmin clusterList -n 127.0.0.1:9876 å¯åŠ¨å•èŠ‚ç‚¹ cd distribution/target/rocketmq-4.9.3-SNAPSHOT/rocketmq-4.9.3-SNAPSHOT nohup sh bin/mqnamesrv \u0026 # æŸ¥çœ‹ Namesrv æ—¥å¿— tail -f ~/logs/rocketmqlogs/namesrv.log 2022-01-07 14:59:29 INFO main - The Name Server boot success. serializeType=JSON # å¯åŠ¨ Broker nohup sh bin/mqbroker -c conf/broker.conf -n 127.0.0.1:9876 \u0026 # æŸ¥çœ‹ Broker æ—¥å¿— tail -f ~/logs/rocketmqlogs/broker.log å¦‚æœæç¤ºæ‰¾ä¸åˆ°ä¸Šé¢çš„æ—¥å¿—æ–‡ä»¶ï¼Œåº”è¯¥æ˜¯æ²¡å¯åŠ¨æˆåŠŸã€‚ åº”è¯¥æ˜¯å†…å­˜ä¸å¤Ÿï¼ŒRocketMQé»˜è®¤ç”¨8gå†…å­˜ï¼Œå¦‚æœä½ æœåŠ¡å™¨çš„å†…å­˜æ¯”è¾ƒå°ï¼Œå¯ä»¥ä¿®æ”¹ä¸‹bin/runbroker.shè„šæœ¬ï¼Œå°† Broker JVM å†…å­˜è°ƒå°ã€‚å¦‚ï¼šJAVA_OPT=\"${JAVA_OPT} -server -Xms2g -Xmx2g -Xmn1g\"ã€‚ å†æ¬¡å¯åŠ¨brokerï¼Œå¯ä»¥æ­£å¸¸å¯åŠ¨ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒBroker æ—¥å¿—æ–‡ä»¶æ‰€åœ¨åœ°å€ä¸º~/logs/rocketmqlogs/broker.logã€‚å¦‚æœæƒ³è¦è‡ªå®šä¹‰ï¼Œå¯ä»¥é€šè¿‡conf/logback_broker.xmlé…ç½®æ–‡ä»¶æ¥è¿›è¡Œä¿®æ”¹ã€‚ ","date":"2022-01-07","objectID":"/rocketmq/:2:0","tags":["RocketMQ"],"title":"RocketMQ å®‰è£…å’Œå¯åŠ¨","uri":"/rocketmq/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£… minIO ","date":"2022-01-07","objectID":"/minio/:0:0","tags":["minIO"],"title":"å®‰è£… minIO Azure S3ç½‘å…³","uri":"/minio/"},{"categories":["æ—¥å¸¸"],"content":"é€šè¿‡docker å®‰è£… docker run -p 9000:9000 -p 41863:41863 -d --name azure-s3 \\ -e \"MINIO_ACCESS_KEY=azureå­˜å‚¨è´¦æˆ·\" \\ -e \"MINIO_SECRET_KEY=azureå­˜å‚¨å¯†ç \" \\ minio/minio gateway azure --console-address \":41863\" ","date":"2022-01-07","objectID":"/minio/:1:0","tags":["minIO"],"title":"å®‰è£… minIO Azure S3ç½‘å…³","uri":"/minio/"},{"categories":["æ—¥å¸¸"],"content":"é€šè¿‡docker-compose å®‰è£… version: \"3\" services: minio: image: \"minio/minio:RELEASE.2022-01-04T07-41-07Z.fips\" container_name: \"minio\" restart: \"always\" volumes: - \"/etc/localtime:/etc/localtime\" ports: - \"9000:9000\" - \"9001:9001\" environment: - \"MINIO_ROOT_USER=azureå­˜å‚¨è´¦æˆ·\" - \"MINIO_ROOT_PASSWORD=azureå­˜å‚¨å¯†ç \" command: - --console-address \":41863\" ","date":"2022-01-07","objectID":"/minio/:2:0","tags":["minIO"],"title":"å®‰è£… minIO Azure S3ç½‘å…³","uri":"/minio/"},{"categories":["k8s"],"content":"Keepalivedé«˜å¯ç”¨ é…ç½®æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼š/usr/share/doc/keepalived/samples VVRP è™šæ‹Ÿè·¯ç”±å†—ä½™åè®® ","date":"2022-01-05","objectID":"/keepalived/:0:0","tags":["k8s"],"title":"Keepalivedé«˜å¯ç”¨","uri":"/keepalived/"},{"categories":["k8s"],"content":"ç»„æˆ LBé›†ç¾¤ï¼šLoad Balancingï¼Œè´Ÿè½½å‡è¡¡é›†ç¾¤ï¼Œå¹³å‡åˆ†é…ç»™å¤šä¸ªèŠ‚ç‚¹ HAé›†ç¾¤ï¼šHigh Availabilityï¼Œé«˜å¯ç”¨é›†ç¾¤ï¼Œä¿è¯æœåŠ¡å¯ç”¨ HPCé›†ç¾¤ï¼šHigh Performance Computingï¼Œé«˜æ€§èƒ½é›†ç¾¤ ","date":"2022-01-05","objectID":"/keepalived/:1:0","tags":["k8s"],"title":"Keepalivedé«˜å¯ç”¨","uri":"/keepalived/"},{"categories":["k8s"],"content":"é…ç½® keepalived+LVS+nginx å„èŠ‚ç‚¹æ—¶é—´å¿…é¡»åŒæ­¥ï¼šntp, chrony å…³é—­é˜²ç«å¢™åŠSELinux ","date":"2022-01-05","objectID":"/keepalived/:2:0","tags":["k8s"],"title":"Keepalivedé«˜å¯ç”¨","uri":"/keepalived/"},{"categories":["k8s"],"content":"åŒæ­¥å„èŠ‚ç‚¹æ—¶é—´ #å®‰è£…ntpdate apt install ntpdate #æ›´æ”¹æ—¶åŒº timedatectl set-timezone 'Asia/Shanghai' #æŸ¥çœ‹æ—¶é—´ timedatectl datetime ","date":"2022-01-05","objectID":"/keepalived/:2:1","tags":["k8s"],"title":"Keepalivedé«˜å¯ç”¨","uri":"/keepalived/"},{"categories":["k8s"],"content":"å®‰è£…keepalived #å®‰è£… apt install keepalived #æ›´æ”¹æ¨¡æ¿ cd /usr/share/doc/keepalived/samples ","date":"2022-01-05","objectID":"/keepalived/:2:2","tags":["k8s"],"title":"Keepalivedé«˜å¯ç”¨","uri":"/keepalived/"},{"categories":["gitlab"],"content":"ansible å®‰è£…å’Œéƒ¨ç½² Ansibleé»˜è®¤é€šè¿‡ SSH åè®®ç®¡ç†æœºå™¨. ","date":"2021-12-30","objectID":"/ansible/:0:0","tags":["ansible"],"title":"ansible å®‰è£…å’Œéƒ¨ç½²","uri":"/ansible/"},{"categories":["gitlab"],"content":"å®‰è£…ansible ä¸‹è½½å®‰è£… # ubuntu å®‰è£… apt-get install software-properties-common apt-add-repository ppa:ansible/ansible apt-get update apt-get install ansible # centos å®‰è£… yum install ansible æ£€æŸ¥æ–‡ä»¶ #æ£€æŸ¥ ansible --version ","date":"2021-12-30","objectID":"/ansible/:1:0","tags":["ansible"],"title":"ansible å®‰è£…å’Œéƒ¨ç½²","uri":"/ansible/"},{"categories":["gitlab"],"content":"ansible é…ç½® æ·»åŠ ä¸»æœº vim /etc/ansible/hosts #æ·»åŠ ä½ éœ€è¦æ·»åŠ çš„è¢«æ§ä¸»æœºåœ°å€å’ŒIP é…ç½®SSH keyæˆæƒè®¿é—® # æ§åˆ¶ä¸»æœºç”Ÿæˆssh å¯†é’¥å¯¹ï¼ˆä¸€è·¯å›è½¦ï¼‰ ssh-keygen -t rsa # å¤åˆ¶å…¬é’¥IPåˆ°è¢«æ§ä¸»æœº ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.0.2 ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.0.3 ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.0.4 # ssh-copy-idå‘½ä»¤ä¼šè‡ªåŠ¨å°†id_rsa.pubæ–‡ä»¶çš„å†…å®¹è¿½åŠ åˆ°è¿œç¨‹ä¸»æœºrootç”¨æˆ·ä¸‹.ssh/authorized_keysæ–‡ä»¶ä¸­ã€‚ æ›´æ”¹ansible é…ç½® vim /etc/ansible/ansible.cfg #ç¦ç”¨æ¯æ¬¡æ‰§è¡Œansbileå‘½ä»¤æ£€æŸ¥ssh key host host_key_checking = False # å¼€å¯æ—¥å¿—è®°å½• log_path = /var/log/ansible.log æµ‹è¯• # æ§åˆ¶ä¸»æœº ansible all -m ping ","date":"2021-12-30","objectID":"/ansible/:2:0","tags":["ansible"],"title":"ansible å®‰è£…å’Œéƒ¨ç½²","uri":"/ansible/"},{"categories":["gitlab"],"content":"Inventory é…ç½®ç»„åˆ« vim /etc/ansible/hosts # æ·»åŠ ç»„åˆ« [pve] 192.168.0.2 192.168.0.3 192.168.0.4 #æµ‹è¯• ansible pve -m ping Inventory å‚æ•° æŠŠä½ çš„ inventory æ–‡ä»¶ å’Œ å˜é‡ æ”¾å…¥ git repo ä¸­,ä»¥ä¾¿è·Ÿè¸ªä»–ä»¬çš„æ›´æ–°,è¿™æ˜¯ä¸€ç§éå¸¸æ¨èçš„æ–¹å¼. å‚æ•° ä½œç”¨ ansible_ssh_host å°†è¦è¿æ¥çš„è¿œç¨‹ä¸»æœºå.ä¸ä½ æƒ³è¦è®¾å®šçš„ä¸»æœºçš„åˆ«åä¸åŒçš„è¯,å¯é€šè¿‡æ­¤å˜é‡è®¾ç½®. ansible_ssh_port sshç«¯å£å·.å¦‚æœä¸æ˜¯é»˜è®¤çš„ç«¯å£å·,é€šè¿‡æ­¤å˜é‡è®¾ç½®. ansible_ssh_user é»˜è®¤çš„ ssh ç”¨æˆ·å ansible_ssh_pass ssh å¯†ç (è¿™ç§æ–¹å¼å¹¶ä¸å®‰å…¨,æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½¿ç”¨ â€“ask-pass æˆ– SSH å¯†é’¥) ansible_sudo_pass sudo å¯†ç (è¿™ç§æ–¹å¼å¹¶ä¸å®‰å…¨,æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½¿ç”¨ â€“ask-sudo-pass) ansible_sudo_exe (new in version 1.8) sudo å‘½ä»¤è·¯å¾„(é€‚ç”¨äº1.8åŠä»¥ä¸Šç‰ˆæœ¬) ansible_connection ä¸ä¸»æœºçš„è¿æ¥ç±»å‹.æ¯”å¦‚:local, ssh æˆ–è€… paramiko. Ansible 1.2 ä»¥å‰é»˜è®¤ä½¿ç”¨ paramiko.1.2 ä»¥åé»˜è®¤ä½¿ç”¨ â€˜smartâ€™,â€˜smartâ€™ æ–¹å¼ä¼šæ ¹æ®æ˜¯å¦æ”¯æŒ ControlPersist, æ¥åˆ¤æ–­â€™sshâ€™ æ–¹å¼æ˜¯å¦å¯è¡Œ. ansible_ssh_private_key_file ssh ä½¿ç”¨çš„ç§é’¥æ–‡ä»¶.é€‚ç”¨äºæœ‰å¤šä¸ªå¯†é’¥,è€Œä½ ä¸æƒ³ä½¿ç”¨ SSH ä»£ç†çš„æƒ…å†µ. ansible_shell_type ç›®æ ‡ç³»ç»Ÿçš„shellç±»å‹.é»˜è®¤æƒ…å†µä¸‹,å‘½ä»¤çš„æ‰§è¡Œä½¿ç”¨ â€˜shâ€™ è¯­æ³•,å¯è®¾ç½®ä¸º â€˜cshâ€™ æˆ– â€˜fishâ€™. ansible_python_interpreter ç›®æ ‡ä¸»æœºçš„ python è·¯å¾„.é€‚ç”¨äºçš„æƒ…å†µ: ç³»ç»Ÿä¸­æœ‰å¤šä¸ª Python, æˆ–è€…å‘½ä»¤è·¯å¾„ä¸æ˜¯\"/usr/bin/python\",æ¯”å¦‚ *BSD, æˆ–è€… /usr/bin/python ","date":"2021-12-30","objectID":"/ansible/:3:0","tags":["ansible"],"title":"ansible å®‰è£…å’Œéƒ¨ç½²","uri":"/ansible/"},{"categories":["gitlab"],"content":"Roles Rolesæ˜¯åŸºäºå·²çŸ¥æ–‡ä»¶ç»“æ„è‡ªåŠ¨åŠ è½½æŸäº›å˜é‡æ–‡ä»¶ï¼Œä»»åŠ¡å’Œå¤„ç†ç¨‹åºçš„æ–¹æ³•ã€‚æŒ‰è§’è‰²å¯¹å†…å®¹è¿›è¡Œåˆ†ç»„ï¼Œé€‚åˆæ„å»ºå¤æ‚çš„éƒ¨ç½²ç¯å¢ƒ Roles ç›®å½•ç»“æ„ï¼š site.yml webservers.yml fooservers.yml roles/ common/ tasks/ handlers/ files/ templates/ vars/ defaults/ meta/ webservers/ tasks/ defaults/ meta/ tasks åŒ…å«è§’è‰²è¦æ‰§è¡Œçš„ä»»åŠ¡çš„ä¸»è¦åˆ—è¡¨ handlers åŒ…å«å¤„ç†ç¨‹åºï¼Œæ­¤è§’è‰²ç”šè‡³åœ¨æ­¤è§’è‰²ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨è¿™äº›å¤„ç†ç¨‹åº defaults è§’è‰²çš„é»˜è®¤å˜é‡ vars è§’è‰²çš„å…¶ä»–å˜é‡ files åŒ…å«å¯ä»¥é€šè¿‡æ­¤è§’è‰²éƒ¨ç½²çš„æ–‡ä»¶ templates åŒ…å«å¯ä»¥é€šè¿‡æ­¤è§’è‰²éƒ¨ç½²çš„æ¨¡ç‰ˆ meta ä¸ºæ­¤è§’è‰²å®šä¹‰ä¸€äº›å…ƒæ•°æ® ","date":"2021-12-30","objectID":"/ansible/:4:0","tags":["ansible"],"title":"ansible å®‰è£…å’Œéƒ¨ç½²","uri":"/ansible/"},{"categories":["åŸºç¡€"],"content":"yaml è¯­æ³• æˆ‘ä»¬ä½¿ç”¨ YAML æ˜¯å› ä¸ºå®ƒåƒ XML æˆ– JSON æ˜¯ä¸€ç§åˆ©äºäººä»¬è¯»å†™çš„æ•°æ®æ ¼å¼. æ­¤å¤–åœ¨å¤§å¤šæ•°å˜æˆè¯­è¨€ä¸­æœ‰ä½¿ç”¨ YAML çš„åº“.YAML è¯­æ³•çš„åŸºæœ¬æ¦‚è¿°, å®ƒè¢«ç”¨æ¥æè¿°ä¸€ä¸ª playbooks(æˆ‘ä»¬çš„é…ç½®ç®¡ç†è¯­è¨€). åŸºæœ¬çš„ YAML å¯¹äº Ansible, æ¯ä¸€ä¸ª YAML æ–‡ä»¶éƒ½æ˜¯ä»ä¸€ä¸ªåˆ—è¡¨å¼€å§‹. åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹, é€šå¸¸å®ƒä»¬è¢«ç§°ä¸ºä¸€ä¸ª â€œå“ˆå¸Œâ€ æˆ– â€œå­—å…¸â€. æ‰€ä»¥, æˆ‘ä»¬éœ€è¦çŸ¥é“å¦‚ä½•åœ¨ YAML ä¸­ç¼–å†™åˆ—è¡¨å’Œå­—å…¸. YAML è¿˜æœ‰ä¸€ä¸ªå°çš„æ€ªç™–. æ‰€æœ‰çš„ YAML æ–‡ä»¶(æ— è®ºå’Œ Ansible æœ‰æ²¡æœ‰å…³ç³»)å¼€å§‹è¡Œéƒ½åº”è¯¥æ˜¯ â€”. è¿™æ˜¯ YAML æ ¼å¼çš„ä¸€éƒ¨åˆ†, è¡¨æ˜ä¸€ä¸ªæ–‡ä»¶çš„å¼€å§‹. --- # ä¸€ä¸ªç¾å‘³æ°´æœçš„åˆ—è¡¨ - Apple - Orange - Strawberry - Mango ","date":"2021-12-30","objectID":"/yaml/:0:0","tags":["è¿ç»´"],"title":"yaml è¯­æ³•","uri":"/yaml/"},{"categories":["æ—¥å¸¸"],"content":"logrotate æ—¥å¿—æ»šåŠ¨çš„ä½¿ç”¨ logrotate æ—¥å¿—æ»šåŠ¨åˆ‡å‰²å·¥å…·ï¼Œæ˜¯linuxé»˜è®¤å®‰è£…çš„å·¥å…·ï¼Œé…ç½®æ–‡ä»¶ä½ç½®ï¼š /etc/logrotate.conf /etc/logrotate.d/ ","date":"2021-12-29","objectID":"/logrotate/:0:0","tags":["daliy"],"title":"logrotate æ—¥å¿—æ»šåŠ¨çš„ä½¿ç”¨","uri":"/logrotate/"},{"categories":["æ—¥å¸¸"],"content":"å‚æ•° ä»¥nginx é…ç½®ä¸ºä¾‹ /opt/log/nginx/*.log { daily missingok rotate 14 errors \"nb@nbtyfood.com\" compress delaycompress notifempty create 0640 www-data adm sharedscripts prerotate if [ -d /etc/logrotate.d/httpd-prerotate ]; then \\ run-parts /etc/logrotate.d/httpd-prerotate; \\ fi \\ endscript postrotate invoke-rc.d nginx rotate \u003e/dev/null 2\u003e\u00261 endscript } å‚æ•° ä½œç”¨ compress å‹ç¼©æ—¥å¿—æ–‡ä»¶çš„æ‰€æœ‰éå½“å‰ç‰ˆæœ¬ daily,weekly,monthly æŒ‰æŒ‡å®šè®¡åˆ’è½®æ¢æ—¥å¿—æ–‡ä»¶ delaycompress å‹ç¼©æ‰€æœ‰ç‰ˆæœ¬ï¼Œé™¤äº†å½“å‰å’Œä¸‹ä¸€ä¸ªæœ€è¿‘çš„ endscript æ ‡è®° prerotate æˆ– postrotate è„šæœ¬çš„ç»“æŸ errors â€œemailidâ€ ç»™æŒ‡å®šé‚®ç®±å‘é€é”™è¯¯é€šçŸ¥ missingok å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸¢å¤±ï¼Œä¸è¦æ˜¾ç¤ºé”™è¯¯ notifempty å¦‚æœæ—¥å¿—æ–‡ä»¶ä¸ºç©ºï¼Œåˆ™ä¸è½®æ¢æ—¥å¿—æ–‡ä»¶ olddir â€œdirâ€ æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„æ—§ç‰ˆæœ¬æ”¾åœ¨ â€œdirâ€ ä¸­ postrotate å¼•å…¥ä¸€ä¸ªåœ¨æ—¥å¿—è¢«è½®æ¢åæ‰§è¡Œçš„è„šæœ¬ prerotate å¼•å…¥ä¸€ä¸ªåœ¨æ—¥å¿—è¢«è½®æ¢å‰æ‰§è¡Œçš„è„šæœ¬ rotate â€™n' åœ¨è½®æ¢æ–¹æ¡ˆä¸­åŒ…å«æ—¥å¿—çš„ n ä¸ªç‰ˆæœ¬ sharedscripts å¯¹äºæ•´ä¸ªæ—¥å¿—ç»„åªè¿è¡Œä¸€æ¬¡è„šæœ¬ size=â€˜logsizeâ€™ åœ¨æ—¥å¿—å¤§å°å¤§äº logsizeï¼ˆä¾‹å¦‚ 100Kï¼Œ4Mï¼‰æ—¶è½®æ¢ ","date":"2021-12-29","objectID":"/logrotate/:1:0","tags":["daliy"],"title":"logrotate æ—¥å¿—æ»šåŠ¨çš„ä½¿ç”¨","uri":"/logrotate/"},{"categories":["docker"],"content":"å®‰è£…docker é€šè¿‡docker è„šæœ¬å®‰è£… curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun curl -sSL https://get.daocloud.io/docker | sh ","date":"2021-12-28","objectID":"/docker/:0:0","tags":["docker"],"title":"docker å‘½ä»¤","uri":"/docker/"},{"categories":["docker"],"content":"docker-compose å®‰è£… #ä¸‹è½½å®‰è£… sudo curl -L \"https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose #å¯æ‰§è¡Œæƒé™ sudo chmod +x /usr/local/bin/docker-compose #åˆ›å»ºè½¯é“¾ï¼š sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose #æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ docker-compose --version ","date":"2021-12-28","objectID":"/docker/:1:0","tags":["docker"],"title":"docker å‘½ä»¤","uri":"/docker/"},{"categories":["docker"],"content":"dockerå‘½ä»¤ å¸¸ç”¨dockerå‘½ä»¤ #æŸ¥çœ‹å®¹å™¨ docker ps #æŸ¥çœ‹é•œåƒ docker images #åœæ­¢å½“å‰æ‰€æœ‰å®¹å™¨ docker stop $(docker ps -aq) #åˆ é™¤å½“å‰åœæ­¢çš„æ‰€æœ‰å®¹å™¨ docker rm $(docker ps -aq) #åˆ é™¤é•œåƒ docker rmi nginx ","date":"2021-12-28","objectID":"/docker/:2:0","tags":["docker"],"title":"docker å‘½ä»¤","uri":"/docker/"},{"categories":["gitlab"],"content":"gitlabä¸githubåŒæ­¥é¡¹ç›® æœ¬åœ°åŒæ­¥é¡¹ç›® git clone åˆ›å»ºä¸€ä¸ªåŒåçš„é¡¹ç›®,å‘½ä»¤è¡Œç»ˆç«¯ä¸­æ·»åŠ remoteåœ°å€ git remote add githubOrigin git@github.com:sjtfreaks/blog.git é¡¹ç›®åŒæ­¥åˆ°Githubä¸Š git push -u githubOrigin main åˆ†åˆ«åŒæ­¥githubä¸gitlabå³å¯ git push -u githubOrigin main git push -u origin main ","date":"2021-12-27","objectID":"/gitrsync/:0:0","tags":["gitlab"],"title":"gitlabä¸githubåŒæ­¥é¡¹ç›®","uri":"/gitrsync/"},{"categories":["åŸºç¡€"],"content":"iptables åŸºç¡€çŸ¥è¯† å†…æ ¸åŒ…è¿‡æ»¤ä¸NATç®¡ç†å·¥å…·.æ˜¯linuxç³»ç»Ÿä¸­åœ¨ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œçš„è¿æ¥é…ç½®å†…æ ¸é˜²ç«å¢™çš„å·¥å…·ã€‚å®ƒå¯ä»¥è®¾ç½®ï¼Œç»´æŠ¤å’Œæ£€æŸ¥linuxå†…æ ¸ä¸­çš„ipv4åŒ…è¿‡æ»¤è§„åˆ™å’Œç®¡ç†ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ã€‚ ipatbleså‘½ä»¤ä»…æ”¯æŒipv4ï¼Œå¦‚æœä½¿ç”¨çš„IPåè®®æ˜¯ipv6åˆ™éœ€è¦ä½¿ç”¨ä¸“é—¨çš„ç®¡ç†å·¥å…·ip6tablesã€‚ ","date":"2021-12-27","objectID":"/iptable/:0:0","tags":["è¿ç»´"],"title":"iptables åŸºç¡€çŸ¥è¯†","uri":"/iptable/"},{"categories":["åŸºç¡€"],"content":"å¸¸ç”¨å‚æ•° å‚æ•° ä½œç”¨ -t\u003cè¡¨\u003e æŒ‡å®šè¦æ“çºµçš„è¡¨ -A å‘è§„åˆ™é“¾ä¸­è¿½åŠ æ¡ç›® -D ä»è§„åˆ™é“¾ä¸­åˆ é™¤æ¡ç›® -I å‘è§„åˆ™é“¾ä¸­æ’å…¥æ¡ç›® -R æ›¿æ¢è§„åˆ™é“¾ä¸­çš„ç›¸åº”æ¡ç›® -L æ˜¾ç¤ºè§„åˆ™é“¾ä¸­çš„å·²æœ‰æ¡ç›® -F æ¸…é™¤è§„åˆ™é“¾ä¸­çš„ç°æœ‰æ¡ç›®ã€‚ä¸æ”¹å˜è§„åˆ™é“¾çš„é»˜è®¤ç›®æ ‡ç­–ç•¥ -Z æ¸…ç©ºè§„åˆ™é“¾ä¸­çš„æ•°æ®åŒ…è®¡æ•°å™¨å’Œå­—èŠ‚è®¡æ•°å™¨ -N åˆ›å»ºæ–°çš„ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™é“¾ -P å®šä¹‰è§„åˆ™é“¾ä¸­çš„é»˜è®¤ç›®æ ‡ï¼ˆç­–ç•¥ï¼‰ -h æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ -p\u003cåè®®\u003e æŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…çš„åè®®ç±»å‹ -s\u003cæºåœ°å€\u003e æŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…çš„æºIPåœ°å€ -j\u003cç›®æ ‡\u003e æŒ‡å®šè¦è·³è½¬çš„ç›®æ ‡ -i\u003cç½‘ç»œæ¥å£\u003e æŒ‡å®šæ•°æ®åŒ…è¿›å…¥æœ¬æœºçš„ç½‘ç»œæ¥å£ -o\u003cç½‘ç»œæ¥å£\u003e æŒ‡å®šæ•°æ®åŒ…ç¦»å¼€æœ¬æœºåšä½¿ç”¨çš„ç½‘ç»œæ¥å£ -c\u003cåŒ…è®¡æ•°\u003e åœ¨æ‰§è¡Œæ’å…¥ã€è¿½åŠ å’Œæ›¿æ¢æ“ä½œæ—¶åˆå§‹åŒ–åŒ…è®¡æ•°å™¨å’Œå­—èŠ‚è®¡æ•°å™¨ ","date":"2021-12-27","objectID":"/iptable/:1:0","tags":["è¿ç»´"],"title":"iptables åŸºç¡€çŸ¥è¯†","uri":"/iptable/"},{"categories":["åŸºç¡€"],"content":"å‚è€ƒå®ä¾‹ æ˜¾ç¤ºå†…æ ¸å½“å‰çš„filterè¡¨ï¼š iptables -L æ˜¾ç¤ºå†…æ ¸å½“å‰çš„natè¡¨ï¼š iptables -L -t nat ç¦æ­¢æœ¬æœºå¯¹192.168.20.20åœ°å€çš„è®¿é—®ï¼š iptables -t filter -A OUTPUT -d 192.168.20.20 -j DROP æ˜¾ç¤ºfilterè¡¨çš„OUTPUTé“¾ï¼š iptables -L OUTPUT -t filter ","date":"2021-12-27","objectID":"/iptable/:2:0","tags":["è¿ç»´"],"title":"iptables åŸºç¡€çŸ¥è¯†","uri":"/iptable/"},{"categories":["k8s"],"content":"k3s å‡çº§ç‰ˆæœ¬ ","date":"2021-12-27","objectID":"/k3supgrade/:0:0","tags":["k3s"],"title":"k3s å‡çº§ç‰ˆæœ¬","uri":"/k3supgrade/"},{"categories":["k8s"],"content":"åœæ­¢æ‰€æœ‰çš„ K3s å®¹å™¨ï¼ˆæ…ç”¨ï¼‰ ä» server èŠ‚ç‚¹è¿è¡Œ killall è„šæœ¬ /usr/local/bin/k3s-killall.sh ","date":"2021-12-27","objectID":"/k3supgrade/:1:0","tags":["k3s"],"title":"k3s å‡çº§ç‰ˆæœ¬","uri":"/k3supgrade/"},{"categories":["k8s"],"content":"å¼€å§‹å‡çº§ ä½¿ç”¨å®‰è£…è„šæœ¬å‡çº§ K3s curl -sfL https://get.k3s.io | sh - #å›½å†…å¯ç”¨ curl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh - é‡å¯k3s sudo systemctl restart k3s ","date":"2021-12-27","objectID":"/k3supgrade/:2:0","tags":["k3s"],"title":"k3s å‡çº§ç‰ˆæœ¬","uri":"/k3supgrade/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…é…ç½® Terraform ","date":"2021-12-27","objectID":"/terraform/:0:0","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£… macOS è‹¹æœç³»ç»Ÿå®‰è£… #å®‰è£… brew tap hashicorp/tap brew install hashicorp/tap/terraform # æ›´æ–° brew update brew upgrade hashicorp/tap/terraform #éªŒè¯å®‰è£… terraform -help windows ç³»ç»Ÿå®‰è£… #å®‰è£… choco install terraform #ç›´æ¥åˆ°è¿™ä¸ªurlé‡Œä¸‹è½½64ä½ç³»ç»Ÿ https://www.terraform.io/downloads #éªŒè¯å®‰è£… terraform -help Linux å®‰è£… curl -fsSL https://apt.releases.hashicorp.com/gpg | sudo apt-key add - sudo apt-add-repository \"deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" sudo apt-get update \u0026\u0026 sudo apt-get install terraform #éªŒè¯å®‰è£… terraform -help wget -O- https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo | sudo tee /etc/yum.repos.d/hashicorp.repo sudo yum install terraform -y ","date":"2021-12-27","objectID":"/terraform/:1:0","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["æ—¥å¸¸"],"content":"terrafrom æ§åˆ¶proxmoxè™šæ‹Ÿæœº æ¥æºï¼šhttps://github.com/Telmate/terraform-provider-proxmox ","date":"2021-12-27","objectID":"/terraform/:2:0","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["æ—¥å¸¸"],"content":"é¦–å…ˆä½ è¦æœ‰ä¸€å°pveä¸»æœº å®‰è£…è¿‡ç¨‹æœ¬ç¯‡æ–‡ç« å°±ä¸æƒ³äº†ï¼Œä¸»è¦æ˜¯è¦å†™ä¸€ä¸‹å…³äºä»–çš„é…ç½® https://pve.proxmox.com/pve-docs/ ä¸‹è½½ wget https://github.com/Telmate/terraform-provider-proxmox/releases/download/v2.9.3/terraform-provider-proxmox_2.9.3_linux_amd64.zip unzip terraform-provider-proxmox_2.9.3_linux_amd64.zip ","date":"2021-12-27","objectID":"/terraform/:2:1","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["æ—¥å¸¸"],"content":"ç¼–å†™terrafromç¨‹åº è™šæ‹Ÿæœºmain.tf terraform { required_version = \"\u003e= 0.14\" required_providers { proxmox = { source = \"telmate/proxmox\" } } } provider \"proxmox\" { # é…ç½®é€‰é¡¹ pm_tls_insecure = true pm_api_url = \"https://localhost:8006/api2/json\" pm_user = \"root@pam\" pm_password = \"passwd\" pm_otp = \"\" } # åˆ›å»ºVM resource \"proxmox_vm_qemu\" \"cloudinit-test\" { name = \"terraform-test-vm\" desc = \"A test for using terraform and cloudinit\" #èŠ‚ç‚¹åç§°å¿…é¡»ä¸é›†ç¾¤å†…çš„åç§°ç›¸åŒ #è¿™å¯èƒ½ä¸åŒ…æ‹¬ FQDN target_node = \"pve\" #æ–°è™šæ‹Ÿæœºçš„ç›®æ ‡èµ„æºæ±  pool = \"pool0\" #ä»ä¸­å…‹éš†è¿™ä¸ªè™šæ‹Ÿæœºçš„æ¨¡æ¿åç§° clone = \"node0\" #ä¸ºè¿™ä¸ªè™šæ‹Ÿæœºæ¿€æ´» QEMU ä»£ç† agent = 1 os_type = \"cloud-init\" cores = 2 sockets = 1 vcpus = 0 cpu = \"host\" memory = 2048 scsihw = \"lsi\" #è®¾ç½®ç£ç›˜ disk { size = 32 type = \"virtio\" storage = \"local-lvm\" storage_type = \"lvmthin\" iothread = 1 ssd = 1 discard = \"on\" } #è®¾ç½®ç½‘ç»œæ¥å£å¹¶åˆ†é…ä¸€ä¸ª vlan æ ‡ç­¾ï¼š256 network { model = \"virtio\" bridge = \"vmbr0\" tag = 256 } } è¿è¡Œterrafrom # åˆå§‹åŒ– terraform init # æŸ¥çœ‹äº§ç”Ÿçš„å˜æ›´ terraform plan # è¿è¡Œ terraform apply ","date":"2021-12-27","objectID":"/terraform/:2:2","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["æ—¥å¸¸"],"content":"é…ç½® é…ç½®è¿™ä¸ªterraformæˆ‘ä»¬è¿™ä¸ªéœ€è¦æŒç»­æ›´æ–°ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆé…ç½®Azureå§ ","date":"2021-12-27","objectID":"/terraform/:3:0","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["æ—¥å¸¸"],"content":"Azure é…ç½® å®‰è£…azurecli # linux curl -L https://aka.ms/InstallAzureCli | bash apt install azure-cli # macOS brew update \u0026\u0026 brew install azure-cli ç™»å½•azure # ä¸­å›½åŒºazure az cloud set --name AzureCloud az login -u \u003cè´¦æˆ·\u003e -p \u003cå¯†ç \u003e #æµ·å¤–azure az cloud set --name AzureChinaCloud az login -u \u003cè´¦æˆ·\u003e -p \u003cå¯†ç \u003e åˆ›å»ºterrafromä»£ç  åˆ›å»ºmain.tf # æ­£åœ¨ä½¿ç”¨çš„ Azure æä¾›ç¨‹åºæºå’Œç‰ˆæœ¬ terraform { required_version = \"\u003e=0.12\" required_providers { azurerm = { source = \"hashicorp/azurerm\" version = \"~\u003e2.0\" } } } # é…ç½® Microsoft Azure æä¾›ç¨‹åº provider \"azurerm\" { features {} } # èµ„æºç»„å‰ç¼€ resource \"random_pet\" \"rg-name\" { prefix = var.resource_group_name_prefix } # åˆ›å»ºèµ„æºç»„ resource \"azurerm_resource_group\" \"rg\" { name = random_pet.rg-name.id location = var.resource_group_location } åˆ›å»ºvariable.tf variable \"resource_group_name_prefix\" { default = \"rg\" description = \"Prefix of the resource group name that's combined with a random ID so name is unique in your Azure subscription.\" } variable \"resource_group_location\" { default = \"eastus\" description = \"Location of the resource group.\" } ","date":"2021-12-27","objectID":"/terraform/:3:1","tags":["Terraform"],"title":"å®‰è£…é…ç½® Terraform","uri":"/terraform/"},{"categories":["ç¾é£Ÿ"],"content":"å­œç„¶æé²è‡-ç´ é£Ÿ ","date":"2021-12-26","objectID":"/eryngii/:0:0","tags":["ç¾é£Ÿ"],"title":"å­œç„¶æé²è‡-ç´ é£Ÿ","uri":"/eryngii/"},{"categories":["ç¾é£Ÿ"],"content":"å‡†å¤‡é£Ÿæ æé²è‡ è’œ ç³– ç™½èŠéº» å­œç„¶ç²‰ è€æŠ½ ç”ŸæŠ½ èšæ²¹ ","date":"2021-12-26","objectID":"/eryngii/:1:0","tags":["ç¾é£Ÿ"],"title":"å­œç„¶æé²è‡-ç´ é£Ÿ","uri":"/eryngii/"},{"categories":["ç¾é£Ÿ"],"content":"æ­¥éª¤ æé²è‡åˆ‡ç‰‡ è’œåˆ‡æˆæœ« çƒ­æ²¹ä¸‹è’œçˆ†é¦™ æé²è‡ä¸‹é”…æŠŠæ°´åˆ†ç‚’å¹² åŠ ä¸€å‹ºç”ŸæŠ½ã€åŠå‹ºè€æŠ½ï¼ŒåŠå‹ºèšæ²¹ï¼Œä¸€å‹ºå­œç„¶ç²‰ï¼Œä¸€å‹ºç™½èŠéº»ï¼ŒåŠå‹ºç³–ç‚’åŒ€ ","date":"2021-12-26","objectID":"/eryngii/:2:0","tags":["ç¾é£Ÿ"],"title":"å­œç„¶æé²è‡-ç´ é£Ÿ","uri":"/eryngii/"},{"categories":["æ•°æ®åº“"],"content":"mysqlæ•°æ®åº“å¤‡ä»½è¿ç§» ä½¿ç”¨mydumperåšæ•°æ®å¤‡ä»½è¿ç§» ","date":"2021-12-24","objectID":"/mysqldump/:0:0","tags":["mysql"],"title":"mysqlæ•°æ®åº“å¤‡ä»½è¿ç§»","uri":"/mysqldump/"},{"categories":["æ•°æ®åº“"],"content":"å¤‡ä»½æ•°æ®åº“ å®‰è£… # å®‰è£… centos yum install https://github.com/mydumper/mydumper/releases/download/v0.11.5/mydumper-0.11.5-1.el7.x86_64.rpm yum install https://github.com/mydumper/mydumper/releases/download/v0.11.5/mydumper-0.11.5-1.el8.x86_64.rpm # å®‰è£… ubuntu apt-get install libatomic1 wget https://github.com/mydumper/mydumper/releases/download/v0.11.5/mydumper_0.11.5-1.$(lsb_release -cs)_amd64.deb dpkg -i mydumper_0.11.5-1.$(lsb_release -cs)_amd64.deb å¤‡ä»½ nohup mydumper -h 'å¤‡ä»½æ•°æ®åº“' \\ -u 'ç”¨æˆ·å' \\ -p 'å¯†ç ' \\ --threads=16 \\ -B å¤‡ä»½æ•°æ®åº“ \\ -v 3 \\ --outputdir=./backup --rows=100000 \\ -L mydumper-logs.log \u0026 ","date":"2021-12-24","objectID":"/mysqldump/:1:0","tags":["mysql"],"title":"mysqlæ•°æ®åº“å¤‡ä»½è¿ç§»","uri":"/mysqldump/"},{"categories":["æ•°æ®åº“"],"content":"è¿ç§»æ•°æ®åº“ è¿˜åŸæ•°æ® nohup myloader -h 'è¿ç§»æ•°æ®åº“' \\ -u 'ç”¨æˆ·å' \\ -p 'å¯†ç ' \\ --directory=./backup \\ -s æ¥æºæ•°æ®åº“ \\ -B è¿˜åŸæ•°æ®åº“ \\ -t 16 \\ -v 3 \\ -e 2\u003emyloader-logs.log \u0026 ","date":"2021-12-24","objectID":"/mysqldump/:2:0","tags":["mysql"],"title":"mysqlæ•°æ®åº“å¤‡ä»½è¿ç§»","uri":"/mysqldump/"},{"categories":["æ•°æ®åº“"],"content":"mydumper/myloader å‚æ•° mydumper Usage: mydumper [OPTION...] multi-threaded MySQL dumping Help Options: -?, --help Show help options Application Options: -B, --database éœ€è¦å¤‡ä»½çš„æ•°æ®åº“ï¼Œä¸€ä¸ªæ•°æ®åº“ä¸€æ¡å‘½ä»¤å¤‡ä»½ï¼Œè¦ä¸å°±æ˜¯å¤‡ä»½æ‰€æœ‰æ•°æ®åº“ï¼ŒåŒ…æ‹¬mysqlã€‚ -T, --tables-list éœ€è¦å¤‡ä»½çš„è¡¨ï¼Œç”¨é€—å·åˆ†éš”ã€‚ -o, --outputdir å¤‡ä»½æ–‡ä»¶ç›®å½• -s, --statement-size ç”Ÿæˆæ’å…¥è¯­å¥çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤1000000ï¼Œè¿™ä¸ªå‚æ•°ä¸èƒ½å¤ªå°ï¼Œä¸ç„¶ä¼šæŠ¥ Row bigger than statement_size for tools.t_serverinfo -r, --rows è¯•å›¾ç”¨è¡Œå—æ¥åˆ†å‰²è¡¨ï¼Œè¯¥å‚æ•°å…³é—­--chunk-filesize -F, --chunk-filesize è¡Œå—åˆ†å‰²è¡¨çš„æ–‡ä»¶å¤§å°ï¼Œå•ä½æ˜¯MB -c, --compress å‹ç¼©è¾“å‡ºæ–‡ä»¶ -e, --build-empty-files å³ä½¿è¡¨æ²¡æœ‰æ•°æ®ï¼Œä¹Ÿäº§ç”Ÿä¸€ä¸ªç©ºæ–‡ä»¶ -x, --regex æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå¦‚'db.table' -i, --ignore-engines å¿½ç•¥çš„å­˜å‚¨å¼•æ“ï¼Œç”¨é€—å·åˆ†éš” -m, --no-schemas ä¸å¯¼å‡ºè¡¨ç»“æ„ -d, --no-data ä¸å¯¼å‡ºè¡¨æ•°æ® -G, --triggers å¯¼å‡ºè§¦å‘å™¨ -E, --events å¯¼å‡ºäº‹ä»¶ -R, --routines å¯¼å‡ºå­˜å‚¨è¿‡ç¨‹ -k, --no-locks ä¸æ‰§è¡Œå…±äº«è¯»é” è­¦å‘Šï¼šè¿™å°†å¯¼è‡´ä¸ä¸€è‡´çš„å¤‡ä»½ --less-locking å‡åˆ°æœ€å°çš„é”åœ¨innodbè¡¨ä¸Š. -l, --long-query-guard è®¾ç½®é•¿æŸ¥è¯¢æ—¶é—´,é»˜è®¤60ç§’ï¼Œè¶…è¿‡è¯¥æ—¶é—´åˆ™ä¼šæŠ¥é”™ï¼šThere are queries in PROCESSLIST running longer than 60s, aborting dump -K, --kill-long-queries killæ‰é•¿æ—¶é—´æ‰§è¡Œçš„æŸ¥è¯¢ï¼Œå¤‡ä»½æŠ¥é”™ï¼šLock wait timeout exceeded; try restarting transaction -D, --daemon å¯ç”¨å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ -I, --snapshot-interval dumpå¿«ç…§é—´éš”æ—¶é—´ï¼Œé»˜è®¤60sï¼Œéœ€è¦åœ¨daemonæ¨¡å¼ä¸‹ -L, --logfile ä½¿ç”¨æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤æ ‡å‡†è¾“å‡ºåˆ°ç»ˆç«¯ --tz-utc å¤‡ä»½çš„æ—¶å€™å…è®¸å¤‡ä»½Timestampï¼Œè¿™æ ·ä¼šå¯¼è‡´ä¸åŒæ—¶åŒºçš„å¤‡ä»½è¿˜åŸä¼šå‡ºé—®é¢˜ï¼Œé»˜è®¤å…³é—­ï¼Œå‚æ•°ï¼š--skip-tz-utc to disable. --skip-tz-utc --use-savepoints ä½¿ç”¨savepointsæ¥å‡å°‘é‡‡é›†metadataæ‰€é€ æˆçš„é”æ—¶é—´ï¼Œéœ€è¦SUPERæƒé™ --success-on-1146 Not increment error count and Warning instead of Critical in case of table doesn't exist --lock-all-tables é”å…¨è¡¨ï¼Œä»£æ›¿FLUSH TABLE WITH READ LOCK -U, --updated-since Use Update_time to dump only tables updated in the last U days --trx-consistency-only Transactional consistency only -h, --host The host to connect to -u, --user Username with privileges to run the dump -p, --password User password -P, --port TCP/IP port to connect to -S, --socket UNIX domain socket file to use for connection -t, --threads å¤‡ä»½æ‰§è¡Œçš„çº¿ç¨‹æ•°,é»˜è®¤4ä¸ªçº¿ç¨‹ -C, --compress-protocol åœ¨mysqlè¿æ¥ä¸Šä½¿ç”¨å‹ç¼©åè®® -V, --version Show the program version and exit -v, --verbose æ›´å¤šè¾“å‡º, 0 = silent, 1 = errors, 2 = warnings, 3 = info, default 2 myloader Usage: myloader [OPTION...] multi-threaded MySQL loader Help Options: -?, --help Show help options Application Options: -d, --directory å¤‡ä»½æ–‡ä»¶æ‰€åœ¨çš„ç›®å½• -q, --queries-per-transaction æ¯ä¸ªäº‹åŠ¡çš„queryæ•°é‡, é»˜è®¤1000 -o, --overwrite-tables å¦‚æœè¡¨å­˜åœ¨åˆ™å…ˆåˆ é™¤ï¼Œä½¿ç”¨è¯¥å‚æ•°ï¼Œéœ€è¦å¤‡ä»½æ—¶å€™è¦å¤‡ä»½è¡¨ç»“æ„ï¼Œä¸ç„¶è¿˜åŸä¼šæ‰¾ä¸åˆ°è¡¨ -B, --database æŒ‡å®šéœ€è¦è¿˜åŸçš„æ•°æ®åº“ -s, --source-db è¿˜åŸçš„æ•°æ®åº“ -e, --enable-binlog å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—æ¢å¤æ•°æ® -h, --host The host to connect to -u, --user Username with privileges to run the dump -p, --password User password -P, --port TCP/IP port to connect to -S, --socket UNIX domain socket file to use for connection -t, --threads ä½¿ç”¨çš„çº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤4 -C, --compress-protocol è¿æ¥ä¸Šä½¿ç”¨å‹ç¼©åè®® -V, --version Show the program version and exit -v, --verbose æ›´å¤šè¾“å‡º, 0 = silent, 1 = errors, 2 = warnings, 3 = info, default 2 ","date":"2021-12-24","objectID":"/mysqldump/:3:0","tags":["mysql"],"title":"mysqlæ•°æ®åº“å¤‡ä»½è¿ç§»","uri":"/mysqldump/"},{"categories":["web æœåŠ¡å™¨"],"content":"nginx ç¼–è¯‘å‚æ•°è¯¦è§£ nginxç¼–è¯‘å‚æ•° ä½œç”¨ â€“prefix= æŒ‡å‘å®‰è£…ç›®å½• â€“sbin-path æŒ‡å‘ï¼ˆæ‰§è¡Œï¼‰ç¨‹åºæ–‡ä»¶ï¼ˆnginxï¼‰ â€“conf-path= æŒ‡å‘é…ç½®æ–‡ä»¶ï¼ˆnginx.confï¼‰ â€“error-log-path= æŒ‡å‘é”™è¯¯æ—¥å¿—ç›®å½• â€“pid-path= æŒ‡å‘ pid æ–‡ä»¶ï¼ˆnginx.pidï¼‰ â€“lock-path= æŒ‡å‘ lock æ–‡ä»¶ï¼ˆnginx.lockï¼‰ï¼ˆå®‰è£…æ–‡ä»¶é”å®šï¼Œé˜²æ­¢å®‰è£…æ–‡ä»¶è¢«åˆ«äººåˆ©ç”¨ï¼Œæˆ–è‡ªå·±è¯¯æ“ä½œã€‚ï¼‰ â€“user= æŒ‡å®šç¨‹åºè¿è¡Œæ—¶çš„éç‰¹æƒç”¨æˆ· â€“group= æŒ‡å®šç¨‹åºè¿è¡Œæ—¶çš„éç‰¹æƒç”¨æˆ·ç»„ â€“builddir= æŒ‡å‘ç¼–è¯‘ç›®å½• â€“with-rtsig_module å¯ç”¨ rtsig æ¨¡å—æ”¯æŒï¼ˆå®æ—¶ä¿¡å·ï¼‰ â€“with-select_module å¯ç”¨ select æ¨¡å—æ”¯æŒï¼ˆä¸€ç§è½®è¯¢æ¨¡å¼,ä¸æ¨èåœ¨é«˜è½½ç¯å¢ƒä¸‹ä½¿ç”¨ï¼‰ç¦ç”¨ï¼šâ€“withoutselect_module â€“with-poll_module å¯ç”¨ poll æ¨¡å—æ”¯æŒï¼ˆåŠŸèƒ½ä¸ select ç›¸åŒï¼Œä¸ select ç‰¹æ€§ç›¸åŒï¼Œä¸ºä¸€ç§è½®è¯¢æ¨¡å¼,ä¸æ¨èåœ¨é«˜è½½ç¯å¢ƒä¸‹ä½¿ç”¨ï¼‰ â€“with-file-aio å¯ç”¨ file aio æ”¯æŒï¼ˆä¸€ç§ APL æ–‡ä»¶ä¼ è¾“æ ¼å¼ï¼‰ â€“with-ipv6 å¯ç”¨ ipv6 æ”¯æŒ â€“with-http_ssl_module å¯ç”¨ ngx_http_ssl_module æ”¯æŒï¼ˆä½¿æ”¯æŒ https è¯·æ±‚ï¼Œéœ€å·²å®‰è£… opensslï¼‰ â€“with-http_realip_module å¯ç”¨ ngx_http_realip_module æ”¯æŒï¼ˆè¿™ä¸ªæ¨¡å—å…è®¸ä»è¯·æ±‚æ ‡å¤´æ›´æ”¹å®¢æˆ·ç«¯çš„ IP åœ°å€å€¼ï¼Œé»˜è®¤ä¸ºå…³ï¼‰ â€“with-http_addition_module å¯ç”¨ ngx_http_addition_module æ”¯æŒï¼ˆä½œä¸ºä¸€ä¸ªè¾“å‡ºè¿‡æ»¤å™¨ï¼Œæ”¯æŒä¸å®Œå…¨ç¼“å†²ï¼Œåˆ†éƒ¨åˆ†å“åº”è¯·æ±‚ï¼‰ â€“with-http_xslt_module å¯ç”¨ ngx_http_xslt_module æ”¯æŒï¼ˆè¿‡æ»¤è½¬æ¢ XML è¯·æ±‚ â€“with-http_image_filter_module å¯ç”¨ ngx_http_image_filter_module æ”¯æŒï¼ˆä¼ è¾“ JPEG/GIF/PNG å›¾ç‰‡çš„ä¸€ä¸ªè¿‡æ»¤å™¨ï¼‰ï¼ˆé»˜è®¤ä¸ºä¸å¯ç”¨ã€‚gd åº“è¦ç”¨åˆ°ï¼‰ â€“with-http_geoip_module å¯ç”¨ ngx_http_geoip_module æ”¯æŒï¼ˆè¯¥æ¨¡å—åˆ›å»ºåŸºäºä¸ MaxMind GeoIP äºŒè¿›åˆ¶æ–‡ä»¶ç›¸é…çš„å®¢æˆ·ç«¯ IP åœ°å€çš„ ngx_http_geoip_module å˜é‡ï¼‰ â€“with-http_sub_module å¯ç”¨ ngx_http_sub_module æ”¯æŒï¼ˆå…è®¸ç”¨ä¸€äº›å…¶ä»–æ–‡æœ¬æ›¿æ¢ nginx å“åº”ä¸­çš„ä¸€äº›æ–‡æœ¬ï¼‰ â€“with-http_dav_module å¯ç”¨ ngx_http_dav_module æ”¯æŒï¼ˆå¢åŠ  PUT,DELETE,MKCOLï¼šåˆ›å»ºé›†åˆ,COPY å’Œ MOVE æ–¹æ³•ï¼‰é»˜è®¤æƒ…å†µä¸‹ä¸ºå…³é—­ï¼Œéœ€ç¼–è¯‘å¼€å¯ â€“with-http_flv_module å¯ç”¨ ngx_http_flv_module æ”¯æŒï¼ˆæä¾›å¯»æ±‚å†…å­˜ä½¿ç”¨åŸºäºæ—¶é—´çš„åç§»é‡æ–‡ä»¶ï¼‰ â€“with-http_gzip_static_module å¯ç”¨ ngx_http_gzip_static_module æ”¯æŒï¼ˆåœ¨çº¿å®æ—¶å‹ç¼©è¾“å‡ºæ•°æ®æµï¼‰ â€“with-http_random_index_module å¯ç”¨ ngx_http_random_index_module æ”¯æŒï¼ˆä»ç›®å½•ä¸­éšæœºæŒ‘é€‰ä¸€ä¸ªç›®å½•ç´¢å¼•ï¼‰ â€“with-http_secure_link_module å¯ç”¨ ngx_http_secure_link_module æ”¯æŒï¼ˆè®¡ç®—å’Œæ£€æŸ¥è¦æ±‚æ‰€éœ€çš„å®‰å…¨é“¾æ¥ç½‘å€ï¼‰ â€“with-http_degradation_module å¯ç”¨ ngx_http_degradation_module æ”¯æŒï¼ˆå…è®¸åœ¨å†…å­˜ä¸è¶³çš„æƒ…å†µä¸‹è¿”å›204 æˆ– 444 ç ï¼‰ â€“with-http_stub_status_module å¯ç”¨ ngx_http_stub_status_module æ”¯æŒï¼ˆè·å– nginx è‡ªä¸Šæ¬¡å¯åŠ¨ä»¥æ¥çš„å·¥ä½œçŠ¶æ€ï¼‰ â€“without-http_charset_module ç¦ç”¨ ngx_http_charset_module æ”¯æŒï¼ˆé‡æ–°ç¼–ç  web é¡µé¢ï¼Œä½†åªèƒ½æ˜¯ä¸€ä¸ªæ–¹å‘â€“æœåŠ¡å™¨ç«¯åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªå­—èŠ‚çš„ç¼–ç å¯ä»¥è¢«é‡æ–°ç¼–ç ï¼‰ â€“without-http_gzip_module ç¦ç”¨ ngx_http_gzip_module æ”¯æŒï¼ˆè¯¥æ¨¡å—åŒ-with-http_gzip_static_module åŠŸèƒ½ä¸€æ ·ï¼‰ â€“without-http_ssi_module ç¦ç”¨ ngx_http_ssi_module æ”¯æŒï¼ˆè¯¥æ¨¡å—æä¾›äº†ä¸€ä¸ªåœ¨è¾“å…¥ç«¯å¤„ç†å¤„ç†æœåŠ¡å™¨åŒ…å«æ–‡ä»¶ï¼ˆSSIï¼‰çš„è¿‡æ»¤å™¨ï¼Œç›®å‰æ”¯æŒ SSI å‘½ä»¤çš„åˆ—è¡¨æ˜¯ä¸å®Œæ•´çš„ï¼‰ â€“without-http_userid_module ç¦ç”¨ ngx_http_userid_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥å¤„ç†ç”¨æ¥ç¡®å®šå®¢æˆ·ç«¯åç»­è¯·æ±‚çš„ cookiesï¼‰ â€“without-http_access_module ç¦ç”¨ ngx_http_access_module æ”¯æŒï¼ˆè¯¥æ¨¡å—æä¾›äº†ä¸€ä¸ªç®€å•çš„åŸºäºä¸»æœºçš„è®¿é—®æ§åˆ¶ã€‚å…è®¸/æ‹’ç»åŸºäº ip åœ°å€ï¼‰ â€“without-http_auth_basic_module ç¦ç”¨ ngx_http_auth_basic_moduleï¼ˆè¯¥æ¨¡å—æ˜¯å¯ä»¥ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç åŸºäºhttp åŸºæœ¬è®¤è¯æ–¹æ³•æ¥ä¿æŠ¤ä½ çš„ç«™ç‚¹æˆ–å…¶éƒ¨åˆ†å†…å®¹ï¼‰ â€“without-http_autoindex_module ç¦ç”¨ disable ngx_http_autoindex_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨äºè‡ªåŠ¨ç”Ÿæˆç›®å½•åˆ—è¡¨ï¼Œåªåœ¨ ngx_http_index_module æ¨¡å—æœªæ‰¾åˆ°ç´¢å¼•æ–‡ä»¶æ—¶å‘å‡ºè¯·æ±‚ã€‚ï¼‰ â€“without-http_geo_module ç¦ç”¨ ngx_http_geo_module æ”¯æŒï¼ˆåˆ›å»ºä¸€äº›å˜é‡ï¼Œå…¶å€¼ä¾èµ–äºå®¢æˆ·ç«¯çš„ IP åœ°å€ï¼‰ â€“without-http_map_module ç¦ç”¨ ngx_http_map_module æ”¯æŒï¼ˆä½¿ç”¨ä»»æ„çš„é”®/å€¼å¯¹è®¾ç½®é…ç½®å˜é‡ï¼‰ â€“without-http_split_clients_module ç¦ç”¨ ngx_http_split_clients_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥åŸºäºæŸäº›æ¡ä»¶åˆ’åˆ†ç”¨æˆ·ã€‚æ¡ä»¶å¦‚ï¼šip åœ°å€ã€æŠ¥å¤´ã€cookies ç­‰ç­‰ï¼‰ â€“without-http_referer_module ç¦ç”¨ disable ngx_http_referer_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥è¿‡æ»¤è¯·æ±‚ï¼Œæ‹’ç»æŠ¥ å¤´ä¸­ Referer å€¼ä¸æ­£ç¡®çš„è¯·æ±‚ï¼‰ â€“without-http_rewrite_module ç¦ç”¨ ngx_http_rewrite_module æ”¯æŒï¼ˆè¯¥æ¨¡å—å…è®¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ”¹å˜ URIï¼Œå¹¶ä¸”æ ¹æ®å˜é‡æ¥è½¬å‘ä»¥åŠé€‰æ‹©é…ç½®ã€‚å¦‚æœåœ¨ server çº§åˆ«è®¾ç½®è¯¥é€‰é¡¹ï¼Œé‚£ä¹ˆä»–ä»¬å°†åœ¨ location ä¹‹å‰ç”Ÿæ•ˆã€‚å¦‚æœåœ¨location è¿˜æœ‰æ›´è¿›ä¸€æ­¥çš„é‡å†™è§„åˆ™ï¼Œlocation éƒ¨åˆ†çš„è§„åˆ™ä¾ç„¶ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœè¿™ä¸ª URI é‡å†™æ˜¯å› ä¸º location éƒ¨åˆ†çš„è§„åˆ™é€ æˆçš„ï¼Œé‚£ä¹ˆ location éƒ¨åˆ†ä¼šå†æ¬¡è¢«æ‰§è¡Œä½œä¸ºæ–°çš„ URIã€‚ è¿™ä¸ªå¾ªç¯ä¼šæ‰§è¡Œ 10 æ¬¡ï¼Œç„¶å Nginx ä¼šè¿”å›ä¸€ä¸ª 500 é”™è¯¯ã€‚ï¼‰ â€“without-http_proxy_module ç¦ç”¨ ngx_http_proxy_module æ”¯æŒï¼ˆæœ‰å…³ä»£ç†æœåŠ¡å™¨ï¼‰ â€“without-http_fastcgi_module ç¦ç”¨ ngx_http_fastcgi_module æ”¯æŒï¼ˆè¯¥æ¨¡å—å…è®¸ Nginx ä¸ FastCGI è¿›ç¨‹äº¤äº’ï¼Œå¹¶é€šè¿‡ä¼ é€’å‚æ•°æ¥æ§åˆ¶ FastCGI è¿›ç¨‹å·¥ä½œã€‚ ï¼‰FastCGI ä¸€ä¸ªå¸¸é©»å‹çš„å…¬å…±ç½‘å…³æ¥å£ã€‚ â€“without-http_uwsgi_module ç¦ç”¨ ngx_http_uwsgi_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥åŒ»ç”¨ uwsgi åè®®ï¼ŒuWSGI æœåŠ¡å™¨ç›¸å…³ï¼‰ â€“without-http_scgi_module ç¦ç”¨ ngx_http_scgi_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥å¯ç”¨ SCGI åè®®æ”¯æŒï¼ŒSCGI åè®®æ˜¯CGI åè®®çš„æ›¿ä»£ã€‚å®ƒæ˜¯ä¸€ç§åº”ç”¨ç¨‹åºä¸ HTTP æœåŠ¡æ¥å£æ ‡å‡†ã€‚å®ƒæœ‰äº›åƒ FastCGI ä½†ä»–çš„è®¾è®¡ æ›´å®¹æ˜“å®ç°ã€‚ï¼‰ â€“without-http_memcached_module ç¦ç”¨ ngx_http_memcached_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥æä¾›ç®€å•çš„ç¼“å­˜ï¼Œä»¥æé«˜ç³»ç»Ÿæ•ˆç‡ï¼‰ -without-http_limit_zone_module ç¦ç”¨ ngx_http_limit_zone_module æ”¯æŒï¼ˆè¯¥æ¨¡å—å¯ä»¥é’ˆå¯¹æ¡ä»¶ï¼Œè¿›è¡Œä¼šè¯çš„å¹¶å‘è¿æ¥æ•°æ§åˆ¶ï¼‰ â€“without-http_limit_req_module ç¦ç”¨ ngx_http_limit_req_module æ”¯æŒï¼ˆè¯¥æ¨¡å—å…è®¸ä½ å¯¹äºä¸€ä¸ªåœ°å€è¿›è¡Œè¯·æ±‚æ•°é‡çš„é™åˆ¶ç”¨ä¸€ä¸ªç»™å®šçš„ session æˆ–ä¸€ä¸ªç‰¹å®šçš„äº‹ä»¶ï¼‰ â€“without-http_empty_gif_module ç¦ç”¨ ngx_http_empty_gif_module æ”¯æŒï¼ˆè¯¥æ¨¡å—åœ¨å†…å­˜ä¸­å¸¸é©»äº†ä¸€ä¸ª 1*1 çš„é€æ˜ GIF å›¾åƒï¼Œå¯ä»¥è¢«éå¸¸å¿«é€Ÿçš„è°ƒç”¨ï¼‰ â€“without-http_browser_module ç¦ç”¨ ngx_http_browser_module æ”¯æŒï¼ˆè¯¥æ¨¡å—ç”¨æ¥åˆ›å»ºä¾èµ–äºè¯·æ±‚æŠ¥å¤´çš„å€¼ã€‚å¦‚æœæµè§ˆå™¨ä¸º modern ï¼Œ","date":"2021-12-24","objectID":"/nginx02/:0:0","tags":["nginx","linux"],"title":"nginx ç¼–è¯‘å‚æ•°è¯¦è§£","uri":"/nginx02/"},{"categories":["web æœåŠ¡å™¨"],"content":"nginx é‡å†™è§„åˆ™ rewriteæ¨¡å— ","date":"2021-12-24","objectID":"/nginx04/:0:0","tags":["nginx","linux"],"title":"nginx é‡å†™è§„åˆ™ rewriteæ¨¡å—","uri":"/nginx04/"},{"categories":["web æœåŠ¡å™¨"],"content":"è¯­æ³• è¯­æ³• é»˜è®¤å€¼ ä½¿ç”¨å­—æ®µ ä½œç”¨ break none server, location, if å®Œæˆå½“å‰è®¾ç½®çš„é‡å†™è§„åˆ™ï¼Œåœæ­¢æ‰§è¡Œå…¶ä»–çš„é‡å†™è§„åˆ™ã€‚ set variable value none server, location, if ä¸ºç»™å®šçš„å˜é‡è®¾ç½®ä¸€ä¸ªç‰¹å®šå€¼ã€‚ return code none server, location, if åœæ­¢å¤„ç†å¹¶ä¸ºå®¢æˆ·ç«¯è¿”å›çŠ¶æ€ç ã€‚éæ ‡å‡†çš„ 444 çŠ¶æ€ç å°†å…³é—­è¿æ¥ï¼Œä¸å‘é€ä»»ä½•å“åº”å¤´ã€‚å¯ä»¥ä½¿ç”¨çš„çŠ¶æ€ç æœ‰ï¼š204ï¼Œ400ï¼Œ402-406ï¼Œ408ï¼Œ410, 411, 413, 416 ä¸ 500-504ã€‚å¦‚æœçŠ¶æ€ç é™„å¸¦æ–‡å­—æ®µè½ï¼Œè¯¥æ–‡æœ¬å°†è¢«æ”¾ç½®åœ¨å“åº”ä¸»ä½“ã€‚ç›¸åï¼Œå¦‚æœçŠ¶æ€ç åé¢æ˜¯ä¸€ä¸ª URLï¼Œè¯¥ URL å°†æˆä¸º location å¤´è¡¥å€¼ã€‚æ²¡æœ‰çŠ¶æ€ç çš„ URL å°†è¢«è§†ä¸ºä¸€ä¸ª 302çŠ¶æ€ç ã€‚ rewrite_log on rewrite_log off server, location, if å¯ç”¨æ—¶å°†åœ¨ error log ä¸­è®°å½• notice çº§åˆ«çš„é‡å†™æ—¥å¿—ã€‚ rewrite regex replacement flag none server, location, if æŒ‰ç…§ç›¸å…³çš„æ­£åˆ™è¡¨è¾¾å¼ä¸å­—ç¬¦ä¸²ä¿®æ”¹ URIï¼ŒæŒ‡ä»¤æŒ‰ç…§åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ‰§è¡Œã€‚å¯ä»¥åœ¨é‡å†™æŒ‡ä»¤åé¢æ·»åŠ æ ‡è®°ã€‚æ³¨æ„ï¼šå¦‚æœæ›¿æ¢çš„å­—ç¬¦ä¸²ä»¥ http://å¼€å¤´ï¼Œè¯·æ±‚å°†è¢«é‡å®šå‘ï¼Œå¹¶ä¸”ä¸å†æ‰§è¡Œå¤šä½™çš„ rewrite æŒ‡ä»¤ã€‚å°¾éƒ¨çš„æ ‡è®°(flag)å¯ä»¥æ˜¯ä»¥ä¸‹çš„å€¼ï¼šlast â€“ åœæ­¢å¤„ç†é‡å†™æ¨¡å—æŒ‡ä»¤ï¼Œä¹‹åæœç´¢ location ä¸æ›´æ”¹åçš„ URI åŒ¹é….break â€“ å®Œæˆé‡å†™æŒ‡ä»¤ã€‚redirect â€“ è¿”å› 302 ä¸´æ—¶é‡å®šå‘ï¼Œå¦‚æœæ›¿æ¢å­—æ®µç”¨ http://å¼€å¤´åˆ™è¢«ä½¿ç”¨ã€‚permanent â€“ è¿”å› 301 æ°¸ä¹…é‡å®šå‘ã€‚ if (condition) { â€¦ } none server, location å°½é‡è€ƒè™‘ä½¿ç”¨ trp_files ä»£æ›¿ã€‚åˆ¤æ–­çš„æ¡ä»¶å¯ä»¥æœ‰ä»¥ä¸‹å€¼ ä¸€ä¸ªå˜é‡çš„åç§°ï¼šç©ºå­—ç¬¦ä¼ â€â€œæˆ–è€…ä¸€äº›â€œ0â€å¼€å§‹çš„å­—ç¬¦ä¸²ä¸º falseã€‚ å­—ç¬¦ä¸²æ¯”è¾ƒï¼šä½¿ç”¨=æˆ–!=è¿ç®—ç¬¦ æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼šä½¿ç”¨~(åŒºåˆ†å¤§å°å†™)å’Œ~(ä¸åŒºåˆ†å¤§å°å†™)ï¼Œå–åè¿ç®—!~å’Œ!~ã€‚ æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼šä½¿ç”¨-f å’Œ!-f æ“ä½œç¬¦ ç›®å½•æ˜¯å¦å­˜åœ¨ï¼šä½¿ç”¨-d å’Œ!-d æ“ä½œç¬¦ æ–‡ä»¶ã€ç›®å½•ã€ç¬¦å·é“¾æ¥æ˜¯å¦å­˜åœ¨ï¼šä½¿ç”¨-e å’Œ!-e æ“ä½œç¬¦ æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼šä½¿ç”¨-x å’Œ!-x æ“ä½œç¬¦'| ","date":"2021-12-24","objectID":"/nginx04/:1:0","tags":["nginx","linux"],"title":"nginx é‡å†™è§„åˆ™ rewriteæ¨¡å—","uri":"/nginx04/"},{"categories":["web æœåŠ¡å™¨"],"content":"rewrite é‡å†™è§„åˆ™ æ­£åˆ™è¡¨è¾¾å¼ ","date":"2021-12-24","objectID":"/nginx04/:2:0","tags":["nginx","linux"],"title":"nginx é‡å†™è§„åˆ™ rewriteæ¨¡å—","uri":"/nginx04/"},{"categories":["web æœåŠ¡å™¨"],"content":"nginx.conf é…ç½®æ–‡ä»¶è¯¦è§£ # vim nginx.conf user nobody nobody; # è¿è¡Œ nginx çš„æ‰€å±ç»„å’Œæ‰€æœ‰è€… worker_processes 2; # å¼€å¯ä¸¤ä¸ª nginx å·¥ä½œè¿›ç¨‹,ä¸€èˆ¬å‡ ä¸ª CPU æ ¸å¿ƒå°±å†™å‡  error_log logs/error.log notice; # é”™è¯¯æ—¥å¿—è·¯å¾„ pid logs/nginx.pid; # pid è·¯å¾„ events { worker_connections 1024; # ä¸€ä¸ªè¿›ç¨‹èƒ½åŒæ—¶å¤„ç† 1024 ä¸ªè¯·æ±‚ } http { include mime.types; default_type application/octet-stream; log_format main â€˜$remote_addr â€“ $remote_user [$time_local] â€œ$requestâ€ â€˜ â€˜$status $body_bytes_sent â€œ$http_refererâ€ â€˜ â€˜â€$http_user_agentâ€ â€œ$http_x_forwarded_forâ€â€˜; access_log logs/access.log main; # é»˜è®¤è®¿é—®æ—¥å¿—è·¯å¾„ sendfile on; keepalive_timeout 65; # keepalive è¶…å¸‚æ—¶é—´ # å¼€å§‹é…ç½®ä¸€ä¸ªåŸŸå,ä¸€ä¸ª server é…ç½®æ®µä¸€èˆ¬å¯¹åº”ä¸€ä¸ªåŸŸå server { listen 80; # # åœ¨æœ¬æœºæ‰€æœ‰ ip ä¸Šç›‘å¬ 80,ä¹Ÿå¯ä»¥å†™ä¸º 192.168.1.202:80,è¿™æ ·çš„è¯,å°±åªç›‘å¬ 192.168.1.202 ä¸Šçš„ 80 å£ server_name www.nbtyfood.com; # åŸŸå root /www/html/www.nbtyfood.com; # ç«™ç‚¹æ ¹ç›®å½•ï¼ˆç¨‹åºç›®å½•ï¼‰ index index.html index.htm; # ç´¢å¼•æ–‡ä»¶ location / { # å¯ä»¥æœ‰å¤šä¸ª location root /www/html/www.nbtyfood.com; # ç«™ç‚¹æ ¹ç›®å½•ï¼ˆç¨‹åºç›®å½•ï¼‰ } error_page 500 502 503 504 /50x.html; # å®šä¹‰é”™è¯¯é¡µé¢,å¦‚æœæ˜¯ 500 é”™è¯¯,åˆ™æŠŠç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„ 50x.html è¿”å›ç»™ç”¨æˆ· location = /50x.html { root /www/html/www.nbtyfood.com; } } # å¼€å§‹é…ç½®ç«™ç‚¹ bbs.nbtyfood.com server { listen 80; server_name bbs.nbtyfood.com; root /www/html/bbs.nbtyfood.com; index index.html index.htm; # ç´¢å¼•æ–‡ä»¶ location / { root /www/html/bbs.nbtyfood.com; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /www/html/bbs.nbtyfood.com; } } } ","date":"2021-12-24","objectID":"/nginx03/:0:0","tags":["nginx","linux"],"title":"nginx.conf é…ç½®æ–‡ä»¶è¯¦è§£","uri":"/nginx03/"},{"categories":["åŸºç¡€"],"content":"ç½‘ç»œåŸºç¡€çŸ¥è¯† ","date":"2021-12-23","objectID":"/network/:0:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"1ã€ç®€è¿°ISO/OSIä¸ƒå±‚æ¨¡å‹çš„åˆ†å±‚ä¸ä½œç”¨ åˆ†å±‚ ä½œç”¨ åº”ç”¨å±‚ åº”ç”¨ç³»ç»Ÿï¼Œæä¾›ç”¨æˆ·æœåŠ¡ ä¾‹å¦‚ï¼šHTTPã€HTTPSã€FTPã€Telnetã€SSHã€SMTPã€POP3 è¡¨ç¤ºå±‚ æŠŠæ•°æ®è½¬æ¢ä¸ºèƒ½ä¸æ¥æ”¶è€…çš„ç³»ç»Ÿæ ¼å¼å…¼å®¹å¹¶é€‚åˆä¼ è¾“çš„æ ¼å¼ï¼Œæ•°æ®è¡¨ç¤ºï¼ŒåŠ å¯†ï¼Œå‹ç¼© ä¼šè¯å±‚ è´Ÿè´£åœ¨æ•°æ®ä¼ è¾“ä¸­è®¾ç½®å’Œç»´æŠ¤è®¡ç®—æœºç½‘ç»œä¸­ä¸¤å°è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡è¿æ¥ã€‚ç¡®å®šæ•°æ®æ˜¯å¦éœ€è¦è¿›è¡Œç½‘ç»œä¼ é€’ åˆ†æµç½‘ç»œä¼ é€’è¿˜æ˜¯æœ¬åœ°ä¿å­˜ ä¼ è¾“å±‚ å¯¹æ•°æ®åˆ†ç»„ï¼Œå¯¹æŠ¥æ–‡è¿›è¡Œåˆ†ç»„(å‘é€æ—¶)ã€ç»„è£…(æ¥æ”¶æ—¶)æä¾›ä¼ è¾“åè®®çš„é€‰æ‹©ï¼šTCP (ä¼ è¾“æ§åˆ¶åè®®) :å¯é çš„ï¼Œé¢å‘è¿æ¥çš„ä¼ è¾“åè®® (å¯é ï¼Œå‡†ç¡®) (æ…¢)UDP (ç”¨æˆ·æ•°æ®æŠ¥åè®®) :ä¸å¯é çš„ï¼Œé¢å‘æ— è¿æ¥çš„ä¼ è¾“åè®® (å¿«) (ä¸å¯é )ã€‚ç«¯å£å°è£…ï¼Œå·®é”™æ ¡éªŒï¼Œæ»‘åŠ¨çª—å£ï¼Œç•™ç©º ç½‘ç»œå±‚ ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰å†³å®šæ•°æ®çš„è·¯å¾„é€‰æ‹©å’Œè½¬å¯„ï¼Œå°†ç½‘ç»œè¡¨å¤´ï¼ˆNHï¼‰åŠ è‡³æ•°æ®åŒ…ï¼Œä»¥å½¢æˆåˆ†ç»„ã€‚ç½‘ç»œè¡¨å¤´åŒ…å«äº†ç½‘ç»œèµ„æ–™ã€‚ä¾‹å¦‚:äº’è”ç½‘åè®®ï¼ˆIPï¼‰ç­‰ã€‚1.IPåœ°å€ç¼–å€2.è·¯ç”±é€‰æ‹©3.é™æ€è·¯ç”±4.åŠ¨æ€è·¯ç”± æ•°æ®é“¾è·¯å±‚ æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰è´Ÿè´£ç½‘ç»œå¯»å€ã€é”™è¯¯ä¾¦æµ‹å’Œæ”¹é”™ã€‚1.MACåœ°å€ç¼–å€2.MACåœ°å€å¯»å€3.å·®é”™æ ¡éªŒ ç‰©ç†å±‚ ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰åœ¨å±€åŸŸç½‘ä¸Šå‘é€æ•°æ®å¸§ï¼ˆData Frameï¼‰1.æ•°æ®å®é™…ä¼ è¾“2.ç”µæ°”ç‰¹æ€§å®šä¹‰ ","date":"2021-12-23","objectID":"/network/:1:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"2ã€TCP/IPå››å±‚æ¨¡å‹ä¸ä½œç”¨ï¼Ÿ åˆ†å±‚ åè®® åº”ç”¨å±‚ HTTPã€HTTPSã€FTPã€Telnetã€SSHã€SMTPã€DNS ä¼ è¾“å±‚ TCPã€UDP ç½‘ç»œå±‚ ICMPã€IGMPã€IPã€ARPã€RARP æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ PPPã€PPPOE ","date":"2021-12-23","objectID":"/network/:2:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"3ã€TCPåè®®ä¸UDPåè®®å·¥ä½œåœ¨å“ªä¸€å±‚ï¼Œä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ä¼ è¾“å±‚ï¼Œå¯¹æŠ¥æ–‡è¿›è¡Œåˆ†ç»„(å‘é€æ—¶)ã€ç»„è£…(æ¥æ”¶æ—¶)æä¾› å½“è¿›ç¨‹éœ€è¦ä¼ è¾“å¯é çš„æ•°æ®æ—¶åº”ä½¿ç”¨TCPï¼Œå½“è¿›ç¨‹éœ€è¦é«˜æ•ˆä¼ è¾“æ•°æ®ï¼Œå¯ä»¥å¿½ç•¥å¯é æ€§æ—¶åº”ä½¿ç”¨UDPåè®®ã€‚ ","date":"2021-12-23","objectID":"/network/:3:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"4ã€ç®€è¿°TCPä¸‰æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ã€‚ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClientå°†æ ‡å¿—ä½SYNç½®ä¸º1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Jï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒClientè¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…Serverç¡®è®¤ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šServeræ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½SYN=1çŸ¥é“Clientè¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒServerå°†æ ‡å¿—ä½SYNå’ŒACKéƒ½ç½®ä¸º1ï¼Œack=J+1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Kï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Clientä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼ŒServerè¿›å…¥SYN_RCVDçŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClientæ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ackæ˜¯å¦ä¸ºJ+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ACKç½®ä¸º1ï¼Œack=K+1ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒServeræ£€æŸ¥ackæ˜¯å¦ä¸ºK+1ï¼ŒACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼ŒClientå’ŒServerè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼ŒéšåClientä¸Serverä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚ ","date":"2021-12-23","objectID":"/network/:4:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"5ã€ç®€è¿°TCPåŒ…å¤´çš„å†…å®¹ã€‚ æºç«¯å£å’Œç›®çš„ç«¯å£ï¼šå„å  2 ä¸ªå­—èŠ‚ï¼Œåˆ†åˆ«å†™å…¥æºç«¯å£å’Œç›®çš„ç«¯å£ã€‚IP åœ°å€ + ç«¯å£å·å°±å¯ä»¥ç¡®å®šä¸€ä¸ªè¿›ç¨‹åœ°å€ åºå·/åºåˆ—å·ï¼ˆSequense Numberï¼ŒSNï¼‰ï¼šåœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­ä¼ é€çš„å­—èŠ‚æµä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½æŒ‰é¡ºåºç¼–å·ã€‚è¯¥å­—æ®µè¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚åˆå§‹åºå·ç§°ä¸º Init Sequense Number, ISNï¼ˆåºå·/åºåˆ—å·è¿™ä¸ªå­—æ®µå¾ˆé‡è¦ï¼Œå¤§å®¶ç•™ä¸ªå°è±¡ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†è®²è§£ï¼‰ ä¾‹å¦‚ï¼Œä¸€æŠ¥æ–‡æ®µçš„åºå·æ˜¯ 101ï¼Œå…±æœ‰ 100 å­—èŠ‚çš„æ•°æ®ã€‚è¿™å°±è¡¨æ˜ï¼šæœ¬æŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯ 101ï¼Œæœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯ 200ã€‚æ˜¾ç„¶ï¼Œä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„æ•°æ®åºå·åº”å½“ä» 201 å¼€å§‹ï¼Œå³ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·å­—æ®µå€¼åº”ä¸º 201ã€‚ ç¡®è®¤å· ackï¼šæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·ã€‚è‹¥ç¡®è®¤å·ä¸º Nï¼Œåˆ™è¡¨æ˜ï¼šåˆ°åºå· N-1 ä¸ºæ­¢çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ­£ç¡®æ”¶åˆ°ã€‚ æ•°æ®åç§»ï¼ˆé¦–éƒ¨é•¿åº¦ï¼‰ï¼šå®ƒæŒ‡å‡º TCP æŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦» TCP æŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚è¿™ä¸ªå­—æ®µå®é™…ä¸Šæ˜¯æŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨é•¿åº¦ã€‚ ä¿ç•™ï¼šå  6 ä½ï¼Œåº”ç½®ä¸º 0ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ã€‚ æ ‡å¿—ä½ï¼š æ ‡å¿—ä½ ä½œç”¨ URG ç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰æœ‰æ•ˆã€‚ ACK ç¡®è®¤åºå·æœ‰æ•ˆ PSH æ¥æ”¶æ–¹åº”è¯¥å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚ã€‚ RST é‡ç½®è¿æ¥ã€‚ SYN å‘èµ·ä¸€ä¸ªæ–°è¿æ¥ã€‚ FIN é‡Šæ”¾ä¸€ä¸ªè¿æ¥ã€‚ ä¸è¦å°†ç¡®è®¤åºå·Ackä¸æ ‡å¿—ä½ä¸­çš„ACKææ··äº†ã€‚ ç¡®è®¤æ–¹Ack=å‘èµ·æ–¹Req+1ï¼Œä¸¤ç«¯é…å¯¹ã€‚ ","date":"2021-12-23","objectID":"/network/:5:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"6ã€ç®€è¿°TCPå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ã€‚ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šClientå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­Clientåˆ°Serverçš„æ•°æ®ä¼ é€ï¼ŒClientè¿›å…¥FIN_WAIT_1çŠ¶æ€ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šServeræ”¶åˆ°FINåï¼Œå‘é€ä¸€ä¸ªACKç»™Clientï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ˆä¸SYNç›¸åŒï¼Œä¸€ä¸ªFINå ç”¨ä¸€ä¸ªåºå·ï¼‰ï¼ŒServerè¿›å…¥CLOSE_WAITçŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šServerå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­Serveråˆ°Clientçš„æ•°æ®ä¼ é€ï¼ŒServerè¿›å…¥LAST_ACKçŠ¶æ€ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šClientæ”¶åˆ°FINåï¼ŒClientè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œæ¥ç€å‘é€ä¸€ä¸ªACKç»™Serverï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼ŒServerè¿›å…¥CLOSEDçŠ¶æ€ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚ ","date":"2021-12-23","objectID":"/network/:6:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"7ã€172.22.141.231/26ï¼Œè¯¥IPä½äºå“ªä¸ªç½‘æ®µï¼Ÿè¯¥ç½‘æ®µæ‹¥æœ‰å¤šå°‘å¯ç”¨IPåœ°å€ï¼Ÿå¹¿æ’­åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ Aç±»IP 10.1.1.1 æ ‡å‡†å­ç½‘æ©ç : 255.0.0.0 å­ç½‘æ©ç äºŒè¿›åˆ¶: 1111111.00000000.00000000.00000000 IPåœ°å€å‰8ä½æ˜¯ç½‘ç»œåœ°å€,å24ä½æ˜¯ä¸»æœºåœ°å€ 10.0.0.0-10.255.255.255 Bç±»IP 172.16.1.1 æ ‡å‡†å­ç½‘æ©ç : 255.255.0.0 å­ç½‘æ©ç äºŒè¿›åˆ¶: 1111111.11111111.00000000.00000000 IPåœ°å€å‰16ä½æ˜¯ç½‘ç»œåœ°å€,å16ä½æ˜¯ä¸»æœºåœ°å€ 172.16.0.0-172.31.255.255 Cç±»IP 192.168.1.1 æ ‡å‡†å­ç½‘æ©ç : 255.255.255.0 å­ç½‘æ©ç äºŒè¿›åˆ¶: 11111111.1111111.11111111.00000000 IPåœ°å€å‰24ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå8ä½æ˜¯ä¸»æœºåœ°å€ 192.168.0.0-192.168.255.255 ","date":"2021-12-23","objectID":"/network/:7:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"8ã€ç®€è¿°IPåœ°å€çš„åˆ†ç±»ã€‚ Aç±»ï¼šï¼ˆ1.0.0.0-126.0.0.0ï¼‰ï¼ˆé»˜è®¤å­ç½‘æ©ç ï¼š255.0.0.0æˆ– 0xFF000000ï¼‰ ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºç½‘ç»œå·ï¼Œåä¸‰ä¸ªå­—èŠ‚ä¸ºä¸»æœºå·ã€‚è¯¥ç±»IPåœ°å€çš„æœ€å‰é¢ä¸ºâ€œ0â€ï¼Œæ‰€ä»¥åœ°å€çš„ç½‘ç»œå·å–å€¼äº1~126ä¹‹é—´ã€‚ ä¸€èˆ¬ç”¨äºå¤§å‹ç½‘ç»œã€‚ Bç±»ï¼šï¼ˆ128.1.0.0-191.255.0.0ï¼‰ï¼ˆé»˜è®¤å­ç½‘æ©ç ï¼š255.255.0.0æˆ–0xFFFF0000ï¼‰ å‰ä¸¤ä¸ªå­—èŠ‚ä¸ºç½‘ç»œå·ï¼Œåä¸¤ä¸ªå­—èŠ‚ä¸ºä¸»æœºå·ã€‚è¯¥ç±»IPåœ°å€çš„æœ€å‰é¢ä¸ºâ€œ10â€ï¼Œæ‰€ä»¥åœ°å€çš„ç½‘ç»œå·å–å€¼äº128~191ä¹‹é—´ã€‚ ä¸€èˆ¬ç”¨äºä¸­ç­‰è§„æ¨¡ç½‘ç»œã€‚ Cç±»ï¼šï¼ˆ192.0.1.0-223.255.255.0ï¼‰ï¼ˆå­ç½‘æ©ç ï¼š255.255.255.0æˆ– 0xFFFFFF00 å‰ä¸‰ä¸ªå­—èŠ‚ä¸ºç½‘ç»œå·ï¼Œæœ€åä¸€ä¸ªå­—èŠ‚ä¸ºä¸»æœºå·ã€‚è¯¥ç±»IPåœ°å€çš„æœ€å‰é¢ä¸ºâ€œ110â€ï¼Œæ‰€ä»¥åœ°å€çš„ç½‘ç»œå·å–å€¼äº192~223ä¹‹é—´ã€‚ ä¸€èˆ¬ç”¨äºå°å‹ç½‘ç»œã€‚ Dç±»ï¼šæ˜¯å¤šæ’­åœ°å€ã€‚è¯¥ç±»IPåœ°å€çš„æœ€å‰é¢ä¸ºâ€œ1110â€ï¼Œæ‰€ä»¥åœ°å€çš„ç½‘ç»œå·å–å€¼äº224~239ä¹‹é—´ã€‚ä¸€èˆ¬ç”¨äºå¤šè·¯å¹¿æ’­ç”¨æˆ·[1] ã€‚ Eç±»ï¼šæ˜¯ä¿ç•™åœ°å€ã€‚è¯¥ç±»IPåœ°å€çš„æœ€å‰é¢ä¸ºâ€œ1111â€ï¼Œæ‰€ä»¥åœ°å€çš„ç½‘ç»œå·å–å€¼äº240~255ä¹‹é—´ã€‚ ","date":"2021-12-23","objectID":"/network/:8:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["åŸºç¡€"],"content":"9ã€ç®€è¿°ç§æœ‰IPåœ°å€çš„ä½œç”¨ã€‚ åœ¨å…¨çƒèŒƒå›´å†…ä¸å…·æœ‰å”¯ä¸€æ€§ï¼Œå› æ­¤ä¸èƒ½å”¯ä¸€æ ‡è¯†ä¸€å°è”ç½‘çš„è®¡ç®—æœºã€‚æ— éœ€æ‹…å¿ƒç§æœ‰IPåœ°å€åœ¨å…¨çƒèŒƒå›´å†…çš„å†²çªé—®é¢˜ã€‚ ç§æœ‰IPåœ°å€çš„è·¯ç”±ä¿¡æ¯ä¸èƒ½å¯¹å¤–å‘å¸ƒï¼Œå¤–éƒ¨çš„IPæ•°æ®åŒ…æ— æ³•è·¯ç”±åˆ°ç§æœ‰IPåœ°å€çš„è®¡ç®—æœºä¸Šã€‚ IPæ•°æ®åŒ…ä¸­çš„æºåœ°å€å’Œç›®çš„åœ°å€æ˜¯ç§æœ‰IPåœ°å€çš„, ä¸èƒ½åœ¨Internetä¸Šçš„è·¯ç”±å™¨é—´è¿›è¡Œå­˜å‚¨è½¬å‘çš„æ“ä½œã€‚ ","date":"2021-12-23","objectID":"/network/:9:0","tags":["è¿ç»´"],"title":"ç½‘ç»œåŸºç¡€çŸ¥è¯†","uri":"/network/"},{"categories":["docker"],"content":"docker å®‰è£…kong ç½‘å…³ ","date":"2021-12-22","objectID":"/docker-kong/:0:0","tags":["docker"],"title":"docker å®‰è£…kong ç½‘å…³","uri":"/docker-kong/"},{"categories":["docker"],"content":"å»ºç«‹æ•°æ®åº“ åˆ›å»ºç½‘ç»œ docker network create kong-net å»ºç«‹æ•°æ®åº“ docker run -d --name kong-database \\ --network=kong-net \\ -p 5432:5432 \\ -e \"POSTGRES_USER=kong\" \\ -e \"POSTGRES_DB=kong\" \\ -e \"POSTGRES_PASSWORD=kong123\" \\ postgres:9.6 åˆ›å»ºkongæ•°æ® docker run --rm --network=kong-net \\ -e \"KONG_DATABASE=postgres\" \\ -e \"KONG_PG_HOST=kong-database\" \\ -e \"KONG_PG_PASSWORD=kong123\" \\ -e \"KONG_PASSWORD=kong123\" \\ kong:latest kong migrations bootstrap ","date":"2021-12-22","objectID":"/docker-kong/:1:0","tags":["docker"],"title":"docker å®‰è£…kong ç½‘å…³","uri":"/docker-kong/"},{"categories":["docker"],"content":"åˆ›å»º kong åˆ›å»ºkong gateway docker run -d --name kong \\ --network=kong-net \\ -e \"KONG_DATABASE=postgres\" \\ -e \"KONG_PG_HOST=kong-database\" \\ -e \"KONG_PG_USER=kong\" \\ -e \"KONG_PG_PASSWORD=kong123\" \\ -e \"KONG_CASSANDRA_CONTACT_POINTS=kong-database\" \\ -e \"KONG_PROXY_ACCESS_LOG=/dev/stdout\" \\ -e \"KONG_ADMIN_ACCESS_LOG=/dev/stdout\" \\ -e \"KONG_PROXY_ERROR_LOG=/dev/stderr\" \\ -e \"KONG_ADMIN_ERROR_LOG=/dev/stderr\" \\ -e \"KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl\" \\ -p 8000:8000 \\ -p 8443:8443 \\ -p 127.0.0.1:8001:8001 \\ -p 127.0.0.1:8444:8444 \\ kong:latest ","date":"2021-12-22","objectID":"/docker-kong/:2:0","tags":["docker"],"title":"docker å®‰è£…kong ç½‘å…³","uri":"/docker-kong/"},{"categories":["docker"],"content":"å®‰è£…konga docker pull pantsel/konga:latest docker run --rm pantsel/konga:latest \\ -c prepare \\ -a postgres \\ -u postgresql://kong:kong123@172.18.0.1:5432/konga docker run -d -p 1337:1337 \\ --network kong-net \\ --name konga \\ -e \"NODE_ENV=production\" \\ -e \"DB_ADAPTER=postgres\" \\ -e \"DB_URI=postgresql://kong:kong123@172.18.0.1:5432/konga\" \\ pantsel/konga ","date":"2021-12-22","objectID":"/docker-kong/:3:0","tags":["docker"],"title":"docker å®‰è£…kong ç½‘å…³","uri":"/docker-kong/"},{"categories":["docker"],"content":"æ­å»ºdocker registry é•œåƒä»“åº“ ","date":"2021-12-22","objectID":"/docker-registry/:0:0","tags":["docker"],"title":"æ­å»ºdocker registry é•œåƒä»“åº“","uri":"/docker-registry/"},{"categories":["docker"],"content":"è·å–é•œåƒ docker pull registry:2.7.1 docker pull hyper/docker-registry-web ","date":"2021-12-22","objectID":"/docker-registry/:1:0","tags":["docker"],"title":"æ­å»ºdocker registry é•œåƒä»“åº“","uri":"/docker-registry/"},{"categories":["docker"],"content":"å®¹å™¨è¿è¡Œ mkdir -p /opt/data/registry docker run -d -p 5000:5000 -v /opt/data/registry:/var/lib/registry --name registry registry:2.7.1 docker run -d -p 8080:8080 --name registry-web --link registry \\ -e REGISTRY_URL=http://192.168.99.146:5000/v2 \\ -e REGISTRY_TRUST_ANY_SSL=true \\ -e REGISTRY_BASIC_AUTH=\"GjhYGDGi2HhkJB\" \\ -e REGISTRY_NAME=192.168.99.146:5000 \\ hyper/docker-registry-web ","date":"2021-12-22","objectID":"/docker-registry/:2:0","tags":["docker"],"title":"æ­å»ºdocker registry é•œåƒä»“åº“","uri":"/docker-registry/"},{"categories":["docker"],"content":"ä¸Šä¼ å®¹å™¨ vim /etc/docker/daemon.json { \"insecure-registries\": [\"192.168.99.146:5000\"] } docker tag sjtfreaks/hogo-nginx:v1.1 192.168.99.146:5000/sjtfreaks/hogo-nginx:v1.1 docker push 192.168.99.146:5000/sjtfreaks/hogo-nginx:v1.1 ","date":"2021-12-22","objectID":"/docker-registry/:3:0","tags":["docker"],"title":"æ­å»ºdocker registry é•œåƒä»“åº“","uri":"/docker-registry/"},{"categories":["æ—¥å¸¸"],"content":"rsync æ–‡ä»¶åŒæ­¥ rsync æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„Linuxåº”ç”¨ç¨‹åºï¼Œç”¨äºæ–‡ä»¶åŒæ­¥ ","date":"2021-12-20","objectID":"/rsync/:0:0","tags":["daliy","rsync"],"title":"rsync æ–‡ä»¶åŒæ­¥","uri":"/rsync/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£… # Debian or Ubuntu $ sudo apt-get install rsync # Red Hat $ sudo yum install rsync # Arch Linux $ sudo pacman -S rsync ","date":"2021-12-20","objectID":"/rsync/:1:0","tags":["daliy","rsync"],"title":"rsync æ–‡ä»¶åŒæ­¥","uri":"/rsync/"},{"categories":["æ—¥å¸¸"],"content":"åŸºæœ¬ç”¨æ³• ä½¿ç”¨ rsync å‘½ä»¤æ—¶ï¼Œå¯ä»¥ä½œä¸ºcpå’Œmvå‘½ä»¤çš„æ›¿ä»£æ–¹æ³•ï¼Œå°†æºç›®å½•åŒæ­¥åˆ°ç›®æ ‡ç›®å½•ã€‚ -r è¡¨ç¤ºé€’å½’ï¼Œå³åŒ…å«å­ç›®å½•ã€‚æ³¨æ„ï¼Œ-ræ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ rsync è¿è¡Œä¸ä¼šæˆåŠŸã€‚sourceç›®å½•è¡¨ç¤ºæºç›®å½•ï¼Œdestinationè¡¨ç¤ºç›®æ ‡ç›®å½•ã€‚ -a å‚æ•°å¯ä»¥æ›¿ä»£-rï¼Œé™¤äº†å¯ä»¥é€’å½’åŒæ­¥ä»¥å¤–ï¼Œè¿˜å¯ä»¥åŒæ­¥å…ƒä¿¡æ¯ï¼ˆæ¯”å¦‚ä¿®æ”¹æ—¶é—´ã€æƒé™ç­‰ï¼‰ã€‚ç”±äº rsync é»˜è®¤ä½¿ç”¨æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´å†³å®šæ–‡ä»¶æ˜¯å¦éœ€è¦æ›´æ–° rsync -r source destination è¿œç¨‹åŒæ­¥ rsync -av \u003cæºåœ°å€\u003e/ \u003cç”¨æˆ·å\u003e@\u003cipåœ°å€\u003e:/\u003cç›®æ ‡åœ°å€\u003e å‹æƒ…åœ°å€ï¼šmysqlè¿ç§» ","date":"2021-12-20","objectID":"/rsync/:2:0","tags":["daliy","rsync"],"title":"rsync æ–‡ä»¶åŒæ­¥","uri":"/rsync/"},{"categories":["k8s"],"content":"helm å®‰è£… ","date":"2021-12-16","objectID":"/helm/:0:0","tags":["k8s"],"title":"helm å®‰è£…","uri":"/helm/"},{"categories":["k8s"],"content":"è„šæœ¬å®‰è£… curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 chmod 700 get_helm.sh ./get_helm.sh #æˆ–è€…å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash helm help ","date":"2021-12-16","objectID":"/helm/:1:0","tags":["k8s"],"title":"helm å®‰è£…","uri":"/helm/"},{"categories":["k8s"],"content":"äºŒè¿›åˆ¶å®‰è£… wget https://get.helm.sh/helm-v3.7.2-linux-amd64.tar.gz tar -zxvf helm-v3.7.2-linux-amd64.tar.gz cd helm-v3.7.2-linux-amd64 mv linux-amd64/helm /usr/local/bin/helm helm help ","date":"2021-12-16","objectID":"/helm/:2:0","tags":["k8s"],"title":"helm å®‰è£…","uri":"/helm/"},{"categories":["k8s"],"content":"k8s éƒ¨ç½²lokiæ—¥å¿— ","date":"2021-12-16","objectID":"/k8sloki/:0:0","tags":["k8s"],"title":"k8s éƒ¨ç½²lokiæ—¥å¿—","uri":"/k8sloki/"},{"categories":["k8s"],"content":"helm æ‹‰å–loki #åŠ æº helm repo add grafana https://grafana.github.io/helm-charts helm repo update #æ‹‰å– helm fetch grafana/loki-stack --untar --untardir . cd loki-stack # ç”Ÿæˆ k8s é…ç½® helm template loki . \u003e loki.yaml # éƒ¨ç½²ï¼ˆå¦‚æœè¦ä¿®æ”¹é»˜è®¤é…ç½®å¿…é¡»è¦ä¿®æ”¹ä¸€ä¸‹yamlï¼‰ k3s kubectl apply -f loki.yaml ","date":"2021-12-16","objectID":"/k8sloki/:1:0","tags":["k8s"],"title":"k8s éƒ¨ç½²lokiæ—¥å¿—","uri":"/k8sloki/"},{"categories":["æ—¥å¸¸"],"content":"è‡ªåŠ¨åˆ¤æ–­è·³è½¬ä¸åŒç½‘ç«™ æ ¹æ®ç”¨æˆ·ç›®å‰çš„æµè§ˆå™¨é…ç½®è¯­è¨€è¿›è¡Œæ˜¾ç¤º ä¾›è¯­è¨€åˆ‡æ¢æŒ‰é’®ï¼Œç”¨æˆ·è‡ªå®šä¹‰é€‰æ‹©ä¸åŒçš„è¯­è¨€æ˜¾ç¤º æ ¹æ®è¯†åˆ«ç”¨æˆ·çš„æµè§ˆå™¨è¯­è¨€ï¼Œè‡ªåŠ¨åˆ¤æ–­å¹¶è·³è½¬åˆ°ç›¸åº”çš„è¯­è¨€ç½‘é¡µï¼Œè®©ä½ çš„ç½‘ç«™æ›´åŠ çµåŠ¨ã€‚ ä»¥ä¸‹éœ€è¦å°†ä»£ç æ”¾åœ¨ HTML çš„å†…å³å¯ï¼Œç„¶åè‡ªè¡Œåˆ¶ä½œå¤šè¯­è¨€é¡µé¢ã€‚ ä»£ç å¦‚ä¸‹ï¼š \u003cscript type=\"text/javascript\"\u003e //è·å–ç”¨æˆ·è¯­è¨€çš„é¡ºåºæ˜¯ //1.è·å–æœ¬åœ°ç¼“å­˜é‡Œçš„å†…å®¹ //2.ç”¨æˆ·æµè§ˆå™¨çš„è¯­è¨€è®¾ç½® //å¦‚æœä¸Šé¢2ä¸ªéƒ½æ²¡æœ‰è·å–åˆ°ï¼Œå°±ç›´æ¥ä½¿ç”¨'en'ä½œä¸ºç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ var language = localStorage.getItem('locale') || window.navigator.language.toLowerCase() || 'en' //æŠŠç”¨æˆ·çš„è¯­è¨€å†™å…¥ç¼“å­˜ï¼Œä¾›ä¸‹æ¬¡è·å–ä½¿ç”¨ localStorage.setItem('locale', language) //åˆ¤æ–­ç”¨æˆ·çš„è¯­è¨€ï¼Œè·³è½¬åˆ°ä¸åŒçš„åœ°æ–¹ if (language.indexOf(\"zh-\") !== -1) { window.location = '/zh-cn/index.html' } else if (language.indexOf('en') !== -1) { window.location = '/en/index.html' } else { //å…¶å®ƒçš„éƒ½ä½¿ç”¨è‹±æ–‡ window.location = '/en/index.html' } \u003c/script\u003e æ ¸å¿ƒä»£ç  å…¶å®æ ¸å¿ƒä»£ç å°±æ˜¯åˆ©ç”¨ navigator çš„ language å±æ€§ navigator.language ","date":"2021-12-16","objectID":"/auto/:0:0","tags":["javascript"],"title":"è·å–ç”¨æˆ·æµè§ˆå™¨é»˜è®¤è¯­è¨€è®¾ç½®ï¼Œè‡ªåŠ¨åˆ¤æ–­è·³è½¬ä¸åŒç½‘ç«™","uri":"/auto/"},{"categories":["æ—¥å¸¸"],"content":"ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆ å¯ä»¥é€šè¿‡è·å–ç”¨æˆ·çš„ IPï¼Œç„¶åæŠŠ IP æ”¾åˆ° IP åº“é‡ŒæŸ¥è¯¢æ‰€åœ¨åœ°ï¼Œä»è€ŒåŠ è½½å¯¹åº”çš„èµ„æºï¼Œè¿™æ ·çš„æ–¹æ¡ˆå›æ›´åŠ å‡†ç¡®ï¼æœ‰çš„ç¬¬ä¸‰æ–¹ä¼šç›´æ¥è¿”å›æ‰€åœ¨å›½å®¶çš„ç¼–ç ï¼Œæ¯”å¦‚ cn / en ç­‰å°±æ›´å¥½äº† ä½†æ˜¯è¿™æ ·çš„æ–¹æ¡ˆä¹Ÿæœ‰ä¸€ä¸ªå¼Šç«¯ï¼šå¦‚æœç”¨æˆ·é€šè¿‡ç§‘å­¦ä¸Šç½‘ï¼Œå…¨å±€æ¨¡å¼ä¸‹ï¼Œä¼šè¢«è®¤ä¸ºå±äºç¾å›½ / æ—¥æœ¬ç­‰ç­‰ï¼ˆçœ‹æ¢¯å­çš„ IP è€Œå®šäº†ï¼‰ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´è®¿é—®éå¸¸æ…¢ï¼›ä½†æ˜¯è¿™ç§åå·®ï¼Œå¾ˆå¤šç¿»å¢™çš„äººéƒ½æ˜¯äº†è§£çš„ï¼Œæ²¡äººä¼šæ•…æ„ç”¨ç¾å›½çš„ IP è®¿é—®å›½å†…çš„æ·˜å® / ç™¾åº¦ç­‰ç½‘ç«™çš„ï¼Œé™¤éæ˜¯å¿˜è®°åˆ‡æ¢å›æ¥äº†ï¼› IP åˆ¤æ–­ å¸‚åœºä¸Šæœ‰å¾ˆå¤š IP åˆ¤æ–­çš„ï¼Œæ‹¿ IP å€’æ˜¯éå¸¸å¥½åšçš„ä¸€ä»¶äº‹ï¼›æ¯”å¦‚æˆ‘ç°åœ¨å¯ä»¥æ‹¿åˆ°ç”¨æˆ·è®¿é—®æœ¬ç½‘ç«™æ—¶å€™çš„ IPï¼› æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2021-12-16","objectID":"/auto/:1:0","tags":["javascript"],"title":"è·å–ç”¨æˆ·æµè§ˆå™¨é»˜è®¤è¯­è¨€è®¾ç½®ï¼Œè‡ªåŠ¨åˆ¤æ–­è·³è½¬ä¸åŒç½‘ç«™","uri":"/auto/"},{"categories":["åŸºç¡€"],"content":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯† ","date":"2021-12-15","objectID":"/service/:0:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"1ã€å“ªäº›è®¾ç½®èƒ½å¤Ÿæå‡SSHè¿œç¨‹ç®¡ç†çš„å®‰å…¨ç­‰çº§ ","date":"2021-12-15","objectID":"/service/:1:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"2ã€sshè¿æ¥æ—¶è®¤è¯æ—¶é—´è¿‡é•¿å¦‚ä½•è§£å†³ï¼Ÿ ","date":"2021-12-15","objectID":"/service/:2:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"3ã€scpå’Œrsyncè¿›è¡Œè¿œç¨‹æ–‡ä»¶å¤åˆ¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ","date":"2021-12-15","objectID":"/service/:3:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"4ã€è¯·æè¿°é€šè¿‡DHCPæœåŠ¡å™¨è·å–IPåœ°å€çš„è¿‡ç¨‹ã€‚ ","date":"2021-12-15","objectID":"/service/:4:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"5ã€ç®€å•æè¿°FTPçš„ä¸»åŠ¨æ¨¡å¼å’Œè¢«åŠ¨æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ ","date":"2021-12-15","objectID":"/service/:5:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"6ã€é›†ç¾¤ç¯å¢ƒä¸­ï¼Œå¦‚ä½•ä¿è¯æ‰€æœ‰æœåŠ¡å™¨ä¹‹é—´çš„æ—¶é—´è¯¯å·®è¾ƒå°ã€‚ ","date":"2021-12-15","objectID":"/service/:6:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"7ã€è¯·æè¿°ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶DNSçš„è§£æè¿‡ç¨‹ã€‚ ","date":"2021-12-15","objectID":"/service/:7:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"8ã€è§£é‡Šæƒå¨DNSå’Œé€’å½’DNSçš„å«ä¹‰ï¼Œå¹¶æè¿°æ™ºèƒ½DNSçš„å®ç°åŸç†ã€‚ ","date":"2021-12-15","objectID":"/service/:8:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"9ã€å…¬å¸é‡Œæœ‰ä¸€å°æœåŠ¡å™¨ï¼Œéœ€è¦åœ¨ä¸Šé¢è·‘ä¸¤ä¸ªç½‘ç«™ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªç½‘ç«™éœ€è¦æ›´æ¢æ–°åŸŸåï¼Œè¯·é—®å¦‚ä½•å¤„ç†ï¼Ÿ ç½‘ç«™1ï¼šwww.a.com ç½‘ç«™2ï¼šwww.b.comï¼ˆæ—§ï¼‰ www.d.comï¼ˆæ–°ï¼‰ 10ã€ç®€è¿°Apacheçš„ä¸‰ç§å·¥ä½œæ¨¡å¼ï¼Ÿ 11ã€è¯·å†™å‡ºå·¥ä½œä¸­å¸¸è§çš„Apacheä¼˜åŒ–ç­–ç•¥ã€‚ 12ã€æœ‰å“ªäº›æŠ€æœ¯å¯ä»¥æé«˜ç½‘ç«™çš„å®‰å…¨å’Œæ•ˆç‡ï¼Ÿ 13ã€Apacheå’ŒNginxå„æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ 14ã€ä¸ºä»€ä¹ˆNginxçš„å¹¶å‘èƒ½åŠ›å¼ºï¼Œèµ„æºæ¶ˆè€—ä½ï¼Ÿ 15ã€å†™å‡ºå‡ ä¸ªNginxçš„å¸¸ç”¨æ¨¡å—ï¼Œå¹¶æè¿°å…¶åŠŸèƒ½ã€‚ 16ã€è¯·è§£é‡ŠNginxæ˜¯å¦‚ä½•è¿æ¥PHPè¿›è¡Œé¡µé¢è§£æçš„ï¼Ÿ 17ã€è¯·æè¿°Nginxå’ŒTomcatä¹‹é—´çš„æ•°æ®ä¼ è¾“è¿‡ç¨‹ï¼Ÿ 18ã€è¯·å†™å‡ºå‡ ä¸ªå¸¸è§çš„HTTPçŠ¶æ€ç ï¼Œå¹¶è§£é‡Šå‡ºç°åŸå› ã€‚ ","date":"2021-12-15","objectID":"/service/:9:0","tags":["è¿ç»´"],"title":"linuxæœåŠ¡åŸºç¡€çŸ¥è¯†","uri":"/service/"},{"categories":["åŸºç¡€"],"content":"mysqlåŸºç¡€çŸ¥è¯† ","date":"2021-12-15","objectID":"/mysql/:0:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"1ã€åº“è¡¨student.report,æœ‰3ä¸ªå­—æ®µï¼Œå§“åã€å­¦ç§‘ã€æˆç»©ï¼Œè®°å½•å¦‚ä¸‹ï¼Œæ ¹æ®è¦æ±‚å®ŒæˆSQLè¯­å¥ï¼š Name Subject Result æç™½ Math 95 å¼ ä¸‰ English 83 ç‹äº” Math 79 æå…­ Math 85 å¼ äºŒ English 74 æŸ¥è¯¢å§“æçš„åŒå­¦çš„ä¸ªæ•°ã€‚ æŸ¥è¯¢è¡¨ä¸­æ•°å­¦æˆç»©å¤§äº80çš„å‰2ååŒå­¦çš„åå­—ï¼Œå¹¶æŒ‰åˆ†æ•°ä»å¤§åˆ°å°çš„é¡ºåºæ’åˆ—ã€‚ ","date":"2021-12-15","objectID":"/mysql/:1:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"2ã€MYSQLé›†ç¾¤ä¸€ä¸»å¤šä»ï¼Œä¸»åº“å®•æœºï¼Œå¦‚ä½•åˆç†åˆ‡æ¢åˆ°ä»åº“ï¼Œå…¶å®ƒä»åº“å¦‚ä½•å¤„ç†ï¼Ÿ ","date":"2021-12-15","objectID":"/mysql/:2:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"3ã€å•å°MySQLè¾¾åˆ°æ€§èƒ½ç“¶é¢ˆæ—¶ï¼Œå¦‚ä½•å‡»ç¢æ€§èƒ½ç“¶é¢ˆï¼Ÿ ","date":"2021-12-15","objectID":"/mysql/:3:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"4ã€MySQLä»€ä¹ˆæ—¶å€™åˆ›å»ºç´¢å¼•ï¼Ÿ ","date":"2021-12-15","objectID":"/mysql/:4:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"5ã€è¯¯æ“ä½œdropè¯­å¥å¯¼è‡´æ•°æ®åº“æ•°æ®ç ´åï¼Œè¯·ç»™å‡ºæ¢å¤çš„å®é™…å¤§ä½“æ­¥éª¤ã€‚ ","date":"2021-12-15","objectID":"/mysql/:5:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"6ã€å¦‚ä½•ä¿è¯Redisèƒ½æ°¸ä¹…ä¿å­˜æ•°æ®ï¼Ÿ ","date":"2021-12-15","objectID":"/mysql/:6:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"7ã€å¦‚ä½•åˆ©ç”¨Rediså¯¹MySQLè¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Ÿ ","date":"2021-12-15","objectID":"/mysql/:7:0","tags":["è¿ç»´"],"title":"mysqlåŸºç¡€çŸ¥è¯†","uri":"/mysql/"},{"categories":["åŸºç¡€"],"content":"shellåŸºç¡€çŸ¥è¯† ","date":"2021-12-15","objectID":"/shell/:0:0","tags":["è¿ç»´"],"title":"shellåŸºç¡€çŸ¥è¯†","uri":"/shell/"},{"categories":["åŸºç¡€"],"content":"1ã€æœ‰ä¸€ä¸ªb.txtæ–‡æœ¬(å†…å®¹å¦‚ä¸‹)ï¼Œè¦æ±‚å°†æ‰€æœ‰åŸŸåæˆªå–å‡ºæ¥ï¼Œå¹¶ç»Ÿè®¡é‡å¤åŸŸåå‡ºç°çš„æ¬¡æ•°ï¼š http://www.baidu.com/index.html https://www.atguigu.com/index.html http://www.sina.com.cn/1024.html https://www.atguigu.com/2048.html http://www.sina.com.cn/4096.html https://www.atguigu.com/8192.html ","date":"2021-12-15","objectID":"/shell/:1:0","tags":["è¿ç»´"],"title":"shellåŸºç¡€çŸ¥è¯†","uri":"/shell/"},{"categories":["åŸºç¡€"],"content":"2ã€ç»Ÿè®¡å½“å‰æœåŠ¡å™¨æ­£åœ¨è¿æ¥çš„IPåœ°å€ï¼Œå¹¶æŒ‰è¿æ¥æ¬¡æ•°æ’åº ","date":"2021-12-15","objectID":"/shell/:2:0","tags":["è¿ç»´"],"title":"shellåŸºç¡€çŸ¥è¯†","uri":"/shell/"},{"categories":["åŸºç¡€"],"content":"3ã€ä½¿ç”¨å¾ªç¯åœ¨/atguiguç›®å½•ä¸‹åˆ›å»º10ä¸ªtxtæ–‡ä»¶ï¼Œè¦æ±‚æ–‡ä»¶åç§°ç”±6ä½éšæœºå°å†™å­—æ¯åŠ å›ºå®šå­—ç¬¦ä¸²ï¼ˆ_ggï¼‰ç»„æˆï¼Œä¾‹å¦‚ï¼špzjebg_gg.txtã€‚ ","date":"2021-12-15","objectID":"/shell/:3:0","tags":["è¿ç»´"],"title":"shellåŸºç¡€çŸ¥è¯†","uri":"/shell/"},{"categories":["åŸºç¡€"],"content":"4ã€ç”Ÿæˆéšæœºæ•°å­—ã€‚ ","date":"2021-12-15","objectID":"/shell/:4:0","tags":["è¿ç»´"],"title":"shellåŸºç¡€çŸ¥è¯†","uri":"/shell/"},{"categories":["åŸºç¡€"],"content":"5ã€æ‰¹é‡æ£€æŸ¥å¤šä¸ªç½‘ç«™æ˜¯å¦å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œè¦æ±‚ä½¿ç”¨shellæ•°ç»„å®ç°ï¼Œæ£€æµ‹ç­–ç•¥å°½é‡æ¨¡æ‹Ÿç”¨æˆ·çœŸå®è®¿é—®æ¨¡å¼ã€‚ http://www.atguigu.com http://www.gulixueyuan.com http://www.baidu.com ","date":"2021-12-15","objectID":"/shell/:5:0","tags":["è¿ç»´"],"title":"shellåŸºç¡€çŸ¥è¯†","uri":"/shell/"},{"categories":["k8s"],"content":"Kubernetes åˆ›å»ºnfså­˜å‚¨ç±» é¦–å…ˆä½ éœ€è¦åœ¨åˆ«çš„ç»ˆç«¯ä¸Šåˆ›å»ºnfsæœåŠ¡å¹¶èƒ½æä¾›nfsè®¿é—® Kubernetes ä¸åŒ…å«å†…éƒ¨ NFS é©±åŠ¨ã€‚ä½ éœ€è¦ä½¿ç”¨å¤–éƒ¨é©±åŠ¨ä¸º NFS åˆ›å»º StorageClassã€‚ https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner å®‰è£…nfsé©±åŠ¨ ","date":"2021-12-13","objectID":"/k8snfs/:0:0","tags":["k8s"],"title":"Kubernetes åˆ›å»ºnfså­˜å‚¨ç±»","uri":"/k8snfs/"},{"categories":["k8s"],"content":"å®‰è£…nfsé©±åŠ¨ #å®‰è£…nfså®¢æˆ·ç«¯ apt-get install nfs-common git clone https://github.com/kubernetes-sigs/nfs-subdir-external-provisioner.git cd nfs-subdir-external-provisioner/deploy k3s kubectl create -f rbac.yaml vim deployment.yaml ç¼–è¾‘ deployment.yaml apiVersion: apps/v1 kind: Deployment metadata: name: nfs-client-provisioner labels: app: nfs-client-provisioner # replace with namespace where provisioner is deployed namespace: default spec: replicas: 1 strategy: type: Recreate selector: matchLabels: app: nfs-client-provisioner template: metadata: labels: app: nfs-client-provisioner spec: serviceAccountName: nfs-client-provisioner containers: - name: nfs-client-provisioner image: k8s.gcr.io/sig-storage/nfs-subdir-external-provisioner:v4.0.2 volumeMounts: - name: nfs-client-root mountPath: /persistentvolumes env: - name: PROVISIONER_NAME value: k8s-sigs.io/nfs-subdir-external-provisioner - name: NFS_SERVER value: 192.168.99.235 - name: NFS_PATH value: /volume2/nfs-k8s volumes: - name: nfs-client-root nfs: server: 192.168.99.235 path: /volume2/nfs-k8s å®šä¹‰å­˜å‚¨ç±» k3s kubectl create -f deployment.yaml k3s kubectl create -f class.yaml ","date":"2021-12-13","objectID":"/k8snfs/:1:0","tags":["k8s"],"title":"Kubernetes åˆ›å»ºnfså­˜å‚¨ç±»","uri":"/k8snfs/"},{"categories":["k8s"],"content":"æµ‹è¯•å­˜å‚¨æ˜¯å¦æ­£å¸¸ k3s kubectl create -f test-claim.yaml -f test-pod.yaml k3s kubectl delete -f test-claim.yaml -f test-pod.yaml ","date":"2021-12-13","objectID":"/k8snfs/:2:0","tags":["k8s"],"title":"Kubernetes åˆ›å»ºnfså­˜å‚¨ç±»","uri":"/k8snfs/"},{"categories":["k8s"],"content":"åˆ›å»ºæœ‰çŠ¶æ€podsï¼ˆmysqlï¼‰ åˆ›å»ºmysql-deployment.yaml apiVersion: v1 kind: Service metadata: name: mysql spec: ports: - port: 3306 targetPort: 3306 selector: app: mysql clusterIP: None type: LoadBalancer --- apiVersion: apps/v1 kind: Deployment metadata: name: mysql spec: selector: matchLabels: app: mysql strategy: type: Recreate template: metadata: labels: app: mysql spec: containers: - image: mysql:5.7 name: mysql env: # Use secret in real usage - name: MYSQL_ROOT_PASSWORD value: password ports: - containerPort: 3306 name: mysql volumeMounts: - name: mysql-persistent-storage mountPath: /var/lib/mysql volumes: - name: mysql-persistent-storage persistentVolumeClaim: claimName: mysql-pv-claim åˆ›å»ºmysql-pv.yaml apiVersion: v1 kind: PersistentVolume metadata: name: mysql-pv-volume spec: storageClassName: managed-nfs-storage capacity: storage: 20Gi accessModes: - ReadWriteOnce nfs: server: 192.168.99.235 path: \"/volume2/nfs-k8s\" --- apiVersion: v1 kind: PersistentVolumeClaim metadata: name: mysql-pv-claim spec: storageClassName: managed-nfs-storage accessModes: - ReadWriteMany resources: requests: storage: 20Gi ","date":"2021-12-13","objectID":"/k8snfs/:3:0","tags":["k8s"],"title":"Kubernetes åˆ›å»ºnfså­˜å‚¨ç±»","uri":"/k8snfs/"},{"categories":["k8s"],"content":"éƒ¨ç½² mysql k3s kubectl apply -f mysql-pv.yaml k3s kubectl apply -f mysql-deployment.yaml k3s kubectl describe deployment mysql ","date":"2021-12-13","objectID":"/k8snfs/:4:0","tags":["k8s"],"title":"Kubernetes åˆ›å»ºnfså­˜å‚¨ç±»","uri":"/k8snfs/"},{"categories":["web æœåŠ¡å™¨"],"content":"nginx æ—¥å¿—é…ç½® ","date":"2021-12-13","objectID":"/nginx01/:0:0","tags":["nginx","linux"],"title":"nginx æ—¥å¿—æ ¼å¼æ•´ç†","uri":"/nginx01/"},{"categories":["web æœåŠ¡å™¨"],"content":"è¯­æ³• access_log path [format [buffer=size] [gzip[=level]] [flush=time] [if=condition]]; # è®¾ç½®è®¿é—®æ—¥å¿— access_log off; # å…³é—­è®¿é—®æ—¥å¿— ä¾‹å­ï¼š access_log /var/logs/nginx-access.log access_log /var/logs/nginx-access.log buffer=32k gzip flush=1m ","date":"2021-12-13","objectID":"/nginx01/:1:0","tags":["nginx","linux"],"title":"nginx æ—¥å¿—æ ¼å¼æ•´ç†","uri":"/nginx01/"},{"categories":["web æœåŠ¡å™¨"],"content":"ä½¿ç”¨log_format è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ Nginxé¢„å®šä¹‰äº†åä¸ºcombinedæ—¥å¿—æ ¼å¼ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å®šæ—¥å¿—æ ¼å¼é»˜è®¤ä½¿ç”¨è¯¥æ ¼å¼ï¼š log_format combined '$remote_addr - $remote_user [$time_local] ' '\"$request\" $status $body_bytes_sent ' '\"$http_referer\" \"$http_user_agent\"'; å¦‚æœä¸æƒ³ä½¿ç”¨Nginxé¢„å®šä¹‰çš„æ ¼å¼ï¼Œå¯ä»¥é€šè¿‡log_formatæŒ‡ä»¤æ¥è‡ªå®šä¹‰ã€‚ ","date":"2021-12-13","objectID":"/nginx01/:2:0","tags":["nginx","linux"],"title":"nginx æ—¥å¿—æ ¼å¼æ•´ç†","uri":"/nginx01/"},{"categories":["web æœåŠ¡å™¨"],"content":"è¯­æ³• log_format name [escape=default|json] string ...; å˜é‡ å«ä¹‰ $bytes_sent å‘é€ç»™å®¢æˆ·ç«¯çš„æ€»å­—èŠ‚æ•° $body_bytes_sent å‘é€ç»™å®¢æˆ·ç«¯çš„å­—èŠ‚æ•°ï¼Œä¸åŒ…æ‹¬å“åº”å¤´çš„å¤§å° $connection è¿æ¥åºåˆ—å· $connection_requests å½“å‰é€šè¿‡è¿æ¥å‘å‡ºçš„è¯·æ±‚æ•°é‡ $msec æ—¥å¿—å†™å…¥æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œç²¾åº¦æ˜¯æ¯«ç§’ $pipe å¦‚æœè¯·æ±‚æ˜¯é€šè¿‡httpæµæ°´çº¿å‘é€ï¼Œåˆ™å…¶å€¼ä¸º\"p\"ï¼Œå¦åˆ™ä¸ºâ€œ.\" $request_length è¯·æ±‚é•¿åº¦ï¼ˆåŒ…æ‹¬è¯·æ±‚è¡Œï¼Œè¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼‰ $request_time è¯·æ±‚å¤„ç†æ—¶é•¿ï¼Œå•ä½ä¸ºç§’ï¼Œç²¾åº¦ä¸ºæ¯«ç§’ï¼Œä»è¯»å…¥å®¢æˆ·ç«¯çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ï¼Œç›´åˆ°æŠŠæœ€åä¸€ä¸ªå­—ç¬¦å‘é€å¼ å®¢æˆ·ç«¯è¿›è¡Œæ—¥å¿—å†™å…¥ä¸ºæ­¢ $status å“åº”çŠ¶æ€ç  $time_iso8601 æ ‡å‡†æ ¼å¼çš„æœ¬åœ°æ—¶é—´,å½¢å¦‚â€œ2017-05-24T18:31:27+08:00â€ $time_local é€šç”¨æ—¥å¿—æ ¼å¼ä¸‹çš„æœ¬åœ°æ—¶é—´ï¼Œå¦‚\"24/May/2017:18:31:27 +0800\" $http_referer è¯·æ±‚çš„refereråœ°å€ã€‚ $http_user_agent å®¢æˆ·ç«¯æµè§ˆå™¨ä¿¡æ¯ã€‚ $remote_addr å®¢æˆ·ç«¯IP $http_x_forwarded_for å½“å‰ç«¯æœ‰ä»£ç†æœåŠ¡å™¨æ—¶ï¼Œè®¾ç½®webèŠ‚ç‚¹è®°å½•å®¢æˆ·ç«¯åœ°å€çš„é…ç½®ï¼Œæ­¤å‚æ•°ç”Ÿæ•ˆçš„å‰ææ˜¯ä»£ç†æœåŠ¡å™¨ä¹Ÿè¦è¿›è¡Œç›¸å…³çš„x_forwarded_forè®¾ç½®ã€‚ $request å®Œæ•´çš„åŸå§‹è¯·æ±‚è¡Œï¼Œå¦‚ â€œGET / HTTP/1.1â€ $remote_user å®¢æˆ·ç«¯ç”¨æˆ·åç§°ï¼Œé’ˆå¯¹å¯ç”¨äº†ç”¨æˆ·è®¤è¯çš„è¯·æ±‚ $request_uri å®Œæ•´çš„è¯·æ±‚åœ°å€ï¼Œå¦‚ â€œhttps://daojia.com/\" ä¾‹å­ï¼š access_log /var/logs/nginx-access.log main log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; ","date":"2021-12-13","objectID":"/nginx01/:2:1","tags":["nginx","linux"],"title":"nginx æ—¥å¿—æ ¼å¼æ•´ç†","uri":"/nginx01/"},{"categories":["æ—¥å¸¸"],"content":"linuxç³»ç»Ÿå¼€å¯rootæƒé™ ä¿®æ”¹sshæœåŠ¡é…ç½®æ–‡ä»¶ sudo su - sudo vim /etc/ssh/sshd_config å¢åŠ æƒé™ åœ¨# Authentication: ä¸‹è¾“å…¥ PermitRootLogin yes æ›´æ”¹rootå¯†ç ï¼Œé‡å¯æœåŠ¡ sudo passwd root service sshd restart ","date":"2021-12-12","objectID":"/resetsystem/:0:0","tags":["linux"],"title":"linuxç³»ç»Ÿå¼€å¯rootæƒé™","uri":"/resetsystem/"},{"categories":["æ•°æ®åº“"],"content":"mysql å­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰ æœ¬æ–‡ç« ä¸æ¶‰åŠåˆ°å…³äºmysqlå¼€æ”¾ä¸Šçš„é—®é¢˜ï¼Œä¸»è¦è®°å½•å…³äºmysqlå‡ºç°çš„é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•å»ç»´æŠ¤mysqlæ•°æ®çš„æ—¥å¸¸ã€‚ ","date":"2021-12-12","objectID":"/mysql01/:0:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ1ï¼‰","uri":"/mysql01/"},{"categories":["æ•°æ®åº“"],"content":"mysqlå„ç±»ä¿¡æ¯çš„æ”¶é›† æ”¶é›†å˜é‡ä¿¡æ¯ show global variables; æ”¶é›†è¿›ç¨‹ä¿¡æ¯ show PROCESSLIST; æ”¶é›†é”™è¯¯æ—¥å¿— show global variables like 'log_error'; æ”¶é›†æ…¢æ—¥å¿—ä¿¡æ¯ show global variables like 'slow_querry_log_file'; æ”¶é›†é”ä¿¡æ¯ï¼Œé«˜å³°æ—¶æœŸè¿è¡Œä¸‰æ¬¡ï¼Œæ¯æ¬¡é—´éš”10s SELECT locked_table, locked_index, locked_type, blocking_pid, T2.USER blocking_user, T2.HOST blocking_host, blocking_lock_mode, blocking_trx_rows_modified, waiting_pid, T3.USER waiting_user, T3.HOST waiting_host, waiting_lock_mode, waiting_trx_row_modified, wait_age_secs, waiting_query FROM sys.x$innodb_lock_waits T1 LEFT JOIN INFROMATION_SCHEMA.processlist T2 ON T1.blocking_pid=T2.ID LEFT JOIN INFROMATION_SCHEMA.processlist T3 ON T3.ID=T1.waiting_pid; æ”¶é›†mysqlçŠ¶æ€ä¿¡æ¯ show global status; show engine innodb status; show engine innodb mutex; ","date":"2021-12-12","objectID":"/mysql01/:1:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ1ï¼‰","uri":"/mysql01/"},{"categories":["æ•°æ®åº“"],"content":"mysql åŸºç¡€è¯­æ³• è¿æ¥æ•°æ®åº“ mysql -u \u003cç”¨æˆ·å\u003e -p åˆ›å»ºæ•°æ®åº“ CREATE DATABASE \u003cæ•°æ®åº“åç§°\u003e; åˆ é™¤æ•°æ®åº“ drop database \u003cæ•°æ®åº“åç§°\u003e; é€‰æ‹©æ•°æ®åº“ use \u003cæ•°æ®åº“åç§°\u003e; åˆ›å»ºè¡¨ CREATE table \u003cæ•°æ®è¡¨å\u003e ( \u003cå­—æ®µå1\u003e \u003cæ•°æ®ç±»å‹\u003e [çº¦æŸæ¡ä»¶], \u003cå­—æ®µå2\u003e \u003cæ•°æ®ç±»å‹\u003e [çº¦æŸæ¡ä»¶], \u003cå­—æ®µå3\u003e \u003cæ•°æ®ç±»å‹\u003e [çº¦æŸæ¡ä»¶] ) #ä¾‹å¦‚ CREATE TABLE IF NOT EXISTS `nbtyfood_tbl`( `nbtyfood_id` INT UNSIGNED AUTO_INCREMENT, `nbtyfood_title` VARCHAR(100) NOT NULL, `nbtyfood_author` VARCHAR(40) NOT NULL, `submission_date` DATE, PRIMARY KEY ( `nbtyfood_id` ) )ENGINE=InnoDB DEFAULT CHARSET=utf8; åˆ é™¤è¡¨ DROP TABLE \u003cæ•°æ®è¡¨å\u003e; æ’å…¥æ•°æ® INSERT INTO table_name ( field1, field2,...fieldN ) VALUES value1, value2,...valueN ); æ›´æ–°æ•°æ® UPDATE \u003cæ•°æ®è¡¨å\u003e SET \u003cå­—æ®µå1\u003e='æ›´æ–°' WHERE \u003cå­—æ®µå2\u003e=3; åˆ é™¤æ•°æ® DELETE FROM \u003cæ•°æ®è¡¨å\u003e WHERE \u003cå­—æ®µå2\u003e=3; æŸ¥è¯¢æ•°æ® select * from \u003cæ•°æ®è¡¨å\u003e; ","date":"2021-12-12","objectID":"/mysql01/:2:0","tags":["mysql"],"title":"mysql ç¬”è®°ï¼ˆ1ï¼‰","uri":"/mysql01/"},{"categories":["æ—¥å¸¸"],"content":"163ä¼ä¸šé‚®ç®±è®¾ç½®æ•™ç¨‹ è¯·è¿›å…¥è¿™ä¸ªç½‘ç«™ https://qiye.163.com/help/l-11.html ","date":"2021-12-10","objectID":"/qyyemail163/:0:0","tags":["daliy"],"title":"163ä¼ä¸šé‚®ç®±è®¾ç½®æ•™ç¨‹","uri":"/qyyemail163/"},{"categories":["gitlab"],"content":"gitæŠ€å·§ Git æ˜¯ä¸€ä¸ª â€œåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å·¥å…·â€ï¼Œç®€å•çš„ç†è§£ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼šå¤§å®¶åœ¨å†™ä¸œè¥¿çš„æ—¶å€™éƒ½ç”¨è¿‡ â€œå›æ’¤â€ è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯å›æ’¤åªèƒ½å›æ’¤å‡ æ­¥ï¼Œå‡å¦‚æƒ³è¦æ‰¾å›æˆ‘ä¸‰å¤©ä¹‹å‰çš„ä¿®æ”¹ï¼Œå…‰ç”¨ â€œå›æ’¤â€ æ˜¯æ‰¾ä¸å›æ¥çš„ã€‚è€Œ â€œç‰ˆæœ¬ç®¡ç†å·¥å…·â€ èƒ½è®°å½•æ¯æ¬¡çš„ä¿®æ”¹ï¼Œåªè¦æäº¤åˆ°ç‰ˆæœ¬ä»“åº“ï¼Œä½ å°±å¯ä»¥æ‰¾åˆ°ä¹‹å‰ä»»ä½•æ—¶åˆ»çš„çŠ¶æ€ï¼ˆæ–‡æœ¬çŠ¶æ€ï¼‰ã€‚ ä¸‹é¢çš„å†…å®¹å°±æ˜¯åˆ—ä¸¾äº†å¸¸ç”¨çš„ Git å‘½ä»¤å’Œä¸€äº›å°æŠ€å·§ï¼Œå¯ä»¥é€šè¿‡ â€œé¡µé¢å†…æŸ¥æ‰¾â€ çš„æ–¹å¼è¿›è¡Œå¿«é€ŸæŸ¥è¯¢ï¼šCtrl/Command+fã€‚ ","date":"2021-12-10","objectID":"/gitlab/:0:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¼€å·å¿…è¯» å¦‚æœä¹‹å‰æœªä½¿ç”¨è¿‡ Gitï¼Œå¯ä»¥å­¦ä¹  Git å°ç™½æ•™ç¨‹å…¥é—¨ ä¸€å®šè¦å…ˆæµ‹è¯•å‘½ä»¤çš„æ•ˆæœåï¼Œå†ç”¨äºå·¥ä½œç¯å¢ƒä¸­ï¼Œä»¥é˜²é€ æˆä¸èƒ½å¼¥è¡¥çš„åæœï¼åˆ°æ—¶å€™åˆ«æ‹¿ç€ç åˆ€æ¥æ‰¾æˆ‘ æ‰€æœ‰çš„å‘½ä»¤éƒ½åœ¨git version 2.7.4 (Apple Git-66)ä¸‹æµ‹è¯•é€šè¿‡ ç»Ÿä¸€æ¦‚å¿µï¼š å·¥ä½œåŒºï¼šæ”¹åŠ¨ï¼ˆå¢åˆ æ–‡ä»¶å’Œå†…å®¹ï¼‰ æš‚å­˜åŒºï¼šè¾“å…¥å‘½ä»¤ï¼šgit add æ”¹åŠ¨çš„æ–‡ä»¶åï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€˜æš‚å­˜åŒºâ€™ æœ¬åœ°ä»“åº“(ç®€ç§°ï¼šæœ¬åœ°)ï¼šè¾“å…¥å‘½ä»¤ï¼šgit commit æ­¤æ¬¡ä¿®æ”¹çš„æè¿°ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€™æœ¬åœ°ä»“åº“â€™ï¼Œæ¯ä¸ª commitï¼Œæˆ‘å«å®ƒä¸ºä¸€ä¸ª â€˜ç‰ˆæœ¬â€™ã€‚ è¿œç¨‹ä»“åº“(ç®€ç§°ï¼šè¿œç¨‹)ï¼šè¾“å…¥å‘½ä»¤ï¼šgit push è¿œç¨‹ä»“åº“ï¼Œæ­¤æ¬¡æ”¹åŠ¨å°±æ”¾åˆ°äº† â€˜è¿œç¨‹ä»“åº“â€™ï¼ˆGitHub ç­‰) commit-idï¼šè¾“å‡ºå‘½ä»¤ï¼šgit logï¼Œæœ€ä¸Šé¢é‚£è¡Œ commit xxxxxxï¼Œåé¢çš„å­—ç¬¦ä¸²å°±æ˜¯ commit-id å¦‚æœå–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œæ¬¢è¿ Starã€æäº¤ Prã€åé¦ˆé—®é¢˜ğŸ˜Š ","date":"2021-12-10","objectID":"/gitlab/:1:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ç›®å½• è„‘å›¾ å±•ç¤ºå¸®åŠ©ä¿¡æ¯ å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€ é‡è®¾ç¬¬ä¸€ä¸ªcommit æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨ å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ åˆ é™¤å·²ç»åˆå¹¶åˆ° master çš„åˆ†æ”¯ å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ å…³è”è¿œç¨‹åˆ†æ”¯ åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯ æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³» è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤ åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯ ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯ åˆ é™¤æœ¬åœ°åˆ†æ”¯ åˆ é™¤è¿œç¨‹åˆ†æ”¯ é‡å‘½åæœ¬åœ°åˆ†æ”¯ æŸ¥çœ‹æ ‡ç­¾ æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯ æœ¬åœ°åˆ›å»ºæ ‡ç­¾ æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ åˆ é™¤æœ¬åœ°æ ‡ç­¾ åˆ é™¤è¿œç¨‹æ ‡ç­¾ åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾ æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ æ¢å¤åˆ é™¤çš„æ–‡ä»¶ ä»¥æ–°å¢ä¸€ä¸ª commit çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª commit çš„ä¿®æ”¹ å›åˆ°æŸä¸ª commit çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„ commit ä¿®æ”¹ä¸Šä¸€ä¸ª commit çš„æè¿° æŸ¥çœ‹ commit å†å² æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡ HEAD çš„ git å‘½ä»¤è®°å½• ä¿®æ”¹ä½œè€…å ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ url å¢åŠ è¿œç¨‹ä»“åº“ åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“ æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨ æŠŠ A åˆ†æ”¯çš„æŸä¸€ä¸ª commitï¼Œæ”¾åˆ° B åˆ†æ”¯ä¸Š ç»™ git å‘½ä»¤èµ·åˆ«å å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤ commit ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬ untracked çš„æ–‡ä»¶ å±•ç¤ºæ‰€æœ‰ stashes å›åˆ°æŸä¸ª stash çš„çŠ¶æ€ å›åˆ°æœ€åä¸€ä¸ª stash çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª stash åˆ é™¤æ‰€æœ‰çš„ stash ä» stash ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹ å±•ç¤ºæ‰€æœ‰ tracked çš„æ–‡ä»¶ å±•ç¤ºæ‰€æœ‰ untracked çš„æ–‡ä»¶ å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶ å¼ºåˆ¶åˆ é™¤ untracked çš„æ–‡ä»¶ å¼ºåˆ¶åˆ é™¤ untracked çš„ç›®å½• å±•ç¤ºç®€åŒ–çš„ commit å†å² æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„ æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶ ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯ æ‰§è¡Œ rebase ä¹‹å‰è‡ªåŠ¨ stash ä»è¿œç¨‹ä»“åº“æ ¹æ® IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯ è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹ æ¸…é™¤ .gitignore æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶ å±•ç¤ºæ‰€æœ‰ alias å’Œ configs å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶ commit å†å²ä¸­æ˜¾ç¤º Branch1 æœ‰çš„ï¼Œä½†æ˜¯ Branch2 æ²¡æœ‰ commit åœ¨ commit log ä¸­æ˜¾ç¤º GPG ç­¾å åˆ é™¤å…¨å±€è®¾ç½® æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½• commit å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹ clone ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯ clone æœ€æ–°ä¸€æ¬¡æäº¤ å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨ å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ– ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰ Git åˆ†æ”¯ åœ¨ commit log ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹ æŠŠæš‚å­˜åŒºçš„æŒ‡å®š file æ”¾åˆ°å·¥ä½œåŒºä¸­ å¼ºåˆ¶æ¨é€ git é…ç½® http å’Œ socks ä»£ç† git é…ç½® ssh ä»£ç† ä¼˜é›…çš„Commitä¿¡æ¯ commitå·¥å…· å£°æ˜ ","date":"2021-12-10","objectID":"/gitlab/:2:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºå¸®åŠ©ä¿¡æ¯ git help -g The command output as below: The common Git guides are: attributes Defining attributes per path cli Git command-line interface and conventions core-tutorial A Git core tutorial for developers cvs-migration Git for CVS users diffcore Tweaking diff output everyday A useful minimum set of commands for Everyday Git glossary A Git Glossary hooks Hooks used by Git ignore Specifies intentionally untracked files to ignore modules Defining submodule properties namespaces Git namespaces repository-layout Git Repository Layout revisions Specifying revisions and ranges for Git tutorial A tutorial introduction to Git tutorial-2 A tutorial introduction to Git: part two workflows An overview of recommended workflows with Git 'git help -a' and 'git help -g' list available subcommands and some concept guides. See 'git help \u003ccommand\u003e' or 'git help \u003cconcept\u003e' to read about a specific subcommand or concept. ","date":"2021-12-10","objectID":"/gitlab/:3:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€ æŠ›å¼ƒæœ¬åœ°æ‰€æœ‰çš„ä¿®æ”¹ï¼Œå›åˆ°è¿œç¨‹ä»“åº“çš„çŠ¶æ€ã€‚ git fetch --all \u0026\u0026 git reset --hard origin/master ","date":"2021-12-10","objectID":"/gitlab/:4:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"é‡è®¾ç¬¬ä¸€ä¸ª commit ä¹Ÿå°±æ˜¯æŠŠæ‰€æœ‰çš„æ”¹åŠ¨éƒ½é‡æ–°æ”¾å›å·¥ä½œåŒºï¼Œå¹¶æ¸…ç©ºæ‰€æœ‰çš„ commitï¼Œè¿™æ ·å°±å¯ä»¥é‡æ–°æäº¤ç¬¬ä¸€ä¸ª commit äº† git update-ref -d HEAD ","date":"2021-12-10","objectID":"/gitlab/:5:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹å†²çªæ–‡ä»¶åˆ—è¡¨ å±•ç¤ºå·¥ä½œåŒºçš„å†²çªæ–‡ä»¶åˆ—è¡¨ git diff --name-only --diff-filter=U ","date":"2021-12-10","objectID":"/gitlab/:6:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¸åŒ è¾“å‡ºå·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ different (ä¸åŒ)ã€‚ git diff è¿˜å¯ä»¥å±•ç¤ºæœ¬åœ°ä»“åº“ä¸­ä»»æ„ä¸¤ä¸ª commit ä¹‹é—´çš„æ–‡ä»¶å˜åŠ¨ï¼š git diff \u003ccommit-id\u003e \u003ccommit-id\u003e ","date":"2021-12-10","objectID":"/gitlab/:7:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæš‚å­˜åŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ è¾“å‡ºæš‚å­˜åŒºå’Œæœ¬åœ°æœ€è¿‘çš„ç‰ˆæœ¬ (commit) çš„ different (ä¸åŒ)ã€‚ git diff --cached ","date":"2021-12-10","objectID":"/gitlab/:8:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæš‚å­˜åŒºã€å·¥ä½œåŒºå’Œæœ€è¿‘ç‰ˆæœ¬çš„ä¸åŒ è¾“å‡ºå·¥ä½œåŒºã€æš‚å­˜åŒº å’Œæœ¬åœ°æœ€è¿‘çš„ç‰ˆæœ¬ (commit) çš„ different (ä¸åŒ)ã€‚ git diff HEAD ","date":"2021-12-10","objectID":"/gitlab/:9:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¿«é€Ÿåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯ git checkout - ","date":"2021-12-10","objectID":"/gitlab/:10:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤å·²ç»åˆå¹¶åˆ° master çš„åˆ†æ”¯ git branch --merged master | grep -v '^\\*\\| master' | xargs -n 1 git branch -d ","date":"2021-12-10","objectID":"/gitlab/:11:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæœ¬åœ°åˆ†æ”¯å…³è”è¿œç¨‹ä»“åº“çš„æƒ…å†µ git branch -vv ","date":"2021-12-10","objectID":"/gitlab/:12:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å…³è”è¿œç¨‹åˆ†æ”¯ å…³è”ä¹‹åï¼Œgit branch -vv å°±å¯ä»¥å±•ç¤ºå…³è”çš„è¿œç¨‹åˆ†æ”¯åäº†ï¼ŒåŒæ—¶æ¨é€åˆ°è¿œç¨‹ä»“åº“ç›´æ¥ï¼šgit pushï¼Œä¸éœ€è¦æŒ‡å®šè¿œç¨‹ä»“åº“äº†ã€‚ git branch -u origin/mybranch æˆ–è€…åœ¨ push æ—¶åŠ ä¸Š -u å‚æ•° git push origin/mybranch -u ","date":"2021-12-10","objectID":"/gitlab/:13:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯ -r å‚æ•°ç›¸å½“äºï¼šremote git branch -r ","date":"2021-12-10","objectID":"/gitlab/:14:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ—å‡ºæœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯ -a å‚æ•°ç›¸å½“äºï¼šall git branch -a ","date":"2021-12-10","objectID":"/gitlab/:15:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯çš„å¯¹åº”å…³ç³» git remote show origin ","date":"2021-12-10","objectID":"/gitlab/:16:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"è¿œç¨‹åˆ é™¤äº†åˆ†æ”¯æœ¬åœ°ä¹Ÿæƒ³åˆ é™¤ git remote prune origin ","date":"2021-12-10","objectID":"/gitlab/:17:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯ git checkout -b \u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:18:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä»è¿œç¨‹åˆ†æ”¯ä¸­åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯ git checkout -b \u003cbranch-name\u003e origin/\u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:19:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤æœ¬åœ°åˆ†æ”¯ git branch -d \u003clocal-branchname\u003e ","date":"2021-12-10","objectID":"/gitlab/:20:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤è¿œç¨‹åˆ†æ”¯ git push origin --delete \u003cremote-branchname\u003e æˆ–è€… git push origin :\u003cremote-branchname\u003e ","date":"2021-12-10","objectID":"/gitlab/:21:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"é‡å‘½åæœ¬åœ°åˆ†æ”¯ git branch -m \u003cnew-branch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:22:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹æ ‡ç­¾ git tag å±•ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘çš„ tag git describe --tags --abbrev=0 ","date":"2021-12-10","objectID":"/gitlab/:23:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯ git tag -ln ","date":"2021-12-10","objectID":"/gitlab/:24:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æœ¬åœ°åˆ›å»ºæ ‡ç­¾ git tag \u003cversion-number\u003e é»˜è®¤ tag æ˜¯æ‰“åœ¨æœ€è¿‘çš„ä¸€æ¬¡ commit ä¸Šï¼Œå¦‚æœéœ€è¦æŒ‡å®š commit æ‰“ tagï¼š $ git tag -a \u003cversion-number\u003e -m \"v1.0 å‘å¸ƒ(æè¿°)\" \u003ccommit-id\u003e ","date":"2021-12-10","objectID":"/gitlab/:25:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ é¦–å…ˆè¦ä¿è¯æœ¬åœ°åˆ›å»ºå¥½äº†æ ‡ç­¾æ‰å¯ä»¥æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ï¼š git push origin \u003clocal-version-number\u003e ä¸€æ¬¡æ€§æ¨é€æ‰€æœ‰æ ‡ç­¾ï¼ŒåŒæ­¥åˆ°è¿œç¨‹ä»“åº“ï¼š git push origin --tags ","date":"2021-12-10","objectID":"/gitlab/:26:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤æœ¬åœ°æ ‡ç­¾ git tag -d \u003ctag-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:27:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤è¿œç¨‹æ ‡ç­¾ git push origin --delete tag \u003ctagname\u003e ","date":"2021-12-10","objectID":"/gitlab/:28:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ‡å›åˆ°æŸä¸ªæ ‡ç­¾ ä¸€èˆ¬ä¸Šçº¿ä¹‹å‰éƒ½ä¼šæ‰“ tagï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ä¸Šçº¿åå‡ºç°é—®é¢˜ï¼Œæ–¹ä¾¿å¿«é€Ÿå›é€€åˆ°ä¸Šä¸€ç‰ˆæœ¬ã€‚ä¸‹é¢çš„å‘½ä»¤æ˜¯å›åˆ°æŸä¸€æ ‡ç­¾ä¸‹çš„çŠ¶æ€ï¼š git checkout -b branch_name tag_name ","date":"2021-12-10","objectID":"/gitlab/:29:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ”¾å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ git checkout \u003cfile-name\u003e æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼š git checkout . ","date":"2021-12-10","objectID":"/gitlab/:30:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ¢å¤åˆ é™¤çš„æ–‡ä»¶ git rev-list -n 1 HEAD -- \u003cfile_path\u003e #å¾—åˆ° deleting_commit git checkout \u003cdeleting_commit\u003e^ -- \u003cfile_path\u003e #å›åˆ°åˆ é™¤æ–‡ä»¶ deleting_commit ä¹‹å‰çš„çŠ¶æ€ ","date":"2021-12-10","objectID":"/gitlab/:31:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä»¥æ–°å¢ä¸€ä¸ª commit çš„æ–¹å¼è¿˜åŸæŸä¸€ä¸ª commit çš„ä¿®æ”¹ git revert \u003ccommit-id\u003e ","date":"2021-12-10","objectID":"/gitlab/:32:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å›åˆ°æŸä¸ª commit çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤åé¢çš„ commit å’Œ revert çš„åŒºåˆ«ï¼šreset å‘½ä»¤ä¼šæŠ¹å»æŸä¸ª commit id ä¹‹åçš„æ‰€æœ‰ commit git reset \u003ccommit-id\u003e #é»˜è®¤å°±æ˜¯-mixedå‚æ•°ã€‚ git reset --mixed HEAD^ #å›é€€è‡³ä¸Šä¸ªç‰ˆæœ¬ï¼Œå®ƒå°†é‡ç½®HEADåˆ°å¦å¤–ä¸€ä¸ªcommit,å¹¶ä¸”é‡ç½®æš‚å­˜åŒºä»¥ä¾¿å’ŒHEADç›¸åŒ¹é…ï¼Œä½†æ˜¯ä¹Ÿåˆ°æ­¤ä¸ºæ­¢ã€‚å·¥ä½œåŒºä¸ä¼šè¢«æ›´æ”¹ã€‚ git reset --soft HEAD~3 #å›é€€è‡³ä¸‰ä¸ªç‰ˆæœ¬ä¹‹å‰ï¼Œåªå›é€€äº†commitçš„ä¿¡æ¯ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å›é€€ä¹‹å‰ä¿æŒä¸€è‡´ã€‚å¦‚æœè¿˜è¦æäº¤ï¼Œç›´æ¥commitå³å¯ git reset --hard \u003ccommit-id\u003e #å½»åº•å›é€€åˆ°æŒ‡å®šcommit-idçš„çŠ¶æ€ï¼Œæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¹Ÿä¼šå˜ä¸ºæŒ‡å®šcommit-idç‰ˆæœ¬çš„å†…å®¹ ","date":"2021-12-10","objectID":"/gitlab/:33:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä¿®æ”¹ä¸Šä¸€ä¸ª commit çš„æè¿° å¦‚æœæš‚å­˜åŒºæœ‰æ”¹åŠ¨ï¼ŒåŒæ—¶ä¹Ÿä¼šå°†æš‚å­˜åŒºçš„æ”¹åŠ¨æäº¤åˆ°ä¸Šä¸€ä¸ª commit git commit --amend ","date":"2021-12-10","objectID":"/gitlab/:34:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹ commit å†å² git log ","date":"2021-12-10","objectID":"/gitlab/:35:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹æŸæ®µä»£ç æ˜¯è°å†™çš„ blame çš„æ„æ€ä¸ºâ€˜è´£æ€ªâ€™ï¼Œä½ æ‡‚çš„ã€‚ git blame \u003cfile-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:36:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ˜¾ç¤ºæœ¬åœ°æ›´æ–°è¿‡ HEAD çš„ git å‘½ä»¤è®°å½• æ¯æ¬¡æ›´æ–°äº† HEAD çš„ git å‘½ä»¤æ¯”å¦‚ commitã€amendã€cherry-pickã€resetã€revert ç­‰éƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ï¼ˆä¸é™åˆ†æ”¯ï¼‰ï¼Œå°±åƒ shell çš„ history ä¸€æ ·ã€‚ è¿™æ ·ä½ å¯ä»¥ reset åˆ°ä»»ä½•ä¸€æ¬¡æ›´æ–°äº† HEAD çš„æ“ä½œä¹‹åï¼Œè€Œä¸ä»…ä»…æ˜¯å›åˆ°å½“å‰åˆ†æ”¯ä¸‹çš„æŸä¸ª commit ä¹‹åçš„çŠ¶æ€ã€‚ git reflog ","date":"2021-12-10","objectID":"/gitlab/:37:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä¿®æ”¹ä½œè€…å git commit --amend --author='Author Name \u003cemail@address.com\u003e' ","date":"2021-12-10","objectID":"/gitlab/:38:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä¿®æ”¹è¿œç¨‹ä»“åº“çš„ url git remote set-url origin \u003cURL\u003e ","date":"2021-12-10","objectID":"/gitlab/:39:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¢åŠ è¿œç¨‹ä»“åº“ git remote add origin \u003cremote-url\u003e ","date":"2021-12-10","objectID":"/gitlab/:40:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“ git remote ","date":"2021-12-10","objectID":"/gitlab/:41:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŸ¥çœ‹ä¸¤ä¸ªæ˜ŸæœŸå†…çš„æ”¹åŠ¨ git whatchanged --since='2 weeks ago' ","date":"2021-12-10","objectID":"/gitlab/:42:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŠŠ A åˆ†æ”¯çš„æŸä¸€ä¸ª commitï¼Œæ”¾åˆ° B åˆ†æ”¯ä¸Š è¿™ä¸ªè¿‡ç¨‹éœ€è¦ cherry-pick å‘½ä»¤ï¼Œå‚è€ƒ git checkout \u003cbranch-name\u003e \u0026\u0026 git cherry-pick \u003ccommit-id\u003e ","date":"2021-12-10","objectID":"/gitlab/:43:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ç»™ git å‘½ä»¤èµ·åˆ«å ç®€åŒ–å‘½ä»¤ git config --global alias.\u003chandle\u003e \u003ccommand\u003e æ¯”å¦‚ï¼šgit status æ”¹æˆ git stï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–å‘½ä»¤ git config --global alias.st status ","date":"2021-12-10","objectID":"/gitlab/:44:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å­˜å‚¨å½“å‰çš„ä¿®æ”¹ï¼Œä½†ä¸ç”¨æäº¤ commit è¯¦è§£å¯ä»¥å‚è€ƒå»–é›ªå³°è€å¸ˆçš„ git æ•™ç¨‹ git stash ","date":"2021-12-10","objectID":"/gitlab/:45:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä¿å­˜å½“å‰çŠ¶æ€ï¼ŒåŒ…æ‹¬ untracked çš„æ–‡ä»¶ untracked æ–‡ä»¶ï¼šæ–°å»ºçš„æ–‡ä»¶ git stash -u ","date":"2021-12-10","objectID":"/gitlab/:46:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæ‰€æœ‰ stashes git stash list ","date":"2021-12-10","objectID":"/gitlab/:47:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å›åˆ°æŸä¸ª stash çš„çŠ¶æ€ git stash apply \u003cstash@{n}\u003e ","date":"2021-12-10","objectID":"/gitlab/:48:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å›åˆ°æœ€åä¸€ä¸ª stash çš„çŠ¶æ€ï¼Œå¹¶åˆ é™¤è¿™ä¸ª stash git stash pop ","date":"2021-12-10","objectID":"/gitlab/:49:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤æ‰€æœ‰çš„ stash git stash clear ","date":"2021-12-10","objectID":"/gitlab/:50:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä» stash ä¸­æ‹¿å‡ºæŸä¸ªæ–‡ä»¶çš„ä¿®æ”¹ git checkout \u003cstash@{n}\u003e -- \u003cfile-path\u003e ","date":"2021-12-10","objectID":"/gitlab/:51:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæ‰€æœ‰ tracked çš„æ–‡ä»¶ git ls-files -t ","date":"2021-12-10","objectID":"/gitlab/:52:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæ‰€æœ‰ untracked çš„æ–‡ä»¶ git ls-files --others ","date":"2021-12-10","objectID":"/gitlab/:53:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæ‰€æœ‰å¿½ç•¥çš„æ–‡ä»¶ git ls-files --others -i --exclude-standard ","date":"2021-12-10","objectID":"/gitlab/:54:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¼ºåˆ¶åˆ é™¤ untracked çš„æ–‡ä»¶ å¯ä»¥ç”¨æ¥åˆ é™¤æ–°å»ºçš„æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®šæ–‡ä»¶æ–‡ä»¶åï¼Œåˆ™æ¸…ç©ºæ‰€æœ‰å·¥ä½œçš„ untracked æ–‡ä»¶ã€‚clean å‘½ä»¤ï¼Œæ³¨æ„ä¸¤ç‚¹ï¼š clean åï¼Œåˆ é™¤çš„æ–‡ä»¶æ— æ³•æ‰¾å› ä¸ä¼šå½±å“ tracked çš„æ–‡ä»¶çš„æ”¹åŠ¨ï¼Œåªä¼šåˆ é™¤ untracked çš„æ–‡ä»¶ git clean \u003cfile-name\u003e -f ","date":"2021-12-10","objectID":"/gitlab/:55:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¼ºåˆ¶åˆ é™¤ untracked çš„ç›®å½• å¯ä»¥ç”¨æ¥åˆ é™¤æ–°å»ºçš„ç›®å½•ï¼Œæ³¨æ„:è¿™ä¸ªå‘½ä»¤ä¹Ÿå¯ä»¥ç”¨æ¥åˆ é™¤ untracked çš„æ–‡ä»¶ã€‚è¯¦æƒ…è§ä¸Šä¸€æ¡ git clean \u003cdirectory-name\u003e -df ","date":"2021-12-10","objectID":"/gitlab/:56:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºç®€åŒ–çš„ commit å†å² git log --pretty=oneline --graph --decorate --all ","date":"2021-12-10","objectID":"/gitlab/:57:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŠŠæŸä¸€ä¸ªåˆ†æ”¯å¯¼å‡ºæˆä¸€ä¸ªæ–‡ä»¶ git bundle create \u003cfile\u003e \u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:58:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä»åŒ…ä¸­å¯¼å…¥åˆ†æ”¯ æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œåˆ†æ”¯å†…å®¹å°±æ˜¯ä¸Šé¢ git bundle create å‘½ä»¤å¯¼å‡ºçš„å†…å®¹ git clone repo.bundle \u003crepo-dir\u003e -b \u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:59:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ‰§è¡Œ rebase ä¹‹å‰è‡ªåŠ¨ stash git rebase --autostash ","date":"2021-12-10","objectID":"/gitlab/:60:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä»è¿œç¨‹ä»“åº“æ ¹æ® IDï¼Œæ‹‰ä¸‹æŸä¸€çŠ¶æ€ï¼Œåˆ°æœ¬åœ°åˆ†æ”¯ git fetch origin pull/\u003cid\u003e/head:\u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:61:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"è¯¦ç»†å±•ç¤ºä¸€è¡Œä¸­çš„ä¿®æ”¹ git diff --word-diff ","date":"2021-12-10","objectID":"/gitlab/:62:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ¸…é™¤ gitignore æ–‡ä»¶ä¸­è®°å½•çš„æ–‡ä»¶ git clean -X -f ","date":"2021-12-10","objectID":"/gitlab/:63:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºæ‰€æœ‰ alias å’Œ configs æ³¨æ„ï¼š config åˆ†ä¸ºï¼šå½“å‰ç›®å½•ï¼ˆlocalï¼‰å’Œå…¨å±€ï¼ˆgolbalï¼‰çš„ configï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•çš„ config git config --local --list (å½“å‰ç›®å½•) git config --global --list (å…¨å±€) ","date":"2021-12-10","objectID":"/gitlab/:64:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºå¿½ç•¥çš„æ–‡ä»¶ git status --ignored ","date":"2021-12-10","objectID":"/gitlab/:65:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"commit å†å²ä¸­æ˜¾ç¤º Branch1 æœ‰çš„ï¼Œä½†æ˜¯ Branch2 æ²¡æœ‰ commit git log Branch1 ^Branch2 ","date":"2021-12-10","objectID":"/gitlab/:66:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åœ¨ commit log ä¸­æ˜¾ç¤º GPG ç­¾å git log --show-signature ","date":"2021-12-10","objectID":"/gitlab/:67:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åˆ é™¤å…¨å±€è®¾ç½® git config --global --unset \u003centry-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:68:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ä¸Šï¼ŒåŒæ—¶è¿™ä¸ªåˆ†æ”¯æ²¡æœ‰ä»»ä½• commit ç›¸å½“äºä¿å­˜ä¿®æ”¹ï¼Œä½†æ˜¯é‡å†™ commit å†å² git checkout --orphan \u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:69:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å±•ç¤ºä»»æ„åˆ†æ”¯æŸä¸€æ–‡ä»¶çš„å†…å®¹ git show \u003cbranch-name\u003e:\u003cfile-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:70:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"clone ä¸‹æ¥æŒ‡å®šçš„å•ä¸€åˆ†æ”¯ git clone -b \u003cbranch-name\u003e --single-branch https://github.com/user/repo.git ","date":"2021-12-10","objectID":"/gitlab/:71:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"clone æœ€æ–°ä¸€æ¬¡æäº¤ åªä¼š clone æœ€è¿‘ä¸€æ¬¡æäº¤ï¼Œå°†å‡å°‘ clone æ—¶é—´ git clone --depth=1 https://github.com/user/repo.git ","date":"2021-12-10","objectID":"/gitlab/:72:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¿½ç•¥æŸä¸ªæ–‡ä»¶çš„æ”¹åŠ¨ å…³é—­ track æŒ‡å®šæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œä¹Ÿå°±æ˜¯ Git å°†ä¸ä¼šåœ¨è®°å½•è¿™ä¸ªæ–‡ä»¶çš„æ”¹åŠ¨ git update-index --assume-unchanged path/to/file æ¢å¤ track æŒ‡å®šæ–‡ä»¶çš„æ”¹åŠ¨ git update-index --no-assume-unchanged path/to/file ","date":"2021-12-10","objectID":"/gitlab/:73:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¿½ç•¥æ–‡ä»¶çš„æƒé™å˜åŒ– ä¸å†å°†æ–‡ä»¶çš„æƒé™å˜åŒ–è§†ä½œæ”¹åŠ¨ git config core.fileMode false ","date":"2021-12-10","objectID":"/gitlab/:74:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä»¥æœ€åæäº¤çš„é¡ºåºåˆ—å‡ºæ‰€æœ‰ Git åˆ†æ”¯ æœ€æ–°çš„æ”¾åœ¨æœ€ä¸Šé¢ git for-each-ref --sort=-committerdate --format='%(refname:short)' refs/heads/ ","date":"2021-12-10","objectID":"/gitlab/:75:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"åœ¨ commit log ä¸­æŸ¥æ‰¾ç›¸å…³å†…å®¹ é€šè¿‡ grep æŸ¥æ‰¾ï¼Œgiven-textï¼šæ‰€éœ€è¦æŸ¥æ‰¾çš„å­—æ®µ git log --all --grep='\u003cgiven-text\u003e' ","date":"2021-12-10","objectID":"/gitlab/:76:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"æŠŠæš‚å­˜åŒºçš„æŒ‡å®š file æ”¾åˆ°å·¥ä½œåŒºä¸­ ä¸æ·»åŠ å‚æ•°ï¼Œé»˜è®¤æ˜¯ -mixed git reset \u003cfile-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:77:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"å¼ºåˆ¶æ¨é€ git push -f \u003cremote-name\u003e \u003cbranch-name\u003e ","date":"2021-12-10","objectID":"/gitlab/:78:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"git é…ç½® http å’Œ socks ä»£ç† git config --global https.proxy 'http://127.0.0.1:8001' # é€‚ç”¨äº privoxy å°† socks åè®®è½¬ä¸º http åè®®çš„ http ç«¯å£ git config --global http.proxy 'http://127.0.0.1:8001' git config --global socks.proxy \"127.0.0.1:1080\" ","date":"2021-12-10","objectID":"/gitlab/:79:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"git é…ç½® ssh ä»£ç† $ cat ~/.ssh/config Host gitlab.com ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p # ç›´æ¥ä½¿ç”¨ shadowsocks æä¾›çš„ socks5 ä»£ç†ç«¯å£ Host github.com ProxyCommand nc -X 5 -x 127.0.0.1:1080 %h %p ","date":"2021-12-10","objectID":"/gitlab/:80:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"è„‘å›¾ ","date":"2021-12-10","objectID":"/gitlab/:81:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"ä¼˜é›…çš„Commitä¿¡æ¯ ä½¿ç”¨Angularå›¢é˜Ÿæäº¤è§„èŒƒ ä¸»è¦æœ‰ä»¥ä¸‹ç»„æˆ æ ‡é¢˜è¡Œ: å¿…å¡«, æè¿°ä¸»è¦ä¿®æ”¹ç±»å‹å’Œå†…å®¹ ä¸»é¢˜å†…å®¹: æè¿°ä¸ºä»€ä¹ˆä¿®æ”¹, åšäº†ä»€ä¹ˆæ ·çš„ä¿®æ”¹, ä»¥åŠå¼€å‘çš„æ€è·¯ç­‰ç­‰ é¡µè„šæ³¨é‡Š: æ”¾ Breaking Changes æˆ– Closed Issues å¸¸ç”¨çš„ä¿®æ”¹é¡¹ type: commit çš„ç±»å‹ feat: æ–°ç‰¹æ€§ fix: ä¿®æ”¹é—®é¢˜ refactor: ä»£ç é‡æ„ docs: æ–‡æ¡£ä¿®æ”¹ style: ä»£ç æ ¼å¼ä¿®æ”¹, æ³¨æ„ä¸æ˜¯ css ä¿®æ”¹ test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹ chore: å…¶ä»–ä¿®æ”¹, æ¯”å¦‚æ„å»ºæµç¨‹, ä¾èµ–ç®¡ç†. scope: commit å½±å“çš„èŒƒå›´, æ¯”å¦‚: route, component, utils, buildâ€¦ subject: commit çš„æ¦‚è¿° body: commit å…·ä½“ä¿®æ”¹å†…å®¹, å¯ä»¥åˆ†ä¸ºå¤šè¡Œ footer: ä¸€äº›å¤‡æ³¨, é€šå¸¸æ˜¯ BREAKING CHANGE æˆ–ä¿®å¤çš„ bug çš„é“¾æ¥. ","date":"2021-12-10","objectID":"/gitlab/:82:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["gitlab"],"content":"commitå·¥å…· å¯ä»¥ä½¿ç”¨cz-cliå·¥å…·ä»£æ›¿ git commit å…¨å±€å®‰è£… npm install -g commitizen cz-conventional-changelog echo '{ \"path\": \"cz-conventional-changelog\" }' \u003e ~/.czrc å…¨å±€å®‰è£…åä½¿ç”¨ git cz ä»£æ›¿ git commitå°±å¯ä»¥äº†,å¦‚ä¸‹å›¾ â¬† è¿”å›é¡¶éƒ¨ ","date":"2021-12-10","objectID":"/gitlab/:83:0","tags":["gitlab"],"title":"gitæŠ€å·§","uri":"/gitlab/"},{"categories":["docker"],"content":"docker imageé•œåƒä¸Šä¼  ç™»å…¥docker hubï¼Œåœ¨https://hub.docker.comä¸Šæ³¨å†Œä½ çš„è´¦å·ã€‚ docker login usernameï¼š#è¾“å…¥ä½ çš„ç”¨æˆ·å passwordï¼š#è¾“å…¥ä½ çš„å¯†ç  ","date":"2021-12-09","objectID":"/dockerimage/:0:0","tags":["docker"],"title":"docker imageé•œåƒä¸Šä¼ ","uri":"/dockerimage/"},{"categories":["docker"],"content":"ä¸Šä¼ é•œåƒ docker tag nginx:hugo sjtfreaks/hogo-nginx:v1 docker push sjtfreaks/hogo-nginx:v1 ","date":"2021-12-09","objectID":"/dockerimage/:1:0","tags":["docker"],"title":"docker imageé•œåƒä¸Šä¼ ","uri":"/dockerimage/"},{"categories":["docker"],"content":"docker è¿›é˜¶ä½¿ç”¨ dockerfileå’Œdocker composeçš„é…ç½® Dockerfile ä½¿ç”¨ Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚ ä¾‹å­ï¼š FROM nginx RUN echo 'è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ„å»ºçš„nginxé•œåƒ' \u003e /usr/share/nginx/html/index.html ä¿å­˜Dockerfileæ–‡ä»¶å¹¶åœ¨æœ¬åœ°è·¯å¾„æ‰§è¡Œ docker build -t nginx:v1-test . docker run -name docker run --name nginx-test -d -p 8080:80 nginx:v1-test æµè§ˆnginxé¡µé¢ç¡®è®¤æ›´æ–°å†…å®¹ curl 127.0.0.1:8080 è¾“å‡ºï¼š è¿™æ˜¯ä¸€ä¸ªæœ¬åœ°æ„å»ºçš„nginxé•œåƒ ","date":"2021-12-09","objectID":"/docker01/:0:0","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"Dockerå‘½ä»¤è¯¦è§£ ","date":"2021-12-09","objectID":"/docker01/:1:0","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"COPY å¤åˆ¶æŒ‡ä»¤ï¼Œä»ä¸Šä¸‹æ–‡ç›®å½•ä¸­å¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¹å™¨é‡ŒæŒ‡å®šè·¯å¾„ã€‚ COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] \u003cæºè·¯å¾„1\u003e... \u003cç›®æ ‡è·¯å¾„\u003e COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] [\"\u003cæºè·¯å¾„1\u003e\",... \"\u003cç›®æ ‡è·¯å¾„\u003e\"] \u003cæºè·¯å¾„\u003eï¼šæºæ–‡ä»¶æˆ–è€…æºç›®å½•ï¼Œè¿™é‡Œå¯ä»¥æ˜¯é€šé…ç¬¦è¡¨è¾¾å¼ï¼Œå…¶é€šé…ç¬¦è§„åˆ™è¦æ»¡è¶³ Go çš„ filepath.Match è§„åˆ™ã€‚ä¾‹å¦‚ï¼š COPY hom* /mydir/ COPY hom?.txt /mydir/ ","date":"2021-12-09","objectID":"/docker01/:1:1","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"FROM FROMï¼šå®šåˆ¶çš„é•œåƒéƒ½æ˜¯åŸºäº FROM çš„é•œåƒ FROM nginx ","date":"2021-12-09","objectID":"/docker01/:1:2","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"RUN RUNï¼šç”¨äºæ‰§è¡Œåé¢è·Ÿç€çš„å‘½ä»¤è¡Œå‘½ä»¤ shellï¼š RUN \u003cå‘½ä»¤è¡Œå‘½ä»¤\u003e # \u003cå‘½ä»¤è¡Œå‘½ä»¤\u003e ç­‰åŒäºï¼Œåœ¨ç»ˆç«¯æ“ä½œçš„ shell å‘½ä»¤ã€‚ execï¼š RUN [\"å¯æ‰§è¡Œæ–‡ä»¶\", \"å‚æ•°1\", \"å‚æ•°2\"] # ä¾‹å¦‚ï¼š # RUN [\"./test.php\", \"dev\", \"offline\"] ç­‰ä»·äº RUN ./test.php dev offline ","date":"2021-12-09","objectID":"/docker01/:1:3","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"ADD ADD æŒ‡ä»¤å’Œ COPY çš„ä½¿ç”¨æ ¼ç±»ä¼¼ ADD çš„ä¼˜ç‚¹ï¼šåœ¨æ‰§è¡Œ \u003cæºæ–‡ä»¶\u003e ä¸º tar å‹ç¼©æ–‡ä»¶çš„è¯ï¼Œå‹ç¼©æ ¼å¼ä¸º gzip, bzip2 ä»¥åŠ xz çš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨å¤åˆ¶å¹¶è§£å‹åˆ° \u003cç›®æ ‡è·¯å¾„\u003eã€‚ ADD çš„ç¼ºç‚¹ï¼šåœ¨ä¸è§£å‹çš„å‰æä¸‹ï¼Œæ— æ³•å¤åˆ¶ tar å‹ç¼©æ–‡ä»¶ã€‚ä¼šä»¤é•œåƒæ„å»ºç¼“å­˜å¤±æ•ˆï¼Œä»è€Œå¯èƒ½ä¼šä»¤é•œåƒæ„å»ºå˜å¾—æ¯”è¾ƒç¼“æ…¢ã€‚å…·ä½“æ˜¯å¦ä½¿ç”¨ï¼Œå¯ä»¥æ ¹æ®æ˜¯å¦éœ€è¦è‡ªåŠ¨è§£å‹æ¥å†³å®šã€‚ ","date":"2021-12-09","objectID":"/docker01/:1:4","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"CMD ç±»ä¼¼äº RUN æŒ‡ä»¤ï¼Œç”¨äºè¿è¡Œç¨‹åºï¼Œä½†äºŒè€…è¿è¡Œçš„æ—¶é—´ç‚¹ä¸åŒ: CMD åœ¨docker run æ—¶è¿è¡Œã€‚ RUN æ˜¯åœ¨ docker buildã€‚ Dockerfile ä¸­å¦‚æœå­˜åœ¨å¤šä¸ª CMD æŒ‡ä»¤ï¼Œä»…æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚ CMD \u003cshell å‘½ä»¤\u003e CMD [\"\u003cå¯æ‰§è¡Œæ–‡ä»¶æˆ–å‘½ä»¤\u003e\",\"\u003cparam1\u003e\",\"\u003cparam2\u003e\",...] CMD [\"\u003cparam1\u003e\",\"\u003cparam2\u003e\",...] # è¯¥å†™æ³•æ˜¯ä¸º ENTRYPOINT æŒ‡ä»¤æŒ‡å®šçš„ç¨‹åºæä¾›é»˜è®¤å‚æ•° ","date":"2021-12-09","objectID":"/docker01/:1:5","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["docker"],"content":"é€šè¿‡dockerfileæ–‡ä»¶å°è£…hugo dokcerfileæ–‡ä»¶ FROM nginx:1.21 COPY public/ /usr/share/nginx/html docker.shæ–‡ä»¶ #/!bin/bash echo \"åˆ é™¤æ—§çš„docker\" docker ps docker stop nginx-hugo docker rm nginx-hugo docker rmi nginx:hugo echo \"ç”Ÿæˆæ–°çš„docker\" hugo -t LoveIt -D docker build -t nginx:hugo . docker run --name nginx-hugo -d -p 8080:80 nginx:hugo echo \"æ˜¾ç¤ºç«¯å£\" netstat -lntp æ‰§è¡Œè„šæœ¬ï¼š sh update.sh ","date":"2021-12-09","objectID":"/docker01/:2:0","tags":["docker","dockerfile","DockerCompose"],"title":"dockerè¿›é˜¶ä½¿ç”¨","uri":"/docker01/"},{"categories":["k8s"],"content":"Kubernetes k8s ç»„ä»¶ ","date":"2021-12-09","objectID":"/kubernetes/:0:0","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰ æ§åˆ¶å¹³é¢çš„ç»„ä»¶å¯¹é›†ç¾¤åšå‡ºå…¨å±€å†³ç­–(æ¯”å¦‚è°ƒåº¦)ï¼Œä»¥åŠæ£€æµ‹å’Œå“åº”é›†ç¾¤äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œå½“ä¸æ»¡è¶³éƒ¨ç½²çš„ replicas å­—æ®µæ—¶ï¼Œå¯åŠ¨æ–°çš„ podï¼‰ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:1:0","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"kube-apiserver API æœåŠ¡å™¨æ˜¯ Kubernetes æ§åˆ¶é¢çš„ç»„ä»¶ï¼Œ è¯¥ç»„ä»¶å…¬å¼€äº† Kubernetes APIã€‚ API æœåŠ¡å™¨æ˜¯ Kubernetes æ§åˆ¶é¢çš„å‰ç«¯ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:1:1","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"etcd etcd æ˜¯å…¼å…·ä¸€è‡´æ€§å’Œé«˜å¯ç”¨æ€§çš„é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥ä½œä¸ºä¿å­˜ Kubernetes æ‰€æœ‰é›†ç¾¤æ•°æ®çš„åå°æ•°æ®åº“ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:1:2","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"kube-scheduler æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œè´Ÿè´£ç›‘è§†æ–°åˆ›å»ºçš„ã€æœªæŒ‡å®šè¿è¡ŒèŠ‚ç‚¹ï¼ˆnodeï¼‰çš„ Podsï¼Œé€‰æ‹©èŠ‚ç‚¹è®© Pod åœ¨ä¸Šé¢è¿è¡Œã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:1:3","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"kube-controller-manager è¿è¡Œæ§åˆ¶å™¨è¿›ç¨‹çš„æ§åˆ¶å¹³é¢ç»„ä»¶ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:1:4","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"cloud-controller-manager äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯æŒ‡åµŒå…¥ç‰¹å®šäº‘çš„æ§åˆ¶é€»è¾‘çš„ æ§åˆ¶å¹³é¢ç»„ä»¶ã€‚ äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä½¿å¾—ä½ å¯ä»¥å°†ä½ çš„é›†ç¾¤è¿æ¥åˆ°äº‘æä¾›å•†çš„ API ä¹‹ä¸Šï¼Œ å¹¶å°†ä¸è¯¥äº‘å¹³å°äº¤äº’çš„ç»„ä»¶åŒä¸ä½ çš„é›†ç¾¤äº¤äº’çš„ç»„ä»¶åˆ†ç¦»å¼€æ¥ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:1:5","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"Node ç»„ä»¶ èŠ‚ç‚¹ç»„ä»¶åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œç»´æŠ¤è¿è¡Œçš„ Pod å¹¶æä¾› Kubernetes è¿è¡Œç¯å¢ƒã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:2:0","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"kubelet ä¸€ä¸ªåœ¨é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ä¸Šè¿è¡Œçš„ä»£ç†ã€‚ å®ƒä¿è¯å®¹å™¨ï¼ˆcontainersï¼‰éƒ½ è¿è¡Œåœ¨ Pod ä¸­ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:2:1","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"kube-proxy kube-proxy æ˜¯é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç½‘ç»œä»£ç†ï¼Œ å®ç° Kubernetes æœåŠ¡ï¼ˆServiceï¼‰ æ¦‚å¿µçš„ä¸€éƒ¨åˆ†ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:2:2","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["k8s"],"content":"å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer Runtimeï¼‰ å®¹å™¨è¿è¡Œç¯å¢ƒæ˜¯è´Ÿè´£è¿è¡Œå®¹å™¨çš„è½¯ä»¶ã€‚ Kubernetes æ”¯æŒå¤šä¸ªå®¹å™¨è¿è¡Œç¯å¢ƒ: Dockerã€ containerdã€CRI-O ä»¥åŠä»»ä½•å®ç° Kubernetes CRI (å®¹å™¨è¿è¡Œç¯å¢ƒæ¥å£)ã€‚ ","date":"2021-12-09","objectID":"/kubernetes/:2:3","tags":["k8s"],"title":"Kubernetes k8s ç»„ä»¶","uri":"/kubernetes/"},{"categories":["æ—¥å¸¸"],"content":"2021å¹´ç¬¬50å‘¨å‘¨è®° è¿™å‘¨å®Œæˆäº†ä»¥ä¸‹ä»»åŠ¡ æ­å»ºhugoåšå®¢ ä½¿ç”¨dockerå°è£…äº†blog æ­å»ºk3sç¯å¢ƒ è®¡åˆ’ï¼š å­¦ä¹ k8s æ€»ç»“ï¼šæ²¡å•¥å¥½æ€»ç»“ï¼Œåˆšå¼€å§‹å†™å‘¨è®°ï¼Œå°±éšä¾¿å†™ä¸€ç‚¹å§ æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢www.jobcher.com ","date":"2021-12-08","objectID":"/20211210/:0:0","tags":["daliy"],"title":"2021å¹´ç¬¬50å‘¨è®°","uri":"/20211210/"},{"categories":["web æœåŠ¡å™¨"],"content":"nginx æ±‡æ€» å„ç±»nginx é—®é¢˜æ±‡æ€» ","date":"2021-12-08","objectID":"/nginx/:0:0","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"å®‰è£…nginx #centos yum install nginx #ubuntu apt install nginx ","date":"2021-12-08","objectID":"/nginx/:1:0","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"httpä»£ç† ","date":"2021-12-08","objectID":"/nginx/:2:0","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"æ­£å‘ä»£ç† server { listen 80; server_name www.nbtyfood.com; location / { proxy_pass http://127.0.0.1:8080; } } ","date":"2021-12-08","objectID":"/nginx/:2:1","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"åå‘ä»£ç† ","date":"2021-12-08","objectID":"/nginx/:2:2","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"è´Ÿè½½å‡è¡¡ upstream mysvr { server 192.168.10.121:3333; server 192.168.10.122:3333; } server { .... location ~*^.+$ { proxy_pass http://mysvr; #è¯·æ±‚è½¬å‘mysvr å®šä¹‰çš„æœåŠ¡å™¨åˆ—è¡¨ } } çƒ­å¤‡ å¦‚æœä½ æœ‰2å°æœåŠ¡å™¨ï¼Œå½“ä¸€å°æœåŠ¡å™¨å‘ç”Ÿäº‹æ•…æ—¶ï¼Œæ‰å¯ç”¨ç¬¬äºŒå°æœåŠ¡å™¨ç»™æä¾›æœåŠ¡ã€‚æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„é¡ºåºï¼šAAAAAAçªç„¶AæŒ‚å•¦ï¼ŒBBBBBBBBBBBBBBâ€¦.. upstream mysvr { server 127.0.0.1:7878; server 192.168.10.121:3333 backup; #çƒ­å¤‡ } è½®è¯¢ nginxé»˜è®¤å°±æ˜¯è½®è¯¢å…¶æƒé‡éƒ½é»˜è®¤ä¸º1ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„é¡ºåºï¼šABABABABABâ€¦. upstream mysvr { server 127.0.0.1:7878; server 192.168.10.121:3333; } åŠ æƒè½®è¯¢ è·Ÿæ®é…ç½®çš„æƒé‡çš„å¤§å°è€Œåˆ†å‘ç»™ä¸åŒæœåŠ¡å™¨ä¸åŒæ•°é‡çš„è¯·æ±‚ã€‚å¦‚æœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä¸º1ã€‚ä¸‹é¢æœåŠ¡å™¨çš„è¯·æ±‚é¡ºåºä¸ºï¼šABBABBABBABBABBâ€¦. upstream mysvr { server 127.0.0.1:7878 weight=1;w server 192.168.10.121:3333 weight=2; } ip_hash nginxä¼šè®©ç›¸åŒçš„å®¢æˆ·ç«¯ipè¯·æ±‚ç›¸åŒçš„æœåŠ¡å™¨ã€‚ upstream mysvr { server 127.0.0.1:7878; server 192.168.10.121:3333; ip_hash; } ","date":"2021-12-08","objectID":"/nginx/:3:0","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"webç¼“å­˜ location /images/ { proxy_cache my_cache; proxy_ignore_headers Cache-Control; proxy_cache_valid any 30m; # ... } ","date":"2021-12-08","objectID":"/nginx/:4:0","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["web æœåŠ¡å™¨"],"content":"é‡å®šå‘ rewrite ^/(.*) http://www.nbtyfood.com/$1 permanent; ","date":"2021-12-08","objectID":"/nginx/:5:0","tags":["nginx","linux"],"title":"nginx æ±‡æ€»","uri":"/nginx/"},{"categories":["åŸºç¡€"],"content":"TCP/IPåè®® ","date":"2021-12-08","objectID":"/tcpip/:0:0","tags":["TCP/IP"],"title":"TCP/IPè¯¦è§£","uri":"/tcpip/"},{"categories":["åŸºç¡€"],"content":"ä»€ä¹ˆæ˜¯TCP/IPåè®® OSIä¸ƒå±‚æ¶æ„ TCP/IPå››å±‚æ¨¡å‹ åè®® åº”ç”¨å±‚ HTTPã€SMTPã€SNMPã€FTPã€Telnetã€SIPã€SSHã€NFS è¡¨ç¤ºå±‚ åº”ç”¨å±‚ XDRã€ASN.1ã€NCPã€TLSã€ASCII ä¼šè¯å±‚ socketsã€SOCKSã€PAP ä¼ è¾“å±‚ ä¼ è¾“å±‚ TCPã€UDPã€RTPã€SCTP ç½‘ç»œå±‚ ç½‘ç»œäº’è¿å±‚ IPã€ICMPã€IPXã€BGPã€OSPFã€RIPã€IGRPã€EIGRP æ•°æ®é“¾è·¯å±‚ ç½‘ç»œè®¿é—®ï¼ˆé“¾æ¥ï¼‰å±‚ ä»¥å¤ªç½‘ã€ä»¤ç‰Œç¯ã€HDLCã€å¸§ä¸­ç»§ã€ISDNã€ATMã€IEEE 802.11 ç‰©ç†å±‚ è°ƒåˆ¶è§£è°ƒå™¨ã€æ— çº¿ç”µã€å…‰çº¤ ","date":"2021-12-08","objectID":"/tcpip/:1:0","tags":["TCP/IP"],"title":"TCP/IPè¯¦è§£","uri":"/tcpip/"},{"categories":["åŸºç¡€"],"content":"æŠ¥æ–‡ç»“æ„ TCPæŠ¥æ–‡æ®µé¦–éƒ¨æ ¼å¼ æºç«¯å£å’Œç›®çš„ç«¯å£ï¼šå„å  2 ä¸ªå­—èŠ‚ï¼Œåˆ†åˆ«å†™å…¥æºç«¯å£å’Œç›®çš„ç«¯å£ã€‚IP åœ°å€ + ç«¯å£å·å°±å¯ä»¥ç¡®å®šä¸€ä¸ªè¿›ç¨‹åœ°å€ åºå·/åºåˆ—å·ï¼ˆSequense Numberï¼ŒSNï¼‰ï¼šåœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­ä¼ é€çš„å­—èŠ‚æµä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½æŒ‰é¡ºåºç¼–å·ã€‚è¯¥å­—æ®µè¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚åˆå§‹åºå·ç§°ä¸º Init Sequense Number, ISNï¼ˆåºå·/åºåˆ—å·è¿™ä¸ªå­—æ®µå¾ˆé‡è¦ï¼Œå¤§å®¶ç•™ä¸ªå°è±¡ï¼Œä¸‹æ–‡ä¼šè¯¦ç»†è®²è§£ï¼‰ ä¾‹å¦‚ï¼Œä¸€æŠ¥æ–‡æ®µçš„åºå·æ˜¯ 101ï¼Œå…±æœ‰ 100 å­—èŠ‚çš„æ•°æ®ã€‚è¿™å°±è¡¨æ˜ï¼šæœ¬æŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯ 101ï¼Œæœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯ 200ã€‚æ˜¾ç„¶ï¼Œä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„æ•°æ®åºå·åº”å½“ä» 201 å¼€å§‹ï¼Œå³ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„åºå·å­—æ®µå€¼åº”ä¸º 201ã€‚ ç¡®è®¤å· ackï¼šæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·ã€‚è‹¥ç¡®è®¤å·ä¸º Nï¼Œåˆ™è¡¨æ˜ï¼šåˆ°åºå· N-1 ä¸ºæ­¢çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ­£ç¡®æ”¶åˆ°ã€‚ æ•°æ®åç§»ï¼ˆé¦–éƒ¨é•¿åº¦ï¼‰ï¼šå®ƒæŒ‡å‡º TCP æŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦» TCP æŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚è¿™ä¸ªå­—æ®µå®é™…ä¸Šæ˜¯æŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨é•¿åº¦ã€‚ ä¿ç•™ï¼šå  6 ä½ï¼Œåº”ç½®ä¸º 0ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ã€‚ ","date":"2021-12-08","objectID":"/tcpip/:1:1","tags":["TCP/IP"],"title":"TCP/IPè¯¦è§£","uri":"/tcpip/"},{"categories":["åŸºç¡€"],"content":"TCPä¸‰æ¬¡æ¡æ‰‹ ","date":"2021-12-08","objectID":"/tcpip/:2:0","tags":["TCP/IP"],"title":"TCP/IPè¯¦è§£","uri":"/tcpip/"},{"categories":["åŸºç¡€"],"content":"TCPå››æ¬¡æŒ¥æ‰‹ ","date":"2021-12-08","objectID":"/tcpip/:3:0","tags":["TCP/IP"],"title":"TCP/IPè¯¦è§£","uri":"/tcpip/"},{"categories":["åŸºç¡€"],"content":"TCP/IPå…¶ä»–é—®é¢˜ TCPä¸UDPçš„åŒºåˆ« ï¼ˆ1ï¼‰TCPï¼šé¢å‘è¿æ¥ï¼Œå¯é çš„ï¼Œé€Ÿåº¦æ…¢ï¼Œæ•ˆç‡ä½ã€‚ ï¼ˆ2ï¼‰UDPï¼šæ— è¿æ¥ã€ä¸å¯é ã€é€Ÿåº¦å¿«ã€æ•ˆç‡é«˜ã€‚ å½“è¿›ç¨‹éœ€è¦ä¼ è¾“å¯é çš„æ•°æ®æ—¶åº”ä½¿ç”¨TCPï¼Œå½“è¿›ç¨‹éœ€è¦é«˜æ•ˆä¼ è¾“æ•°æ®ï¼Œå¯ä»¥å¿½ç•¥å¯é æ€§æ—¶åº”ä½¿ç”¨UDPåè®®ã€‚ ","date":"2021-12-08","objectID":"/tcpip/:4:0","tags":["TCP/IP"],"title":"TCP/IPè¯¦è§£","uri":"/tcpip/"},{"categories":["æ—¥å¸¸"],"content":"å†…ç½‘ç©¿é€ æ–‡ç« ä¸­ä½¿ç”¨çš„å†…ç½‘ç©¿é€å‰ææ˜¯å¿…é¡»å…·æœ‰å…¬ç½‘IPçš„äº‘æœåŠ¡å™¨ï¼Œä¸ç¬¦åˆæ¡ä»¶çš„åŒå­¦å¯ä»¥è·³è¿‡äº†ã€‚ ","date":"2021-12-08","objectID":"/nps/:0:0","tags":["å†…ç½‘ç©¿é€","nps"],"title":"è‡ªå»ºæœåŠ¡å™¨å†…ç½‘ç©¿é€","uri":"/nps/"},{"categories":["æ—¥å¸¸"],"content":"npså†…ç½‘ç©¿é€ npsæ˜¯ä¸€æ¬¾è½»é‡çº§ã€é«˜æ€§èƒ½ã€åŠŸèƒ½å¼ºå¤§çš„å†…ç½‘ç©¿é€ä»£ç†æœåŠ¡å™¨ã€‚ ","date":"2021-12-08","objectID":"/nps/:1:0","tags":["å†…ç½‘ç©¿é€","nps"],"title":"è‡ªå»ºæœåŠ¡å™¨å†…ç½‘ç©¿é€","uri":"/nps/"},{"categories":["æ—¥å¸¸"],"content":"åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šå®‰è£…nps severç«¯ wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_server.tar.gz tar -zxvf linux_amd64_server.tar.gz sudo ./nps install sudo nps start ","date":"2021-12-08","objectID":"/nps/:1:1","tags":["å†…ç½‘ç©¿é€","nps"],"title":"è‡ªå»ºæœåŠ¡å™¨å†…ç½‘ç©¿é€","uri":"/nps/"},{"categories":["æ—¥å¸¸"],"content":"åœ¨æ§åˆ¶ç«¯å®‰è£…npc clientç«¯ wget https://github.com/ehang-io/nps/releases/download/v0.26.10/linux_amd64_client.tar.gz tar -zxvf linux_amd64_client.tar.gz sudo ./npc -server=ip:port -vkey=webç•Œé¢ä¸­æ˜¾ç¤ºçš„å¯†é’¥ sudo npc start npcå®‰è£…å®Œæˆå¯ä»¥è¿›å…¥webé¡µé¢ç©¿é€ç«¯å£å’ŒåŸŸå http://localhost:8080 ","date":"2021-12-08","objectID":"/nps/:1:2","tags":["å†…ç½‘ç©¿é€","nps"],"title":"è‡ªå»ºæœåŠ¡å™¨å†…ç½‘ç©¿é€","uri":"/nps/"},{"categories":["æ—¥å¸¸"],"content":"frpså†…ç½‘ç©¿é€ frps ç›¸å¯¹äºnpsçš„åŠ£åŠ¿æ˜¯æœ‰æ–­æµçš„é£é™© frps ç›¸å¯¹äºnpsçš„ä¼˜åŠ¿æ˜¯å¯¹äºé«˜æµé‡çš„åª’ä½“æœåŠ¡èƒ½å¤Ÿæä¾›æ›´å¯é çš„æ”¯æŒ ","date":"2021-12-08","objectID":"/nps/:2:0","tags":["å†…ç½‘ç©¿é€","nps"],"title":"è‡ªå»ºæœåŠ¡å™¨å†…ç½‘ç©¿é€","uri":"/nps/"},{"categories":["æ—¥å¸¸"],"content":"å®‰è£…frps wget https://code.aliyun.com/MvsCode/frps-onekey/raw/master/install-frps.sh -O ./install-frps.sh chmod 700 ./install-frps.sh ./install-frps.sh install å¸è½½ frpsæœåŠ¡ ./install-frps.sh uninstall æ›´æ–° frpsæœåŠ¡ ./install-frps.sh update Server managementï¼ˆæœåŠ¡ç®¡ç†å™¨ï¼‰ Usage: /etc/init.d/frps {start|stop|restart|status|config|version} ","date":"2021-12-08","objectID":"/nps/:2:1","tags":["å†…ç½‘ç©¿é€","nps"],"title":"è‡ªå»ºæœåŠ¡å™¨å†…ç½‘ç©¿é€","uri":"/nps/"},{"categories":["æ—¥å¸¸"],"content":"æ ‘è“æ´¾å®‰è£…k3s ","date":"2021-12-06","objectID":"/rasberry/:0:0","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"1.å®‰è£…k3s ","date":"2021-12-06","objectID":"/rasberry/:1:0","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"æ§åˆ¶èŠ‚ç‚¹ curl -sfL https://get.k3s.io | sh - cat /var/lib/rancher/k3s/server/node-token ","date":"2021-12-06","objectID":"/rasberry/:1:1","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"å·¥ä½œèŠ‚ç‚¹ curl -sfL https://get.k3s.io | K3S_URL=https://myserver:6443 K3S_TOKEN=mynodetoken sh - æ ‘è“æ´¾ç‰¹åˆ«è¦æ³¨æ„ä¸€ä¸ªå‘ï¼Œå°±æ˜¯å…³äºå†…å­˜çš„é—®é¢˜è¿™ä¸ªä¹‹åå†è®² k3s kubectl get nodes #æ˜¾ç¤ºæ­£ç¡®çš„èŠ‚ç‚¹è¡¨ç¤ºå®Œæˆ ","date":"2021-12-06","objectID":"/rasberry/:1:2","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"å¸è½½ k3s #server èŠ‚ç‚¹ /usr/local/bin/k3s-uninstall.sh #agent èŠ‚ç‚¹ /usr/local/bin/k3s-agent-uninstall.sh ","date":"2021-12-06","objectID":"/rasberry/:1:3","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"2.å®‰è£…dashboard k3sé¢æ¿ ","date":"2021-12-06","objectID":"/rasberry/:2:0","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"éƒ¨ç½² Kubernetes ä»ªè¡¨ç›˜ GITHUB_URL=https://github.com/kubernetes/dashboard/releases VERSION_KUBE_DASHBOARD=$(curl -w '%{url_effective}' -I -L -s -S ${GITHUB_URL}/latest -o /dev/null | sed -e 's|.*/||') sudo k3s kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/${VERSION_KUBE_DASHBOARD}/aio/deploy/recommended.yaml ","date":"2021-12-06","objectID":"/rasberry/:2:1","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"ä»ªè¡¨ç›˜ RBAC é…ç½® åˆ›å»ºä»¥ä¸‹èµ„æºæ¸…å•æ–‡ä»¶ï¼š dashboard.admin-user.yml apiVersion: v1 kind: ServiceAccount metadata: name: admin-user namespace: kubernetes-dashboard dashboard.admin-user-role.yml apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: admin-user roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-admin subjects: - kind: ServiceAccount name: admin-user namespace: kubernetes-dashboard éƒ¨ç½²admin-user é…ç½®ï¼š sudo k3s kubectl create -f dashboard.admin-user.yml -f dashboard.admin-user-role.yml è·å¾— Bearer Token sudo k3s kubectl -n kubernetes-dashboard describe secret admin-user-token | grep '^token' ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ç½‘å€è®¿é—®ä»ªè¡¨ç›˜ï¼š sudo k3s kubectl proxy http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ ","date":"2021-12-06","objectID":"/rasberry/:2:2","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"è¿æ¥lens cat /etc/rancher/k3s/k3s.yaml æ›´æ”¹æœ¬åœ°host ç©¿é€æœåŠ¡å™¨IP local ","date":"2021-12-06","objectID":"/rasberry/:2:3","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"3.å®‰è£… kubeâ€”prometheus ç›‘æ§ ","date":"2021-12-06","objectID":"/rasberry/:3:0","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"ä¸€é”®å®‰è£… wget https://github.com/prometheus-operator/kube-prometheus/archive/refs/tags/v0.9.0.tar.gz tar -zxvf v0.9.0.tar.gz cd kube-prometheus-0.9.0/manifests k3s kubectl apply -f setup/ k3s kubectl get pod -n monitoring k3s kubectl apply -f . ","date":"2021-12-06","objectID":"/rasberry/:3:1","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"ä¸€é”®å¸è½½ cd kube-prometheus/manifests k3s kubectl delete -f . k3s kubectl delete -f setup/ ","date":"2021-12-06","objectID":"/rasberry/:3:2","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"4.å®‰è£… nfså¤–éƒ¨é©±åŠ¨æŒ‚è½½storageclass ","date":"2021-12-06","objectID":"/rasberry/:4:0","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["æ—¥å¸¸"],"content":"5.åˆ›å»ºæœ‰çŠ¶æ€podsï¼ˆmysqlï¼‰ ","date":"2021-12-06","objectID":"/rasberry/:5:0","tags":["æ ‘è“æ´¾","k3s"],"title":"æ ‘è“æ´¾æ­å»ºk3s","uri":"/rasberry/"},{"categories":["Mac"],"content":"brew å®‰è£…é…ç½® ","date":"2021-12-03","objectID":"/brew/:0:0","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"ä¸€.å®‰è£… ","date":"2021-12-03","objectID":"/brew/:1:0","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"1.åœ¨ubuntuä¸Šå®‰è£… brew /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\" ","date":"2021-12-03","objectID":"/brew/:1:1","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"2.åœ¨centosä¸Šå®‰è£… brew /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\" ","date":"2021-12-03","objectID":"/brew/:1:2","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"3.åœ¨MacOSä¸Šå®‰è£… brew /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\" ","date":"2021-12-03","objectID":"/brew/:1:3","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"äºŒã€ä½¿ç”¨ ","date":"2021-12-03","objectID":"/brew/:2:0","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"1.å®‰è£… wget brew install wget Homebrew ä¼šå°†è½¯ä»¶åŒ…å®‰è£…åˆ°ç‹¬ç«‹ç›®å½•ï¼Œå¹¶å°†å…¶æ–‡ä»¶è½¯é“¾æ¥è‡³ /usr/local $ cd /usr/local $ find Cellar Cellar/wget/1.16.1 Cellar/wget/1.16.1/bin/wget Cellar/wget/1.16.1/share/man/man1/wget.1 $ ls -l bin bin/wget -\u003e ../Cellar/wget/1.16.1/bin/wget ","date":"2021-12-03","objectID":"/brew/:2:1","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"2.åˆ›å»ºä½ è‡ªå·±çš„ Homebrew åŒ… $ brew create https://foo.com/bar-1.0.tgz Created /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core/Formula/bar.rb ","date":"2021-12-03","objectID":"/brew/:2:2","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["Mac"],"content":"3.æ’¤é”€ä½ çš„å˜æ›´æˆ–ä¸ä¸Šæ¸¸æ›´æ–°åˆå¹¶ $ brew edit wget # ä½¿ç”¨ $EDITOR ç¼–è¾‘! ","date":"2021-12-03","objectID":"/brew/:2:3","tags":["brew"],"title":"brew å®‰è£…é…ç½®","uri":"/brew/"},{"categories":["gitlab"],"content":"gitlab CI/CD çš„ä½¿ç”¨ æˆ‘å°†ä½¿ç”¨gitlabçš„æµæ°´çº¿è‡ªåŠ¨å®ç°hugo blog æ–‡ç« çš„è‡ªåŠ¨å‘å¸ƒã€‚ ","date":"2021-12-03","objectID":"/gitlab-cicd/:0:0","tags":["gitlab"],"title":"gitlab CI/CD çš„ä½¿ç”¨","uri":"/gitlab-cicd/"},{"categories":["gitlab"],"content":"ä¸€ã€åŸºç¡€çŸ¥è¯† ","date":"2021-12-03","objectID":"/gitlab-cicd/:1:0","tags":["gitlab"],"title":"gitlab CI/CD çš„ä½¿ç”¨","uri":"/gitlab-cicd/"},{"categories":["gitlab"],"content":"äºŒã€å®‰è£…è¿‡ç¨‹ ","date":"2021-12-03","objectID":"/gitlab-cicd/:2:0","tags":["gitlab"],"title":"gitlab CI/CD çš„ä½¿ç”¨","uri":"/gitlab-cicd/"},{"categories":["gitlab"],"content":"1.å®‰è£…gitlab runner é¦–å…ˆéœ€è¦å®‰è£… gitlab runner è¿›å…¥æœåŠ¡å™¨A å®‰è£…æ–¹æ³•ï¼š å®¹å™¨éƒ¨ç½² æ‰‹åŠ¨äºŒè¿›åˆ¶æ–‡ä»¶éƒ¨ç½² é€šè¿‡rpm/debåŒ…éƒ¨ç½² dockeræ–¹å¼å®‰è£… å®‰è£…æ–‡æ¡£ï¼šhttps://docs.gitlab.com/runneâ€¦ docker run -dit \\ --name gitlab-runner \\ --restart always \\ -v /srv/gitlab-runner/config:/etc/gitlab-runner \\ -v /var/run/docker.sock:/var/run/docker.sock \\ gitlab/gitlab-runner 1.1 è®¾ç½®ä¿¡æ¯ docker exec -it gitlab-runner gitlab-runner register édockeræ–¹å¼å®‰è£… 2.1 å®‰è£…GitLab Runner å®‰è£…ç¯å¢ƒï¼šLinux å…¶ä»–ç¯å¢ƒå‚è€ƒï¼šhttps://docs.gitlab.com/runneâ€¦ ä¸‹è½½ curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64 æ·»åŠ æƒé™ chmod +x /usr/local/bin/gitlab-runner æ–°å»ºgitlab-runnerç”¨æˆ· sudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash å®‰è£… å®‰è£…æ—¶éœ€è¦æŒ‡å®šæˆ‘ä»¬ä¸Šé¢æ–°å»ºçš„ç”¨æˆ· gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner å¯åŠ¨ gitlab-runner start # Download the binary for your system sudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64 # Give it permissions to execute sudo chmod +x /usr/local/bin/gitlab-runner # Create a GitLab CI user sudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash # Install and run as service sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner sudo gitlab-runner start ","date":"2021-12-03","objectID":"/gitlab-cicd/:2:1","tags":["gitlab"],"title":"gitlab CI/CD çš„ä½¿ç”¨","uri":"/gitlab-cicd/"},{"categories":["gitlab"],"content":"2.é…ç½® docker shellé“¾æ¥ ssh-keygen -t rsa cd .ssh/ cat id_rsa.pub \u003e\u003eauthorized_keys docker cp id_rsa gitlab-runner:/root docker exec -it gitlab-runner /bin/bash chmod 600 /root/id_rsa vim /etc/systemd/system/gitlab-runner.service \"--syslog\" \"--user\" \"root\" #ä¿®æ”¹ä¸ºroot wqä¿å­˜é€€å‡º systemctl daemon-reload systemctl restart gitlab-runner ","date":"2021-12-03","objectID":"/gitlab-cicd/:2:2","tags":["gitlab"],"title":"gitlab CI/CD çš„ä½¿ç”¨","uri":"/gitlab-cicd/"},{"categories":["gitlab"],"content":"3.é…ç½®.gitlab-ci.ymlæ–‡ä»¶ vim .gitlab-ci.yml stages: - build - test - deploy build-job: stage: build script: - echo \"ä¸Šä¼ ä»£ç \" - echo \"ä¸Šä¼ å®Œæˆ.\" unit-test-job: stage: test script: - echo - sleep 60 - echo \"Code coverage is 90%\" lint-test-job: stage: test script: - echo \"Linting code... This will take about 10 seconds.\" - sleep 10 - echo \"No lint issues found.\" deploy-job: stage: deploy script: - echo \"Deploying application...\" - echo \"Application successfully deployed.\" ","date":"2021-12-03","objectID":"/gitlab-cicd/:2:3","tags":["gitlab"],"title":"gitlab CI/CD çš„ä½¿ç”¨","uri":"/gitlab-cicd/"},{"categories":["gitlab"],"content":"Markdownæ•™ç¨‹ å‚è€ƒï¼šhttps://www.runoob.com/markdown ","date":"2021-12-03","objectID":"/markdown/:0:0","tags":["Markdown"],"title":"Markdownæ•™ç¨‹","uri":"/markdown/"},{"categories":["hugo"],"content":"hugoå‘½ä»¤å¤§å…¨ ","date":"2021-12-01","objectID":"/first/:0:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"å®‰è£…hugo ","date":"2021-12-01","objectID":"/first/:1:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"äºŒè¿›åˆ¶å®‰è£… brew install hugo ","date":"2021-12-01","objectID":"/first/:1:1","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"æºç å®‰è£… export GOPATH=$HOME/go go get -v github.com/spf13/hugo go get -u -v github.com/spf13/hugo #æ›´æ–°ä¾èµ–åº“ ","date":"2021-12-01","objectID":"/first/:1:2","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"ç”Ÿæˆç«™ç‚¹ hugo new site /opt/blog cd /opt/blog ","date":"2021-12-01","objectID":"/first/:2:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"åˆ›å»ºæ–‡ç«  hugo new about.md vim about.md hugo new post/first.md ","date":"2021-12-01","objectID":"/first/:3:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"å®‰è£…çš®è‚¤ cd /opt/blog/themes git clone https://github.com/dillonzq/LoveIt.git ","date":"2021-12-01","objectID":"/first/:4:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"è¿è¡Œhugo hugo server -t LoveIt -D ","date":"2021-12-01","objectID":"/first/:5:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"éƒ¨ç½² ä½ è¦éƒ¨ç½²åœ¨github Pageä¸Š hugo --theme=hyde --baseUrl=\"http://coderzh.github.io/\" cd public $ git init $ git remote add origin https://github.com/coderzh/coderzh.github.io.git $ git add -A $ git commit -m \"first commit\" $ git push -u origin master ","date":"2021-12-01","objectID":"/first/:6:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"hugo æ·»åŠ æœç´¢æ’ä»¶ [outputs] home = [\"HTML\", \"RSS\", \"JSON\"] ","date":"2021-12-01","objectID":"/first/:7:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"æœç´¢é…ç½® [params.search] enable = true # æœç´¢å¼•æ“çš„ç±»å‹ (\"lunr\", \"algolia\") type = \"lunr\" # æ–‡ç« å†…å®¹æœ€é•¿ç´¢å¼•é•¿åº¦ contentLength = 4000 # æœç´¢æ¡†çš„å ä½æç¤ºè¯­ placeholder = \"\" # LoveIt æ–°å¢ | 0.2.1 æœ€å¤§ç»“æœæ•°ç›® maxResultLength = 10 # LoveIt æ–°å¢ | 0.2.3 ç»“æœå†…å®¹ç‰‡æ®µé•¿åº¦ snippetLength = 50 # LoveIt æ–°å¢ | 0.2.1 æœç´¢ç»“æœä¸­é«˜äº®éƒ¨åˆ†çš„ HTML æ ‡ç­¾ highlightTag = \"em\" # LoveIt æ–°å¢ | 0.2.4 æ˜¯å¦åœ¨æœç´¢ç´¢å¼•ä¸­ä½¿ç”¨åŸºäº baseURL çš„ç»å¯¹è·¯å¾„ absoluteURL = false [params.search.algolia] index = \"\" appID = \"\" searchKey = \"\" ","date":"2021-12-01","objectID":"/first/:7:1","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["hugo"],"content":"å¸¸ç”¨å‘½ä»¤ nohup hugo server -e production -t LoveIt -D \u0026 ","date":"2021-12-01","objectID":"/first/:8:0","tags":["hugo"],"title":"hugo å‘½ä»¤å¤§å…¨","uri":"/first/"},{"categories":["åŸºç¡€"],"content":"è¿ç»´å›¾è°± ","date":"2021-12-01","objectID":"/yunwei/:0:0","tags":["è¿ç»´"],"title":"è¿ç»´çŸ¥è¯†å›¾è°±","uri":"/yunwei/"},{"categories":["åŸºç¡€"],"content":"äº‘åŸç”Ÿå¹³å°åŸºç¡€ Dockerã€Docker Composeï¼šå®¹å™¨åŒ–æŠ€æœ¯ Kubernetesï¼šå¤§è§„æ¨¡å®¹å™¨ç¼–æ’ Helmï¼šäº‘åŸç”Ÿåº”ç”¨å•†åº— Rancherï¼š æ˜“ç”¨çš„å®¹å™¨ç®¡ç†å¹³å° KubeSphereï¼šä¸€ç«™å¼å®¹å™¨äº‘å¹³å° OpenTracingï¼šäº‘åŸç”Ÿé“¾è·¯è¿½è¸ªæ ‡å‡† Jaegerï¼šäº‘åŸç”Ÿé“¾è·¯è¿½è¸ªå®ç°äº§å“ Istioï¼šServiceMeshä¸‹çš„æœåŠ¡æµé‡æ²»ç† Jenkinsã€JenkinsXã€Jenkins-BlueOceanï¼šè€ç‰Œçš„CI/CDå¹³å° Gtilab/hub-CICDï¼šGitlab/hubè‡ªå¸¦çš„CICD Argoï¼škuberneteså£°æ˜å¼æŒç»­é›†æˆ Nexusï¼šMavenç§åº“ Harborï¼šDockerç§åº“ Prometheus+Granfanaï¼šç›‘æ§ä¸å¯è§†åŒ–å¹³å° ElasticSearch+Fluentd+Kibanaï¼šæ—¥å¿—ä¸å¯è§†åŒ–æ–¹æ¡ˆ Serverlessï¼šæ— æœåŠ¡å™¨ä¸Šäº‘æ–¹æ¡ˆï¼ˆä¸ç”¨å»ç®¡æœåŠ¡å™¨ï¼Œä¸æ˜¯ä¸éœ€è¦æœåŠ¡å™¨ï¼‰ SpringCloud Kubernetesï¼šå¾®æœåŠ¡ä¸Šäº‘æ–¹æ¡ˆ ç†Ÿç»ƒæŒæ¡dockerå’Œk8sæŠ€æœ¯ devopsæŒæ¡jenkinså’Œgitlab ","date":"2021-12-01","objectID":"/yunwei/:1:0","tags":["è¿ç»´"],"title":"è¿ç»´çŸ¥è¯†å›¾è°±","uri":"/yunwei/"},{"categories":["åŸºç¡€"],"content":"åº”ç”¨12è¦ç´  åœ¨ç°ä»£ï¼Œè½¯ä»¶é€šå¸¸ä½œä¸ºæœåŠ¡äº¤ä»˜ï¼šç§°ä¸ºWeb åº”ç”¨ç¨‹åºæˆ–è½¯ä»¶å³æœåŠ¡ã€‚åäºŒå› ç´ åº”ç”¨ç¨‹åºæ˜¯ä¸€ç§æ„å»ºè½¯ä»¶å³æœåŠ¡åº”ç”¨ç¨‹åºçš„æ–¹æ³•ï¼Œå®ƒï¼š ä½¿ç”¨å£°æ˜æ ¼å¼è¿›è¡Œè®¾ç½®è‡ªåŠ¨åŒ–ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æ–°å¼€å‘äººå‘˜åŠ å…¥é¡¹ç›®çš„æ—¶é—´å’Œæˆæœ¬ï¼› ä¸åº•å±‚æ“ä½œç³»ç»Ÿæœ‰ä¸€ä¸ªå¹²å‡€çš„åˆåŒï¼Œåœ¨æ‰§è¡Œç¯å¢ƒä¹‹é—´æä¾›æœ€å¤§çš„å¯ç§»æ¤æ€§ï¼› é€‚åˆéƒ¨ç½²åœ¨ç°ä»£äº‘å¹³å°ä¸Šï¼Œæ— éœ€æœåŠ¡å™¨å’Œç³»ç»Ÿç®¡ç†ï¼› æœ€å¤§é™åº¦åœ°å‡å°‘å¼€å‘å’Œç”Ÿäº§ä¹‹é—´çš„å·®å¼‚ï¼Œå®ç°æŒç»­éƒ¨ç½²ä»¥è·å¾—æœ€å¤§çš„æ•æ·æ€§ï¼› å¹¶ä¸”å¯ä»¥åœ¨ä¸å¯¹å·¥å…·ã€æ¶æ„æˆ–å¼€å‘å®è·µè¿›è¡Œé‡å¤§æ›´æ”¹çš„æƒ…å†µä¸‹è¿›è¡Œæ‰©å±•ã€‚ åç§° è‹±æ–‡ æè¿° åŸºå‡†ä»£ç  codebase ä¸€ä»½åŸºå‡†ä»£ç ï¼Œå¤šä»½éƒ¨ç½² ä¾èµ– Dependencies æ˜¾ç¤ºå£°æ˜ä¾èµ–å…³ç³» é…ç½® config åœ¨ç¯å¢ƒä¸­å­˜å‚¨é…ç½® åç«¯æœåŠ¡ backing services æŠŠåç«¯æœåŠ¡å½“åšé™„åŠ èµ„æº æ„å»ºï¼Œå‘å¸ƒï¼Œè¿è¡Œ buildï¼Œreleaseï¼Œrun ä¸¥æ ¼åˆ†ç¦»æ„å»ºå’Œè¿è¡Œ è¿›ç¨‹ Processes ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ— çŠ¶æ€è¿›ç¨‹è¿è¡Œåº”ç”¨ ç«¯å£ç»‘å®š port binding é€šè¿‡ç«¯å£ç»‘å®šæ¥æä¾›æœåŠ¡ å¹¶å‘ concurrency é€šè¿‡è¿›ç¨‹æ¨¡å‹è¿›è¡Œæ‰©å±• æ˜“å¤„ç† disposability å¿«é€Ÿå¯åŠ¨å’Œä¼˜é›…ç»ˆæ­¢å¯æœ€å¤§åŒ–å¥å£®æ€§ å¼€å‘ç¯å¢ƒå’Œçº¿ä¸Šç¯å¢ƒç­‰ä»· Dev/prod parity å°½å¯èƒ½ä¿æŒå¼€å‘ã€é¢„å‘å¸ƒã€çº¿ä¸Šç¯å¢ƒ æ—¥å¿— log æŠŠæ—¥å¿—å½“åšäº‹ä»¶æµ ç®¡ç†è¿›ç¨‹ admin processes åå°ç®¡ç†ä»»åŠ¡å½“åšä¸€æ¬¡æ€§è¿›ç¨‹å¤„ç† ","date":"2021-12-01","objectID":"/yunwei/:2:0","tags":["è¿ç»´"],"title":"è¿ç»´çŸ¥è¯†å›¾è°±","uri":"/yunwei/"},{"categories":null,"content":"å…³äº åå°å°±æ˜¯èŠ±å¼curdå·¥ç¨‹å¸ˆ å‰ç«¯å°±æ˜¯æŠ å›¾å·¥ç¨‹å¸ˆ å¤§æ•°æ®å°±æ˜¯sqlå·¥ç¨‹å¸ˆ ç®—æ³•å°±æ˜¯è°ƒå‚å·¥ç¨‹å¸ˆ ä¸­é—´ä»¶å°±æ˜¯å®¢æœçƒ­çº¿æ¥çº¿å‘˜ ","date":"2021-01-01","objectID":"/about/:0:0","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"åªæœ‰è¿ç»´æ‰èƒ½æ‹¯æ•‘ä¸–ç•Œï¼ ","date":"2021-01-01","objectID":"/about/:0:1","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"å…´è¶£çˆ±å¥½ï¼š æ¸¸æ³³ï¼Œå¹²é¥­ ","date":"2021-01-01","objectID":"/about/:1:0","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"æœ€è¿‘çœ‹çš„ä¹¦ï¼š ã€Šè’é‡æ±‚ç”Ÿã€‹ ","date":"2021-01-01","objectID":"/about/:2:0","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"},{"categories":null,"content":"ç ´çª‘èµ‹ å¤©æœ‰ä¸æµ‹é£äº‘ï¼Œäººæœ‰æ—¦å¤•ç¥¸ç¦ã€‚èœˆèš£ç™¾è¶³ï¼Œè¡Œä¸åŠè›‡ï¼›é›„é¸¡ä¸¤ç¿¼ï¼Œé£ä¸è¿‡é¸¦ã€‚é©¬æœ‰åƒé‡Œä¹‹ç¨‹ï¼Œæ— éª‘ä¸èƒ½è‡ªå¾€ï¼›äººæœ‰å†²å¤©ä¹‹å¿—ï¼Œéè¿ä¸èƒ½è‡ªé€šã€‚ ç›–é—»ï¼šäººç”Ÿåœ¨ä¸–ï¼Œå¯Œè´µä¸èƒ½æ·«ï¼Œè´«è´±ä¸èƒ½ç§»ã€‚æ–‡ç« ç›–ä¸–ï¼Œå­”å­å„äºé™ˆé‚¦ï¼›æ­¦ç•¥è¶…ç¾¤ï¼Œå¤ªå…¬é’“äºæ¸­æ°´ã€‚é¢œæ¸Šå‘½çŸ­ï¼Œæ®Šéå‡¶æ¶ä¹‹å¾’ï¼›ç›—è·–å¹´é•¿ï¼Œå²‚æ˜¯å–„è‰¯ä¹‹è¾ˆã€‚å°§å¸æ˜åœ£ï¼Œå´ç”Ÿä¸è‚–ä¹‹å„¿ï¼›ç½åŸæ„šé¡½ï¼Œåç”Ÿå¤§å­ä¹‹å­ã€‚å¼ è‰¯åŸæ˜¯å¸ƒè¡£ï¼Œè§ä½•ç§°è°“å¿åã€‚æ™å­èº«æ— äº”å°ºï¼Œå°ä½œé½å›½å®°ç›¸ï¼›å­”æ˜å§å±…è‰åºï¼Œèƒ½ä½œèœ€æ±‰å†›å¸ˆã€‚æ¥šéœ¸è™½é›„ï¼Œè´¥äºä¹Œæ±Ÿè‡ªåˆï¼›æ±‰ç‹è™½å¼±ï¼Œç«Ÿæœ‰ä¸‡é‡Œæ±Ÿå±±ã€‚æå¹¿æœ‰å°„è™ä¹‹å¨ï¼Œåˆ°è€æ— å°ï¼›å†¯å”æœ‰ä¹˜é¾™ä¹‹æ‰ï¼Œä¸€ç”Ÿä¸é‡ã€‚éŸ©ä¿¡æœªé‡ä¹‹æ—¶ï¼Œæ— ä¸€æ—¥ä¸‰é¤ï¼ŒåŠè‡³é‡è¡Œï¼Œè…°æ‚¬ä¸‰å°ºç‰å°ï¼Œä¸€æ—¦æ—¶è¡°ï¼Œæ­»äºé˜´äººä¹‹æ‰‹ã€‚ æœ‰å…ˆè´«è€Œåå¯Œï¼Œæœ‰è€å£®è€Œå°‘è¡°ã€‚æ»¡è…¹æ–‡ç« ï¼Œç™½å‘ç«Ÿç„¶ä¸ä¸­ï¼›æ‰ç–å­¦æµ…ï¼Œå°‘å¹´åŠç¬¬ç™»ç§‘ã€‚æ·±é™¢å®«å¨¥ï¼Œè¿é€€åä¸ºå¦“å¦¾ï¼›é£æµå¦“å¥³ï¼Œæ—¶æ¥é…ä½œå¤«äººã€‚ é’æ˜¥ç¾å¥³ï¼Œå´æ‹›æ„šè ¢ä¹‹å¤«ï¼›ä¿Šç§€éƒå›ï¼Œåé…ç²—ä¸‘ä¹‹å¦‡ã€‚è›Ÿé¾™æœªé‡ï¼Œæ½œæ°´äºé±¼é³–ä¹‹é—´ï¼›å›å­å¤±æ—¶ï¼Œæ‹±æ‰‹äºå°äººä¹‹ä¸‹ã€‚è¡£æœè™½ç ´ï¼Œå¸¸å­˜ä»ªç¤¼ä¹‹å®¹ï¼›é¢å¸¦å¿§æ„ï¼Œæ¯æŠ±æ€€å®‰ä¹‹é‡ã€‚æ—¶é­ä¸é‡ï¼Œåªå®œå®‰è´«å®ˆä»½ï¼›å¿ƒè‹¥ä¸æ¬ºï¼Œå¿…ç„¶æ‰¬çœ‰åæ°”ã€‚åˆè´«å›å­ï¼Œå¤©ç„¶éª¨éª¼ç”Ÿæˆï¼›ä¹å¯Œå°äººï¼Œä¸è„±è´«å¯’è‚Œä½“ã€‚ å¤©ä¸å¾—æ—¶ï¼Œæ—¥æœˆæ— å…‰ï¼›åœ°ä¸å¾—æ—¶ï¼Œè‰æœ¨ä¸ç”Ÿï¼›æ°´ä¸å¾—æ—¶ï¼Œé£æµªä¸å¹³ï¼›äººä¸å¾—æ—¶ï¼Œåˆ©è¿ä¸é€šã€‚æ³¨ç¦æ³¨ç¦„ï¼Œå‘½é‡Œå·²å®‰æ’å®šï¼Œå¯Œè´µè°ä¸æ¬²ï¼Ÿäººè‹¥ä¸ä¾æ ¹åŸºå…«å­—ï¼Œå²‚èƒ½ä¸ºå¿ä¸ºç›¸ï¼Ÿ å¾æ˜”å¯“å±…æ´›é˜³ï¼Œæœæ±‚åƒ§é¤ï¼Œæš®å®¿ç ´çª–ï¼Œæ€è¡£ä¸å¯é®å…¶ä½“ï¼Œæ€é£Ÿä¸å¯æµå…¶é¥¥ï¼Œä¸Šäººæ†ï¼Œä¸‹äººåŒï¼Œäººé“æˆ‘è´±ï¼Œéæˆ‘ä¸å¼ƒä¹Ÿã€‚ä»Šå±…æœå ‚ï¼Œå®˜è‡³æå“ï¼Œä½ç½®ä¸‰å…¬ï¼Œèº«è™½é èº¬äºä¸€äººä¹‹ä¸‹ï¼Œè€Œåˆ—èŒäºåƒä¸‡äººä¹‹ä¸Šï¼Œæœ‰æŒç™¾åƒšä¹‹æ–ï¼Œæœ‰æ–©é„™åä¹‹å‰‘ï¼Œæ€è¡£è€Œæœ‰ç½—é”¦åƒç®±ï¼Œæ€é£Ÿè€Œæœ‰çé¦ç™¾å‘³ï¼Œå‡ºåˆ™å£®å£«æ‰§é­ï¼Œå…¥åˆ™ä½³äººæ§è§ï¼Œä¸Šäººå® ï¼Œä¸‹äººæ‹¥ã€‚äººé“æˆ‘è´µï¼Œéæˆ‘ä¹‹èƒ½ä¹Ÿï¼Œæ­¤ä¹ƒæ—¶ä¹Ÿã€è¿ä¹Ÿã€å‘½ä¹Ÿã€‚ å—Ÿå‘¼ï¼äººç”Ÿåœ¨ä¸–ï¼Œå¯Œè´µä¸å¯å°½ç”¨ï¼Œè´«è´±ä¸å¯è‡ªæ¬ºï¼Œå¬ç”±å¤©åœ°å¾ªç¯ï¼Œå‘¨è€Œå¤å§‹ç„‰ã€‚ ","date":"2021-01-01","objectID":"/about/:3:0","tags":null,"title":"å…³äºæˆ‘","uri":"/about/"}]